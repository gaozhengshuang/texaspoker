syntax = "proto2";
package msg;
import "serialize.proto";
import "define.proto";


// --------------------------------------------------------------------------
/// @brief Client <----> LoginServer
// --------------------------------------------------------------------------
// 账号密码登陆
message C2L_ReqLogin {
    optional string account = 1;
    optional string passwd  = 2;
}

// 微信小游戏登陆
message C2L_ReqLoginWechat {
    optional string openid = 1;
    optional string head = 2;
    optional string nickname = 3;
    optional string invitationcode = 4;
}


// 返回登陆验证结果
message L2C_RetLogin {
    optional int32  result = 1;     // 0失败，1成功
    optional string reason = 2;     // 失败原因
    optional msg.IpHost gatehost = 3;
    optional string verifykey = 5;  // 客户端使用这个key登陆网关
	optional string logintype = 6;
}

// 注册账户--第一步 请求验证码
message C2L_ReqRegistAuthCode {
    optional string phone = 1;
}


// 注册账户--第二步
message C2L_ReqRegistAccount {
    optional string phone = 1;
    optional string passwd = 2;
    optional string authcode = 3;
    optional string invitationcode = 4;
    optional string nickname = 5;
}


// 注册返回
message L2C_RetRegistAccount {
    optional string errcode = 1;
}

// apple账户登录
message C2L_ReqLoginApple {
	optional string openid = 1;
	optional string keyurl = 2;
	optional string signature = 3;
	optional uint64 timestamp = 5;
	optional string salt = 6;
	optional string nickname = 7;
	optional string face = 8;
	optional string bundleid = 9;
}

// google账户登录
message C2L_ReqLoginGoogle {
	optional string openid = 1;
	optional string token = 2;
	optional string nickname = 3;
	optional string face = 4;
	optional string appid = 5;
}

// facebook 账户登录
message C2L_ReqLoginFaceBook {
	optional string openid = 1;
	optional string token = 2;
	optional string nickname = 3;
	optional string face = 4;
	optional string appid = 5;
}

// --------------------------------------------------------------------------
/// @brief Client <----> GateServer
// --------------------------------------------------------------------------
// 客户端请求登陆网关
message C2GW_ReqLogin
{
    optional string account = 1;        // 玩家account
    optional string verifykey = 2;      // login生成的校验key，验证玩家合法性
    optional string token = 3;          // 
    optional string head = 4;           // 
}


// 结果
message GW2C_RetLogin
{
    //optional string account = 1;
    optional string errcode = 1;
}

// 发送玩家个人数据
message GW2C_PushUserInfo {
    optional msg.EntityBase entity  = 1;
    optional msg.UserBase   base    = 2;
    optional msg.ItemBin    item    = 3;
}

// 心跳
message C2GW_ReqHeartBeat {
    optional int64 uid  = 1;
    optional int64 time = 2;
    repeated string test = 3;
    //optional string token = 4;
}

message GW2C_RetHeartBeat {
    optional int64 uid  = 1;
    optional int64 time = 2;
    repeated string test = 3;
}

// 玩家上线
message GW2C_PushUserOnline {
    optional int64 uid = 1;
}

// 玩家下线
message GW2C_PushUserOffline {
    optional int64 uid = 1;
}

