var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(r,s)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(r=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(i){n=[6,i],o=0}finally{a=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},BaseServerValueInfo=function(){function e(e){this.reset(),e&&this.copyValueFrom(e)}return e.prototype.reset=function(){for(var e in this)this[e]instanceof Function==0&&(this[e]=void 0)},e.prototype.copyValueFrom=function(e){if(e)for(var t in e){var n=this[t];if(!(n instanceof Function))if(void 0==e[t])switch(typeof this[t]){case"number":this[t]=0;break;case"string":this[t]=qin.StringConstants.Empty}else this[t]=e[t]}},e.prototype.copyValueFromThis=function(e){if(e)for(var t in this){var n=e[t];n instanceof Function||(this[t]=e[t])}},e}();__reflect(BaseServerValueInfo.prototype,"BaseServerValueInfo");var BaseComponent=function(e){function t(t){var n=e.call(this)||this;return n.addEventListener(eui.UIEvent.COMPLETE,n.onAwake,n),n.addEventListener(eui.UIEvent.ADDED_TO_STAGE,n.onEnable,n),n.skinName=t,t||qin.Console.log("皮肤路径为空！"+egret.getQualifiedClassName(n)),n}return __extends(t,e),t.prototype.init=function(e){this.bindData=e},t.prototype.onAwake=function(e){this.isLoadComplete=!0,this.removeEventListener(eui.UIEvent.COMPLETE,this.onAwake,this)},t.prototype.onEnable=function(e){this.addEventListener(egret.Event.RENDER,this.rendererStart,this),this.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.onDisable,this)},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.RENDER,this.rendererStart,this),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.onDisable,this)},t.prototype.rendererStart=function(e){this.removeEventListener(egret.Event.RENDER,this.rendererStart,this)},t.prototype.destroy=function(){this.onDisable(null),this.removeEventListener(eui.UIEvent.COMPLETE,this.onAwake,this),this.removeEventListener(eui.UIEvent.ADDED_TO_STAGE,this.onEnable,this)},t}(eui.Component);__reflect(BaseComponent.prototype,"BaseComponent");var BaseActivitySubHandler=function(){function e(e){this._list=new Array,this.type=e}return Object.defineProperty(e.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e){qin.ArrayUtil.Clear(this._list);for(var t=!1,n=0,i=this._list;n<i.length;n++){var a=i[n];e.id==a.id&&(t=!0,a.copyValueFrom(e))}0==t&&this._list.push(e)},e.prototype.addSubInfo=function(e,t,n){if(n.id==e.id){var i=new t;return i.id=n.id,i.subId=n.subId,e.subList||(e.subList=new Array),0==ActivityUtil.isExistSubInfo(e,n.subId)&&e.subList.push(i),i}return null},e.prototype.joinActivityResult=function(e,t){},e.prototype.clear=function(){qin.ArrayUtil.Clear(this._list)},e.prototype.getInfo=function(e){if(this.list)for(var t=void 0,n=0;n<this.list.length;n++)if(t=this.list[n],t.id==e)return t;return null},e.prototype.getSubInfo=function(e,t){if(this.list)for(var n=void 0,i=0;i<this.list.length;i++)if(n=this.list[i],n.id==e&&n.subList)for(var a=0,o=n.subList;a<o.length;a++){var r=o[a];if(r.subId==t)return r}return null},e.prototype.refreshActivityInfo=function(e){},e}();__reflect(BaseActivitySubHandler.prototype,"BaseActivitySubHandler");var BaseActivitySubInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e,this.isUnSetedDefnition&&this.trySetDefinition()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subId",{get:function(){return this._subId},set:function(e){this._subId=e,this.isUnSetedDefnition&&this.trySetDefinition()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnSetedDefnition",{get:function(){return this._id>0&&this._subId>0&&!this._definition},enumerable:!0,configurable:!0}),t.prototype.trySetDefinition=function(){},t}(BaseServerValueInfo);__reflect(BaseActivitySubInfo.prototype,"BaseActivitySubInfo",["IHaveDefintionInfo"]);var BaseGuideProcess=function(){function e(){this.comleteEvent=new qin.DelegateDispatcher}return e.prototype.init=function(e,t){this.definition=e,this.parent=t,this.definition||qin.Console.logError("新手引导步骤处理数据配置异常！类："+egret.getQualifiedClassName(this))},e.prototype.complete=function(){this.comleteEvent.dispatch(this)},e}();__reflect(BaseGuideProcess.prototype,"BaseGuideProcess");var BasePanel=function(e){function t(){var t=e.call(this)||this;return t.layer=UILayerType.Module,t.panelAlignType=PanelAlignType.Center_Center,t.offsetH=0,t.offsetV=0,t.isTween=!0,t.isCloseButtonTween=!1,t.isFirstTween=!1,t.isLoadComplete=!1,t.isTweenOver=!1,t.isTweenCloseing=!1,t._isMaskClickClose=!1,t._maskAlpha=.5,t.isIgnoreAdaptation=!1,t.addEventListener(eui.UIEvent.COMPLETE,t.onAwake,t),t.addEventListener(eui.UIEvent.ADDED_TO_STAGE,t.onEnable,t),t.setTouchEnable(!0),t.setTouchChildren(!0),t.width=GameSetting.StageWidth,t}return __extends(t,e),Object.defineProperty(t.prototype,"isMaskClickClose",{set:function(e){this._isMaskClickClose=e,e&&this.setGrayMask(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskAlpha",{set:function(e){this._maskAlpha=e,this.setGrayMask(!0),this.grayMask.alpha=e},enumerable:!0,configurable:!0}),t.prototype.setSkinName=function(e){this.skinName=PathName.SkinsPanelDirectory+e+".exml"},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.onAwake=function(e){this.isLoadComplete=!0,this.isTween&&(this.isTweenOver=!1,this.isFirstTween=!0,this.onTween()),this.tweenGroup?this.tweenGroup.maxWidth=GameSetting.StageWidth:this.maxWidth=GameSetting.StageWidth,this.removeEventListener(eui.UIEvent.COMPLETE,this.onAwake,this)},t.prototype.init=function(e){this.isTween&&this.isLoadComplete&&!this.isFirstTween&&(this.isTweenOver=!1,this.onTween()),e&&e.prevPanelName&&(this.prevPanelName=e.prevPanelName),this.panelData=e,this.isTweenCloseing=!1},t.prototype.onEnable=function(e){if(this.closeButton&&this.isCloseButtonTween){egret.Tween.removeTweens(this.closeButton);var t=egret.Tween.get(this.closeButton),n=this.closeButton.scaleX,i=this.closeButton.scaleY;this.closeButton.scaleX=0,this.closeButton.scaleY=0,t.wait(300).to({scaleX:n,scaleY:i},200)}this.closeButton&&this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnClickHandler,this),this._isMaskClickClose&&(this.grayMask.touchEnabled=!0,this.grayMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnClickHandler,this)),this.addEventListener(egret.Event.RENDER,this.onRender,this),this.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.onDisable,this)},t.prototype.onDisable=function(e){this.prevPanelName=null,this.removeEventListener(eui.UIEvent.COMPLETE,this.onAwake,this),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.onDisable,this),this.closeButton&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnClickHandler,this),this.tweenGroup&&egret.Tween.removeTweens(this.tweenGroup),this.grayMask&&this.grayMask.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.grayMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnClickHandler,this),this.removeEventListener(egret.Event.RENDER,this.onRender,this)},t.prototype.onRender=function(e){this.removeEventListener(egret.Event.RENDER,this.onRender,this)},t.prototype.onTween=function(){this.tweenGroup&&(this.grayMask&&this.grayMask.parent&&(this.grayMask.alpha=this._maskAlpha),egret.Tween.removeTweens(this.tweenGroup),this.tweenGroup.scaleX=.5,this.tweenGroup.scaleY=.5,this.tweenGroup.alpha=1,this.tweenObj=new egret.Tween(this.tweenGroup,null,null),this.tweenObj.to({scaleX:1.03,scaleY:1.03},200).to({scaleX:1,scaleY:1},120,egret.Ease.backIn).wait(120).call(this.onTweenOver,this),this.tweenObj.play())},t.prototype.onTweenOver=function(){this.isFirstTween=!1,this.tweenObj=null,this.isTweenOver=!0},t.prototype.onCloseBtnClickHandler=function(e){e&&e.target instanceof eui.Button&&SoundManager.playEffect(MusicAction.close),this.isTween&&this.tweenGroup?this.isTweenCloseing||(this.onTweenOver(),this.isTweenCloseing=!0,egret.Tween.removeTweens(this.tweenGroup),this.tweenObj=new egret.Tween(this.tweenGroup,{onChange:this.onCloseTweenChange.bind(this)},null),this.tweenObj.to({scaleX:.5,scaleY:.5,alpha:.1},200,egret.Ease.quadInOut).call(this.tweenClose,this),this.tweenObj.play()):this.tweenClose()},t.prototype.onCloseTweenChange=function(){this.grayMask&&this.grayMask.parent&&this.tweenGroup.alpha<this._maskAlpha&&(this.grayMask.alpha=this.tweenGroup.alpha)},t.prototype.tweenClose=function(){this.tweenGroup&&(egret.Tween.removeTweens(this.tweenGroup),this.isTweenCloseing=!1),UIManager.closePanel(this)},t.prototype.setAlignInfo=function(e,t,n){void 0===e&&(e=PanelAlignType.Center_Center),void 0===t&&(t=0),void 0===n&&(n=0),this.panelAlignType=e,this.offsetH=t,this.offsetV=n},t.prototype.setTouchEnable=function(e){this.touchEnabled=e},t.prototype.setTouchChildren=function(e){this.touchChildren=e},t.prototype.setGrayMask=function(e){void 0===e&&(e=!0),this.grayMask?e?this.addChildAt(this.grayMask,0):this.grayMask.parent&&this.grayMask.parent.removeChild(this.grayMask):e&&(this.createGrayMask(),this.addChildAt(this.grayMask,0))},t.prototype.createGrayMask=function(){this.grayMask||(this.grayMask=new eui.Image,this.grayMask.source=SheetSubName.GrayBg,this.grayMask.scale9Grid=new egret.Rectangle(1,1,10,10),this.grayMask.top=0,this.grayMask.bottom=0,this.grayMask.left=0,this.grayMask.right=0)},t.prototype.showPrePanelName=function(){this.prevPanelName&&this.prevPanelName!=UIModuleName.None&&UIManager.showPanel(this.prevPanelName)},t.prototype.destroy=function(){this.onDisable(null),this.removeEventListener(eui.UIEvent.ADDED_TO_STAGE,this.onEnable,this),this.removeEventListener(eui.UIEvent.COMPLETE,this.onAwake,this)},t}(eui.Component);__reflect(BasePanel.prototype,"BasePanel");var BaseDefined=function(){function e(){}return e.prototype.getDefinition=function(e){if(void 0==e)return null;if(null!=this.dataList)for(var t=0;t<this.dataList.length;t++)if(this.dataList[t].id==e)return this.dataList[t];return qin.Console.log("获取配置信息失败！classname："+egret.getQualifiedClassName(this)+" ID:"+e),null},e}();__reflect(BaseDefined.prototype,"BaseDefined");var qin;!function(e){var t=function(){function t(){this._list=new Array}return t.prototype.destroy=function(){this._list=null},t.prototype.clear=function(){this._list.length=0},Object.defineProperty(t.prototype,"count",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),t.prototype.addListener=function(t,n){for(var i=0,a=this._list;i<a.length;i++){var o=a[i];if(o.equals2(t,n))return}this._list.push(new e.Delegate(t,n))},t.prototype.removeListener=function(e,t){for(var n=this._list.length,i=0;n>i;i++)if(this._list[i].equals2(e,t)){this._list.splice(i,1);break}},t.prototype.dispatch=function(e){if(this._list.length>0)for(var t=this._list.concat(),n=0,i=t.length;i>n;n++)t[n].invoke(e)},t}();e.DelegateDispatcher=t,__reflect(t.prototype,"qin.DelegateDispatcher")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){this._keys=[],this._values=[]}return Object.defineProperty(e.prototype,"count",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var n=this._keys.indexOf(e,0);n>=0?this._values[n]=t:(this._keys.push(e),this._values.push(t))},e.prototype.remove=function(e){var t=this._keys.indexOf(e,0);t>=0&&(this._keys.splice(t,1),this._values.splice(t,1))},e.prototype.getKey=function(e){var t=this._values.indexOf(e);return t>=0?this._keys[t]:null},e.prototype.getValue=function(e){var t=this._keys.indexOf(e,0);return-1!=t?this._values[t]:null},e.prototype.containsKey=function(e){return this._keys.indexOf(e)>=0},e.prototype.containsValue=function(e){return this._values.indexOf(e)>=0},e.prototype.getKeys=function(){return this._keys.concat()},e.prototype.getValues=function(){return this._values.concat()},e.prototype.clear=function(){this._keys.length=0,this._values.length=0},e.prototype.foreach=function(e,t){for(var n=0,i=this._keys.length;i>n;n++)e.call(t,this._keys[n],this._values[n])},e.prototype.some=function(e,t){for(var n=0,i=this._keys.length;i>n;n++)if(e.call(t,this._keys[n],this._values[n]))return!0;return!1},e.prototype.every=function(e,t){for(var n=0,i=this._keys.length;i>n;n++)if(!e.call(t,this._keys[n],this._values[n]))return!0;return!1},e}();e.Dictionary=t,__reflect(t.prototype,"qin.Dictionary")}(qin||(qin={}));var BaseAnimation=function(){function e(){}return e.prototype.setTarget=function(e){this.target=e},e.prototype.reset=function(){this.clear()},e.prototype.run=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.reset()},e.prototype.runOver=function(){this.clear()},e.prototype.clear=function(){egret.Tween.removeTweens(this.target)},e}();__reflect(BaseAnimation.prototype,"BaseAnimation");var EnterMttHandler=function(){function e(){}return e.prototype.onEnable=function(){GamblingManager.OnGetRoomInfoEvent.addListener(this.onGetRoomInfoHandler,this),GamblingManager.LeaveRoomEvent.addListener(this.onLeaveRoomHandler,this),GamblingManager.LeaveRoomErrorEvent.addListener(this.onLeaveRoomErrorHandler,this),HundredWarManager.onLeaveEvent.addListener(this.hundredWarLeaveHandler,this)},e.prototype.onDisable=function(){GamblingManager.OnGetRoomInfoEvent.removeListener(this.onGetRoomInfoHandler,this),GamblingManager.LeaveRoomEvent.removeListener(this.onLeaveRoomHandler,this),GamblingManager.LeaveRoomErrorEvent.removeListener(this.onLeaveRoomErrorHandler,this),HundredWarManager.onLeaveEvent.removeListener(this.hundredWarLeaveHandler,this)},e.prototype.enterMatch=function(e,t){if(this.onEnable(),this._uiPanelName=t,this._info=e,this._info){var n=this._info.roomId;n>0?(GamblingManager.reqEnterRoom(n),qin.Console.log("进入比赛房间enterMatch"+n)):SceneManager.sceneType==SceneType.HundredWar?HundredWarManager.reqLeave():SceneManager.sceneType==SceneType.Hall?this.jumpToGame():GamblingManager.roomInfo?GamblingManager.reqLeaveRoom(!0):(this.switchGameSceneInRoom(),this.closePanel())}},e.prototype.hundredWarLeaveHandler=function(){this.jumpToGame()},e.prototype.jumpToGame=function(){this._info.cloneTo(GamblingManager.matchRoomInfo),SceneManager.switcScene(SceneType.Game),this.closePanel()},e.prototype.onGetRoomInfoHandler=function(){SceneManager.sceneType!=SceneType.Game?SceneManager.switcScene(SceneType.Game):this.switchGameSceneInRoom(),this.closePanel()},e.prototype.onLeaveRoomHandler=function(e){e.isInMtt&&(this.switchGameSceneInRoom(),this.closePanel())},e.prototype.onLeaveRoomErrorHandler=function(e){this._info&&e.isInMtt&&(this.switchGameSceneInRoom(),this.closePanel())},e.prototype.switchGameSceneInRoom=function(){this._info.cloneTo(GamblingManager.matchRoomInfo),this._gamblingPanel||(this._gamblingPanel=UIManager.getPanel(UIModuleName.GamblingPanel)),this._gamblingPanel?this._gamblingPanel.switchToGameSceneInRoom():UIManager.showPanel(UIModuleName.GamblingPanel)},e.prototype.closePanel=function(){this.onDisable(),this._uiPanelName&&UIManager.closePanel(this._uiPanelName)},e}();__reflect(EnterMttHandler.prototype,"EnterMttHandler");var BaseFriendInfo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=100,t.height=100,t}return __extends(t,e),t.prototype.copyValueFrom=function(t){this.reset(),e.prototype.copyValueFrom.call(this,t),t.head||(this.head=SheetSubName.getdefaultHead(this.sex))},Object.defineProperty(t.prototype,"head",{get:function(){return qin.StringUtil.isNullOrEmpty(this._head)?SheetSubName.getdefaultHead(this.sex):this._head},set:function(e){0==qin.StringUtil.isNullOrEmpty(e)&&(e=e.split(GameSetting.HeadUploadVerifySign)[0]),this._head=e},enumerable:!0,configurable:!0}),t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(BaseFriendInfo.prototype,"BaseFriendInfo",["IBaseHead"]);var ChampionshipHandler=function(){function e(){}return e.prototype.initializeRoomInfo=function(e){if(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.gamblingType==GamblingType.Championship){var t=ChampionshipManager.getMatchRoomInfoByRoomId(GamblingManager.roomInfo.id);if(t&&(t.cloneTo(GamblingManager.matchRoomInfo),e&&e.data&&(e.data.rank&&(GamblingManager.matchRoomInfo.rank=e.data.rank),e.data.join&&(GamblingManager.matchRoomInfo.leftJoin=e.data.join),e.data.avgChips&&(GamblingManager.matchRoomInfo.avgChips=e.data.avgChips))),GamblingManager.roomInfo.blindLevel||(GamblingManager.roomInfo.blindLevel=1),InfoUtil.checkAvailable(GamblingManager.matchRoomInfo)){var n=ChampionshipBlindDefined.GetInstance().getBlindInfoByLevel(GamblingManager.roomInfo.blindLevel+1,GamblingManager.matchRoomInfo.definition.blindType);n?!GamblingManager.roomInfo.blindTime&&GamblingManager.roomInfo.startTime&&(GamblingManager.roomInfo.blindTime=GamblingManager.roomInfo.startTime+n.upTime):GamblingManager.roomInfo.blindTime=-1}if(GamblingManager.roomInfo.nowBlindLevel=GamblingManager.roomInfo.blindLevel,GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.definition){var n=ChampionshipBlindDefined.GetInstance().getDefByBlind(GamblingManager.matchRoomInfo.definition.blindType,GamblingManager.roomInfo.sBlind,GamblingManager.roomInfo.bBlind);n&&n.level<=GamblingManager.roomInfo.blindLevel&&(GamblingManager.roomInfo.nowBlindLevel=n.level)}GamblingManager.roomInfo.addonTimes||(GamblingManager.roomInfo.addonTimes=0),GamblingManager.roomInfo.rebuyTimes||(GamblingManager.roomInfo.rebuyTimes=0)}},e.prototype.setNextAddTime=function(){if(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.gamblingType==GamblingType.Championship&&GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.definition&&GamblingManager.roomInfo){GamblingManager.roomInfo.blindLevel||(GamblingManager.roomInfo.blindLevel=1);var e=ChampionshipBlindDefined.GetInstance().getBlindInfoByLevel(GamblingManager.roomInfo.blindLevel+1,GamblingManager.matchRoomInfo.definition.blindType);e?GamblingManager.roomInfo.blindTime=e.upTime+TimeManager.GetServerUtcTimestamp():GamblingManager.roomInfo.blindTime=-1}},e.prototype.isCanAddChips=function(e,t){if(void 0===t&&(t=!1),InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.definition)if(e==ChampionshipBuyType.Rebuy){var n=GamblingManager.getPlayerInfo(UserManager.userInfo.roleId);if(!n||!(n.initbankRoll<=GamblingManager.matchRoomInfo.definition.initialChips)&&n.initbankRoll)return t&&AlertManager.showAlert("拥有筹码小于或等于初始筹码时才能进行重购"),!1;var i=ChampionshipBlindDefined.GetInstance().getBlindInfoByLevel(GamblingManager.roomInfo.nowBlindLevel,GamblingManager.matchRoomInfo.definition.blindType);if(i&&i.rebuy>0&&GamblingManager.matchRoomInfo.definition.rebuy>0&&GamblingManager.matchRoomInfo.definition.maxRebuyTimes>0)return GamblingManager.matchRoomInfo.definition.rebuy>GamblingManager.roomInfo.rebuyTimes||!GamblingManager.roomInfo.rebuyTimes?!GamblingManager.roomInfo.addbuy||GamblingManager.roomInfo.addbuy<GamblingManager.matchRoomInfo.definition.maxRebuyTimes*GamblingManager.matchRoomInfo.definition.initialChips?!0:(t&&AlertManager.showAlert("本局重购次数已达上限"),!1):(t&&AlertManager.showAlert("重购次数已达上限"),!1)}else if(e==ChampionshipBuyType.Addon){var i=ChampionshipBlindDefined.GetInstance().getBlindInfoByLevel(GamblingManager.roomInfo.nowBlindLevel,GamblingManager.matchRoomInfo.definition.blindType);if(i&&i.addon>0&&GamblingManager.matchRoomInfo.definition.addon>0)return GamblingManager.matchRoomInfo.definition.addon>GamblingManager.roomInfo.addonTimes||!GamblingManager.roomInfo.addonTimes?!GamblingManager.roomInfo.addbuy||GamblingManager.roomInfo.addbuy<GamblingManager.matchRoomInfo.definition.addonChips?!0:(t&&AlertManager.showAlert("本局增购次数已达上限"),!1):(t&&AlertManager.showAlert("增购次数已达上限"),!1)}return t&&(e==ChampionshipBuyType.Rebuy?AlertManager.showAlert("当前阶段无法重购"):e==ChampionshipBuyType.Addon&&AlertManager.showAlert("当前阶段无法增购")),!1},e.prototype.addShip=function(e){if(GamblingManager.roomInfo&&!GamblingManager.roomInfo.isRaceOut){var t=function(i){SocketManager.RemoveCommandListener(Command.MTTRebuyOrAddon_3619,t,this),SocketManager.RemoveErrorListener(Command.MTTRebuyOrAddon_3619,n,this),e!=ChampionshipBuyType.Out&&(GamblingManager.roomInfo&&(e==ChampionshipBuyType.Rebuy?GamblingManager.roomInfo.rebuyTimes++:GamblingManager.roomInfo.addonTimes++,GamblingManager.roomInfo.gamblingType==GamblingType.Championship&&(GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.definition?(GamblingManager.roomInfo.addbuy||(GamblingManager.roomInfo.addbuy=0),e==ChampionshipBuyType.Rebuy?(GamblingManager.roomInfo.addbuy+=GamblingManager.matchRoomInfo.definition.initialChips,AlertManager.showAlert(qin.StringUtil.format("重购成功,{0}筹码将在下局增加",GamblingManager.matchRoomInfo.definition.initialChips))):(GamblingManager.roomInfo.addbuy+=GamblingManager.matchRoomInfo.definition.addonChips,AlertManager.showAlert(qin.StringUtil.format("增购成功,{0}筹码将在下局增加",GamblingManager.matchRoomInfo.definition.addonChips)))):e==ChampionshipBuyType.Rebuy?AlertManager.showAlert("重购成功,筹码将在下局增加"):AlertManager.showAlert("增购成功,筹码将在下局增加"))),GamblingManager.RebuyORAddonEvent.dispatch({isSuccess:!0}))},n=function(i){SocketManager.RemoveCommandListener(Command.MTTRebuyOrAddon_3619,t,this),SocketManager.RemoveErrorListener(Command.MTTRebuyOrAddon_3619,n,this),3012==i.error&&(e==ChampionshipBuyType.Rebuy?AlertManager.showAlert("当前阶段无法重购"):e==ChampionshipBuyType.Addon&&AlertManager.showAlert("当前阶段无法增购")),GamblingManager.RebuyORAddonEvent.dispatch({isSuccess:!1})};SocketManager.AddCommandListener(Command.MTTRebuyOrAddon_3619,t,this),SocketManager.AddErrorListener(Command.MTTRebuyOrAddon_3619,n,this),SocketManager.Send(Command.MTTRebuyOrAddon_3619,{type:e})}},e.prototype.outChampionship=function(e){GamblingManager.roomInfo.isRaceOut=!0,qin.Console.log("房间处于旁观状态状态")},e}();__reflect(ChampionshipHandler.prototype,"ChampionshipHandler");var ChampionshipBuyType=function(){function e(){}return e.Rebuy=1,e.Addon=2,e.Out=3,e}();__reflect(ChampionshipBuyType.prototype,"ChampionshipBuyType");var ChampionshipRoomUIAlertType=function(){function e(){}return e.InAward=1,e.InFinals=2,e.ChangeRoom=3,e.NumTimeing=4,e}();__reflect(ChampionshipRoomUIAlertType.prototype,"ChampionshipRoomUIAlertType");var GamblingReviewHandler=function(){function e(){this.onReqReviewInfoEvent=new qin.DelegateDispatcher,this.onGetAllPlayerInfoEvent=new qin.DelegateDispatcher}return e.prototype.reqReviewInfo=function(e){var t=function(e){if(this.reset(),e.data){if(e.data.Array){for(var t=0,n=e.data.Array;t<n.length;t++){var i=n[t];i.action?this.setInfoByActionType(i):this.setSelfCardsInfo(i),this.setSelfActionRecord(i)}if(this.reviewInfoList.length>0)for(var a=0;a<this.reviewInfoList.length;a++){var o=this.reviewInfoList[a];this.setResultInfo(o),this.setCardsTypeDes(o)}}this.startReqRank(),UserManager.OnGetSimpleUserInfoEvent.addListener(this.onReqComplete,this),this.onReqReviewInfoEvent.dispatch()}};this.isNewRound&&SocketManager.call(Command.ReviewInfo_Req_3707,null,t,null,this)},e.prototype.reset=function(){this.isNewRound=!1,this.overActionStep=0,this.reviewInfoList||(this.reviewInfoList=new Array),this.dealActionRecord||(this.dealActionRecord=new Array),this.pubCardList||(this.pubCardList=new Array),qin.ArrayUtil.Clear(this.reviewInfoList),qin.ArrayUtil.Clear(this.dealActionRecord),qin.ArrayUtil.Clear(this.pubCardList)},e.prototype.setInfoByActionType=function(e){switch(e.action){case PlayerState.PoolWon:this.setOverRecordStep(e);break;case PlayerState.ThePos:this.setPlayerRoleIdAndPos(e);break;case PlayerState.ButtonPos:this.setButtonPos(e);break;case PlayerState.Blind:this.setBlindPos(e);break;case PlayerState.PubCard:this.setPubCardsInfo(e);break;case PlayerState.ShowCard:this.setIsShowCard(e)}},e.prototype.setPlayerRoleIdAndPos=function(e){var t=new PlayerReviewInfo;t.roleId=e.roleId,t.pos=e.num1,this.reviewInfoList.push(t)},e.prototype.setButtonPos=function(e){for(var t=0,n=this.reviewInfoList;t<n.length;t++){var i=n[t];if(i.pos==e.num1){i.posType=PlayerPosType.Banker;break}}},e.prototype.setBlindPos=function(e){var t;t=GamblingManager.roomInfo.ante?e.num1-GamblingManager.roomInfo.ante:e.num1;for(var n=0,i=this.reviewInfoList;n<i.length;n++){var a=i[n];if(a.roleId==e.roleId&&a.posType!=PlayerPosType.Banker){t==GamblingManager.roomInfo.sBlind&&(a.posType=PlayerPosType.Sblind),t==GamblingManager.roomInfo.bBlind&&(a.posType=PlayerPosType.Bblind);break}}},e.prototype.setOverRecordStep=function(e){this.overActionStep?this.overActionStep>e.step&&(this.overActionStep=e.step):this.overActionStep=e.step},e.prototype.setPubCardsInfo=function(e){this.dealActionRecord.push(e);var t=new Array,n=new Array;try{n=JSON.parse(e.cards)}catch(i){qin.Console.log(i)}n&&GamblingUtil.cardArr2CardInfoList(n,t),this.pubCardList=this.pubCardList.concat(t)},e.prototype.setSelfActionRecord=function(e){if(this.reviewInfoList.length>0)for(var t=0,n=this.reviewInfoList;t<n.length;t++){var i=n[t];if(e.roleId==i.roleId){e.action!=PlayerState.WaitAction&&(i.selfActionRecord||(i.selfActionRecord=new Array),i.selfActionRecord.push(e));break}}},e.prototype.setSelfCardsInfo=function(e){if(this.reviewInfoList.length>0)for(var t=0,n=this.reviewInfoList;t<n.length;t++){var i=n[t];if(e.roleId==i.roleId){if(e.cards){var a=new Array;try{a=JSON.parse(e.cards)}catch(o){qin.Console.log(o)}a&&(i.cardList=new Array,GamblingUtil.cardArr2CardInfoList(a,i.cardList))}break}}},e.prototype.setIsShowCard=function(e){if(this.reviewInfoList.length>0)for(var t=0,n=this.reviewInfoList;t<n.length;t++){var i=n[t];if(e.roleId==i.roleId){e.num1?i.isShowCard=!0:i.isShowCard=!1;break}}},e.prototype.setResultInfo=function(e){for(var t=!1,n=0,i=e.selfActionRecord;n<i.length;n++){var a=i[n];a.action==PlayerState.PoolWon&&(t=!0,e.betNum?e.betNum+=a.num2:e.betNum=a.num2)}for(var o=0,r=0,s=e.selfActionRecord;r<s.length;r++){var a=s[r];(a.action==PlayerState.Blind||a.action==PlayerState.Raise||a.action==PlayerState.AllIn||a.action==PlayerState.Call)&&(o+=a.num1)}t?(e.betNum=e.betNum-o,e.betNum>0?e.isWin=!0:(e.betNum=Math.abs(e.betNum),e.isWin=!1)):(e.isWin=!1,e.betNum=o)},e.prototype.setCardsTypeDes=function(e){var t=e.cardList.concat(this.pubCardList);CardTypeMatchUtil.matchCardType(t),e.cardTypeDes=CardTypeMatchUtil.getCardDes(CardTypeMatchUtil.cardType)},e.prototype.isCompare=function(){if(this.pubCardList&&5==this.pubCardList.length){for(var e=this.reviewInfoList.length,t=0,n=this.reviewInfoList;t<n.length;t++)for(var i=n[t],a=0,o=i.selfActionRecord;a<o.length;a++){var r=o[a];if(r.action==PlayerState.Fold||r.action==PlayerState.StandUp){e--;break}}return e>1?!0:!1}return!1},e.prototype.getBlind=function(e){for(var t=0,n=this.reviewInfoList;t<n.length;t++){var i=n[t];if(i.roleId==e)for(var a=0,o=i.selfActionRecord;a<o.length;a++){var r=o[a];if(r.action==PlayerState.Blind)return r.num1}}return 0},e.prototype.startReqRank=function(){this._index=0,this.nextReq()},e.prototype.nextReq=function(){if(this._index<this.reviewInfoList.length){var e=this.reviewInfoList[this._index];UserManager.reqSimpleUserInfo(e.roleId)}else this.onGetAllPlayerInfoEvent.dispatch(),UserManager.OnGetSimpleUserInfoEvent.removeListener(this.onReqComplete,this)},e.prototype.onReqComplete=function(e){if(e)for(var t=0,n=this.reviewInfoList;t<n.length;t++){var i=n[t];if(i.roleId==e.roleId){i.copyValueFrom(e);break}}this._index++,this.nextReq()},e}();__reflect(GamblingReviewHandler.prototype,"GamblingReviewHandler");var qin;!function(e){var t=function(){function t(t){void 0===t&&(t=!1),this.enabledErrorCode=!0,this._session=0,this._infoList=new Array,this._address=e.StringConstants.Empty,this._msgType=egret.WebSocket.TYPE_BINARY,this._commandDispatcher=new e.CallDispatcher,this._errorDispatcher=new e.CallDispatcher,this._normalErrorSet=new e.HashSet,this._enabledSend=!1,this._useHandshake=!1,this._isHandshaking=!1,this._requestSessionMax=0,this._useHandshake=t}return Object.defineProperty(t.prototype,"enabledSend",{get:function(){return this._enabledSend},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestSessionMax",{get:function(){return this._requestSessionMax},enumerable:!0,configurable:!0}),t.prototype.addNormalError=function(e){this._normalErrorSet.add(e)},t.prototype.removeNormalError=function(e){this._normalErrorSet.remove(e)},Object.defineProperty(t.prototype,"address",{get:function(){return this._address},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this._port},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._infoList=null,this._enabledSend=!1,this.resetSocket(),null!=this._commandDispatcher&&(this._commandDispatcher.dispose(),this._commandDispatcher=null),null!=this._errorDispatcher&&(this._errorDispatcher.dispose(),this._errorDispatcher=null),this._spRpc=null,this._onResult=null},t.prototype.close=function(e){void 0===e&&(e=!1),this._enabledSend=e,this.resetSocket(),this.RemoveNoDiscRetry()},Object.defineProperty(t.prototype,"hasDiscRetry",{get:function(){if(null!=this._infoList&&this._infoList.length>0)for(var e=0;e<this._infoList.length;e++)if(this._infoList[e].isDiscRetry)return!0;return!1},enumerable:!0,configurable:!0}),t.prototype.resetSocket=function(){if(null!=this._socket)try{this._socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this._socket.removeEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this._socket.removeEventListener(egret.Event.CLOSE,this.onSocketClose,this),this._socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this._socket.close(),this._socket=null}catch(t){e.Console.log(t.message,t.stack)}this._isHandshaking=!1},t.prototype.Connect=function(e,t){this._address=e,this._port=t,null!=this._socket&&this.resetSocket(),this._socket=new egret.WebSocket,this._socket.type=this._msgType,this._socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this._socket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this._socket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this._socket.connect(this._address,this._port)
},t.prototype.RemoveCall=function(e,t,n){if(null!=this._infoList&&this._infoList.length>0&&null!=t)for(var i=this._infoList.length-1;i>=0;i--){var a=this._infoList[i];a.cmdId==e&&null!=a.onResult&&a.onResult==t&&a.thisObject==n&&this._infoList.splice(i,1)}},t.prototype.onSocketOpen=function(){null!=this._socket&&this._spRpc&&(this._enabledSend=!0,this._spRpc.host("package"),this._attchRet=this._spRpc.attach(),this._useHandshake?(this._isHandshaking=!0,this.Handshake()):(this._isHandshaking=!1,this.DispatchMessage(new e.SocketMessage(e.SocketMessageType.Connect,"0","connect succeed"))))},t.prototype.SimpleSend=function(e,t){void 0===t&&(t=null),this.InvokeSend(!0,!1,e,t,void 0,void 0,void 0)},t.prototype.SimpleCall=function(e,t,n,i,a){void 0===t&&(t=null),this.InvokeSend(!0,!1,e,t,n,i,a)},t.prototype.InvokeSend=function(e,t,n,i,a,o,r){if(void 0===i&&(i=null),this._enabledSend){var s=this.AddSocketInfo(e,t,n,i,a,o,r);null!=s&&this.SendObject(s)}else t&&this.AddSocketInfo(e,t,n,i,a,o,r)},t.prototype.SendObject=function(t){if(null==this._socket||null==this._spRpc||null==this._attchRet)return void this.DispatchMessage(new e.SocketMessage(e.SocketMessageType.NotInitialized,"-1","NotInitialized"));try{e.Console.log("Socket.Send-----------> cmdId:"+t.cmdId+"- >session:"+t.session);var n=this._attchRet(t.cmdId,t.args,t.session).buf,i=array2arraybuffer(n),a=new egret.ByteArray(i);this._socket.writeBytes(a),this._socket.flush()}catch(o){var r=new e.SocketMessage(e.SocketMessageType.SendError,"-1",o.message+"\n"+o.stack);this.DispatchMessage(r)}},t.prototype.onSocketClose=function(t){e.Console.log("WebSocket Close"),this.DispatchMessage(new e.SocketMessage(e.SocketMessageType.Failing,"close","Server Close"))},t.prototype.onSocketError=function(t){e.Console.log("WebSocket connect error"),this.DispatchMessage(new e.SocketMessage(e.SocketMessageType.NetworkError,"close","WebSocket connect error"))},t.prototype.onReceiveMessage=function(t){if(this._socket){var n=new egret.ByteArray;this._socket.readBytes(n),n.position=0;var i=arraybuffer2array(n.buffer);e.Console.log("receive server message size:"+i.length),this._spRpc.dispatch({buf:i,sz:i.length},this.handleRequest.bind(this),this.handleResponse.bind(this))}},t.prototype.handleRequest=function(t,n,i,a){void 0==a&&(a=0),e.Console.log("server-push-----> cmdId:"+t,"-> session:"+i,"-> error:"+a);var o=new e.SpRpcResult;o.cmdId=t,o.data=n,o.error=a,o.op=e.SpRpcOp.Request,o.session=i,this._requestSessionMax<i&&(this._requestSessionMax=i),this._useHandshake&&this._isHandshaking?this.ParseHandshake(o):(this.DispatchResult(o),0==o.error||this._normalErrorSet.contains(o.error)?this.DispatchCommand(t,o):this.enabledErrorCode&&this.DispatchError(t,o))},t.prototype.handleResponse=function(t,n,i,a){void 0==a&&(a=0),e.Console.log("client receive ------------> cmdId:"+t+"-> session:"+i,"-> error:"+a);var o=this.RemoveSocketInfo(i),r=new e.SpRpcResult;r.cmdId=t,r.data=n,r.error=a,r.op=e.SpRpcOp.Response,r.session=i,this._useHandshake&&this._isHandshaking?this.ParseHandshake(r):(this.DispatchResult(r),0==r.error||this._normalErrorSet.contains(r.error)?o&&o.onResult?e.FuncUtil.invoke(o.onResult,o.thisObject,r):this.DispatchCommand(t,r):this.enabledErrorCode&&(o&&o.onError?e.FuncUtil.invoke(o.onError,o.thisObject,r):this.DispatchError(t,r)))},t.prototype.RemoveNoDiscRetry=function(){if(null!=this._infoList&&this._infoList.length>0)for(var e=this._infoList.length-1;e>=0;e--)0==this._infoList[e].isDiscRetry&&this._infoList.splice(e,1)},t.prototype.AddSocketInfo=function(t,n,i,a,o,r,s){if(void 0===a&&(a=null),null!=this._infoList){if(t&&this._infoList.length>0)for(var l=0;l<this._infoList.length;l++){var h=this._infoList[l];if(h.isSole&&h.cmdId==i&&h.onResult==o&&h.thisObject==s)return null}this._session++;var d=new e.SocketInfo;return d.session=this._session,d.cmdId=i,d.isDiscRetry=n,d.isSole=t,d.args=a,d.onResult=o,d.onError=r,d.thisObject=s,this._infoList.push(d),d}return null},t.prototype.RemoveSocketInfo=function(e){if(null!=this._infoList&&this._infoList.length>0)for(var t=0;t<this._infoList.length;t++){var n=this._infoList[t];if(n.session==e)return this._infoList.splice(t,1),n}return null},t.prototype.Handshake=function(){},t.prototype.ParseHandshake=function(e){},t.prototype.AddMessageListener=function(t,n){null==this._onSocketMessage&&(this._onSocketMessage=new e.DelegateDispatcher),this._onSocketMessage.addListener(t,n)},t.prototype.RemoveMessageListener=function(e,t){this._onSocketMessage&&this._onSocketMessage.removeListener(e,t)},t.prototype.DispatchMessage=function(e){this._onSocketMessage&&this._onSocketMessage.dispatch(e)},t.prototype.AddResultListener=function(t,n){null==this._onResult&&(this._onResult=new e.DelegateDispatcher),this._onResult.addListener(t,n)},t.prototype.RemoveResultListener=function(e,t){this._onResult&&this._onResult.removeListener(e,t)},t.prototype.DispatchResult=function(e){this._onResult&&this._onResult.dispatch(e)},t.prototype.AddCommandListener=function(e,t,n){this._commandDispatcher.addListener(e,t,n)},t.prototype.RemoveCommandListener=function(e,t,n){this._commandDispatcher.removeListener(e,t,n)},t.prototype.DispatchCommand=function(e,t){this._commandDispatcher.dispatch(e,t)},t.prototype.AddErrorListener=function(e,t,n){this._errorDispatcher.addListener(e,t,n)},t.prototype.RemoveErrorListener=function(e,t,n){this._errorDispatcher.removeListener(e,t,n)},t.prototype.DispatchError=function(e,t){this._errorDispatcher.dispatch(e,t)},t.HandshakeName="handshake",t}();e.BaseSocket=t,__reflect(t.prototype,"qin.BaseSocket")}(qin||(qin={}));var InitAppHandler=function(){function e(){this._isAppComplete=!1}return Object.defineProperty(e.prototype,"isAppComplete",{get:function(){return this._isAppComplete},enumerable:!0,configurable:!0}),e.prototype.Invoke=function(){0==this._isAppComplete&&(this._isAppComplete=!0,NotifyManager.initialize(),UploadHeadManager.initialize(),SceneManager.initialize()),ShopManager.initialize(),VipManager.initialize(),NotifyManager.initByReLogin(),UploadHeadManager.clearAllData(),BindAccountManager.clear(),RankManager.initialize(),ResCacheManager.initialize()},e}();__reflect(InitAppHandler.prototype,"InitAppHandler");var InitServerHandler=function(){function e(){this._isComplete=!1,this._isGeting=!1}return Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._isComplete},enumerable:!0,configurable:!0}),e.prototype.Invoke=function(e,t,n,i){this._isComplete=!1,this._complete=n,this._error=i,UserManager.serverInfo=t,SocketManager.Close(),SocketManager.Initialize(e.userid,t.roleId,t.id,e.secret,e.session,ProtocolManager.Gamec2sBin,ProtocolManager.Games2cBin),this.RemoveEvents(),SocketManager.OnConnect.addListener(this.OnSocketConnect,this),SocketManager.OnEnterError.addListener(this.OnEnterError,this),SocketManager.isEntering=!0,SocketManager.pollingConnect(e.domain,e.port,!0)},e.prototype.AfreshGetInfo=function(){0==this._isGeting&&(this._isGeting=!0,UIManager.isShowPanel(UIModuleName.LoadingSwitchPanel)||UIManager.showPanel(UIModuleName.LoadingSwitchPanel),SocketManager.ImplCall(Command.Role_GetInfo_3000,null,this.OnRoleInfo,null,this))},e.prototype.RemoveEvents=function(){SocketManager.OnConnect.removeListener(this.OnSocketConnect,this),SocketManager.OnEnterError.removeListener(this.OnEnterError,this)},e.prototype.OnSocketConnect=function(){UIManager.isShowPanel(UIModuleName.LoadingSwitchPanel)||UIManager.showPanel(UIModuleName.LoadingSwitchPanel),SocketManager.ImplCall(Command.Role_GetInfo_3000,null,this.OnRoleInfo,null,this)},e.prototype.OnEnterError=function(){this.DispatchError()},e.prototype.OnRoleInfo=function(e){0==LoginManager.loginInfo.hasAlreadyCreateRole&&(LoginManager.loginInfo.hasAlreadyCreateRole=!0),0==UserManager.serverInfo.roleId&&(UserManager.serverInfo.roleId=SocketManager.roleId),qin.Console.roleId=SocketManager.roleId,TimeManager.initialize(e.data),UserManager.initialize(SocketManager.roleId,e.data),this.reqAwardInfo()},e.prototype.reqAwardInfo=function(){SocketManager.ImplCall(Command.Award_GetInfo_3112,null,this.onReqAwardInfo,null,this)},e.prototype.onReqAwardInfo=function(e){AwardManager.Initialize(e),this.reqItemList()},e.prototype.reqItemList=function(){SocketManager.ImplCall(Command.Req_ItemList_3020,null,this.onGetItemList,null,this)},e.prototype.onGetItemList=function(e){ItemManager.initialize(e),this.reqFriendListInfo()},e.prototype.reqFriendListInfo=function(){SocketManager.ImplCall(Command.Friend_GetList_3156,null,this.FriendListInfoResponse,null,this)},e.prototype.FriendListInfoResponse=function(e){FriendManager.Initialize(e),this.reqAddFriendListInfo()},e.prototype.reqAddFriendListInfo=function(){SocketManager.ImplCall(Command.Friend_RequestList_3157,null,this.addFriendListInfoResponse,null,this)},e.prototype.addFriendListInfoResponse=function(e){FriendManager.FriendRequestResponse(e),this.reqAchievementList()},e.prototype.reqAchievementList=function(){SocketManager.ImplCall(Command.Achievement_GetList_3090,{roleId:UserManager.userInfo.roleId},this.OnAchievementListInfo,null,this)},e.prototype.OnAchievementListInfo=function(e){AchievementManager.initialize(e),AchieveProcessManager.Initialize(e),this.reqGetInsideRoomIdList()},e.prototype.reqGetInsideRoomIdList=function(){SocketManager.ImplCall(Command.InsideRoomInfoList_Req_3614,null,this.onGetInsideRoomListInfo,null,this)},e.prototype.onGetInsideRoomListInfo=function(e){InsideRoomManager.initialize(e),this.reqGetMTTListInfo()},e.prototype.reqGetMTTListInfo=function(){SocketManager.ImplCall(Command.MTTList_Req_3611,null,this.onGetMTTListInfo,null,this)},e.prototype.onGetMTTListInfo=function(e){ChampionshipManager.initialize(e),this.reqGetMailList()},e.prototype.reqGetMailList=function(){SocketManager.ImplCall(Command.Mail_GetList_3097,{StartId:0,Count:GameSetting.MaxMailNum},this.onGetMailList,null,this)},e.prototype.onGetMailList=function(e){MailManager.Reset(),MailManager.initialize(e,!0),this.reqGetActivityList()},e.prototype.reqGetActivityList=function(){ActivityManager.OnActivityGetListEvent.addListener(this.onGetreqGetActivityList,this),ActivityManager.reqActivityInfo(0)},e.prototype.onGetreqGetActivityList=function(e){ActivityManager.OnActivityGetListEvent.removeListener(this.onGetreqGetActivityList,this),ActivityManager.initialize(e),this.requestNotice()},e.prototype.requestNotice=function(){SocketManager.ImplCall(Command.System_GetNotice_3004,{sessionId:SocketManager.requestSessionMax},this.onGetNotice,null,this)},e.prototype.onGetNotice=function(){SocketManager.isEntering=!1,this.DispatchComplete()},e.prototype.DispatchComplete=function(){this.RemoveEvents(),this._isGeting=!1,this._isComplete=!0,null!=this._complete&&(this._complete(),this._complete=null)},e.prototype.DispatchError=function(){UIManager.closePanel(UIModuleName.LoadingSwitchPanel),this.RemoveEvents(),this._isGeting=!1,null!=this._error&&(this._error(),this._error=null)},e}();__reflect(InitServerHandler.prototype,"InitServerHandler");var ReLoginingHandler=function(){function e(){}return e.prototype.invoke=function(){SocketManager.Dispose(),UserManager.resetByReLogin(),ShopManager.clearList(),GamblingManager.resetByReLogin(),HundredWarManager.resetByReLogin(),NotifyManager.clearMultiParams()},e}();__reflect(ReLoginingHandler.prototype,"ReLoginingHandler");var GuessHandler=function(){function e(){this.onGetGuessOddsInfoEvent=new qin.DelegateDispatcher,this.onChangeTotalAnteEvent=new qin.DelegateDispatcher,this.onWeekInfoEvent=new qin.DelegateDispatcher,this.onGetBuyRecordInfoEvent=new qin.DelegateDispatcher,this.onGuessCorrectlyEvent=new qin.DelegateDispatcher,this.onResetBuyOnceStateEvent=new qin.DelegateDispatcher}return e.prototype.reset=function(){this.totalAnte=0,qin.ArrayUtil.Clear(this.guessOddsList)},e.prototype.leaveRoomReset=function(){this.totalAnte=0,GamblingManager.guessHandler.buyInning=void 0,qin.ArrayUtil.Clear(this.resultList),qin.ArrayUtil.Clear(this.buyGuessAnteInfo),this.onDisable()},e.prototype.onEnable=function(){UserManager.propertyChangeEvent.addListener(this.goldChange,this)},e.prototype.onDisable=function(){UserManager.propertyChangeEvent.removeListener(this.goldChange,this)},e.prototype.resetBuyRB=function(){this.buyOnceRBSel=!1,1==this.buyInning&&(GamblingManager.guessHandler.buyInning=void 0),this.onResetBuyOnceStateEvent.dispatch()},e.prototype.setBuyGuessAnteInfo=function(e,t){if(this.buyGuessAnteInfo||(this.buyGuessAnteInfo=new Array),this.buyGuessAnteInfo.length>0){for(var n=!0,i=0;i<this.buyGuessAnteInfo.length;i++){var a=this.buyGuessAnteInfo[i];if(a.id==e){if(0==t)return void this.buyGuessAnteInfo.splice(i,1);a.num=t,n=!1}}n&&this.setNewGuessAnteInfo(e,t)}else this.setNewGuessAnteInfo(e,t)},e.prototype.setNewGuessAnteInfo=function(e,t){var n=HoleCardsDefined.GetInstance().getDefinition(e);if(n){var i=new BuyGuessAnteInfoBase;i.id=e,i.handType=n.type,i.num=t,this.buyGuessAnteInfo.push(i)}},e.prototype.setResultListInfo=function(){if(!GamblingUtil.isMtt&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.handCard){var e=new GuessResultInfo;if(e.time=TimeManager.GetServerUtcTimestamp(),e.card1=GamblingManager.roomInfo.handCard[0],e.card2=GamblingManager.roomInfo.handCard[1],this.isBuyGuess){var t=this.guessCorrectlyAnte(e.card1,e.card2);t?(e.ante=t,this.onGuessCorrectlyEvent.dispatch()):e.ante=0,void 0==this.buyInning&&(this.isBuyGuess=!1)}else e.ante=0;this.resultList||(this.resultList=new Array),this.resultList.length>=10&&this.resultList.shift(),this.resultList.push(e)}},e.prototype.guessCorrectlyAnte=function(e,t){if(this.buyGuessAnteInfo){for(var n=0,i=0,a=this.buyGuessAnteInfo;i<a.length;i++){var o=a[i];switch(o.handType){case GuessType.NoAOrK:1!=e.card[1]&&13!=e.card[1]&&1!=t.card[1]&&13!=t.card[1]&&(n+=o.num);break;case GuessType.Flush:e.card[0]==t.card[0]&&(n+=o.num);break;case GuessType.HasAOrK:(1==e.card[1]||13==e.card[1]||1==t.card[1]||13==t.card[1])&&(n+=o.num);break;case GuessType.HasA:(1==e.card[1]||1==t.card[1])&&(n+=o.num);break;case GuessType.OnePair:e.card[1]==t.card[1]&&(n+=o.num);break;case GuessType.HasAA:1==e.card[1]&&1==t.card[1]&&(n+=o.num)}}return n}return null},e.prototype.getGuessOddsInfo=function(){if(this.reset(),this.guessOddsList||(this.guessOddsList=new Array),HoleCardsDefined.GetInstance().dataList)for(var e=0,t=HoleCardsDefined.GetInstance().dataList;e<t.length;e++){var n=t[e],i=new GuessOddsInfo;i.id=n.id,this.guessOddsList.push(i)}},e.prototype.reqBuyGuessAnte=function(e,t){void 0===e&&(e=0);var n=function(e){};0==e?SocketManager.call(Command.GuessBuy_Req_3622,null,n,null,this):SocketManager.call(Command.GuessBuy_Req_3622,{type:e,anteList:t},n,null,this)},e.prototype.reqGetWeekInfo=function(){SocketManager.call(Command.GuessCrunchies_Req_3623,null,this.getWeekInfoResponse,null,this)},e.prototype.getWeekInfoResponse=function(e){e.data&&e.data.Array&&(this.weekGuessRankList=e.data.Array,this.onWeekInfoEvent.dispatch())},e.prototype.reqGetBuyRecordInfo=function(){SocketManager.call(Command.GuessRecord_Req_3624,null,this.getBuyRecordInfoResponse,null,this)},e.prototype.getBuyRecordInfoResponse=function(e){if(e.data&&e.data.Array){this.recordList||(this.recordList=new Array),qin.ArrayUtil.Clear(this.recordList);for(var t=0,n=e.data.Array;t<n.length;t++){var i=n[t],a=new GuessRecordInfo,o=new Array,r=new Array;r=JSON.parse(i.cards),a.type=i.type,a.ante=i.ante,a.gold=i.gold,a.time=i.time,GamblingUtil.cardArr2CardInfoList(r,o),a.card1=o[0],a.card2=o[1],this.recordList.push(a)}for(var s=0,l=this.recordList;s<l.length;s++){var a=l[s],h=new HoleCardsDefinition;h=HoleCardsDefined.GetInstance().getHoleCardsInfoByType(a.type),a.record=h.des}this.onGetBuyRecordInfoEvent.dispatch()}},e.prototype.goldChange=function(){if(GamblingManager.roomInfo){var e=GamblingManager.guessHandler.totalAnte*GamblingManager.roomInfo.bBlind;e&&UserManager.userInfo.gold<e&&(GamblingManager.guessHandler.buyInning=void 0,GamblingManager.guessHandler.isBuyGuess=!1)}},e}();__reflect(GuessHandler.prototype,"GuessHandler");var GuessOddsInfo=function(){function e(){}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e,this._definition=HoleCardsDefined.GetInstance().getDefinition(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),e}();__reflect(GuessOddsInfo.prototype,"GuessOddsInfo",["IHaveDefintionInfo"]);var BuyGuessAnteInfo=function(){function e(){}return e}();__reflect(BuyGuessAnteInfo.prototype,"BuyGuessAnteInfo");var BuyGuessAnteInfoBase=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(BuyGuessAnteInfo);__reflect(BuyGuessAnteInfoBase.prototype,"BuyGuessAnteInfoBase");var WeekGuessRankInfo=function(){function e(){}return e}();__reflect(WeekGuessRankInfo.prototype,"WeekGuessRankInfo");var GuessResultInfo=function(){function e(){}return e}();__reflect(GuessResultInfo.prototype,"GuessResultInfo");var GuessRecordInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(GuessResultInfo);__reflect(GuessRecordInfo.prototype,"GuessRecordInfo");var GuessType;!function(e){e[e.NoAOrK=2]="NoAOrK",e[e.Flush=3]="Flush",e[e.HasAOrK=4]="HasAOrK",e[e.HasA=5]="HasA",e[e.OnePair=6]="OnePair",e[e.HasAA=7]="HasAA"}(GuessType||(GuessType={}));var ActivityTriggerHandler=function(){function e(){this._registerList=new Array,this._propMap=new qin.Dictionary}return e.prototype.initialize=function(){this.onEnable()},e.prototype.register=function(e){if(InfoUtil.checkAvailable(e)&&e.definition.triggerType!=ActivityTriggerType.None){for(var t=0,n=this._registerList;t<n.length;t++){var i=n[t];if(i.id==e.id)return}this._registerList.push(e)}},e.prototype.unRegister=function(e){qin.ArrayUtil.RemoveItem(e,this._registerList)},e.prototype.onEnable=function(){UIManager.onPanelOpenEvent.addListener(this.onPanelOpenHandler,this),UIManager.onPanelCloseEvent.addListener(this.onPanelCloseHandler,this)},e.prototype.onDisable=function(){UIManager.onPanelOpenEvent.removeListener(this.onPanelOpenHandler,this),UIManager.onPanelCloseEvent.removeListener(this.onPanelCloseHandler,this)},e.prototype.onPanelOpenHandler=function(e){for(var t=0,n=this._registerList;t<n.length;t++){var i=n[t];if(i.definition&&i.definition.triggerType==ActivityTriggerType.Click&&i.definition.triggerParams&&i.definition.triggerParams.length>0){var a=i.definition.triggerParams[0];if(a==e){var o=UIManager.getPanel(a);if(o){var r=i.definition.triggerParams.concat();r.shift();var s=qin.ObjectUtil.getTreeProperty(o,r);s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.triggerActivity,this),this._propMap.add(s,i)}else qin.Console.log("活动触发配置clik类型参数异常！面板未找到"+i.definition.trigger)}}}},e.prototype.onPanelCloseHandler=function(e){for(var t=0,n=this._registerList;t<n.length;t++){var i=n[t];if(i.definition&&i.definition.triggerType==ActivityTriggerType.Click&&i.definition.triggerParams&&i.definition.triggerParams.length>0){var a=i.definition.triggerParams[0];if(a==e){var o=UIManager.getPanel(a);if(o){var r=i.definition.triggerParams.concat();r.shift();var s=qin.ObjectUtil.getTreeProperty(o,r);s.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.triggerActivity,this),this._propMap.remove(s)}else qin.Console.log("活动触发配置clik类型参数异常！面板未找到"+i.definition.trigger)}}}},e.prototype.triggerActivity=function(e){var t=this._propMap.getValue(e.currentTarget);InfoUtil.checkAvailable(t)&&(t.definition.panelName?ActivityPanelJumpManager.JumpToPanel(t):qin.Console.log("活动面板绑定异常！"+t.definition.panelName))},e.prototype.clear=function(){qin.ArrayUtil.Clear(this._registerList),this._propMap.clear()},e}();__reflect(ActivityTriggerHandler.prototype,"ActivityTriggerHandler");var BaseGuideStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t,n){e.prototype.init.call(this,t,n),t&&(this.stepDef=GuideStepDefined.GetInstance().getDefinition(t.stepId),this.stepDef||qin.Console.logError("未找到子步骤数据：stepId"+t.stepId+"params"+t.stepParams))},t.prototype.run=function(){},t.prototype.clear=function(){this.comleteEvent.clear(),this.parent=void 0,this.definition=void 0,this.stepDef=void 0},t}(BaseGuideProcess);__reflect(BaseGuideStepProcess.prototype,"BaseGuideStepProcess");var HundredWarPanelHandler=function(){function e(){this.onUpDownBankerEvent=new qin.DelegateDispatcher,this.OnGetHundredWarInfoEvent=new qin.DelegateDispatcher,this.OnGetHundredWarNoSeatInfoEvent=new qin.DelegateDispatcher,this.OnGetHundredWarTrendListEvent=new qin.DelegateDispatcher,this.OnGetHundredWarBankerListEvent=new qin.DelegateDispatcher,this.OnGetHundredWarPoolInfoEvent=new qin.DelegateDispatcher}return e.prototype.reqGetHundredWarInfo=function(){HundredWarManager.panelHandler.hundredWarList||(HundredWarManager.panelHandler.hundredWarList=new Array);var e=function(e){if(e.data.Array){qin.ArrayUtil.Clear(HundredWarManager.panelHandler.hundredWarList);for(var t=0,n=e.data.Array;t<n.length;t++){var i=n[t],a=new HundredWarListInfo;a.copyValueFrom(i),HundredWarManager.panelHandler.hundredWarList.push(a)}}HundredWarManager.panelHandler.OnGetHundredWarInfoEvent.dispatch()};SocketManager.call(Command.HWRoomInfo_Req_3692,null,e,null,this)},e.prototype.reqHundredWarNoSeatInfo=function(e,t){HundredWarManager.panelHandler.hundredWarNoSeatList||(HundredWarManager.panelHandler.hundredWarNoSeatList=new Array);var n=function(e){var n,i=!1;if(e.data&&e.data.playerList){e.data.playerList.length<t&&(i=!0),qin.ArrayUtil.Clear(HundredWarManager.panelHandler.hundredWarNoSeatList);for(var a=0,o=e.data.playerList;a<o.length;a++){var r=o[a];if(!HundredWarManager.isSysBanker(r.roleId)){var s=new SimpleUserInfo;s.copyValueFrom(r),HundredWarManager.panelHandler.hundredWarNoSeatList.push(s)}}e.data.total&&(n=e.data.total)}HundredWarManager.panelHandler.OnGetHundredWarNoSeatInfoEvent.dispatch({isBottom:i,userList:HundredWarManager.panelHandler.hundredWarNoSeatList,playerNum:n})};SocketManager.call(Command.HWNoSeatInfo_Req_3696,{start:e,count:t},n,null,this)},e.prototype.reqHundredWarTrendList=function(){HundredWarManager.panelHandler.HundredWarTrendList||(HundredWarManager.panelHandler.HundredWarTrendList=new Array);var e=function(e){if(e.data.trendList){qin.ArrayUtil.Clear(HundredWarManager.panelHandler.HundredWarTrendList);for(var t=0,n=e.data.trendList;t<n.length;t++){var i=n[t],a=Array();a.push(i.p1),a.push(i.p2),a.push(i.p3),a.push(i.p4),HundredWarManager.panelHandler.HundredWarTrendList.push(a)}}HundredWarManager.panelHandler.OnGetHundredWarTrendListEvent.dispatch()};SocketManager.call(Command.HWTrend_Req_3697,null,e,null,this)},e.prototype.reqHundredWarBankerList=function(){HundredWarManager.panelHandler.HundredWarBankerList||(HundredWarManager.panelHandler.HundredWarBankerList=new Array);var e=function(e){if(e.data.bankerList){qin.ArrayUtil.Clear(HundredWarManager.panelHandler.HundredWarBankerList);for(var t=0,n=e.data.bankerList;t<n.length;t++){var i=n[t],a=void 0;HundredWarManager.isSysBanker(i.roleId)?a=new SimpleUserInfo(HundredWarManager.sysBanker):(a=new SimpleUserInfo,a.copyValueFrom(i)),HundredWarManager.panelHandler.HundredWarBankerList.push(a)}}HundredWarManager.panelHandler.OnGetHundredWarBankerListEvent.dispatch()};SocketManager.call(Command.HWbanker_Req_3698,null,e,null,this)},e.prototype.reqUpBanker=function(e){var t=function(t){var n=new SimpleUserInfo;n.copyValueFromThis(UserManager.userInfo),n.gold=e,HundredWarManager.panelHandler.HundredWarBankerList.push(n),HundredWarManager.panelHandler.onUpDownBankerEvent.dispatch(!0)};SocketManager.call(Command.HWKamisho_Req_3699,{gold:e},t,null,this)},e.prototype.reqDownBanker=function(){var e=function(e){HundredWarManager.panelHandler.isBanker()&&HundredWarManager.roomInfo.state!=HWState.WaitNext?AlertManager.showAlert("牌局正在进行中，本局结束后自动下庄！"):(HundredWarManager.panelHandler.reqHundredWarBankerList(),HundredWarManager.panelHandler.onUpDownBankerEvent.dispatch(!1))};SocketManager.call(Command.HWShimosho_Req_3700,null,e,null,this)},e.prototype.isBankerList=function(){for(var e=0,t=HundredWarManager.panelHandler.HundredWarBankerList;e<t.length;e++){var n=t[e];if(n.roleId==UserManager.userInfo.roleId)return!0}return!1},e.prototype.isBanker=function(){for(var e=0,t=HundredWarManager.roomInfo.playerList;e<t.length;e++){var n=t[e];if(n.roleId==UserManager.userInfo.roleId)return 0==n.pos?!0:!1}return!1},e.prototype.reqPoolInfo=function(){HundredWarManager.panelHandler.lastPoolInfo||(HundredWarManager.panelHandler.lastPoolInfo=new HundredWarlastPoolInfo);var e=function(e){e.data&&HundredWarManager.panelHandler.lastPoolInfo.copyValueFrom(e.data),HundredWarManager.panelHandler.OnGetHundredWarPoolInfoEvent.dispatch()};SocketManager.call(Command.HWPoolInfo_Req_3695,null,e,null,this)},e}();__reflect(HundredWarPanelHandler.prototype,"HundredWarPanelHandler");var BaseNotifyHandle=function(){function e(e){this.type=e,this.init()}return e.prototype.init=function(){},e.prototype.dispatchNotify=function(){NotifyManager.dispatchNotify(this.type)},Object.defineProperty(e.prototype,"count",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.reset=function(){},e.prototype.destroy=function(){},e}();__reflect(BaseNotifyHandle.prototype,"BaseNotifyHandle");var BaseScene=function(){function e(){this.LoadCompleteEvent=new qin.DelegateDispatcher,this.resGroupName=[]}return Object.defineProperty(e.prototype,"isResLoaded",{get:function(){return this._isResLoaded},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){if(this.clear(),void 0==this.resGroupName||this._isResLoaded)this.onResourceLoadComplete(null);else{this.loadCount=0,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this);for(var e=0,t=this.resGroupName;e<t.length;e++){var n=t[e];RES.loadGroup(n)}}},e.prototype.onResourceLoadComplete=function(e){e&&(-1!=this.resGroupName.indexOf(e.groupName)&&this.loadCount++,this.loadCount==this.resGroupName.length&&(this._isResLoaded=!0)),this._isResLoaded&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this))},e.prototype.onResourceProgress=function(e){qin.Console.log("场景资源加载地址："+e.resItem.url),SceneManager.updateSwitchProgress(e.itemsLoaded/e.itemsTotal)},e.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load")},e.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},e}();__reflect(BaseScene.prototype,"BaseScene");var TimeAwardHandler=function(){function e(){this.startTimeFlag=!0,this.isEffectTime=!1,this.isGetTimeAward=!1,this.GetTimeAwardInfoEvent=new qin.DelegateDispatcher,this.getTimeAwardEvent=new qin.DelegateDispatcher,this.BringTimeAwardEvent=new qin.DelegateDispatcher,this.TimeAwardCountDownEvent=new qin.DelegateDispatcher,this.TimeAwardInfoEvent=new qin.DelegateDispatcher}return e.prototype.reset=function(){this.time=void 0,this.round=void 0,qin.ArrayUtil.Clear(this.timeAwardList)},e.prototype.addPushListener=function(){SocketManager.AddCommandListener(Command.TimeAwardRefresh_Push_2122,this.refreshTimeAwardTime,this)},e.prototype.initialize=function(e,t){void 0===t&&(t=0),this.reset(),this.round=e,this.time=t,this.TimeAwardInfoEvent.dispatch()},e.prototype.refreshTimeAwardTime=function(e){e.data&&(e.data.startTime?(this.isEffectTime=!0,e.data.secTime&&this.setInitInfo(this.round,e.data.secTime,e.data.startTime),GamblingManager.timeAwardHandler.startTimeFlag&&GamblingManager.self&&!GamblingManager.timeAwardHandler.isGetTimeAward&&GamblingManager.timeAwardHandler.startCountDown()):e.data.secTime&&(this.isEffectTime=!1,GamblingManager.timeAwardHandler.stopCountDown()))},e.prototype.reqGetTimeAwardInfo=function(e){var t=function(e){if(e.data){if(void 0==e.data.round&&(e.data.round=0),0==e.data.round&&void 0==e.data.secTime){var t=TimeAwardDefined.GetInstance().getDefinition(1);return void this.initialize(0,t.time)}e.data.round<TimeAwardDefined.GetInstance().dataList.length?this.setInitInfo(e.data.round,e.data.secTime,e.data.startTime):this.initialize(e.data.round)}};e==PlayingFieldType.Personal&&(e=PlayingFieldType.High),SocketManager.call(Command.TimeAwardInfo_Req_3620,{roomType:e},t,null,this)},e.prototype.setInitInfo=function(e,t,n){var i=TimeAwardDefined.GetInstance().getDefinition(e+1);i&&(t<i.time?void 0==n?this.initialize(e,i.time-t+3):this.initialize(e,i.time-(Math.round(TimeManager.GetServerUtcTimestamp())-n+t)+3):this.initialize(e))},e.prototype.reqGetTimeAward=function(e){SocketManager.call(Command.TimeAwardGet_Req_3621,{roomType:e},this.getTimeAwardResponse,null,this)},e.prototype.getTimeAwardResponse=function(e){PropertyManager.ShowItemList(),this.round++;var t=TimeAwardDefined.GetInstance().getDefinition(this.round+1);t&&(this.time=t.time),this.GetTimeAwardInfoEvent.dispatch()},e.prototype.getTimeAward=function(e){var t=TimeAwardDefined.GetInstance().dataList;if(t){qin.ArrayUtil.Clear(this.timeAwardList),this.timeAwardList||(this.timeAwardList=new Array);for(var n=0,i=t;n<i.length;n++){var a=i[n],o=new TimeAwardInfo;o.num=a.awardList[e-1],this.round&&a.id<=this.round&&(o.isBring=1),o.icon=SheetSubName["TimeAwardGold"+a.id],this.timeAwardList.push(o)}}this.getTimeAwardEvent.dispatch()},e.prototype.startCountDown=function(){GamblingUtil.isRace||(qin.Tick.AddSecondsInvoke(this.countDown,this),this.startTimeFlag=!1)},e.prototype.countDown=function(){if(InfoUtil.checkAvailable(GamblingManager.roomInfo)){if(this.time>0&&this.time--,this.TimeAwardCountDownEvent.dispatch(),this.time<=0){this.stopCountDown();var e=TimeAwardDefined.GetInstance().getDefinition(this.round+1);if(e){var t=void 0;t=e.awardList[GamblingManager.roomInfo.definition.type-1],UIManager.showPanel(UIModuleName.GetTimeAwardRemindPanel,{round:this.round,num:t,pattern:GamblingManager.roomInfo.definition.type})}this.isGetTimeAward=!0,this.BringTimeAwardEvent.dispatch()}}else this.stopCountDown()},e.prototype.stopCountDown=function(){qin.Tick.RemoveSecondsInvoke(this.countDown,this),this.startTimeFlag=!0},e}();__reflect(TimeAwardHandler.prototype,"TimeAwardHandler");var BaseBannerRemindPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.layer=UILayerType.Guide},t.prototype.init=function(t){e.prototype.init.call(this,t),t&&(this.des=t),this.countDownNum=3},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.setRemindInfo(),this.enterAnime(),this.countDown(),qin.Tick.AddSecondsInvoke(this.countDown,this)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),qin.Tick.RemoveSecondsInvoke(this.countDown,this)},t.prototype.setRemindInfo=function(){this.desLabel.text=this.des},t.prototype.enterAnime=function(){egret.Tween.removeTweens(this.anmGroup);var e=egret.Tween.get(this.anmGroup);this.anmGroup.y=-100,e.to({y:0},200)},t.prototype.outAnime=function(){var e=egret.Tween.get(this.anmGroup);this.anmGroup.y=0,e.to({y:-100},200).call(this.onCloseAnmComplete,this)},t.prototype.onCloseAnmComplete=function(){UIManager.closePanel(this)},t.prototype.onCloseBtnClickHandler=function(e){ChampionshipManager.mttRemindStartHandler.ResetThreeMinFlagEvent.dispatch(),this.outAnime()},t.prototype.countDown=function(){this.countDownNum--,this.countDownNum<=0&&(qin.Tick.RemoveSecondsInvoke(this.countDown,this),ChampionshipManager.mttRemindStartHandler.ResetThreeMinFlagEvent.dispatch(),this.outAnime())
},t}(BasePanel);__reflect(BaseBannerRemindPanel.prototype,"BaseBannerRemindPanel");var HappyGiftHandler=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankList=new qin.Dictionary,t.takePrizeCompleteEvent=new qin.DelegateDispatcher,t}return __extends(t,e),t.prototype.clear=function(){e.prototype.clear.call(this),this.rankList.clear()},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),ActivityManager.onReqSingleActivityEvent.addListener(this.refreshActivityInfo,this);for(var n,i,a=0;a<ActivityHappyGiftDefined.GetInstance().dataList.length;a++)n=ActivityHappyGiftDefined.GetInstance().dataList[a],i=this.addSubInfo(t,HappyGiftItemInfo,n),i&&(i.buyTime=0);this.setGotJson(t)},t.prototype.refreshActivityInfo=function(t){e.prototype.refreshActivityInfo.call(this,t);var n=this.getInfo(t);InfoUtil.checkAvailable(n)&&n.definition.type==ActivityType.HappyGift&&this.setGotJson(n)},t.prototype.setGotJson=function(e){if(e)for(var t in e.gotJsonObj){var n=this.getSubInfo(e.id,parseInt(t));n&&(n.buyTime=e.gotJsonObj[t])}},t.prototype.getHaveTakenPrizeList=function(e){var t=new Array,n=this.getInfo(e);if(n&&n.subList)for(var i=0,a=n.subList;i<a.length;i++){var o=a[i],r=o;r.buyTime>0&&t.push(r)}return t},t.prototype.joinActivityResult=function(t,n){e.prototype.joinActivityResult.call(this,t,n);var i=this.getSubInfo(t,n);if(InfoUtil.checkAvailable(i)){var a=this.getInfo(t);a&&(a.step-=i.definition.cost),i.buyTime++}this.takePrizeCompleteEvent.dispatch()},t}(BaseActivitySubHandler);__reflect(HappyGiftHandler.prototype,"HappyGiftHandler");var HappyGiftItemInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.trySetDefinition=function(){e.prototype.trySetDefinition.call(this),this._definition=ActivityHappyGiftDefined.GetInstance().getSubDefinition(this._id,this._subId)},Object.defineProperty(t.prototype,"awardInfoDef",{get:function(){if(this.definition){var e=AwardDefined.GetInstance().getDefinition(this.definition.awardId);if(e)return e}return null},enumerable:!0,configurable:!0}),t}(BaseActivitySubInfo);__reflect(HappyGiftItemInfo.prototype,"HappyGiftItemInfo");var AchieveProcessManager=function(){function e(){}return e.Initialize=function(t){if(e.ClearList(),e.initList(),t.data.groupList)for(var n=0,i=t.data.groupList;n<i.length;n++)for(var a=i[n],o=0,r=e._list;o<r.length;o++){var s=r[o];if(s.group==a.group){s.init(a.process);break}}if(t.data.achieveList)for(var l=0,h=t.data.achieveList;l<h.length;l++)for(var a=h[l],d=0,c=UserManager.userInfo.allAchieveList;d<c.length;d++){var p=c[d];p.id==a.id&&(p.isTake=!0)}},e.getAchieveProcessInfoByGroup=function(t){for(var n=0,i=e._list;n<i.length;n++){var a=i[n];if(a.group==t)return a}return null},e.getAchieveProcessListByTag=function(t){for(var n=new Array,i=0,a=e._list;i<a.length;i++){var o=a[i];o.tag==t&&n.push(o)}return n},e.GetProcess=function(t){var n;switch(t){case AchieveGroup.GoldGroup:n=new GoldProcess(t);break;case AchieveGroup.FriendGroup:n=new FriendProcess(t);break;case AchieveGroup.LevelGroup:n=new LevelProcess(t);break;case AchieveGroup.OnePairGroup:n=new OnePairProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.TwoPairsGroup:n=new TwoPairsProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.ThreeOfAKindGroup:n=new ThreeOfAKindProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.StraightGroup:n=new StraightProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.FlushGroup:n=new FlushProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.FullhouseGroup:n=new FullhouseProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.FourOfAKindGroup:n=new FourOfAKindProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.StraightFlushGroup:n=new StraightFlushProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.RoyalFlushGroup:n=new RoyalFlushProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.PrimaryPatternGroup:n=new PrimaryPatternProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.MiddlePatternGroup:n=new MiddlePatternProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.HighPatternGroup:n=new HighPatternProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.WinGroup:n=new WinProcess(t),e._playOverList.list.push(n);break;case AchieveGroup.LevelUpGroup:n=new LevelUpProcess(t);break;case AchieveGroup.JoinMTTGroup:n=new JoinMTTProcess(t);break;case AchieveGroup.WinMTTGroup:n=new WinMTTProcess(t);break;case AchieveGroup.HWFunPatternGroup:n=new HundredWarFunPatternProcess(t);break;case AchieveGroup.HWRichPatternGroup:n=new HundredWarRichPatternProcess(t);break;case AchieveGroup.WinHWGroup:n=new WinHundredWarProcess(t)}return n},e.initList=function(){e._list||(e._list=new Array),e._playOverList||(e._playOverList=new AchieveProcessInfoList(AchieveType.PlayOver));for(var t=0,n=AchieveDefined.GetInstance().getAchieveGroup();t<n.length;t++){var i=n[t],a=e.GetProcess(i);a.group==AchieveGroup.LevelUpGroup||a.group==AchieveGroup.LevelGroup?a.init(UserManager.userInfo.level):a.group==AchieveGroup.GoldGroup?a.init(UserManager.userInfo.maxGold):a.init(0),e._list.push(a)}},e.ClearList=function(){if(null!=e._list){for(var t=0;t<e._list.length;t++)e._list[t].destroy();qin.ArrayUtil.Clear(e._list)}},e.addProcessListener=function(e,t,n){switch(e){case AchieveType.Gold:UserManager.propertyChangeEvent.addListener(t,n);break;case AchieveType.Friend:FriendManager.onRefreshInfoEvent.addListener(t,n);break;case AchieveType.Level:UserManager.levelUpgrade.addListener(t,n);case AchieveType.PlayOver:GamblingManager.RoundOverEvent.addListener(t,n)}},e.removeProcessListener=function(e,t,n){switch(e){case AchieveType.Gold:UserManager.propertyChangeEvent.removeListener(t,n);break;case AchieveType.Friend:FriendManager.onRefreshInfoEvent.removeListener(t,n);break;case AchieveType.Level:UserManager.levelUpgrade.removeListener(t,n);case AchieveType.PlayOver:GamblingManager.RoundOverEvent.addListener(t,n)}},e.onWinOfPlayField=function(t,n){var i=GamblingManager.roundOverInfo;i&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&n==AchievementManager.playingFieldTypeToAchieveShowPattern(GamblingManager.roomInfo.definition.type)&&e.isOnPlay()&&(t.process++,t.init(t.process))},e.onPlayHWField=function(e,t){InfoUtil.checkAvailable(HundredWarManager.roomInfo)&&HundredWarManager.roomInfo.definition.type==t&&0!=HundredWarManager.getThisBetGold()&&(e.process++,e.init(e.process))},e.isOnPlay=function(){return GamblingManager.self&&GamblingManager.self.state!=PlayerState.WaitNext?!0:!1},e.onWinOfCardType=function(e,t){if(GamblingUtil.isWin(UserManager.userInfo.roleId)){var n=GamblingManager.roomInfo.handCard;n&&(CardTypeMatchUtil.matchCardInRoom(n),CardTypeMatchUtil.cardType==t&&(e.process++,e.init(e.process)))}},e.processUpdateEvent=new qin.DelegateDispatcher,e}();__reflect(AchieveProcessManager.prototype,"AchieveProcessManager");var AchieveProcessInfoList=function(){function e(e){this.list=new Array,this.type=e,AchieveProcessManager.addProcessListener(this.type,this.onProcessUpdate,this)}return e.prototype.onProcessUpdate=function(){for(var e=0,t=this.list;e<t.length;e++){var n=t[e];n.onProcessUpdate()}},e.prototype.clear=function(){AchieveProcessManager.removeProcessListener(this.type,this.onProcessUpdate,this)},e}();__reflect(AchieveProcessInfoList.prototype,"AchieveProcessInfoList");var BaseAchieveProcessInfo=function(){function e(e){this.group=e,this.process=0,this.achieveList=new Array;for(var t=0,n=UserManager.userInfo.allAchieveList;t<n.length;t++){var i=n[t];if(i.definition&&i.definition.group==this.group){this.achieveList.push(i);var a=AchievementManager.getAchieveInfoById(UserManager.userInfo.allAchieveList,i.id),o=AchievementManager.getAchieveInfoById(UserManager.userInfo.allAchieveList,i.definition.preId);o&&!o.isComplete||a.isComplete||(this.step=a.id)}}if(this.achieveList.length>0){var r=this.achieveList[0].definition;r&&(this.type=r.type,this.tag=r.tag,this.dailyQuest=r.dailyQuest)}}return Object.defineProperty(e.prototype,"takeStep",{get:function(){for(var e=0;e<this.achieveList.length;e++)if(!this.achieveList[e].isTake)return this.achieveList[e].id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTakeComplete",{get:function(){return void 0==this.takeStep},enumerable:!0,configurable:!0}),e.prototype.init=function(e){this.process=e;for(var t=0,n=this.achieveList;t<n.length;t++){var i=n[t];if(i.definition){if(!(i.definition.para1<=e)){this.step=i.id;break}i.isComplete=!0}}},e.prototype.onProcessUpdate=function(e){AchieveProcessManager.processUpdateEvent.dispatch(e)},e.prototype.getCurrentAchieveInfo=function(){for(var e=0,t=this.achieveList;e<t.length;e++){var n=t[e];if(n.id==this.step)return n}return null},e.prototype.resetProcess=function(){this.process=0;for(var e=0,t=this.achieveList;e<t.length;e++){var n=t[e];n.isComplete=!1,n.isTake=!1}this.achieveList.length>0&&(this.step=this.achieveList[0].id)},e.prototype.destroy=function(){},e}();__reflect(BaseAchieveProcessInfo.prototype,"BaseAchieveProcessInfo");var BaseGamblingSlotComponent=function(e){function t(t,n){var i=e.call(this,t)||this;return i.layerType=n,i}return __extends(t,e),t}(BaseComponent);__reflect(BaseGamblingSlotComponent.prototype,"BaseGamblingSlotComponent");var BaseGamblingHeadState=function(){function e(e){this.context=e}return e.prototype.run=function(e){this.context.hideAll()},e}();__reflect(BaseGamblingHeadState.prototype,"BaseGamblingHeadState");var GamblingHeadStateType;!function(e){e[e.Empty=0]="Empty",e[e.SitDown=1]="SitDown",e[e.WaitNext=2]="WaitNext",e[e.RoundStart=3]="RoundStart",e[e.WaitAction=4]="WaitAction",e[e.OnAction=5]="OnAction",e[e.Actioned=6]="Actioned",e[e.FoldCard=7]="FoldCard",e[e.ThanTheCard=8]="ThanTheCard"}(GamblingHeadStateType||(GamblingHeadStateType={}));var HeadComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultSize=150,t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.userImg=new egret.Bitmap,this.addChildAt(this.userImg,0)},t.prototype.init=function(t,n){e.prototype.init.call(this,t),this.touchChildren=!1,(this.headPath!=this.bindData.head||void 0==this.headPath)&&(this.headPath=this.bindData.head,this.loadHead(this.bindData.head)),(n!=this._size||void 0==this._size)&&(void 0==n?this._size=this.defaultSize:this._size=n,this.userImg.width=this._size,this.userImg.height=this._size,this.width=this.height=this._size)},t.prototype.loadHead=function(e){var t=this;if(!e)return qin.Console.log("头像为空"),this.userImg.texture=null,void this.drawHead(!0);if(UploadHeadManager.isDefaultHead(e))this.userImg.texture=RES.getRes(e),this.drawHead(!0);else{var n="";n=-1!=e.indexOf("http://")?e:ProjectDefined.GetInstance().getStorageHost(VersionManager.isServerTest)+e;var i=ResCacheManager.getRes(resCacheType.Head,n);if(i)return this.userImg.texture=i,void this.drawHead(!1);RES.getResByUrl(n,function(i,a){var o=i;if(o instanceof egret.Texture)t.userImg.texture=o,t.drawHead(!1),ResCacheManager.addRes(resCacheType.Head,n,o);else{var r=new egret.Texture;try{var s=egret.BitmapData.create("base64",i);s?(r.bitmapData=s,t.userImg.texture=r,t.drawHead(!1),ResCacheManager.addRes(resCacheType.Head,n,o)):(t.userImg.texture=RES.getRes(SheetSubName.getdefaultHead(t.bindData.sex)),t.drawHead(!0),qin.Console.logError("头像数据转换失败！头像路径："+e))}catch(l){t.userImg.texture=RES.getRes(SheetSubName.getdefaultHead(t.bindData.sex)),t.drawHead(!0),qin.Console.logError("头像数据转换失败！头像路径："+e)}}},this,RES.ResourceItem.TYPE_IMAGE)}},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.setHeadVisible=function(e){this.userImg&&(this.userImg.visible=e)},t.prototype.drawHead=function(e){},t}(BaseComponent);__reflect(HeadComponent.prototype,"HeadComponent");var BaseRegisterTelPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.isCloseButtonTween=!0,this.accountLabel.type=egret.TextFieldType.INPUT,this.accountLabel.inputType=egret.TextFieldInputType.TEL,this.accountLabel.restrict="0-9",this.accountLabel.maxChars=11,this.codeLabel.type=egret.TextFieldType.INPUT,this.pwdLabel.type=egret.TextFieldType.INPUT,this.pwdLabel.inputType=egret.TextFieldInputType.PASSWORD,this.pwdLabel1.type=egret.TextFieldType.INPUT,this.pwdLabel1.inputType=egret.TextFieldInputType.PASSWORD,this._anime=new PanelAnime(this)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.reset()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.registerClickHandler,this),this.sendCodeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sencCodeClickHandler,this),this.accountLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.accountValidate,this),this.codeLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.codeValidate,this),this.pwdLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.pwdValidate,this),this.pwdLabel1.addEventListener(egret.FocusEvent.FOCUS_OUT,this.pwd1Validate,this),AccountManager.OnPhoneRegister.addListener(this.sendCodeSuccess,this),AccountManager.OnRegisterSuccess.addListener(this.registerSuccessHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.registerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.registerClickHandler,this),this.sendCodeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sencCodeClickHandler,this),this.accountLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.accountValidate,this),this.codeLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.codeValidate,this),this.pwdLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.pwdValidate,this),this.pwdLabel1.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.pwd1Validate,this),AccountManager.OnPhoneRegister.removeListener(this.sendCodeSuccess,this),AccountManager.OnRegisterSuccess.removeListener(this.registerSuccessHandler,this),UserUtil.removeCodeCountDown()},t.prototype.reset=function(){this.pwdErrorLabel.text=this.telErrorLabel.text="",UserUtil.initCode(this.sendCodeBtn)},t.prototype.clearTelError=function(){this.telErrorLabel.text=""},t.prototype.clearPwdError=function(){this.pwdErrorLabel.text=""},t.prototype.registerClickHandler=function(e){SoundManager.playButtonEffect(e.target);var t=this.pwdLabel1.text.trim(),n=this.pwdLabel.text.trim();this.accountValidate()&&this.codeValidate()&&UserUtil.checkTwoPwd(n,t,16,6,this.pwdErrorLabel)&&AccountManager.PhoneRegisterVerify(this.accountLabel.text.trim(),this.codeLabel.text.trim(),this.pwdLabel.text.trim())},t.prototype.sencCodeClickHandler=function(e){SoundManager.playButtonEffect(e.target),this.accountValidate()&&AccountManager.PhoneRegister(this.accountLabel.text.trim())},t.prototype.sendCodeSuccess=function(){UserUtil.addCodeCountDown({sendCodeBtn:this.sendCodeBtn,leftTime:this.leftTime})},t.prototype.accountValidate=function(){var e=this.accountLabel.text.trim();return e?UserUtil.phoneNumIsValidate(e)?(this.clearTelError(),!0):(this.telErrorLabel.text="*手机号格式不正确",!1):(this.telErrorLabel.text="*手机号不能为空",!1)},t.prototype.codeValidate=function(){var e=this.codeLabel.text.trim();return e?(this.clearTelError(),!0):(this.telErrorLabel.text="*请填写手机验证码",!1)},t.prototype.pwdValidate=function(){var e=this.pwdLabel.text.trim();UserUtil.checkPwd(e,16,6,this.pwdErrorLabel)&&(this.pwdErrorLabel.text="")},t.prototype.pwd1Validate=function(){var e=this.pwdLabel1.text.trim(),t=this.pwdLabel.text.trim();UserUtil.checkTwoPwd(t,e,16,6,this.pwdErrorLabel)&&(this.pwdErrorLabel.text="")},t.prototype.registerSuccessHandler=function(e){var t=this;AlertManager.showAlert("注册成功！",function(){AccountManager.OnLoginSuccess.dispatch({token:e.token,uid:e.uid}),t.onCloseBtnClickHandler(null)})},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e),e&&this.showPrePanelName()},t}(BasePanel);__reflect(BaseRegisterTelPanel.prototype,"BaseRegisterTelPanel");var BaseRetrievePwdPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.telephoneLabel.inputType=egret.TextFieldInputType.TEL,this.telephoneLabel.restrict="0-9",this.telephoneLabel.maxChars=11,this.verificationCodeLabel.inputType=egret.TextFieldInputType.TEL,this.verificationCodeLabel.restrict="0-9",this.verificationCodeLabel.maxChars=6},t.prototype.init=function(t){e.prototype.init.call(this,t),UserUtil.initCode(this.sendCodeBtn),this.phoneErrorLabel.text="",this.pwdErrorLabel.text="",this.telephoneLabel.text="",this.verificationCodeLabel.text=""},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnClick,this),this.sendCodeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendCodeBtnClick,this),this.telephoneLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onPhoneLabelFouseOut,this),this.verificationCodeLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onCodeLabelFouseOut,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnClick,this),this.sendCodeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sendCodeBtnClick,this),this.telephoneLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onPhoneLabelFouseOut,this),this.verificationCodeLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onCodeLabelFouseOut,this),UserUtil.removeCodeCountDown()},t.prototype.onCloseBtnClick=function(e){SoundManager.playButtonEffect(e.target),UIManager.closePanel(UIModuleName.KeyBoardPanel)},t.prototype.onPhoneLabelFouseOut=function(e){UserUtil.phoneNumIsValidate(this.telephoneLabel.text)?this.phoneErrorLabel.text="":this.phoneErrorLabel.text="您输入的手机号错误，请重新输入！"},t.prototype.sendCodeBtnClick=function(e){UserUtil.phoneNumIsValidate(this.telephoneLabel.text)?(SoundManager.playButtonEffect(e.target),this.phoneErrorLabel.text="",this.sendCodeRes()):this.phoneErrorLabel.text="您输入的手机号错误，请重新输入！"},t.prototype.onCodeLabelFouseOut=function(e){this.codeValidate(!0)},t.prototype.onConfirmClick=function(e){SoundManager.playButtonEffect(e.target)},t.prototype.sendCodeRes=function(){},t.prototype.sendCodeSuccess=function(){UserUtil.addCodeCountDown({sendCodeBtn:this.sendCodeBtn,leftTime:this.leftTime})},t.prototype.codeValidate=function(e){void 0===e&&(e=!1);var t=this.verificationCodeLabel.text.trim();return t&&6==t.length?(this.phoneErrorLabel.text="",!0):(e&&(this.phoneErrorLabel.text="您输入的验证码错误，请重新输入！"),!1)},t}(BasePanel);__reflect(BaseRetrievePwdPanel.prototype,"BaseRetrievePwdPanel");var EnterRoomPwdPanel=function(e){function t(t){var n=e.call(this)||this;n._isShowKeyBoardPanel=!0;for(var i=1;6>=i;i++)n["label"+i.toString()]=new NumComponent(UIComponentSkinName.NumComponent);return t||n.setSkinName(UIModuleName.EnterRoomPwdPanel),n}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this._labelList=new Array;for(var n=1;6>=n;n++)this._labelList.push(this["label"+n.toString()]),this.labelGroup.addChild(this["label"+n.toString()]);this.setAlignInfo(PanelAlignType.Center_Center,0,-100),this.callback=this.enterPwd},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.resetLabel(),this._isShowKeyBoardPanel&&UIManager.showPanel(UIModuleName.KeyBoardPanel,{callback:this.callback,target:this,isbgNotCanClick:!0,isNotHasMask:!0})},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),GamblingManager.OnGetRoomInfoEvent.addListener(this.onCloseBtnClickHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),GamblingManager.OnGetRoomInfoEvent.removeListener(this.onCloseBtnClickHandler,this)},Object.defineProperty(t.prototype,"isShowKeyBoardPanel",{set:function(e){this._isShowKeyBoardPanel=e},enumerable:!0,configurable:!0}),t.prototype.onCloseBtnClickHandler=function(t){e.prototype.onCloseBtnClickHandler.call(this,t),PlayingFieldManager.onCloseKeyboardEvent.dispatch(),this.resetLabel()},t.prototype.resetLabel=function(){for(var e=0,t=this._labelList;e<t.length;e++){var n=t[e];n.refresh()}},t.prototype.enterPwd=function(e,t){if(t){var n=this.getUnWriteLabel();n&&n.refresh(parseInt(t))}if(1==e){var i=this.getRoomPwd();i.length>5&&GamblingManager.reqEnterRoom(parseInt(PlayingFieldManager.roomId),i)}else if(2==e){var a=this.getWirteLabel();a&&a.refresh()}else 3==e&&this.resetLabel()},t.prototype.getUnWriteLabel=function(){for(var e,t=0;t<this._labelList.length;t++)if(e=this._labelList[t],e.label1&&!e.label1.text)return e;return null},t.prototype.getWirteLabel=function(){for(var e,t=this._labelList.length-1;t>=0;t--)if(e=this._labelList[t],e.label1&&e.label1.text)return e;return null},t.prototype.getRoomPwd=function(){for(var e=qin.StringConstants.Empty,t=0;t<this._labelList.length;t++)e+=this._labelList[t].label1.text;return e},t}(BasePanel);__reflect(EnterRoomPwdPanel.prototype,"EnterRoomPwdPanel");var TextInfoPanel=function(e){function t(t){var n=e.call(this)||this;return n._txtCount=24,n._contentList=new Array,t||n.setSkinName(UIModuleName.TextInfoPanel),n}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!0,this.maskAlpha=.5,this.txtGroupScroller.scrollPolicyH=eui.ScrollPolicy.OFF},t.prototype.init=function(t){this._lastShowContainer?t==this.panelData?this._lastShowContainer.visible=!0:this._lastShowContainer.visible=!1:(this.txtList.visible=!1,this.txtGroup.visible=!1),e.prototype.init.call(this,t),this._def=TextDefined.GetInstance().getDefinition(this.panelData),this.contentContainerOper()},t.prototype.contentContainerOper=function(){this._def&&(this._def.isRichTxt?this.txtGroupScroller.viewport=this.txtGroup:this.txtGroupScroller.viewport=this.txtList)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),UIUtil.hideScrollerBar(this.txtGroupScroller,!0,!1),this._def&&(this._def.url&&(this.titleImg.source=this._def.url),this._def.isRichTxt?(this.txtLabel.textFlow=qin.TextUtil.parse(this._def.text),this.txtGroup.visible=!0,this._lastShowContainer=this.txtGroup):(this.txtList.visible=!0,this._lastShowContainer=this.txtList,this.contentOper(),UIUtil.listRenderer(this.txtList,this.txtGroupScroller,TextRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,this._contentList,!0))),this.txtGroupScroller.stopAnimation(),this.txtGroupScroller.viewport.scrollV=0},t.prototype.contentOper=function(){qin.ArrayUtil.Clear(this._contentList);var e=this._def.text,t="\n";if(-1==e.indexOf(t))this._contentList.push(e);else for(var n=0,i=qin.StringConstants.Empty,a=void 0;e.length>0;){if(n=e.indexOf(t),-1==n){this._contentList.push(e);break}if(a=e.slice(0,n+1),e=e.slice(n+1,e.length),a.length>this._txtCount)for(;a.length>0;)i=a.slice(0,this._txtCount)+t,this._contentList.push(i),a=a.substring(this._txtCount,a.length);else this._contentList.push(a)}},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t)},t}(BasePanel);__reflect(TextInfoPanel.prototype,"TextInfoPanel");var BaseActivityPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),this.activityInfo=t.info},t}(BasePanel);__reflect(BaseActivityPanel.prototype,"BaseActivityPanel");var BaseGamblingPanelSupport=function(){function e(e){this.target=e}return e.prototype.initialize=function(){this.isDisabled=!1},e.prototype.onEnable=function(){this.isDisabled=!1},e.prototype.onDisable=function(){this.isDisabled=!0},e.prototype.clear=function(){},e}();__reflect(BaseGamblingPanelSupport.prototype,"BaseGamblingPanelSupport");var BaseGamblingPanelState=function(){function e(e,t){this.gb_parent="gb_parent",this.gb_index="gb_index",this.context=e,this.supportList=t}return Object.defineProperty(e.prototype,"componentList",{get:function(){return this._componentList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return!this._component&&this._componentList&&this._componentList.length>0?this._componentList[0]:null},enumerable:!0,configurable:!0}),e.prototype.onAwake=function(){},e.prototype.initialize=function(){for(var e,t=this.supportList.length,n=0;t>n;n++)e=this.supportList[n],e.initialize()},e.prototype.run=function(){this.showElements()},e.prototype.createComponent=function(e,t,n){this._componentList||(this._componentList=new Array),e&&this._componentList.push(new e(t,n))},e.prototype.showElements=function(){if(UIUtil.clearLayout(this.context.slotContainerUp),UIUtil.clearLayout(this.context.slotContainerDown),this._componentList)for(var e=0,t=this._componentList;e<t.length;e++){var n=t[e];switch(n.layerType){case SlotLayerType.Down:this.context.slotContainerDown.addChild(n);break;case SlotLayerType.Up:this.context.slotContainerUp.addChild(n);break;default:qin.Console.log("牌局面板插槽类型异常！"+n.layerType)}}},e.prototype.onEnable=function(){for(var e,t=this.supportList.length,n=0;t>n;n++)e=this.supportList[n],e.onEnable()},e.prototype.onDisable=function(){for(var e,t=this.supportList.length,n=0;t>n;n++)e=this.supportList[n],e.onDisable()},e.prototype.clear=function(){this.context.slotContainerDown.removeChildren(),this.context.slotContainerUp.removeChildren()},e.prototype.addChild=function(e){if(e&&e.parent)e[this.gb_parent]=e.parent,e[this.gb_index]=e.parent.getChildIndex(e);else if(e&&e[this.gb_parent]){e[this.gb_parent].addChildAt(e,e[this.gb_index])}else qin.Console.logError("牌局切换状态，添加对象显示失败："+e)},e.prototype.removeChild=function(e){e&&e.parent?(e[this.gb_parent]=e.parent,e[this.gb_index]=e.parent.getChildIndex(e),e.parent.removeChild(e)):qin.Console.logError("牌局切换状态，移除对象显示失败："+e)},e.prototype.getCompoent=function(e){if(this._componentList)for(var t=0,n=this._componentList;t<n.length;t++){var i=n[t];if(i instanceof e)return i}return null},e}();__reflect(BaseGamblingPanelState.prototype,"BaseGamblingPanelState");var BaseGameHallAnime=function(){function e(e){this.target=e}return e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e}();__reflect(BaseGameHallAnime.prototype,"BaseGameHallAnime");var BaseHWPanelSupport=function(){function e(e){this.target=e}return e.prototype.initialize=function(){this.isDisabled=!1},e.prototype.onEnable=function(){this.isDisabled=!1},e.prototype.onDisable=function(){this.isDisabled=!0},e.prototype.clear=function(){},e}();__reflect(BaseHWPanelSupport.prototype,"BaseHWPanelSupport");var BaseItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){this.bindData=this.data},t.prototype.destroy=function(){},t}(eui.ItemRenderer);__reflect(BaseItemRenderer.prototype,"BaseItemRenderer");var SimpleUserInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"verifyHead",{get:function(){return this._verifyHead},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return qin.StringUtil.isNullOrEmpty(this._head)?SheetSubName.getdefaultHead(this.sex):this._head},set:function(e){if(this._isHeadUnPass=!1,this._isHeadVerify=!1,0==qin.StringUtil.isNullOrEmpty(e)&&(this._isHeadVerify=-1!=e.indexOf(GameSetting.HeadUploadVerifySign),this._isHeadUnPass=-1!=e.indexOf(GameSetting.HeadUploadUnPassSign),this._isHeadVerify)){var t=e.split(GameSetting.HeadUploadVerifySign);e=t[0],this._verifyHead=t[1]}this._head=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHeadVerify",{get:function(){return this._isHeadVerify},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHeadUnPass",{get:function(){return this._isHeadUnPass},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.roleId=0,this.head=null,this.name=null,this.sex=void 0,this.gold=void 0,this.vipLevel=void 0},t}(BaseServerValueInfo);__reflect(SimpleUserInfo.prototype,"SimpleUserInfo");var AccountHandler=function(){function e(){}return e.prototype.Login=function(e){AccountManager.Initialize(GameSetting.AppId,ChannelManager.channelType,ChannelManager.deviceId,ProjectDefined.GetInstance().getValue(ProjectDefined.usePhone)),this.RemoveQinEvents(),AccountManager.OnLoginCancel.addListener(this.OnQinLoginCancel,this),AccountManager.OnLoginSuccess.addListener(this.OnQinLoginSuccess,this),AccountManager.ShowLogin(e)},e.prototype.Logout=function(){AccountManager.Logout(),ChannelManager.sdk_Logout()},e.prototype.RemoveQinEvents=function(){AccountManager.OnLoginCancel.removeListener(this.OnQinLoginCancel,this),AccountManager.OnLoginSuccess.removeListener(this.OnQinLoginSuccess,this)},e.prototype.OnQinLoginSuccess=function(e){this.RemoveQinEvents(),ChannelManager.OnTokenLoginSucceed.dispatch(e.token)},e.prototype.OnQinLoginCancel=function(){this.RemoveQinEvents(),ChannelManager.OnLoginFailed.dispatch()},e}();__reflect(AccountHandler.prototype,"AccountHandler");var ChannelBase=function(){function e(){}return e.prototype.Login=function(e,t){},e.prototype.PaySend=function(e,t,n,i,a,o){},e.prototype.share=function(e,t,n){},e.prototype.imageSelect=function(e,t){},e.prototype.openURL=function(e){window.open(e,"_blank")},e.prototype.sdkPaySucceed=function(e){},e.prototype.sdkPayFailed=function(){},e.prototype.checkUnFinishedPayList=function(){},e}();__reflect(ChannelBase.prototype,"ChannelBase");var PayPrizeHandler=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firstPayCompleteEvent=new qin.DelegateDispatcher,t}return __extends(t,e),t.prototype.getIsFirstPay=function(e){var t=this.getInfo(e);return t?t.step>0:!1},t.prototype.getIsShow=function(e){if(VersionManager.isSafe)return!1;var t=TimeManager.loginTimestamp-UserManager.userInfo.createdTime;return t>300&&!this.getIsFirstPay(e)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t);for(var n,i,a=0;a<ActivityPayPrizeDefined.GetInstance().dataList.length;a++)n=ActivityPayPrizeDefined.GetInstance().dataList[a],i=this.addSubInfo(t,PayPrizeInfo,n)},t.prototype.joinActivityResult=function(e,t){switch(e){case ActivityId.FirstPay:var n=this.getInfo(ActivityId.FirstPay);n&&1==n.step,this.firstPayCompleteEvent.dispatch()}},t}(BaseActivitySubHandler);__reflect(PayPrizeHandler.prototype,"PayPrizeHandler");var PayPrizeInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.trySetDefinition=function(){e.prototype.trySetDefinition.call(this),this._definition=ActivityPayPrizeDefined.GetInstance().getSubDefinition(this._id,this._subId)},t}(BaseActivitySubInfo);__reflect(PayPrizeInfo.prototype,"PayPrizeInfo");var BaseActivitySubDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getSubDefinition=function(e,t){if(this.dataList)for(var n=0,i=this.dataList;n<i.length;n++){var a=i[n];if(a.id==e&&a.subId==t)return a}return qin.Console.log("获取活动子表定义异常！Id:"+e+" subId:"+t),null},t}(BaseDefined);__reflect(BaseActivitySubDefined.prototype,"BaseActivitySubDefined");var BaseActivitySubDefnition=function(){function e(){}return e}();__reflect(BaseActivitySubDefnition.prototype,"BaseActivitySubDefnition",["IBaseDefintion"]);var SignInDay;!function(e){e[e.SignInThree=3]="SignInThree",e[e.SignInFive=5]="SignInFive",e[e.SignInSeven=7]="SignInSeven"}(SignInDay||(SignInDay={}));var ActivityOpenState;!function(e){e[e.None=0]="None",e[e.UnOpen=1]="UnOpen",e[e.Open=2]="Open",e[e.End=3]="End"}(ActivityOpenState||(ActivityOpenState={}));
var ActivityId;!function(e){e[e.FirstPay=4]="FirstPay"}(ActivityId||(ActivityId={}));var ActivityType=function(){function e(){}return e.Img="img",e.Des="des",e.Signin="signin",e.PayPrize="payPrize",e.HappyGift="happyGift",e.LaBa="laBa",e}();__reflect(ActivityType.prototype,"ActivityType");var ActivityTriggerType;!function(e){e[e.None=0]="None",e[e.Click=1]="Click"}(ActivityTriggerType||(ActivityTriggerType={}));var ShimTaeYoonResultType;!function(e){e[e.ThreeSev=1]="ThreeSev",e[e.ThreeBAR=2]="ThreeBAR",e[e.ThreeApple=3]="ThreeApple",e[e.ThreeBell=4]="ThreeBell",e[e.ThreeGrape=5]="ThreeGrape",e[e.ThreePersimmon=6]="ThreePersimmon",e[e.ThreeCherry=7]="ThreeCherry",e[e.TwoCherry=8]="TwoCherry",e[e.OneCherry=9]="OneCherry",e[e.NoAward=10]="NoAward"}(ShimTaeYoonResultType||(ShimTaeYoonResultType={}));var ShimTaeYoonImgIndex;!function(e){e[e.Sev=0]="Sev",e[e.BAR=1]="BAR",e[e.Apple=2]="Apple",e[e.Bell=3]="Bell",e[e.Grape=4]="Grape",e[e.Persimmon=5]="Persimmon",e[e.Cherry=6]="Cherry",e[e.Que=7]="Que"}(ShimTaeYoonImgIndex||(ShimTaeYoonImgIndex={}));var qin;!function(e){var t=function(){function t(){this._map=new e.Dictionary}return t.prototype.dispose=function(){this._map=null},t.prototype.clear=function(){this._map.clear()},Object.defineProperty(t.prototype,"count",{get:function(){return this._map.count},enumerable:!0,configurable:!0}),t.prototype.addListener=function(t,n,i){var a=this._map.getValue(t);if(a)for(var o=0,r=a;o<r.length;o++){var s=r[o];if(s.equals2(n,i))return}else a=new Array,this._map.add(t,a);a.push(new e.Delegate(n,i))},t.prototype.removeListener=function(e,t,n){var i=this._map.getValue(e);if(i)for(var a=0;a<i.length;a++)if(i[a].equals2(t,n)){i.splice(a,1);break}},t.prototype.dispatch=function(e,t){var n=this._map.getValue(e);if(n){n=n.concat();for(var i=0,a=n.length;a>i;i++)n[i].invoke(t)}},t}();e.CallDispatcher=t,__reflect(t.prototype,"qin.CallDispatcher")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(e,t){this._method=e,this._target=t}return t.getOut=function(e,n){if(t._poolList.length>0){var i=t._poolList.pop();return i.reset(e,n),i}return new t(e,n)},t.putIn=function(e){null!=e&&t._poolList.length<20&&(e.reset(),t._poolList.push(e))},Object.defineProperty(t.prototype,"method",{get:function(){return this._method},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),t.prototype.reset=function(e,t){this._method=e,this._target=t},t.prototype.equals=function(e){return null!=e&&this._method==e._method&&this._target==e._target?!0:!1},t.prototype.equals2=function(e,t){return this._method==e&&this._target==t?!0:!1},t.prototype.invoke=function(t){e.FuncUtil.invoke(this._method,this._target,t)},t._poolList=new Array,t}();e.Delegate=t,__reflect(t.prototype,"qin.Delegate")}(qin||(qin={}));var ShimTaeYoonHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t);for(var n,i=0;i<LaBaDefined.GetInstance().dataList.length;i++)n=LaBaDefined.GetInstance().dataList[i],this.addSubInfo(t,ShimTaeYoonInfo,n)},t}(BaseActivitySubHandler);__reflect(ShimTaeYoonHandler.prototype,"ShimTaeYoonHandler");var SignInHandler=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.signInCompleteEvent=new qin.DelegateDispatcher,t}return __extends(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t);for(var n,i=0;i<SignInDefined.GetInstance().dataList.length;i++)n=SignInDefined.GetInstance().dataList[i],this.addSubInfo(t,SignInInfo,n)},t.prototype.reqSignIn=function(e,t){ActivityManager.ReqGetActivityAward(e,t+1)},t.prototype.joinActivityResult=function(t,n){e.prototype.joinActivityResult.call(this,t,n);var i=this.getInfo(t);i&&(i.jsonObj.isSignIn=!0,i.jsonObj.SignTime=TimeManager.GetServerUtcTimestamp(),i.step++),this.signInCompleteEvent.dispatch()},t.prototype.isSignToday=function(e){var t=this.getInfo(e);if(t=void 0==e?ActivityManager.getActivityInfoByType(ActivityType.Signin):this.getInfo(e)){if(void 0==t.jsonObj||void 0==t.jsonObj.SignTime)return!1;var n=TimeManager.GetServerLocalDateTime(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(1e3*t.jsonObj.SignTime);return i>a?!1:!0}return!1},t.prototype.getAwardDes=function(e){for(var t=qin.StringConstants.Empty,n=0;n<e.rewardList.length;n++)t+=ItemDefined.GetInstance().getDefinition(e.rewardList[n].id).name+"*"+e.rewardList[n].count,n<e.rewardList.length-1&&(t+=",");return t},t}(BaseActivitySubHandler);__reflect(SignInHandler.prototype,"SignInHandler");var qin;!function(e){var t=function(){function e(){}return e.Empty="",e.Dot=".",e.UnderLine="_",e.Comma=",",e.Blank=" ",e.Semicolon=";",e.Asterisk="*",e.Colon=":",e}();e.StringConstants=t,__reflect(t.prototype,"qin.StringConstants")}(qin||(qin={}));var qin;!function(e){var t=function(e){function t(){var n=e.call(this)||this;return n._lastWidth=0,n._lastHeight=0,n._lastX=0,n._lastY=0,n.$renderNode=new egret.sys.RenderNode,n._divNode=document.createElement("div"),t.initElementStyle(n._divNode),n}return __extends(t,e),t.initElementStyle=function(e){e.style.position="relative",e.style.border="0",e.style.left="0",e.style.top="0"},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._divNode?this._divNode.style.backgroundColor:""},set:function(e){(""===e||void 0===e)&&(e=null),this._divNode.style.backgroundColor=e},enumerable:!0,configurable:!0}),t.prototype.bindDom=function(e){this.unbindDom(),this._element=e,this._element.style.width="100%",this._element.style.height="100%",t.initElementStyle(this._element),this._divNode.appendChild(e)},t.prototype.unbindDom=function(){this._element&&this._element.parentNode==this._divNode&&this._divNode.removeChild(this._element),this._element=null},t.prototype.$onAddToStage=function(t,n){e.prototype.$onAddToStage.call(this,t,n),this._playerNode||(this._playerNode=t.$screen.container,this._canvasNode=t.$screen.canvas),this._playerNode.appendChild(this._divNode)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this._divNode&&this._divNode.parentNode&&this._divNode.parentNode.removeChild(this._divNode)},t.prototype.$update=function(t,n){var i=e.prototype.$update.call(this,t,n),a=this.updateVisible();return i&&a&&this.stage&&this.updateScale(),i},t.prototype.updateVisible=function(){if(this.$renderNode.renderVisible=0==this.$renderNode.renderAlpha){if(this._element&&this._element.parentNode)return this._element.parentNode.removeChild(this._element),!1}else this._element&&null==this._element.parentNode&&this._divNode.appendChild(this._element);return!0},t.prototype.updateScale=function(){var e=this._playerNode.getBoundingClientRect(),t=this._canvasNode.getBoundingClientRect(),n=!1,i=this.stage.orientation;i!=egret.OrientationMode.AUTO&&(n=i!=egret.OrientationMode.PORTRAIT&&e.height>e.width||i==egret.OrientationMode.PORTRAIT&&e.width>e.height);var a,o;n?(a=t.width/this.stage.stageHeight,o=t.height/this.stage.stageWidth):(a=t.width/this.stage.stageWidth,o=t.height/this.stage.stageHeight);var r=t.width;this._lastWidth!=r&&(this._divNode.style.width=this.$getWidth()*a+"px",this._lastWidth=r);var s=t.height;this._lastHeight!=s&&(this._divNode.style.height=this.$getHeight()*a+"px",this._lastHeight=s);var l=this.$getX();this._lastX!=l&&(this._divNode.style.left=l+"px",this._lastX=l);var h=this.$getY();this._lastY!=h&&(this._divNode.style.top=h+"px",this._lastY=h)},t}(egret.DisplayObject);e.WebNode=t,__reflect(t.prototype,"qin.WebNode")}(qin||(qin={}));var HundredWarPoolInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.HundredWarPoolInfoPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),UIUtil.listRenderer(this.rankList,this.rankScroller,HundredWarPoolPrizeItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0)},t.prototype.init=function(t){e.prototype.init.call(this,t),HundredWarManager.panelHandler.reqPoolInfo(),this.poolNumComp.init("$"+qin.MathUtil.numAddSpace(HundredWarManager.roomInfo.pool))},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),HundredWarManager.panelHandler.OnGetHundredWarPoolInfoEvent.addListener(this.refreshReqInfo,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),HundredWarManager.panelHandler.OnGetHundredWarPoolInfoEvent.removeListener(this.refreshReqInfo,this)},t.prototype.refreshReqInfo=function(){if(HundredWarManager.panelHandler.lastPoolInfo.cards&&HundredWarManager.panelHandler.lastPoolInfo.cards.length>0){if(this.lastGroup.visible=!0,this.noPoolLabel.visible=!1,!this.cardList){this.cardList=new Array;for(var e=0;e<this.cardGroup.numChildren;e++){var t=this.cardGroup.getChildAt(e);this.cardList.push(t)}this.cardList.reverse()}for(var n=0,i=this.cardList;n<i.length;n++){var a=i[n];a.visible=!1}var o=HundredWarManager.panelHandler.lastPoolInfo.cards;if(o)for(var e=0;e<o.length;e++)if(e<this.cardList.length){var t=this.cardList[e];t.visible=!0,t.init(o[e]),t.initElementsShow2()}this.poolLastLabel.text="$"+qin.MathUtil.formatNum(HundredWarManager.panelHandler.lastPoolInfo.gold),this.dateLabel.text=qin.DateTimeUtil.formatDate(new Date(1e3*HundredWarManager.panelHandler.lastPoolInfo.time),qin.DateTimeUtil.Format_Standard_NoSecondAndYear)}else this.lastGroup.visible=!1,this.noPoolLabel.visible=!0;HundredWarManager.panelHandler.lastPoolInfo.prizeList&&HundredWarManager.panelHandler.lastPoolInfo.prizeList.length>0?(this.rankGroup.visible=!0,this.noUserLabel.visible=!1,UIUtil.writeListInfo(this.rankList,HundredWarManager.panelHandler.lastPoolInfo.prizeList,"roleId",!1)):(this.rankGroup.visible=!1,this.noUserLabel.visible=!0)},t}(BasePanel);__reflect(HundredWarPoolInfoPanel.prototype,"HundredWarPoolInfoPanel");var FoldCardAnimation=function(e){function t(){var t=e.call(this)||this;return t._runTime=400,t._angleVec=new qin.Vector2D(0,0),t}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this);this.target;this._initMatrix||(this.target.scaleX=this.target.scaleY=.5,this._initMatrix=this.target.matrix),this.target.alpha=1,this.target.matrix=this._initMatrix},t.prototype.run=function(t){e.prototype.run.call(this,t);var n=this.target.parent.parent;this._angleVec.x=t.x-n.x,this._angleVec.y=t.y-n.y;var i=this._angleVec.angle;i*=qin.MathUtil.Radian2Angle;var a=egret.Tween.get(this.target);this.target.visible=!0,a.to({x:this._angleVec.x,y:this._angleVec.y,scaleX:.4,scaleY:.4,alpha:.3,rotation:i},this._runTime,egret.Ease.circOut).call(this.runOver,this),a.play()},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.target.visible=!1},t}(BaseAnimation);__reflect(FoldCardAnimation.prototype,"FoldCardAnimation");var GamblingGameGroupMove=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this)},t.prototype.run=function(t,n,i){e.prototype.run.call(this,t),n&&(this.callBack=qin.Delegate.getOut(n,i));var a=egret.Tween.get(this.target);a.to({x:t},200,egret.Ease.sineIn).call(this.runOver,this),a.play()},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.callBack&&(this.callBack.invoke(),qin.Delegate.putIn(this.callBack)),this.callBack=null},t}(BaseAnimation);__reflect(GamblingGameGroupMove.prototype,"GamblingGameGroupMove");var OneKeyButtonAppear=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.target.scaleX=this.target.scaleY=.1,this.target.alpha=0,this.target.visible=!0},t.prototype.run=function(t){e.prototype.run.call(this);var n=egret.Tween.get(this.target);n.wait(t).to({alpha:1,scaleX:1,scaleY:1},250,egret.Ease.backIn).call(this.runOver,this),this.target.touchEnabled=!1},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.target.touchEnabled=!0},t.prototype.clear=function(){e.prototype.clear.call(this)},t}(BaseAnimation);__reflect(OneKeyButtonAppear.prototype,"OneKeyButtonAppear");var OneKeyButtonDisappear=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isRunOver=!0,t}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.target.alpha=1,this.target.scaleX=1,this.target.scaleY=1,this.target.visible=!0},t.prototype.run=function(t,n){if(1==this.isRunOver){e.prototype.run.call(this),this._parent=n;var i=egret.Tween.get(this.target);i.wait(t).to({alpha:0,scaleX:.1,scaleY:.1},250).call(this.runOver,this),this.target.touchEnabled=!1,this.isRunOver=!1}},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.target.visible=!1,this.target.touchEnabled=!0,this._parent&&(this._parent.visible=!1),this.isRunOver=!0},t.prototype.clear=function(){e.prototype.clear.call(this)},t}(BaseAnimation);__reflect(OneKeyButtonDisappear.prototype,"OneKeyButtonDisappear");var SelfCard1Appear=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.tsfMatrix=new egret.Matrix(.0465,-.0617,.0156,.075,GamblingPanelSetting.handCardMatrix1.tx,GamblingPanelSetting.handCardMatrix1.ty),this.target.matrix=this.tsfMatrix},t.prototype.run=function(t){void 0===t&&(t=!1),e.prototype.run.call(this),t&&SoundManager.playEffect(MusicAction.light_card),this.target.visible=!0,qin.Console.log("显示本家手牌1");var n=egret.Tween.get(this.tsfMatrix,{onChange:this.change.bind(this)});n.to({a:GamblingPanelSetting.handCardMatrix1.a,b:GamblingPanelSetting.handCardMatrix1.b,c:GamblingPanelSetting.handCardMatrix1.c,d:GamblingPanelSetting.handCardMatrix1.d},300).call(this.runOver,this),n.play()},t.prototype.change=function(){this.target.matrix=this.tsfMatrix},t}(BaseAnimation);__reflect(SelfCard1Appear.prototype,"SelfCard1Appear");var SelfCard2Appear=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.tsfMatrix=new egret.Matrix(.27,-.36,.037,.177,GamblingPanelSetting.handCardMatrix2.tx,GamblingPanelSetting.handCardMatrix2.ty),this.target.matrix=this.tsfMatrix},t.prototype.run=function(t){void 0===t&&(t=!1),e.prototype.run.call(this),this._isSound=t,qin.Tick.AddTimeoutInvoke(this.delayRun,200,this)},t.prototype.delayRun=function(){this.target.visible=!0,qin.Console.log("显示本家手牌2");var e=egret.Tween.get(this.tsfMatrix,{onChange:this.change.bind(this)});e.to({a:GamblingPanelSetting.handCardMatrix2.a,b:GamblingPanelSetting.handCardMatrix2.b,c:GamblingPanelSetting.handCardMatrix2.c,d:GamblingPanelSetting.handCardMatrix2.d},300).call(this.runOver,this),e.play(),this._isSound&&SoundManager.playEffect(MusicAction.light_card)},t.prototype.runOver=function(){this.callBack&&this.callBack.invoke(),e.prototype.runOver.call(this)},t.prototype.change=function(){this.target.matrix=this.tsfMatrix},t.prototype.clear=function(){qin.Tick.RemoveTimeoutInvoke(this.delayRun,this),e.prototype.clear.call(this)},t}(BaseAnimation);__reflect(SelfCard2Appear.prototype,"SelfCard2Appear");var WinChipsAnim=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),void 0==this._initV&&(this._initV=this.target.verticalCenter),this.target.verticalCenter=this._initV,this.target.alpha=1},t.prototype.run=function(){e.prototype.run.call(this);var t=egret.Tween.get(this.target);t.to({verticalCenter:this._initV-60},300,egret.Ease.backOut).wait(1e3).to({alpha:0},300).call(this.runOver,this),t.play()},t.prototype.runOver=function(){this.target.visible=!1,e.prototype.runOver.call(this)},t}(BaseAnimation);__reflect(WinChipsAnim.prototype,"WinChipsAnim");var LoadConfig=function(){function e(){}return e.startLoad=function(t,n){e._loadComplete=new qin.Delegate(t,n),RES.getResAsync(ResPrefixPathName.Config+ResFixedFileName.Config_Zip,function(t){if(t){var n=new JSZip(t),i=n.file(/./);DefinedManager.SetConfigData(i),e.loadProtocolFile()}else qin.Console.log("配置数据载入失败！","config_zip")},this)},e.onLoadConfigList=function(t,n){t?(e._configList=t.trim().split(","),e._loadIndex=0,e.startLoadConfig()):qin.Console.log("配置数据载入失败！",n)},e.startLoadConfig=function(){var t=e._configList[e._loadIndex];RES.getResByUrl(PathName.ConfigDirectory+t,e.onLoadConfig,this,RES.ResourceItem.TYPE_JSON)},e.onLoadConfig=function(t,n){var i=e._configList[e._loadIndex];DefinedManager.setData(i,t),e._loadIndex++,e._loadIndex>=e._configList.length?e.loadProtocolFile():e.startLoadConfig()},e.loadProtocolFile=function(){RES.getResAsync(ResPrefixPathName.Config+ResFixedFileName.Proto_Zip,function(t){if(t){var n=new JSZip(t),i=n.file(/./);ProtocolManager.SetProtocolData(i),e._loadComplete&&e._loadComplete.invoke()}else qin.Console.log("协议文件载入失败！","proto_zip")},this)},e.onLoadLoginProtocolFile=function(t){t?(ProtocolManager.LoginBin=t,RES.getResByUrl(PathName.Config_c2s_bin,e.onLoadc2sProtocolFile,this,RES.ResourceItem.TYPE_BIN)):qin.Console.log("协议文件加载失败:loginall.bin")},e.onLoadc2sProtocolFile=function(t){t?(ProtocolManager.Gamec2sBin=t,RES.getResByUrl(PathName.Config_s2c_bin,e.onLoads2cProtocolFile,this,RES.ResourceItem.TYPE_BIN)):qin.Console.log("协议文件加载失败:c2s.bin")},e.onLoads2cProtocolFile=function(t){t?(ProtocolManager.Games2cBin=t,e._loadComplete&&e._loadComplete.invoke()):qin.Console.log("协议文件加载失败:s2c.bin")},e}();__reflect(LoadConfig.prototype,"LoadConfig");var AwardExchangeErrorType;!function(e){e[e.NoError=0]="NoError",e[e.NullAward=1]="NullAward",e[e.OverTimes=2]="OverTimes",e[e.OverDate=4]="OverDate",e[e.NotComeDate=8]="NotComeDate",e[e.LevelNotEnough=9]="LevelNotEnough",e[e.PreNotComplete=10]="PreNotComplete",e[e.NotInTime=12]="NotInTime"}(AwardExchangeErrorType||(AwardExchangeErrorType={}));var AwardManager=function(){function e(){}return e.Initialize=function(t){e.Reset(),SocketManager.AddCommandListener(Command.ExchangeTimeRefresh_Push_2031,this.refreshExchangeTime,this);var n=t.data.DataList;if(n)for(var i,a=0;a<n.length;a++)i=n[a],this.refreshMapInfo(i);e.getExChangeInfoEa.dispatch()},e.refreshExchangeTime=function(t){t.data&&(this.refreshMapInfo(t.data),e.OnAwardValueChanged.dispatch(t.data.Id))},e.refreshMapInfo=function(t){if(t&&e._map.containsKey(t.Id)){var n=e._map.getValue(t.Id);n.times=parseInt(t.Count),null!=t.Time?n.lastTime=parseInt(t.Time):n.lastTime=0}},e.Exchange=function(t,n,i){void 0===n&&(n=1),void 0===i&&(i=!0);var a=e.GetNotFitErrorType(t);if(a!=AwardExchangeErrorType.NoError)return void qin.Console.log("[兑换错误，错误id]："+a.toString());i&&PropertyManager.OpenGet(),1>n&&(n=1);var o=function(a){e.OnExchangeFromServer(t,n,i)};SocketManager.call(Command.Award_Exchange_3113,{Id:t,Count:n},o,null,this)},e.OnExchangeFromServer=function(t,n,i){e.OnExchanged.dispatch(t),i&&PropertyManager.ShowItemList()},e.GetNotFitErrorType=function(t){var n=AwardExchangeErrorType.NoError,i=e.GetExchangeInfo(t);if(InfoUtil.checkAvailable(i)){var a=e.GetAwardLimit(t);0!=a&&i.times>=a&&(n|=AwardExchangeErrorType.OverTimes);TimeManager.GetServerLocalDateTime();if(i.definition.level>UserManager.userInfo.level&&(n|=AwardExchangeErrorType.LevelNotEnough),!AwardDefined.GetInstance().getPrevIdIsNull(t)){var o=e.GetExchangeInfo(i.definition.preId);a=e.GetAwardLimit(i.definition.preId),o.times<a&&(n|=AwardExchangeErrorType.PreNotComplete)}return n}return n|=AwardExchangeErrorType.NullAward},e.IsToLimitClient=function(t){var n=e.GetAwardLimit(t),i=e.GetTimes(t);return i>=n&&0!=n?!0:!1},e.GetTimes=function(t){var n=e.GetExchangeInfo(t);return n?n.times:0},e.GetAwardLimit=function(e){var t=AwardDefined.GetInstance().getDefinition(e);return t?qin.StringUtil.isNullOrEmpty(t.costName)?t.limit:0:void 0},e.GetLastAlterDate=function(t){var n=e.GetExchangeInfo(t);return n?n.lastTime:0},e.GetExchangeInfo=function(t){var n;return e._map.getValue(t)&&(n=e._map.getValue(t)),n},e.Reset=function(){e._map.clear();for(var t=AwardDefined.GetInstance().awardDefinitionDic,n=t.getKeys(),i=0;i<n.length;i++){var a=n[i],o=new AwardTimesInfo;o.id=a,o.times=0,o.lastTime=TimeManager.Utc1970.getTime(),e._map.add(o.id,o)}},e.OnExchanged=new qin.DelegateDispatcher,e.OnAwardValueChanged=new qin.DelegateDispatcher,e._map=new qin.Dictionary,e.getExChangeInfoEa=new qin.DelegateDispatcher,e}();__reflect(AwardManager.prototype,"AwardManager");var AwardTimesInfo=function(){function e(){}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e,this._definition=AwardDefined.GetInstance().getDefinition(this._id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),e.prototype.setInfo=function(e,t,n){this.id=e,this.times=t,this.lastTime=n},e}();__reflect(AwardTimesInfo.prototype,"AwardTimesInfo",["IHaveDefintionInfo"]);var BindPhoneManager=function(){function e(){}return e.reqGetCode=function(t){var n=function(t){e.onGetCodeEvent.dispatch()};SocketManager.call(Command.PhoneCode_Req_3689,{mno:t},n,null,this)},e.reqBindPhone=function(t,n){var i=function(t){e.onBindPhoneEvent.dispatch()};SocketManager.call(Command.PhoneBind_3688,{mno:t,code:n},i,null,this)},e.onGetCodeEvent=new qin.DelegateDispatcher,e.onBindPhoneEvent=new qin.DelegateDispatcher,e}();__reflect(BindPhoneManager.prototype,"BindPhoneManager");var BindPhonePanel=function(e){function t(){var t=e.call(this)||this;return t.isTween=!0,t.setSkinName(UIModuleName.BindPhonePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.phoneLabel.type=egret.TextFieldType.INPUT,this.phoneLabel.inputType=egret.TextFieldInputType.TEL,this.phoneLabel.restrict="0-9",this.phoneLabel.maxChars=11,this.codeLabel.type=egret.TextFieldType.INPUT},t.prototype.init=function(t){e.prototype.init.call(this,t),this.reset()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.sendCodeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sencCodeClickHandler,this),this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmHandler,this),this.phoneLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.phoneValidate,this),this.codeLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.codeValidate,this),BindPhoneManager.onGetCodeEvent.addListener(this.sendCodeSuccess,this),BindPhoneManager.onBindPhoneEvent.addListener(this.bindSuccess,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.sendCodeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sencCodeClickHandler,this),this.confirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmHandler,this),this.phoneLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.phoneValidate,this),this.codeLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.codeValidate,this),BindPhoneManager.onGetCodeEvent.removeListener(this.sendCodeSuccess,this),BindPhoneManager.onBindPhoneEvent.removeListener(this.bindSuccess,this),UserUtil.removeCodeCountDown()},t.prototype.reset=function(){this.clearTelError(),this.phoneLabel.text="",this.codeLabel.text="",UserUtil.initCode(this.sendCodeBtn)},t.prototype.clearTelError=function(){this.telErrorLabel.text=""},t.prototype.sencCodeClickHandler=function(e){SoundManager.playButtonEffect(e.target),this.phoneValidate()&&BindPhoneManager.reqGetCode(this.phoneLabel.text.trim())},t.prototype.sendCodeSuccess=function(){UserUtil.addCodeCountDown({sendCodeBtn:this.sendCodeBtn,leftTime:this.leftTime})},t.prototype.confirmHandler=function(e){SoundManager.playButtonEffect(e.target),this.phoneValidate()&&this.codeValidate()&&BindPhoneManager.reqBindPhone(this.phoneLabel.text.trim(),this.codeLabel.text.trim())},t.prototype.bindSuccess=function(){this.panelData&&this.panelData.isShowCreatePwd&&UIManager.showPanel(UIModuleName.SafeCreatePanel),UserManager.userInfo.mno=this.phoneLabel.text.trim(),this.onCloseBtnClickHandler(null)},t.prototype.phoneValidate=function(){var e=this.phoneLabel.text.trim();return e?UserUtil.phoneNumIsValidate(e)?(this.clearTelError(),!0):(this.telErrorLabel.text="*手机号格式不正确",!1):(this.telErrorLabel.text="*手机号不能为空",!1)},t.prototype.codeValidate=function(){var e=this.codeLabel.text.trim();return e?(this.clearTelError(),!0):(this.telErrorLabel.text="*请填写手机验证码",!1)},t}(BasePanel);__reflect(BindPhonePanel.prototype,"BindPhonePanel");var ChampionshipAwardInfo=function(){function e(){}return e}();__reflect(ChampionshipAwardInfo.prototype,"ChampionshipAwardInfo");var ChampionshipManager=function(){function e(){}return e.addPushListener=function(){SocketManager.AddCommandListener(Command.MTTJoinNumChange_Push_2114,e.onJoinNumPush,this),SocketManager.AddCommandListener(Command.MTTCancel_Push_2115,e.onCancelMTTPush,this),SocketManager.AddCommandListener(Command.MTTWeedOut_Push_2118,e.onMTTOverPush,this),SocketManager.AddCommandListener(Command.MTTRoomId_Push_2116,e.onMTTRoomIdPush,this),SocketManager.AddCommandListener(Command.MTTRank_Push_2117,e.onMTTRankPush,this),SocketManager.AddCommandListener(Command.MTTNew_Push_2121,e.onMTTNewPush,this)},e.initialize=function(t){e.addPushListener(),e.mttRemindStartHandler||(e.mttRemindStartHandler=new MTTRemindStartHandler),e.joinMTTList||(e.joinMTTList=new Array),e.processMTTList||(e.processMTTList=new Array),e.outsList||(e.outsList=new Array),e.reqJoinedMTTList(),e.mttRemindStartHandler.clearHadRemindMTT(),e.getMTTListInfoResponse(t),e.initMTTRoomListInfo()},e.initMTTRoomListInfo=function(){for(var t=InsideRoomManager.getInfoListByType(InsideRoomType.Mtt),n=0,i=t;n<i.length;n++){var a=i[n],o=e.getMathInfoByRecordId(a.mttId);o&&(o.roomId=a.id)}},e.reqGetMTTListInfo=function(){SocketManager.call(Command.MTTList_Req_3611,null,e.getMTTListInfoResponse,null,this)},e.getMTTListInfoResponse=function(t){if(t.data&&t.data.MTTList){e.showMTTList||(e.showMTTList=new Array);var n=e.processMTTList.concat();qin.ArrayUtil.Clear(e.processMTTList),qin.ArrayUtil.Clear(e.showMTTList);for(var i=0,a=t.data.MTTList;i<a.length;i++){var o=a[i],r=new MatchRoomInfo;r.copyValueFrom(o);for(var s=0,l=n;s<l.length;s++){var h=l[s];if(h.recordId==r.recordId){r.roomId=h.roomId;break}}r.leftJoin=o.leftjoin;var d=r.definition;d&&(d.delaySign?TimeManager.GetServerUtcTimestamp()<r.startTime+d.delaySign&&!o.outTime&&!o.endTime&&(r.isShow=1):TimeManager.GetServerUtcTimestamp()<r.startTime&&(r.isShow=1),d.signTime!=d.displayTime&&1==r.isShow?r.startTime-d.signTime<TimeManager.GetServerUtcTimestamp()?r.isStartJoin=1:r.isStartJoin=0:d.signTime==d.displayTime&&1==r.isShow&&(r.isStartJoin=1)),r.isShow&&e.showMTTList.push(r),e.processMTTList.push(r)}n=null,e.onGetMatchListEvent.dispatch()}},e.reqJoinedMTTList=function(){var t=function(t){if(t.data&&t.data.Array){e.joinMTTList||(e.joinMTTList=new Array),qin.ArrayUtil.Clear(e.joinMTTList);for(var n=0,i=t.data.Array;n<i.length;n++){var a=i[n],o=new MatchRoomInfo;o.copyValueFrom(a);for(var r=0,s=e.processMTTList;r<s.length;r++){var l=s[r];if(l.recordId==o.recordId){o.roomId=l.roomId;break}}e.joinMTTList.push(o)}e.joinMTTList.sort(SortUtil.JoinedMTTListSort),e.remindMTTStart(e.joinMTTList),e.onGetJoinedMatchListEvent.dispatch()}};SocketManager.call(Command.JoinedMTTList_Req_3706,null,t,null,this)},e.remindMTTStart=function(t){t&&(e.mttRemindStartHandler||(e.mttRemindStartHandler=new MTTRemindStartHandler),e.mttRemindStartHandler.onEnable(),e.mttRemindStartHandler.initialize(t))},e.reqGetRecentActionInfo=function(){SocketManager.call(Command.MTTRecordList_Req_3615,null,e.getGetRecentActionInfoResponse,null,this)},e.getGetRecentActionInfoResponse=function(t){if(t.data){qin.ArrayUtil.Clear(e.outsList);for(var n=0,i=t.data.recordList;n<i.length;n++){var a=i[n],o=new OutsInfo,r=new ChampionshipRankInfo;o.id=a.id,o.recordId=a.recordId,o.time=a.startTime,o.rankList=new Array;var s=ChampionshipDefined.GetInstance().getDefinition(a.id),l=void 0;if(s&&(o.name=s.name,l=e.getAwardList(s.id)),r.name=a.name,r.rank=1,a.head&&(r.head=a.head),a.sex?r.sex=a.sex:r.sex=0,l)for(var h=0,d=l;h<d.length;h++){var c=d[h];if(r.rank==c.start){var p="获得",u=AwardDefined.GetInstance().getAwardNameById(c.awardId);u&&(p+=u,r.award=p)}}o.rankList.push(r),e.outsList.push(o)}e.outsList.sort(SortUtil.MTTOutsInfoTimeSort),e.onGetRecentActionInfoEvent.dispatch()}},e.reqGetRankList=function(t){var n=function(n){if(n.data&&n.data.rankList){for(var i=0,a=n.data.rankList;i<a.length;i++){var o=a[i],r=new ChampionshipRankInfo;r.copyValueFrom(o);var s=e.getAwardList(e.recentMTTId);if(s)for(var l=0,h=s;l<h.length;l++){var d=h[l];if(o.rank==d.start){var c="获得",p=AwardDefined.GetInstance().getAwardNameById(d.awardId);p&&(c+=p,r.award=c)}}var u=e.getOutsInfoByRecordId(t);u&&u.rankList&&1!=r.rank&&u.rankList.push(r)}e.OnGetRankListEvent.dispatch(t)}};SocketManager.call(Command.MTTRecentlyRankList_Req_3616,{recordId:t},n,null,this)},e.reqRequestJoin=function(t,n,i){var a=function(a){for(var o=new MatchRoomInfo,r=0,s=e.processMTTList;r<s.length;r++){var l=s[r];if(l.recordId==t){l.join++,l.joinWay=n,o=l,e.joinMTTList.push(o);break}}e.remindMTTStart(e.joinMTTList);var h=i-TimeManager.GetServerUtcTimestamp();h>0&&o.definition&&UIManager.showPanel(UIModuleName.JoinChampionshipSuccessPanel,{name:o.definition.name,time:o.startTime,applyNum:o.join,bNum:o.definition.bNum,chip:o.definition.initialChips}),e.onRequestJoinEvent.dispatch({flag:n,recordId:t})};e.isFull(t)&&SocketManager.call(Command.MTTRequestJoin_Req_3612,{recordId:t,joinWay:n},a,e.MTTCancelErrorDispose,this)},e.getOutsInfoByRecordId=function(t){if(e.outsList.length>0)for(var n=0,i=e.outsList;n<i.length;n++){var a=i[n];if(a.recordId==t)return a}return null},e.isFull=function(t){for(var n,i=0,a=e.showMTTList;i<a.length;i++){var o=a[i];if(o.recordId==t){n=o;break}}return InfoUtil.checkAvailable(n)&&n.join<n.definition.bNum?!0:(UIManager.showFloatTips("该比赛报名已达最大人数，请选择其他比赛！"),!1)},e.MTTCancelErrorDispose=function(t){t.cmdId==Command.MTTRequestJoin_Req_3612&&AlertManager.showAlert("该赛事因为报名人数不足已经取消。",e.reqGetMTTListInfo)},e.reqOutsInfo=function(t,n){var i=function(t){if(t.data){if(e.nowBlindId=n,e.matchOutsInfo||(e.matchOutsInfo=new MatchOutsInfo),t.data.blindLevel){e.nowBlindRank=t.data.blindLevel;var i=Math.floor(t.data.blindTime-TimeManager.GetServerUtcTimestamp());0>=i?e.matchOutsInfo.addBlindTime=0:e.matchOutsInfo.addBlindTime=Math.floor(t.data.blindTime-TimeManager.GetServerUtcTimestamp())}else{e.nowBlindRank=1;var a=ChampionshipBlindDefined.GetInstance().getBlindInfoByLevel(e.nowBlindRank,n);a&&(e.matchOutsInfo.addBlindTime=a.upTime)}var o=ChampionshipBlindDefined.GetInstance().getBlindInfoByLevel(e.nowBlindRank,n);e.setOutsBlindInfo(o),e.matchOutsInfo.rank=t.data.rank,e.OnOutsInfoEvent.dispatch()}};SocketManager.call(Command.MTTOutsInfo_Req_3617,{recordId:t},i,e.MTTOverErrorDispose,this)},e.MTTOverErrorDispose=function(t){(t.cmdId==Command.MTTOutsInfo_Req_3617||t.cmdId==Command.EnterRoomInfo_Req_3600)&&(UIManager.closePanel(UIModuleName.ChampionshipInfoPanel),AlertManager.showAlert("该赛事已经结束。",e.reqGetMTTListInfo))},e.reqRankInfo=function(t,n,i){void 0===n&&(n=0),void 0===i&&(i=10);var a=function(t){var n;if(n=t.data.rankList&&t.data.rankList.length<i?!0:!1,t.data&&t.data.rankList){for(var a=new Array,o=0,r=t.data.rankList;o<r.length;o++){var s=r[o],l=new ChampionshipRankInfo;l.copyValueFrom(s),a.push(l)}e.OnRankInfoEvent.dispatch({isBottom:n,rankList:a})}};SocketManager.call(Command.MTTRankInfo_Req_3618,{recordId:t,startRank:n,count:i},a,null,this)},e.reqWithdraw=function(t){var n=function(n){var i;if(e.joinMTTList&&e.joinMTTList.length>0){for(var a=0;a<e.joinMTTList.length;a++)if(e.joinMTTList[a].recordId==t){i=e.joinMTTList[a].joinWay,e.joinMTTList.splice(a,1);break}e.remindMTTStart(e.joinMTTList)}for(var a=0;a<e.showMTTList.length;a++)if(e.showMTTList[a].recordId==t){e.showMTTList[a].joinWay=0;
break}e.onRefreshMTTListEvent.dispatch({type:MTTRefreshType.MTTList}),e.OnWithdrawEvent.dispatch({joinWay:i,recordId:t})};SocketManager.call(Command.MTTRequestWithdraw_Req_3613,{recordId:t},n,null,this)},e.onJoinNumPush=function(t){if(t.data&&t.data.MTTList){for(var n=0,i=t.data.MTTList;n<i.length;n++){var a=i[n];if(e.processMTTList){for(var o=0,r=e.processMTTList;o<r.length;o++){var s=r[o];if(a.id==s.recordId){s.join=a.join;break}}for(var l=0,h=e.showMTTList;l<h.length;l++){var s=h[l];if(a.id==s.recordId){s.join=a.join;break}}}if(e.joinMTTList)for(var d=0,c=e.joinMTTList;d<c.length;d++){var p=c[d];if(a.id==p.recordId){p.join=a.join;break}}}e.onRefreshMTTListEvent.dispatch({data:t.data.MTTList,type:MTTRefreshType.MTTJOinNum})}},e.onCancelMTTPush=function(t){if(t.data){for(var n=new MatchRoomInfo,i=0,a=e.processMTTList;i<a.length;i++){var o=a[i];o.recordId==t.data.recordId&&(n=o)}InfoUtil.checkAvailable(n)&&AlertManager.showAlert("您报名的"+n.definition.name+"因为报名人数不足已经取消，您的所有报名费用/门票已经返还给您！"),UIManager.closePanel(UIModuleName.SecondRemindPanel),e.OnCancelMTTPushEvent.dispatch(n),e.refreshMTTMatchInfo(t.data.recordId,!0)}},e.onMTTOverPush=function(t){t.data&&t.data.recordId&&(SceneManager.sceneType==SceneType.Game&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.gamblingType==GamblingType.Championship&&GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.recordId==t.data.recordId&&(qin.Console.log("推送锦标赛结束，recordId："+t.data.recordId),GamblingManager.championshipHandler.outChampionship(t.data.recordId),GamblingManager.reset(),UIManager.showPanel(UIModuleName.MTTOverPanel,t.data)),e.refreshMTTMatchInfo(t.data.recordId,!0),e.OnMTTOverPushEvent.dispatch({recordId:t.data.recordId,rank:t.data.rank}))},e.onMTTRoomIdPush=function(t){if(t.data){var n=e.getMathInfoByRecordId(t.data.mttId);n&&(n.roomId=t.data.id),GamblingManager.matchRoomInfo.recordId==t.data.mttId&&GamblingManager.matchRoomInfo.roomId!=t.data.id&&(GamblingManager.matchRoomInfo.roomId=t.data.id,e.enterMttHandler.enterMatch(GamblingManager.matchRoomInfo,qin.StringConstants.Empty)),e.OnMTTRoomIdPushEvent.dispatch()}},e.onMTTRankPush=function(t){if(t.data&&t.data.recordId){var n=e.getMathInfoByRecordId(t.data.recordId);if(null!=n){var i=n.leftJoin;n.copyValueFrom(t.data),!i&&GamblingManager.matchRoomInfo.leftJoin&&(i=GamblingManager.matchRoomInfo.leftJoin),n.leftJoin=t.data.join,n.cloneTo(GamblingManager.matchRoomInfo),e.OnMTTRankPushEvent.dispatch({recordId:n.recordId,leftJoin:i})}}},e.onMTTNewPush=function(t){t.data&&e.OnNewMTTPushEvent.dispatch()},e.refreshMTTMatchInfo=function(t,n){if(void 0===n&&(n=!1),t){if(e.processMTTList){for(var i=0;i<e.processMTTList.length;i++)if(e.processMTTList[i].recordId==t){e.processMTTList[i].isShow=0;break}for(var i=0;i<e.showMTTList.length;i++)if(e.showMTTList[i].recordId==t){e.showMTTList.splice(i,1);break}}if(n&&e.joinMTTList)for(var i=0;i<e.joinMTTList.length;i++)if(e.joinMTTList[i].recordId==t){e.joinMTTList.splice(i,1);break}e.onRefreshMTTListEvent.dispatch({type:MTTRefreshType.MTTList})}},e.getAwardList=function(e){var t=ChampionshipDefined.GetInstance().getDefinition(e);if(t){var n=ChampionshipPrizeDefined.GetInstance().getChampionshipPrizeList(t.prize);return n}return null},e.getMatchRoomInfoByRoomId=function(t){for(var n=0,i=e.processMTTList;n<i.length;n++){var a=i[n];if(a.roomId==t)return a}return null},e.getMathInfoByRecordId=function(t){if(e.processMTTList)for(var n=0,i=e.processMTTList;n<i.length;n++){var a=i[n];if(a.recordId==t)return a}return null},e.getAwardMaxRank=function(e){var t=0;if(e){var n=ChampionshipPrizeDefined.GetInstance().getChampionshipPrizeList(e.prize);if(n)for(var i=0,a=n;i<a.length;i++){var o=a[i];o.end>t&&(t=o.end)}}return t},e.setOutsBlindInfo=function(t){t&&(t.preBet?e.matchOutsInfo.nowAnte=t.preBet:e.matchOutsInfo.nowAnte=0,e.matchOutsInfo.nowSBlind=t.sBlind,e.matchOutsInfo.nowBBlind=t.bBlind),e.blindList&&e.blindList.length>0&&e.nowBlindRank<e.blindList.length&&(t=ChampionshipBlindDefined.GetInstance().getBlindInfoByLevel(e.nowBlindRank+1,e.nowBlindId)),t&&(t.preBet?e.matchOutsInfo.nextAnte=t.preBet:e.matchOutsInfo.nextAnte=0,e.matchOutsInfo.nextSBlind=t.sBlind,e.matchOutsInfo.nextBBlind=t.bBlind)},e.setOutsAddBlindTimeInfo=function(t){e.matchOutsInfo.addBlindTime=t},e.enterMttHandler=new EnterMttHandler,e.onGetMatchListEvent=new qin.DelegateDispatcher,e.onGetJoinedMatchListEvent=new qin.DelegateDispatcher,e.onGetRecentActionInfoEvent=new qin.DelegateDispatcher,e.onRefreshMTTListEvent=new qin.DelegateDispatcher,e.onRequestJoinEvent=new qin.DelegateDispatcher,e.onOutsItemClickEvent=new qin.DelegateDispatcher,e.OnOutsInfoEvent=new qin.DelegateDispatcher,e.OnRankInfoEvent=new qin.DelegateDispatcher,e.OnWithdrawEvent=new qin.DelegateDispatcher,e.OnGetRankListEvent=new qin.DelegateDispatcher,e.OnMTTRoomIdPushEvent=new qin.DelegateDispatcher,e.OnMTTRankPushEvent=new qin.DelegateDispatcher,e.OnMTTOverPushEvent=new qin.DelegateDispatcher,e.OnCancelMTTPushEvent=new qin.DelegateDispatcher,e.OnNewMTTPushEvent=new qin.DelegateDispatcher,e}();__reflect(ChampionshipManager.prototype,"ChampionshipManager");var MTTRefreshType;!function(e){e[e.MTTList=1]="MTTList",e[e.MTTJOinNum=2]="MTTJOinNum"}(MTTRefreshType||(MTTRefreshType={}));var ChampionshipRankInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"head",{get:function(){return qin.StringUtil.isNullOrEmpty(this._head)?SheetSubName.getdefaultHead(this.sex):this._head},set:function(e){0==qin.StringUtil.isNullOrEmpty(e)&&(e=e.split(GameSetting.HeadUploadVerifySign)[0]),this._head=e},enumerable:!0,configurable:!0}),t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(ChampionshipRankInfo.prototype,"ChampionshipRankInfo",["IBaseHead"]);var HighPatternProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfPlayField(this,AchieveShowPattern.HighPattern)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(HighPatternProcess.prototype,"HighPatternProcess");var JoinChampionshipWay;!function(e){e[e.Gold=1]="Gold",e[e.Ticket=2]="Ticket"}(JoinChampionshipWay||(JoinChampionshipWay={}));var MatchOutsInfo=function(){function e(){}return e}();__reflect(MatchOutsInfo.prototype,"MatchOutsInfo");var MatchRoomInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e,this._definition=ChampionshipDefined.GetInstance().getDefinition(e),this.maxAwardRank=ChampionshipManager.getAwardMaxRank(this._definition)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomId",{get:function(){return this._roomId},set:function(e){this._roomId=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWaitStart",{get:function(){return!this.roomId},enumerable:!0,configurable:!0}),t.prototype.cloneTo=function(e){e._definition=this._definition;var t=this;for(var n in t)e[n]=t[n]},t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(MatchRoomInfo.prototype,"MatchRoomInfo",["IHaveDefintionInfo"]);var MTTRemindStartHandler=function(){function e(){this.minuteOpenFlag=!0,this.threeMinOpenFlag=!0,this.ResetThreeMinFlagEvent=new qin.DelegateDispatcher}return e.prototype.initialize=function(e){if(e){this.joinedMTTList||(this.joinedMTTList=new Array),this.hadRemindJoinedMTT||(this.hadRemindJoinedMTT=new Array);for(var t=0,n=e;t<n.length;t++){var i=n[t];this.joinedMTTList.push(i)}qin.Tick.AddSecondsInvoke(this.countDown,this)}},e.prototype.onEnable=function(){qin.Tick.RemoveSecondsInvoke(this.countDown,this),qin.ArrayUtil.Clear(this.joinedMTTList),qin.ArrayUtil.Clear(this.waitRemindMTTList),this.firstStartMTT=null,this.minuteOpenFlag=!0},e.prototype.clearHadRemindMTT=function(){qin.ArrayUtil.Clear(this.hadRemindJoinedMTT)},e.prototype.onThreeMinStartPush=function(e){SceneManager.sceneType==SceneType.Game&&GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.recordId==e||UIManager.showPanel(UIModuleName.ThreeMinRemindPanel,"您报名的比赛将于3分钟后开始！")},e.prototype.onMinuteStartPush=function(e,t){SceneManager.sceneType==SceneType.Game&&GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.recordId==t||UIManager.showPanel(UIModuleName.MinuteRemindPanel,{countDownNum:e,recordId:t})},e.prototype.onSecondStartPush=function(e,t){SceneManager.sceneType==SceneType.Game&&GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.recordId==t||UIManager.showPanel(UIModuleName.SecondRemindPanel,{countDownNum:e,recordId:t})},e.prototype.countDown=function(){if(this.joinedMTTList)for(var e=0;e<this.joinedMTTList.length;e++){var t=new MatchRoomInfo;t=this.joinedMTTList[e];var n=Math.floor(t.startTime-TimeManager.GetServerUtcTimestamp());if(180==n&&this.threeMinOpenFlag&&(this.onThreeMinStartPush(t.recordId),this.threeMinOpenFlag=!1),60>=n&&n>0&&(this.minuteOpenFlag?(this.firstStartMTT||(this.firstStartMTT=new MatchRoomInfo),this.firstStartMTT=t,this.onMinuteStartPush(n,t.recordId),this.minuteOpenFlag=!1):(this.waitRemindMTTList||(this.waitRemindMTTList=new Array),-1==this.waitRemindMTTList.indexOf(t)&&t.recordId!=this.firstStartMTT.recordId&&(this.waitRemindMTTList.push(t),this.joinedMTTList.splice(e,1)))),20>=n&&n>0){for(var i=!0,a=0,o=this.hadRemindJoinedMTT;a<o.length;a++){var r=o[a];if(r.recordId==t.recordId){i=!1;break}}i&&(this.onSecondStartPush(n,t.recordId),this.hadRemindJoinedMTT.push(t))}}},e.prototype.waitCounDown=function(){if(this.waitRemindMTTList&&this.waitRemindMTTList.length>0){this.minuteOpenFlag=!0;for(var e=0;e<this.waitRemindMTTList.length;e++){var t=new MatchRoomInfo;t=this.waitRemindMTTList[e];var n=Math.floor(t.startTime-TimeManager.GetServerUtcTimestamp());60>=n&&n>0&&this.minuteOpenFlag&&(this.onMinuteStartPush(n,t.recordId),this.minuteOpenFlag=!1),20>=n&&n>0&&(this.onSecondStartPush(n,t.recordId),this.waitRemindMTTList.splice(e,1),qin.Tick.RemoveSecondsInvoke(this.waitCounDown,this)),0>=n&&(this.waitRemindMTTList.splice(e,1),qin.Tick.RemoveSecondsInvoke(this.waitCounDown,this))}}},e.prototype.remindWaitMTT=function(){qin.Tick.AddSecondsInvoke(this.waitCounDown,this)},e.prototype.resetThreeMinFlag=function(){this.threeMinOpenFlag=!0},e}();__reflect(MTTRemindStartHandler.prototype,"MTTRemindStartHandler");var OutsInfo=function(){function e(){}return e}();__reflect(OutsInfo.prototype,"OutsInfo");var ChatManager=function(){function e(){}return e.initialzie=function(){e.marqueeList||(e.marqueeList=new Array),e.chatList||(e.chatList=new Array),e.marqueeHandler||(e.marqueeHandler=new MarqueeHandler),e._audioAutoPlayList||(e._audioAutoPlayList=new Array),qin.ArrayUtil.Clear(e.marqueeList),qin.ArrayUtil.Clear(e.chatList),e.isHaveNewChatMsg=!1,RecordAudioManager.OnPlayRecordComplete.addListener(e.RecordAudioManager_OnPlayRecordComplete,this),SocketManager.AddCommandListener(Command.Chat_PushMessage_2014,e.pushChatMessage,this),HundredWarManager.onLeaveEvent.addListener(e.clear,this),HundredWarManager.OnGetRoomInfoEvent.addListener(e.clearNewMsg,this),GamblingManager.LeaveRoomEvent.addListener(e.clear,this),GamblingManager.OnGetRoomInfoEvent.addListener(e.clearNewMsg,this)},e.RecordAudioManager_OnPlayRecordComplete=function(){e.CheckAndPlayAudioAutoList()},e.clear=function(){qin.ArrayUtil.Clear(e.chatList)},e.clearNewMsg=function(){e.isHaveNewChatMsg=!1,e.onRefreshChatRedPointEvent.dispatch()},e.pushChatMessage=function(t){if(t.data){var n=qin.PoolUtil.GetObject(ChatInfo),i=new ChatInfo;switch(n.roleId=t.data.roleId,n.type=t.data.type,n.type){case ChatMessageType.Maquee:n.message=e.marqueeHandler.getMsgByType(t.data.message,t.data.name),e.marqueeHandler.setMsgSendUserName(n,t.data.message,t.data.name),i.copyValueFrom(n),e.marqueeHandler.isShowMarqueeMsg(t.data.message)&&e.marqueeList.push(n),e.chatList.push(i),e.marqueeMessageOper();break;case ChatMessageType.InRoom:n.message=t.data.message,n.name=t.data.name,e.AddChatInfo(n)}UIManager.isShowPanel(UIModuleName.ChatPanel)||n.type!=ChatMessageType.InRoom||n.roleId==UserManager.userInfo.roleId||n.subType==ChatSubType.Emoji||(e.isHaveNewChatMsg=!0,e.onRefreshChatRedPointEvent.dispatch()),e.onNewMessageCome.dispatch(n)}},e.SendAudioRecordMessage=function(t,n,i,a,o){e.SendChatMessage(ChatSpecialStrings.AudioRecordMessage+n+qin.StringConstants.Comma+i+qin.StringConstants.Comma+a+qin.StringConstants.Comma+o,t)},e.SendChatMessage=function(t,n){var i=function(t){e.OnMessageSend.dispatch(),SoundManager.playEffect(MusicAction.sentMessage)};SocketManager.call(Command.Chat_SendMessage_3019,{message:t,type:n},i,null,this)},e.AddChatInfo=function(t){if(t.subType!=ChatSubType.Emoji&&e.chatList.push(t),e.chatList.length>e._chatMessageMax){var n=e.chatList[0];e.CheckToClearAudioData(n),qin.ArrayUtil.RemoveItem(n,e.chatList)}e.HandleChatInfo(t)},e.HandleChatInfo=function(t){t.subType==ChatSubType.AudioRecordMessage&&GameSetting.autoVoiceEnabled&&(e._audioAutoPlayList.push(t),e.CheckAndPlayAudioAutoList())},e.CheckAndPlayAudioAutoList=function(){qin.StringUtil.isNullOrEmpty(RecordAudioManager.playingGuid)&&!RecordAudioManager.isDownloading&&e._audioAutoPlayList.length>0&&e.CheckAndPlay(e._audioAutoPlayList.shift())},e.CheckAndPlay=function(e){if(e.subType==ChatSubType.AudioRecordMessage){var t=e.param[1];ChannelManager.hasRecordData(t)}},e.checkComplete=function(t){var n=JSON.parse(t);if(n){for(var i=n.guid,a=qin.StringUtil.toBoolean(n.has),o=void 0,r=0,s=e.chatList;r<s.length&&(o=s[r],o.subType!=ChatSubType.AudioRecordMessage||o.param[1]!=i);r++);if(o){var l=o.param[3],h=parseFloat(o.param[0]);a?RecordAudioManager.playingGuid==i?(egret.log("正在播放停止播放"),ChannelManager.stopRecord(i)):0==RecordAudioManager.isRecording&&(ChannelManager.playRecord(i),RecordAudioManager.PlayPauseAndResume(i,h)):RecordAudioManager.DownloadAmrData(l,i,h)}}},e.ClearAudioAutoPlayList=function(){e._audioAutoPlayList.length=0},e.CreateChatInfoByMyInfo=function(e,t){var n=new ChatInfo;return n.roleId=UserManager.userInfo.roleId,n.type=e,n.message=t,n.name=UserManager.userInfo.name,n},e.marqueeMessageOper=function(){if(!e.isOnMessage&&e.marqueeList.length>0){var t=e.marqueeList.shift();t.type==ChatMessageType.Maquee&&UIManager.showPanel(UIModuleName.MarqueePanel,t.message),qin.PoolUtil.PutObject(t)}},e.nextMarqueeMessage=function(){e.isOnMessage=!1,e.marqueeMessageOper()},e.CheckToClearAudioData=function(e){if(0==e.message.indexOf(ChatSpecialStrings.AudioRecordMessage)){var t=e.message.substring(ChatSpecialStrings.AudioRecordMessage.length),n=t.split(qin.StringConstants.Comma);4==n.length&&RecordAudioManager.removeAuidoData(e)}},e._chatMessageMax=50,e.onNewMessageCome=new qin.DelegateDispatcher,e.OnMessageSend=new qin.DelegateDispatcher,e.onRefreshChatRedPointEvent=new qin.DelegateDispatcher,e}();__reflect(ChatManager.prototype,"ChatManager");var ChatInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"message",{get:function(){return this._message},set:function(e){this._message=e,this.ParseMessageParams()},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.roleId=void 0,this.message=void 0,this.type=void 0},t.prototype.ParseMessageParams=function(){if(this.subType!=ChatSubType.Horn)if(this.subType=ChatSubType.Normal,this.message&&0==this.message.indexOf(ChatSpecialStrings.AudioRecordMessage)){var e=this.message.substring(ChatSpecialStrings.AudioRecordMessage.length),t=e.split(qin.StringConstants.Comma);4==t.length&&(this.param=t,this.subType=ChatSubType.AudioRecordMessage)}else if(this.message&&0==this.message.indexOf(ChatSpecialStrings.Emoji)){var e=this.message.substring(ChatSpecialStrings.Emoji.length),t=e.split(qin.StringConstants.Comma);1==t.length&&(this.param=t,this.subType=ChatSubType.Emoji)}},t}(BaseServerValueInfo);__reflect(ChatInfo.prototype,"ChatInfo",["qin.IPoolObject","Object"]);var Emoji=function(){function e(){}return e}();__reflect(Emoji.prototype,"Emoji");var MarqueeHandler=function(){function e(){}return e.prototype.getMsgByType=function(e,t){var n;try{n=JSON.parse(e)}catch(i){qin.Console.log(i)}if(n){if(n.type==MarqueeMsgType.SystemMsg)return n.msg;if(n.type==MarqueeMsgType.MTTMsg)return this.getMTTMarqueeMsg(n,t);if(n.type==MarqueeMsgType.HundredWarMsg)return this.getHundredMarqueeMsg(n);if(n.type==MarqueeMsgType.HornMag)return n.msg}return null},e.prototype.getMTTMarqueeMsg=function(e,t){var n,i=MarqueeDefined.GetInstance().getInfoByType(e.type);if(i){var a=void 0,o=void 0;n=i.message;var r=ChampionshipDefined.GetInstance().getDefinition(e.id);r&&(a=r.name),o=AwardDefined.GetInstance().getAwardNameById(e.aid,!0),n=qin.StringUtil.format(n,t,a,o)}return n},e.prototype.getHundredMarqueeMsg=function(e){var t,n=MarqueeDefined.GetInstance().getInfoByType(e.type);t=n.message;var i,a=HundredWarDefined.GetInstance().getDefinition(e.id);return a&&(i=a.name),t=qin.StringUtil.format(t,i,e.gold+"金币")},e.prototype.getMarqueeType=function(e){var t;try{t=JSON.parse(e)}catch(n){qin.Console.log(n)}return t?t.type:null},e.prototype.isShowMarqueeMsg=function(e){var t;try{t=JSON.parse(e)}catch(n){qin.Console.log(n)}if(t){var i=void 0;if(t.type==MarqueeMsgType.SystemMsg)i=t.show;else{var a=MarqueeDefined.GetInstance().getInfoByType(t.type);a&&(i=a.show)}if(i==MarqueeMsgShowTime.All)return!0;if(i==MarqueeMsgShowTime.OnHundredWar)return SceneManager.sceneType==SceneType.HundredWar?!0:!1;if(i==MarqueeMsgShowTime.OnGambling)return SceneManager.sceneType!=SceneType.Game||GamblingUtil.isRace?!1:!0;if(i==MarqueeMsgShowTime.OnMTT)return SceneManager.sceneType==SceneType.Game&&GamblingUtil.isRace?!0:!1;if(i==MarqueeMsgShowTime.OnRoom)return SceneManager.sceneType==SceneType.Game||SceneManager.sceneType==SceneType.HundredWar?!1:!0}return!1},e.prototype.setMsgSendUserName=function(e,t,n){var i=ChatManager.marqueeHandler.getMarqueeType(t);switch(i){case MarqueeMsgType.HornMag:e.subType=ChatSubType.Horn,n&&(e.name=n);break;case MarqueeMsgType.SystemMsg:e.name="系统广播"}},e}();__reflect(MarqueeHandler.prototype,"MarqueeHandler");var RecordAudioManager=function(){function e(){}return e.RecordComplete=function(t){var n=JSON.parse(t);if(n){var i=n.data;if(e._armData=i,e._armTime=parseFloat(n.time),e._armGuid=n.guid,e._armTime<.5)return e.ClearData(),void AlertManager.showAlert("录音时间太短，请重试");e.OnRecordVoiceComplete.dispatch([e._armTime,e._armGuid]),qin.StringUtil.isNullOrEmpty(e._updateSign)?e.RequestUpdateSign():e.UploadAmrRecordData()}},e.UploadAmrRecordData=function(){var t=ProjectDefined.GetInstance().getVoiceUpLoadUrl(VersionManager.isServerTest),n=e._armGuid,i=e._updatePath,a=e._armTime,o=function(t){ChatManager.SendAudioRecordMessage(ChatMessageType.InRoom,a,n,t.sign,i),e.OnUploadRecordVoiceComplete.dispatch([a,n,t.sign,i])};UpLoader.UpLoad(t,e._updateSign,e._armData,!0,o,e.OnUpdateError),e.ClearData()},e.IsStillHandling=function(){return!qin.StringUtil.isNullOrEmpty(e._armGuid)},e.OnUpdateError=function(t){e.ClearData()},e.ClearData=function(){e._armGuid=null,e._updatePath=null,e._armTime=0,e._updateSign=null,e._armData=null},e.DownloadAmrData=function(t,n,i){var a=ProjectDefined.GetInstance().getStorageHost(VersionManager.isServerTest);a+=t,e.isDownloading=!0;var o=n;RES.getResByUrl(a,function(t){if(e.isDownloading=!1,t){var n=!e.isRecording;ChannelManager.setRecordData(o,t,n),n&&e.PlayPauseAndResume(o,i)}else e.OnDownLoadError(o)},this,RES.ResourceItem.TYPE_TEXT)},e.OnDownLoadError=function(e){qin.Console.log("加载录音文件失败！:"+e)},e.DispatchPlayRecordComplete=function(t){e.OnPlayRecordComplete.dispatch(t)},e.DispatchPreparePlay=function(t){e.OnPrepearPlay.dispatch(t)},e.RecordVoice=function(t){t==AudioRecordActions.StartRecord?(qin.StringUtil.isNullOrEmpty(e.playingGuid)||(egret.log("开始录音停止播放"),ChannelManager.stopRecord(e.playingGuid)),e.RequestUpdateSign(),e.PauseMusicSetting(),e.isRecording=!0):(e.isRecording=!1,e.RestoreMusicSetting())},e.PauseMusicSetting=function(){e._tempSoundMusic=SoundManager.bgEnabled,e._tempSoundEffect=SoundManager.effectEnabled,e._isChangeSoundSetting=!0,e._tempSoundMusic&&(SoundManager.bgEnabled=!1),e._tempSoundEffect&&(SoundManager.effectEnabled=!1)},e.RestoreMusicSetting=function(){e._isChangeSoundSetting&&(e._tempSoundMusic&&(SoundManager.bgEnabled=!0),e._tempSoundEffect&&(SoundManager.effectEnabled=!0),e._isChangeSoundSetting=!1),egret.clearTimeout(e._resumeTimer)},e.RequestUpdateSign=function(){SocketManager.ImplCall(Command.Chat_Record_Sgin_3018,null,e.OnUpdateSignCallBack,null,this)},e.OnUpdateSignCallBack=function(t){null!=t.data&&(e._updateSign=t.data.sign,e._updatePath=t.data.path,e.CheckToUploadData())},e.CheckToUploadData=function(){0==qin.StringUtil.isNullOrEmpty(e._updateSign)&&null!=e._armData&&e.UploadAmrRecordData()},e.PlayPauseAndResume=function(t,n){0!=n&&(e.PauseMusicSetting(),e.playingGuid=t,e.ResumeLater(n)),e.DispatchPreparePlay(t)},e.ResumeLater=function(t){egret.clearTimeout(e._resumeTimer),e._resumeTimer=egret.setTimeout(e.playComplete,this,1e3*t+1e3)},e.playComplete=function(){egret.clearTimeout(e._resumeTimer);var t=e.playingGuid;e.playingGuid=qin.StringConstants.Empty,e.DispatchPlayRecordComplete(t),e.RestoreMusicSetting()},e.removeAuidoData=function(e){var t=ProjectDefined.GetInstance().getStorageHost(VersionManager.isServerTest);t+=e.param[3],RES.destroyRes(t)},e.OnRecordVoiceComplete=new qin.DelegateDispatcher,e.OnUploadRecordVoiceComplete=new qin.DelegateDispatcher,e.OnPlayRecordComplete=new qin.DelegateDispatcher,e.OnPrepearPlay=new qin.DelegateDispatcher,e._tempSoundMusic=!1,e._tempSoundEffect=!1,e._isChangeSoundSetting=!1,e.playingGuid=qin.StringConstants.Empty,e.isDownloading=!1,e.isRecording=!1,e}();__reflect(RecordAudioManager.prototype,"RecordAudioManager");var AudioRecordActions;!function(e){e[e.StartRecord=0]="StartRecord",e[e.StopRecord=1]="StopRecord",e[e.CancelRecord=2]="CancelRecord"}(AudioRecordActions||(AudioRecordActions={}));var HundredWarFunPatternProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),HundredWarManager.onCardPushEvent.addListener(this.onProcessUpdate,this)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onPlayHWField(this,HundredWarType.FunPattern)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(HundredWarFunPatternProcess.prototype,"HundredWarFunPatternProcess");var FriendInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(BaseFriendInfo);__reflect(FriendInfo.prototype,"FriendInfo");var FriendManager=function(){function e(){}return e.reset=function(){e.isGiftLisFirstOpen=!0,e.isRequestLisFirstOpen=!0,qin.ArrayUtil.Clear(e.friendList),qin.ArrayUtil.Clear(e.requestFriendList),qin.ArrayUtil.Clear(e.giftList),qin.ArrayUtil.Clear(e.searchList),e._requestAdd=0,e._addFriendsRequestInfo=null,qin.ArrayUtil.Clear(e.requestNewsList)},e.addRecListener=function(){SocketManager.AddCommandListener(Command.Friend_Push_AddSuccess_2036,e.onAddFriendSuccessRec,this),SocketManager.AddCommandListener(Command.Friend_Push_BeDel_2035,e.onDelFriendSuccessRec,this),SocketManager.AddCommandListener(Command.Friend_Push_OnlineState_2064,e.onOnlineStateChangeRec,this),SocketManager.AddCommandListener(Command.Friend_Push_GiveGold_2037,e.onGiveGoldRec,this),SocketManager.AddCommandListener(Command.Friend_Push_RequestFriend_2038,e.onRequestFriendRec,this),SocketManager.AddCommandListener(Command.Friend_Push_Invite_2111,e.pushInviteMsgHandler,this),SocketManager.AddCommandListener(Command.Friend_Push_Reset_2015,e.onResetPush,this)},e.Initialize=function(t){if(e.reset(),e.addRecListener(),e.friendList=new Array,e.giftList||(e.giftList=new Array),e._givenGoldRoleIdList||(e._givenGoldRoleIdList=new Array),t.data.friendList)for(var n=0,i=t.data.friendList;n<i.length;n++){var a=i[n],o=new FriendInfo;o.copyValueFrom(a),e.friendList.push(o),1==a.getGold&&e.giftList.push(o),a.giveGold&&e._givenGoldRoleIdList.push(a.roleId)}},e.reqFriendListInfo=function(){SocketManager.call(Command.Friend_GetList_3156,null,e.FriendListInfoResponse,null,this)},e.FriendListInfoResponse=function(t){if(t.data&&t.data.friendList){qin.ArrayUtil.Clear(e.friendList);for(var n=0,i=t.data.friendList;n<i.length;n++){var a=i[n],o=new FriendInfo;o.copyValueFrom(a),e.friendList.push(o)}e.onGetFriendListEvent.dispatch()}},e.reqGiveFriendGold=function(t){var n=function(n){SoundManager.playEffect(MusicAction.gift_send),e.onGiveFriendGoldEvent.dispatch(t);for(var i=0,a=e.friendList;i<a.length;i++){var o=a[i];if(o.roleId==t){o.giveGold=1;break}}e.isExitInRoleIdList(t)||e._givenGoldRoleIdList.push(t)};SocketManager.call(Command.Friend_GiveGold_3151,{roleId:t},n,null,this)},e.isExitInRoleIdList=function(t){for(var n=!1,i=0,a=e._givenGoldRoleIdList;i<a.length;i++){var o=a[i];o==t&&(n=!0)}return n},e.reqReceiveGift=function(t){var n=function(n){if(0==t)e.getGoldNum=ProjectDefined.giveOnceGoldNum*e.giftList.length,e.giftList=[];else for(var i=0;i<e.giftList.length;i++)if(t==e.giftList[i].roleId){e.giftList.splice(i,1),e.getGoldNum=ProjectDefined.giveOnceGoldNum;break}SoundManager.playEffect(MusicAction.gift_recv),e.onReceiveGiftEvent.dispatch()};SocketManager.call(Command.Friend_ReceiveGift_3150,{roleId:t},n,null,this)},e.reqFriendRequest=function(){SocketManager.call(Command.Friend_RequestList_3157,null,e.FriendRequestResponse,null,this)},e.FriendRequestResponse=function(t){if(t.data.Array){qin.ArrayUtil.Clear(e.requestFriendList),e.requestFriendList||(e.requestFriendList=new Array);for(var n=0,i=t.data.Array;n<i.length;n++){var a=i[n],o=new BaseFriendInfo;o.copyValueFrom(a),e.requestFriendList.push(o)}e.onFriendRequestEvent.dispatch()}},e.reqReceiveFriendRequest=function(t,n){var i=function(i){n?AlertManager.showAlertByString("您已成功添加此好友。"):AlertManager.showAlertByString("您已拒绝此条好友申请。");for(var a=0;a<e.requestFriendList.length;a++)if(e.requestFriendList[a].roleId==t){e.requestFriendList.splice(a,1);break}e.onReceiveFriendRequestEvent.dispatch()},a=1==n?!0:!1;SocketManager.call(Command.Friend_Receive_3154,{roleId:t,IsAccept:a},i,null,this)},e.reqSearchPlayer=function(t){SocketManager.call(Command.Friend_SearchPlayer_3153,{Val:t},e.SearchPlayerResponse,null,this)},e.SearchPlayerResponse=function(t){if(t.data.Array){qin.ArrayUtil.Clear(e.searchList),e.searchList||(e.searchList=new Array);for(var n=0,i=t.data.Array;n<i.length;n++){var a=i[n],o=new BaseFriendInfo;o.copyValueFrom(a),e.searchList.push(o)}e.onSearchPlayerEvent.dispatch()}else AlertManager.showAlert("此用户名或者ID不存在")},e.reqAddPlayer=function(t){var n=function(n){UIManager.showFloatTips("已向对方发送好友申请。"),e.onAddPlayerEvent.dispatch(t)};e.isFriend(t)?AlertManager.showAlertByString("该用户已是您的好友"):e.isFriendFull(!0)&&SocketManager.call(Command.Friend_AddPlayer_3152,{roleId:t},n,null,this)},e.reqRemovePlayer=function(t){var n=function(n){for(var i=0;i<e.friendList.length;i++)if(t==e.friendList[i].roleId){e.friendList.splice(i,1);break}e.refreshUIFlag=FriendUIType.FriendList,e.refreshGiftList(t),UIManager.closePanel(UIModuleName.UserInfoPanel),e.onRemovePlayerEvent.dispatch()};e.isFriend(t)?SocketManager.call(Command.Friend_DelPlayer_3155,{roleId:t},n,null,this):qin.Console.log("删除的用户不是您的好友,id:"+t)},e.getUserInfoResult=function(t,n){if(n==FriendUIType.FriendList){var i=new FriendInfo;i.copyValueFrom(t.data),e.isExitInRoleIdList(t.data.roleId)&&(i.giveGold=1),e.friendList.push(i),e.refreshUIFlag=FriendUIType.FriendList,e.onRefreshInfoEvent.dispatch()}else if(n==FriendUIType.GiftList&&(e.giftList||(e.giftList=new Array),0==e.isExistInGiftList(t.data.roleId))){var a=new BaseFriendInfo;a.copyValueFrom(t.data),e.giftList.push(a),e.refreshUIFlag=FriendUIType.GiftList,e.onRefreshInfoEvent.dispatch()}},e.reqInviteFriend=function(t,n){var i=function(t){e.InviteFriendEvent.dispatch()};SocketManager.call(Command.Req_SendGameInvite_3608,{id:t,roleId:n},i,null,this)},e.onResetPush=function(t){if(e.friendList)for(var n=0,i=e.friendList;n<i.length;n++){var a=i[n];a.giveGold=0}qin.ArrayUtil.Clear(e._givenGoldRoleIdList)},e.onAddFriendSuccessRec=function(e){e.data.roleId&&UserManager.reqGetOtherUserInfo(e.data.roleId,FriendUIType.FriendList)},e.onDelFriendSuccessRec=function(t){if(t.data)for(var n=0;n<e.friendList.length;n++)if(t.data.roleId==e.friendList[n].roleId){e.friendList.splice(n,1),e.refreshUIFlag=FriendUIType.FriendList,e.refreshGiftList(t.data.roleId);break}},e.refreshGiftList=function(t){if(e.giftList&&e.giftList.length>0)for(var n=0;n<e.giftList.length;n++)if(e.giftList[n].roleId==t){e.giftList.splice(n,1);break}e.onRefreshInfoEvent.dispatch()},e.onOnlineStateChangeRec=function(t){if(t.data)for(var n=0;n<e.friendList.length;n++)if(t.data.roleId==e.friendList[n].roleId){e.friendList[n].offlineTime=t.data.offlineTime,e.refreshUIFlag=FriendUIType.FriendList,e.onRefreshInfoEvent.dispatch();break}},e.onGiveGoldRec=function(e){e.data.roleId&&UserManager.reqGetOtherUserInfo(e.data.roleId,FriendUIType.GiftList)},e.onRequestFriendRec=function(t){if(t.data){var n=new BaseFriendInfo;n.copyValueFrom(t.data),e.requestFriendList||(e.requestFriendList=new Array);for(var i=0;i<e.requestFriendList.length;i++)if(n.roleId==e.requestFriendList[i].roleId)return;e.requestFriendList.push(n),e.refreshUIFlag=FriendUIType.RequestList,e.requestNewsList?e._requestAdd=e.requestNewsList.length:e._requestAdd=0,e._addFriendsRequestInfo=new RequestNewsInfo(FriendMsgType.RequireMsg,t.data),UIManager.showPanel(UIModuleName.FriendMsgPanel,e._addFriendsRequestInfo),e.onRefreshInfoEvent.dispatch()}},e.pushInviteMsgHandler=function(t){if(t.data){e.requestNewsList||(e.requestNewsList=new Array),e.requestNewsList.push(new RequestNewsInfo(FriendMsgType.InviteMsg,t.data));var n=e.getFriendMsgInfo();n&&UIManager.showPanel(UIModuleName.FriendMsgPanel,n)}},e.removeFriendMsgInfo=function(t){if(t)switch(t.type){case FriendMsgType.InviteMsg:if(e.requestNewsList)for(var n=e.requestNewsList.length-1;n>=0;n--){var i=e.requestNewsList[n];if(t==i){e.requestNewsList.splice(n,1);break}}break;case FriendMsgType.RequireMsg:e._addFriendsRequestInfo=null}},e.getFriendMsgInfo=function(){var t=TimeManager.GetServerUtcTimestamp();if(e._addFriendsRequestInfo)if(t-e._addFriendsRequestInfo.time>e.msgTime)e._addFriendsRequestInfo=null;else if(!e.requestNewsList||e._requestAdd>=e.requestNewsList.length)return e._addFriendsRequestInfo;if(e.requestNewsList&&e.requestNewsList.length>0){for(var n=e.requestNewsList.length-1;n>=0;n--){var i=e.requestNewsList[n];if(t-i.time>e.msgTime){e.requestNewsList.splice(0,n+1);break}}if(e.requestNewsList.length>0)return e.requestNewsList[e.requestNewsList.length-1]}return null},e.isFriend=function(t){if(e.friendList&&e.friendList.length>0)for(var n=0,i=e.friendList;n<i.length;n++){var a=i[n];if(a.roleId==t)return!0}return!1},e.getFriendInfoById=function(t){for(var n=0,i=e.friendList;n<i.length;n++){var a=i[n];if(a.roleId==t)return a}return null},e.isFriendFull=function(t){void 0===t&&(t=!1);var n,i;return i=VipManager.isVip(UserManager.userInfo)?VipDefined.GetInstance().getVipDefinitionByLevel(UserManager.userInfo.vipLevel):VipDefined.GetInstance().getVipDefinitionByLevel(0),i&&(n=i.friendLimit),n&&e.friendList&&n>e.friendList.length?!0:(t&&AlertManager.showAlertByString("您的好友数量已达到上限"),!1)},e.isExistInGiftList=function(t){if(e.giftList&&e.giftList.length>0)for(var n=0,i=e.giftList;n<i.length;n++){var a=i[n];if(a.roleId==t)return!0}return!1},e.msgTime=10,e.isGiftLisFirstOpen=!0,e.isRequestLisFirstOpen=!0,e._requestAdd=0,e.onGiveFriendGoldEvent=new qin.DelegateDispatcher,e.onReceiveGiftEvent=new qin.DelegateDispatcher,e.onFriendRequestEvent=new qin.DelegateDispatcher,e.onReceiveFriendRequestEvent=new qin.DelegateDispatcher,e.onSearchPlayerEvent=new qin.DelegateDispatcher,e.onAddPlayerEvent=new qin.DelegateDispatcher,e.onRemovePlayerEvent=new qin.DelegateDispatcher,e.onRefreshInfoEvent=new qin.DelegateDispatcher,e.InviteFriendEvent=new qin.DelegateDispatcher,e.onGetFriendListEvent=new qin.DelegateDispatcher,e
}();__reflect(FriendManager.prototype,"FriendManager");var FriendMsgType;!function(e){e[e.RequireMsg=1]="RequireMsg",e[e.InviteMsg=2]="InviteMsg"}(FriendMsgType||(FriendMsgType={}));var FriendUIType;!function(e){e[e.FriendList=1]="FriendList",e[e.GiftList=2]="GiftList",e[e.RequestList=3]="RequestList"}(FriendUIType||(FriendUIType={}));var RequestNewsInfo=function(){function e(e,t){this.type=e,this.info=t,this.time=TimeManager.GetServerUtcTimestamp()}return e}();__reflect(RequestNewsInfo.prototype,"RequestNewsInfo");var CardTypeMatchUtil=function(){function e(){}return e.startTest=function(){},e.initialize=function(){e.resultList=new Array,e._matchList=new Array,e._matchList.push(e.matchRoyalFlush),e._matchList.push(e.matchStraightFlush),e._matchList.push(e.matchFourOfAKind),e._matchList.push(e.matchFullhouse),e._matchList.push(e.matchFlush),e._matchList.push(e.matchStraight),e._matchList.push(e.matchThreeOfAKind),e._matchList.push(e.matchTwoPairs),e._matchList.push(e.matchOnePair),e._matchList.push(e.matchHighCard)},e.clear=function(){e.cardType=CardType.None,e.resultList.length=0},e.matchCardInRoom=function(t){if(GamblingManager.roomInfo){var n=void 0;return GamblingManager.roomInfo.publicCard&&t?n=GamblingManager.roomInfo.publicCard.concat(t):t?n=t.concat():GamblingManager.roomInfo.publicCard&&(n=GamblingManager.roomInfo.publicCard.concat()),e.matchCardType(n)}return!1},e.matchCardType=function(t){if(e._matchList||e.initialize(),e.clear(),t&&t.length>0){for(var n=new Array,i=t.length,a=void 0,o=0;i>o;o++)n.push(t[o].clone()),a=n[o],a.card[1]==e.minIndex&&(a.card[1]=e.maxIndex);for(var r=0,s=n;r<s.length;r++){var l=s[r];l.card[2]=0}n.sort(e.sortByIndex);for(var h=void 0,o=0;o<e._matchList.length;o++)if(h=e._matchList[o],h==e.matchStraight||h==e.matchStraightFlush){if(e.containAOper(h,n))return e.matchOver(),n=null,!0}else if(h(n))return e.matchOver(),n=null,!0;return!1}},e.matchOver=function(){for(var t,n=e.resultList.length,i=0;n>i;i++)t=e.resultList[i],t.card[1]==e.maxIndex&&(t.card[1]=e.minIndex);switch(e.cardType){case CardType.RoyalFlush:case CardType.StraightFlush:case CardType.Flush:case CardType.Straight:for(var i=0;n>i;i++)t=e.resultList[i],t.card[3]=1;break;case CardType.FourOfAKind:case CardType.TwoPairs:for(var i=0;4>i;i++)t=e.resultList[i],t.card[3]=1;break;case CardType.Fullhouse:case CardType.ThreeOfAKind:for(var i=0;3>i;i++)t=e.resultList[i],t.card[3]=1;break;case CardType.OnePair:for(var i=0;2>i;i++)t=e.resultList[i],t.card[3]=1;break;case CardType.HighCard:e.resultList.sort(e.sortByIndex),t=e.resultList[e.resultList.length-1],1==t.card[1]?t.card[3]=1:(t=e.resultList[0],t.card[3]=1)}},e.containAOper=function(t,n){if(t(n))return!0;for(var i=!1,a=0;a<n.length;a++)if(n[a].card[1]==e.maxIndex){i=!0;break}if(i){for(var a=0;a<n.length;a++)n[a].card[1]==e.maxIndex&&(n[a].card[1]=e.minIndex);n.sort(e.sortByIndex);for(var o=t(n),a=0;a<n.length;a++)n[a].card[1]==e.minIndex&&(n[a].card[1]=e.maxIndex);return n.sort(e.sortByIndex),o}return!1},e.matchRoyalFlush=function(t){var n=e.matchStraightFlush(t);return n&&e.resultList[0].card[1]==e.maxIndex?(e.toFillUnMaskFlag(),e.cardType=CardType.RoyalFlush,!0):!1},e.matchStraightFlush=function(t){var n=t.length;if(n>=GamblingManager.MaxBoardNum){for(var i=GamblingManager.MaxCardNum-5,a=void 0,o=void 0,r=0,s=0,l=new Array,h=0;i>=h;h++){a=t[h],r=0,s=0,l.length=0,l.push(a);for(var d=new Array,c=h+1;n>c;c++)if(o=t[c],-1==d.indexOf(o.card[1])&&(r++,a.card[0]==o.card[0]&&a.card[1]-o.card[1]==r?(d.push(o.card[1]),s++,l.push(o)):r--),4==s)return e.resultList=l,e.toFillUnMaskFlag(),e.cardType=CardType.StraightFlush,!0}l=null}return!1},e.matchFourOfAKind=function(t){var n=t.length;if(n>=GamblingManager.MaxBoardNum){for(var i=n-4+1,a=void 0,o=void 0,r=0,s=new Array,l=0;i>=l;l++){a=t[l],r=0,s.length=0,s.push(a);for(var h=l+1;n>h;h++)if(o=t[h],a.card[1]==o.card[1]&&(r++,s.push(o)),3==r)return e.resultList=s,e.toFillUnMaskFlag(),e.toFillHighCard(t,s[0].card[1],n),e.cardType=CardType.FourOfAKind,!0}s=null}return!1},e.matchFullhouse=function(t){var n=t.length;if(n>=GamblingManager.MaxBoardNum){for(var i=n-3+1,a=void 0,o=void 0,r=0,s=new Array,l=0;i>=l;l++){a=t[l],r=0,s.length=0,s.push(a);for(var h=l+1;n>h;h++)if(o=t[h],a.card[1]==o.card[1]&&(r++,s.push(o)),2==r){var d=e.toFillPair(t,s,n);if(d)return e.resultList=d,e.toFillUnMaskFlag(),e.cardType=CardType.Fullhouse,!0}}s=null}return!1},e.matchFlush=function(t){var n=t.length;if(n>=GamblingManager.MaxBoardNum){for(var i=GamblingManager.MaxCardNum-5,a=void 0,o=void 0,r=0,s=new Array,l=0;i>=l;l++){a=t[l],r=0,s.length=0,s.push(a);for(var h=l+1;n>h;h++)if(o=t[h],a.card[0]==o.card[0]&&(r++,s.push(o)),4==r)return e.resultList=s,e.toFillUnMaskFlag(),e.cardType=CardType.Flush,!0}s=null}return!1},e.matchStraight=function(t){var n=t.length;if(n>=GamblingManager.MaxBoardNum){for(var i=GamblingManager.MaxCardNum-5,a=void 0,o=void 0,r=0,s=0,l=new Array,h=0;i>=h;h++){a=t[h],r=0,s=0,l.length=0,l.push(a);for(var d=new Array,c=h+1;n>c;c++)if(o=t[c],-1==d.indexOf(o.card[1])&&(r++,a.card[1]-o.card[1]==r?(d.push(o.card[1]),s++,l.push(o)):r--),4==s)return e.resultList=l,e.toFillUnMaskFlag(),e.cardType=CardType.Straight,!0}l=null}return!1},e.matchThreeOfAKind=function(t){var n=t.length;if(n>=GamblingManager.MaxBoardNum){for(var i=n-3+1,a=void 0,o=void 0,r=0,s=new Array,l=0;i>=l;l++){a=t[l],r=0,s.length=0,s.push(a);for(var h=l+1;n>h;h++)if(o=t[h],a.card[1]==o.card[1]&&(r++,s.push(o)),2==r)return e.resultList=s,e.toFillUnMaskFlag(),e.toFillHighCard(t,s[0].card[1],n),e.cardType=CardType.ThreeOfAKind,!0}s=null}return!1},e.matchTwoPairs=function(t){var n=t.length;if(n>=GamblingManager.MaxBoardNum)for(var i=new Array,a=0,o=new Array,r=void 0,s=new Array,l=0;n>l;l++)if(r=t[l],e.sameCardOper(t,r.card[1]),2==e._sameCardList.length&&-1==s.indexOf(r.card[1])&&(s.push(r.card[1]),i=i.concat(e._sameCardList),a++,o.push(r.card[1]),2==a))return e.resultList=i,e.toFillUnMaskFlag(),e.toFillHighCard(t,o,n),e.cardType=CardType.TwoPairs,!0;return!1},e.matchOnePair=function(t){for(var n,i=t.length,a=new Array,o=0,r=0;i>r;r++)if(n=t[r],e.sameCardOper(t,n.card[1]),2==e._sameCardList.length&&(a=a.concat(e._sameCardList),o++,1==o))return e.resultList=a,e.toFillUnMaskFlag(),e.toFillHighCard(t,n.card[1],i),e.cardType=CardType.OnePair,!0;return!1},e.matchHighCard=function(t){return e.toFillHighCard(t,-1,t.length),e.toFillUnMaskFlag(),e.cardType=CardType.HighCard,!0},e.toFillPair=function(t,n,i){for(var a,o=n[0],r=0;i>r;r++)if(a=t[r],a.card[1]!=o.card[1]&&(e.sameCardOper(t,a.card[1]),e._sameCardList.length>=2))return n=n.concat(e._sameCardList);return null},e.toFillHighCard=function(t,n,i){for(var a,o=0;i>o&&(a=t[o],!(e.resultList.length<GamblingManager.MaxBoardNum&&("number"==typeof n&&a.card[1]!=n?(a.card[2]=1,e.resultList.push(a)):n instanceof Array&&-1==n.indexOf(a.card[1])&&(a.card[2]=1,e.resultList.push(a)),e.resultList.length==GamblingManager.MaxBoardNum)));o++);},e.sameCardOper=function(t,n){e._sameCardList||(e._sameCardList=new Array),e._sameCardList.length=0;for(var i=t.length,a=0;i>a;a++)t[a].card[1]==n&&n>0&&e._sameCardList.push(t[a])},e.sortByIndex=function(e,t){return e.card[1]>t.card[1]?-1:e.card[1]<t.card[1]?1:0},e.toFillUnMaskFlag=function(){for(var t=e.resultList.length,n=0;t>n;n++)e.resultList[n].card[2]=1},e.getCardDes=function(e){switch(e){case CardType.RoyalFlush:return"皇家同花顺";case CardType.StraightFlush:return"同花顺";case CardType.FourOfAKind:return"四条";case CardType.Fullhouse:return"葫芦";case CardType.Flush:return"同花";case CardType.Straight:return"顺子";case CardType.ThreeOfAKind:return"三条";case CardType.TwoPairs:return"两对";case CardType.OnePair:return"一对";case CardType.HighCard:return"高牌";default:return qin.StringConstants.Empty}},e.minIndex=1,e.maxIndex=14,e}();__reflect(CardTypeMatchUtil.prototype,"CardTypeMatchUtil");var HundredWarRichPatternProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),HundredWarManager.onCardPushEvent.addListener(this.onProcessUpdate,this)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onPlayHWField(this,HundredWarType.RichPattern)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(HundredWarRichPatternProcess.prototype,"HundredWarRichPatternProcess");var GamblingManager=function(){function e(){}return Object.defineProperty(e,"matchRoomInfo",{get:function(){return e._matchRoomInfo||(e._matchRoomInfo=new MatchRoomInfo),e._matchRoomInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e,"showPotChips",{get:function(){return void 0==e._showPotChips&&(e._showPotChips=e.totalPotChips),e._showPotChips},set:function(t){e._showPotChips=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isInRoom",{get:function(){return null!=e.roomInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isInSeat",{get:function(){if(InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.playerList)for(var t=0;t<e.roomInfo.playerList.length;t++)if(e.roomInfo.playerList[t].roleId==UserManager.userInfo.roleId)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"totalPotChips",{get:function(){var t=0;if(e.roomInfo){if(e.roomInfo.potChips)for(var n=0,i=e.roomInfo.potChips;n<i.length;n++){var a=i[n];t+=a}if(e.roomInfo.playerList)for(var o=0,r=e.roomInfo.playerList;o<r.length;o++){var s=r[o];s.num>0&&(t+=s.num)}return t}return 0},enumerable:!0,configurable:!0}),e.resetByReLogin=function(){e.reset(),e._isInitialize=!1},e.reset=function(){e.standClear(),e.roomInfo&&(e.roomInfo.publicCard=void 0),e.roomInfo=void 0,e.roundOverInfo=void 0,e.clearPlayerTotalNum(),e.lastCallPos=void 0,e._matchRoomInfo=void 0,e.timeAwardHandler.isGetTimeAward=!1},e.standClear=function(){e._isOnSeat=!1,e._self=null,e.roomInfo&&(e.roomInfo.handCard=void 0),e.oneLoopClear(),e.timeAwardHandler.stopCountDown()},e.oneLoopClear=function(){e.showPotChips=0,e.roomInfo&&(e.roomInfo.maxAnte=0),e.isCallAny=!1,e.isCheckOrFold=!1,e.clearPlayerNum()},e.roundOverClear=function(){e.showPotChips=0,e.roomInfo.maxAnte=0,e.roomInfo.minRaiseNum=0,e.roundOverInfo.handCardList=void 0,e.roomInfo.handCard=void 0,e.clearPlayerNum()},e.clearPlayerNum=function(){if(InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.playerList)for(var t=0,n=e.roomInfo.playerList;t<n.length;t++){var i=n[t];i.num=0}},e.clearPlayerTotalNum=function(){if(InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.playerList)for(var t=0,n=e.roomInfo.playerList;t<n.length;t++){var i=n[t];i.totalnum=0}},e.addPushListener=function(){SocketManager.AddCommandListener(Command.NextRoundStart_Push_2107,e.pushNextRoundStart,this),SocketManager.AddCommandListener(Command.BlindChange_Push_2100,e.pushBlindChange,this),SocketManager.AddCommandListener(Command.OneLoopOver_Push_2102,e.pushOneLoopOver,this),SocketManager.AddCommandListener(Command.SitOrStand_Push_2103,e.pushSitOrStand,this),SocketManager.AddCommandListener(Command.PlayerStateChange_Push_2104,e.pushStateChange,this),SocketManager.AddCommandListener(Command.ActionPosChange_Push_2105,e.pushActionPosChange,this),SocketManager.AddCommandListener(Command.OneRoundOver_Push_2106,e.pushOneRoundOver,this),SocketManager.AddCommandListener(Command.HandCard_Push_2108,e.pushHandCard,this),SocketManager.AddCommandListener(Command.BrightCard_Push_2109,e.pushBrightCard,this),SocketManager.AddCommandListener(Command.ChipsChange_Push_2110,e.pushChipsChange,this),SocketManager.AddCommandListener(Command.InTrusteeship_Push_2119,e.pushInTrusteeship,this),e.timeAwardHandler.addPushListener(),SocketManager.OnReconnectSynchronize.addListener(e.onReconnectHandler,this)},e.reqEnterRoom=function(t,n,i){void 0===t&&(t=0);var a=function(t){SocketManager.RemoveCommandListener(Command.EnterRoomInfo_Req_3600,a,this),e.isQuicklyEnter=i,e.initialize(t),e._isInitialize||(e._isInitialize=!0,e.addPushListener())};SocketManager.AddCommandListener(Command.EnterRoomInfo_Req_3600,a,this),void 0!=n&&t>0?SocketManager.Send(Command.EnterRoomInfo_Req_3600,{id:t,password:n}):t>0?SocketManager.Send(Command.EnterRoomInfo_Req_3600,{id:t}):SocketManager.Send(Command.EnterRoomInfo_Req_3600)},e.initialize=function(t){if(e.reset(),t.data&&t.data.id){if(e.roomInfo=new RoomInfo(t.data),e.roomInfo.isTrusteeship=void 0,e.roomInfo.isRaceOut=void 0,e.roomInfo.isFlopCardOver=!0,e.championshipHandler.initializeRoomInfo(t),e.roomInfo.handCard=new Array,GamblingUtil.cardArr2CardInfoList(t.data.handCard,e.roomInfo.handCard),0==e.roomInfo.handCard.length&&(e.roomInfo.handCard=void 0),e.roomInfo.publicCard=new Array,GamblingUtil.cardArr2CardInfoList(t.data.publicCard,e.roomInfo.publicCard),0==e.roomInfo.publicCard.length&&(e.roomInfo.publicCard=void 0),e.roomInfo.handCard&&e.roomInfo.handCard.length>2&&qin.Console.logError("手牌张数大于2"+e.roomInfo.handCard.length),e.roomInfo.playerList&&e.roomInfo.playerList.length>0)for(var n=0,i=e.roomInfo.playerList;n<i.length;n++){var a=i[n];a.roleId==UserManager.userInfo.roleId&&(e._isOnSeat=!0),e.reqGetPlayerUserInfo(a)}else e.getPlayerUserInfoOver();if(t.data.roomId){var o=RoomDefined.GetInstance().getDefinition(t.data.roomId);o&&this.timeAwardHandler.reqGetTimeAwardInfo(o.type)}e.gamblingReviewHandler.isNewRound=!0}else e.getPlayerUserInfoOver();e.showPotChips=e.totalPotChips,e.guessHandler.onEnable(),e.OnGetRoomInfoEvent.dispatch()},e.pushNextRoundStart=function(t){if(t.data&&e.roomInfo){if(e.roomInfo.publicCard=void 0,e.roundOverInfo=void 0,e.clearPlayerTotalNum(),e.roomInfo.isShowCard=!1,e.oneLoopClear(),e.roomInfo.copyValueFrom(t.data),e.roomInfo.potChips=void 0,e.roomInfo.startTime=TimeManager.GetServerUtcTimestamp(),e.roomInfo.isFlopCardOver=!1,e.self&&(e.self.initbankRoll=e.self.bankRoll),e.roomInfo.gamblingType==GamblingType.Championship&&e.roomInfo.blindLevel){if(e.matchRoomInfo&&e.matchRoomInfo.definition){var n=ChampionshipBlindDefined.GetInstance().getBlindInfoByLevel(e.roomInfo.blindLevel,e.matchRoomInfo.definition.blindType);n&&n.sBlind==e.roomInfo.sBlind&&n.bBlind==e.roomInfo.bBlind&&(e.roomInfo.ante=n.preBet)}e.roomInfo.nowBlindLevel=e.roomInfo.blindLevel}if(e.roomInfo.addbuy=0,e.guessHandler.resetBuyRB(),e.roomInfo.playerList)for(var i=0,a=e.roomInfo.playerList;i<a.length;i++){var o=a[i];o.bankRoll<=0&&(o.state=PlayerState.WaitNext)}e.NextRoundStartEvent.dispatch()}},e.pushBlindChange=function(t){if(t.data&&e.roomInfo){var n=e.roomInfo.blindLevel;e.roomInfo.copyValueFrom(t.data);var i=!1;n<e.roomInfo.blindLevel&&(i=!0,e.championshipHandler.setNextAddTime()),e.BlindChangeEvent.dispatch({isAddLevel:i})}},e.pushPotChipsChange=function(t){t.data&&e.roomInfo&&(e.roomInfo.copyValueFrom(t.data),e.PotChipsChangeEvent.dispatch())},e.pushOneLoopOver=function(t){if(t.data&&e.roomInfo){e.roomInfo.publicCard||(e.roomInfo.publicCard=new Array),GamblingUtil.cardArr2CardInfoList(t.data.card,e.roomInfo.publicCard),0==e.roomInfo.publicCard.length&&(e.roomInfo.publicCard=void 0);var n=void 0;e.roomInfo.handCard&&(n=e.roomInfo.handCard.concat());var i=void 0;e.roomInfo.publicCard&&(i=e.roomInfo.publicCard.concat()),e.oneLoopClear(),e.roomInfo.minRaiseNum=e.roomInfo.bBlind,e.roomInfo.potChips=t.data.potChips,e.roomInfo.maxAnte=0,e.OneLoopOverEvent.dispatch([n,i])}},e.pushSitOrStand=function(t){if(t.data){var n=t.data.state;if(n==BuyInGameState.Sit){var i=new PlayerInfo;i.roleId=t.data.roleId,i.pos=t.data.pos,i.bankRoll=t.data.bankRoll,i.state=PlayerState.WaitNext,e.addPlayer(i),e.SitOrStandEvent.dispatch({pInfo:i,state:n}),e.reqGetPlayerUserInfo(i)}else if(n==BuyInGameState.Stand){var a=t.data.roleId,i=e.getPlayerInfo(a);if(i){if(i.roleId==UserManager.userInfo.roleId&&(e.standClear(),InfoUtil.checkAvailable(e.roomInfo)&&UserManager.isBust)){var o=e.roomInfo.definition.sBuyin;SceneManager.sceneType!=SceneType.Hall&&UIManager.showPanel(UIModuleName.BuyAccessGamePanel,{minNum:o,isGoldInsufficient:!0,isBankruptcy:!0})}e.removePlayer(a),e.SitOrStandEvent.dispatch({pInfo:i,state:n})}}}},e.pushStateChange=function(t){if(t.data){var n=t.data.roleId;n==UserManager.userInfo.roleId&&(e.isCallAny=!1,e.isCheckOrFold=!1);var i=t.data.state,a=t.data.num;void 0==a&&(a=0);var o=e.getPlayerInfo(n);if(0==e.showPotChips&&(e.showPotChips=e.totalPotChips),o&&void 0==o.totalnum&&(o.totalnum=0),InfoUtil.checkAvailable(e.roomInfo)&&a>0&&(o&&o.num>0?(e.showPotChips+=a-o.num,o.totalnum+=a-o.num):(e.showPotChips+=a,o.totalnum+=a)),(i==PlayerState.Check||i==PlayerState.AllIn||i==PlayerState.Blind||i==PlayerState.Raise)&&InfoUtil.checkAvailable(e.roomInfo)&&a>0&&a>e.roomInfo.maxAnte&&(a<e.roomInfo.bBlind?e.roomInfo.maxAnte=e.roomInfo.bBlind:e.roomInfo.maxAnte=a),o){if(o.state=i,o.num=a,InfoUtil.checkAvailable(e.roomInfo)&&o.state==PlayerState.Raise||o.state==PlayerState.AllIn){var r=e.findMaxPlayerNum(o.roleId),s=o.num-r;0==r||r==e.roomInfo.ante?(e.roomInfo.minRaiseNum=2*e.roomInfo.bBlind,e.roomInfo.minRaiseNum=Math.max(e.roomInfo.minRaiseNum,2*s)):s>0&&(s<e.roomInfo.bBlind?e.roomInfo.minRaiseNum=o.num+e.roomInfo.bBlind:e.roomInfo.minRaiseNum=o.num+s)}(i==PlayerState.Call||i==PlayerState.AllIn)&&(e.lastCallPos=o.pos),(i==PlayerState.Check||i==PlayerState.Fold||i==PlayerState.Raise)&&(e.lastCallPos=void 0),e.PlayerStateChangeEvent.dispatch({roleId:n,state:i,num:a})}}},e.findMaxPlayerNum=function(t){var n=0;if(InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.playerList)for(var i=0,a=e.roomInfo.playerList;i<a.length;i++){var o=a[i];o.roleId!=t&&o.num>n&&(n=o.num)}return n},e.pushActionPosChange=function(t){t.data&&e.roomInfo&&(e.roomInfo.copyValueFrom(t.data),e.ActionPosChangeEvent.dispatch(e.roomInfo.handCard))},e.pushOneRoundOver=function(t){if(t.data){e.roundOverInfo||(e.roundOverInfo=new RoundOverInfo);var n=void 0;InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.handCard&&(n=e.roomInfo.handCard.concat()),e.roundOverClear(),e.roundOverInfo.copyValueFrom(t.data),e.roomInfo&&(e.roomInfo.endTime=TimeManager.GetServerUtcTimestamp());var i=void 0;e.self&&(i=e.self.initbankRoll,e.self.initbankRoll=0),e.RoundOverEvent.dispatch({initbankRoll:i,handCard:n}),e.gamblingReviewHandler.isNewRound=!0}},e.pushHandCard=function(t){if(t.data&&e.self){e.roomInfo.handCard||(e.roomInfo.handCard=new Array),e.roomInfo.handCard.length=0;t.data.card&&(GamblingUtil.cardArr2CardInfoList(t.data.card,e.roomInfo.handCard),0==e.roomInfo.handCard.length&&(e.roomInfo.handCard=void 0),e.roomInfo.handCard&&e.roomInfo.handCard.length>2&&qin.Console.logError("手牌张数大于2"+e.roomInfo.handCard.length));var n=void 0;e.roomInfo.handCard&&(n=e.roomInfo.handCard.concat()),e.guessHandler.setResultListInfo(),e.HandCardComeEvent.dispatch(n)}},e.pushBrightCard=function(t){if(t.data){var n=t.data.roleId,i=e.getPlayerInfo(n);i&&(i.copyValueFrom(t.data),e.BrightCardShowEvent.dispatch())}},e.pushChipsChange=function(t){if(t.data){var n=t.data.roleId,i=t.data.bankRoll,a=e.getPlayerInfo(n);a&&(a.bankRoll=i,e.ChipsChangeEvent.dispatch(a))}},e.pushPlayerListStateChange=function(t){if(t.data){var n=t.data.roleId,i=t.data.state;if(n&&void 0!=i){for(var a=void 0,o=0,r=n;o<r.length;o++){var s=r[o];a=e.getPlayerInfo(s),a&&(a.state=i)}e.PlayerListStateChangeEvent.dispatch()}}},e.pushInTrusteeship=function(t){InfoUtil.checkAvailable(e.roomInfo)&&!e.roomInfo.isTrusteeship&&(e.roomInfo.isTrusteeship=!0,e.InTrusteeshipEvent.dispatch())},e.onReconnectHandler=function(){e.roomInfo&&(egret.log("重连从新拉取数据！"),e.reqEnterRoom(e.roomInfo.id))},e.reqNextRoundStart=function(){GamblingUtil.isMtt?!e._isOnSeat||e.roomInfo.isRaceOut||GamblingUtil.isSelfRaceOut||e.sendNextRoundStart():e._isOnSeat&&e.sendNextRoundStart()},e.sendNextRoundStart=function(){SocketManager.AddCommandListener(Command.NextRound_Req_3601,e.onNextRoundStart,this),SocketManager.Send(Command.NextRound_Req_3601)},e.onNextRoundStart=function(t){SocketManager.RemoveCommandListener(Command.NextRound_Req_3601,e.onNextRoundStart,this),e.roomInfo&&e.ReadyStateChangeEvent.dispatch()},e.cancelTrusteeship=function(){InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.isTrusteeship&&e.reqAction(PlayerState.Trusteeship)},e.reqAction=function(t,n){void 0===n&&(n=0);var i=function(n){e.self&&(e.roomInfo&&(e.roomInfo.isTrusteeship=!1),SocketManager.RemoveCommandListener(Command.Action_Req_3602,i,this),e.ActionOverEvent.dispatch(t))};SocketManager.AddCommandListener(Command.Action_Req_3602,i,this),0!=n?SocketManager.Send(Command.Action_Req_3602,{state:t,num:n}):SocketManager.Send(Command.Action_Req_3602,{state:t})},e.reqTimeOut=function(){GamblingUtil.isCanCheck?e.reqAction(PlayerState.Check):e.reqAction(PlayerState.Fold)},e.reqLeaveRoom=function(t){void 0===t&&(t=!1);var n=function(a){var o=GamblingType.Common;e.roomInfo&&(o=e.roomInfo.gamblingType),SocketManager.RemoveCommandListener(Command.LeaveRoom_Req_3603,n,this),SocketManager.RemoveErrorListener(Command.LeaveRoom_Req_3603,i,this),e.isQuicklyEnter=!1,e.guessHandler.leaveRoomReset(),e.reset(),e.LeaveRoomEvent.dispatch({type:o,isInMtt:t})},i=function(a){var o=GamblingType.Common;e.roomInfo&&(o=e.roomInfo.gamblingType),SocketManager.RemoveCommandListener(Command.LeaveRoom_Req_3603,n,this),SocketManager.RemoveErrorListener(Command.LeaveRoom_Req_3603,i,this),t||(e.isQuicklyEnter=!1,e.guessHandler.leaveRoomReset(),e.reset()),e.LeaveRoomErrorEvent.dispatch({type:o,isInMtt:t})};if(e._isOnSeat=!1,GamblingUtil.isRace)if(InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.isRaceOut){var a=e.roomInfo.gamblingType;e.roomInfo.isRaceOut=void 0,e.isQuicklyEnter=!1,e.guessHandler.leaveRoomReset(),e.reset(),e.LeaveRoomEvent.dispatch({type:a,isInMtt:t})}else SocketManager.AddCommandListener(Command.LeaveRoom_Req_3603,n,this),SocketManager.AddErrorListener(Command.LeaveRoom_Req_3603,i,this),SocketManager.Send(Command.LeaveRoom_Req_3603);else SocketManager.AddCommandListener(Command.LeaveRoom_Req_3603,n,this),SocketManager.AddErrorListener(Command.LeaveRoom_Req_3603,i,this),SocketManager.Send(Command.LeaveRoom_Req_3603)},e.reqBuyInGame=function(t,n,i){var a=function(t){SocketManager.RemoveCommandListener(Command.BuyInGame_Req_3604,a,this),e._isOnSeat=!0,e.roomInfo&&(e.roomInfo.isAutoBuy=n),t.data&&e.BuyInGameEvent.dispatch()};SocketManager.AddCommandListener(Command.BuyInGame_Req_3604,a,this),SocketManager.Send(Command.BuyInGame_Req_3604,{num:t,isAutoBuy:n,pos:i})},e.reqQuicklyBuyInGame=function(){if(InfoUtil.checkAvailable(e.roomInfo)){if(UserManager.userInfo.gold<e.roomInfo.definition.sBuyin)return qin.Console.log("快速买入失败！玩家身上金币小于最低买入金额"),!1;var t=Math.ceil(e.roomInfo.definition.bBuyin/2);if(t=Math.min(UserManager.userInfo.gold,t),t>0)for(var n=void 0,i=1;i<=e.maxSeats;i++)if(n=e.getPlayerInfoByPos(i),!n)return e.reqBuyInGame(t,!0,i),!0;return qin.Console.log("快速买入失败！买入金额"+t+"位子已满？"),!1}return qin.Console.log("快速买入失败！房间信息不能为空！"),!1},e.reqStandUp=function(){var t=function(n){SocketManager.RemoveCommandListener(Command.StandUp_Req_3605,t,this),e.StandUpEvent.dispatch()};SocketManager.AddCommandListener(Command.StandUp_Req_3605,t,this),SocketManager.Send(Command.StandUp_Req_3605)},e.reqBrightCard=function(){var t=function(n){SocketManager.RemoveCommandListener(Command.BrightCard_Req_3606,t,this),e.roomInfo&&(e.roomInfo.isShowCard=!e.roomInfo.isShowCard),e.BrightCardFlagEvent.dispatch()};SocketManager.AddCommandListener(Command.BrightCard_Req_3606,t,this),SocketManager.Send(Command.BrightCard_Req_3606)},e.reqAddCoin=function(t){if(t>0){var n=function(t){SocketManager.RemoveCommandListener(Command.AddCoin_Req_3607,n,this),e.AddCoinEvent.dispatch()};SocketManager.AddCommandListener(Command.AddCoin_Req_3607,n,this),SocketManager.Send(Command.AddCoin_Req_3607,{num:t})}else qin.Console.log("增加金币数量异常！")},e.getPlayerUserInfoOver=function(){e.self&&e.self.state!=PlayerState.WaitNext&&e.self.state!=PlayerState.Empty&&e.timeAwardHandler.startCountDown()},e.reqGetPlayerUserInfo=function(t){if(t){e._getUserInfoQueue||(e._getUserInfoQueue=new Array);for(var n=0,i=e._getUserInfoQueue;n<i.length;n++){var a=i[n];if(t.roleId==a.roleId)return}e._getUserInfoQueue.push(t),e.startGetUserInfo(e._getUserInfoQueue[0])}},e.startGetUserInfo=function(t){if(!e._isOnGetUserInfo){e._isOnGetUserInfo=!0;var n=function(t){e._isOnGetUserInfo=!1,e._getUserInfoQueue[0].userInfo=new UserInfo(t.data),e.OnGetRoomUserInfoEvent.dispatch(e._getUserInfoQueue[0].userInfo.roleId),e._getUserInfoQueue.shift(),t.data&&e.getNext()},i=function(t){e._isOnGetUserInfo=!1,e._getUserInfoQueue.shift(),e.getNext()};UserManager.sendGetUserInfo(t.roleId,n,i)}},e.getNext=function(){e._getUserInfoQueue.length>0?e.startGetUserInfo(e._getUserInfoQueue[0]):e.getPlayerUserInfoOver()},e.checkBust=function(){e.self&&UserManager.isBust&&e.self.bankRoll<=0&&e.reqStandUp()},e.doDefaultAction=function(){GamblingUtil.isCanCheck?e.reqAction(PlayerState.Check):GamblingUtil.isNeedAllIn?e.self&&e.reqAction(PlayerState.AllIn,e.self.bankRoll):GamblingUtil.callNum>0&&e.reqAction(PlayerState.Call,GamblingUtil.callNum)},Object.defineProperty(e,"self",{get:function(){return e._self||(e._self=e.getPlayerInfo(UserManager.userInfo.roleId)),e._self},enumerable:!0,configurable:!0}),e.addPlayer=function(t){e.roomInfo&&(e.roomInfo.playerList?t&&0==GamblingUtil.isContainPlayer(t.roleId)&&e.roomInfo.playerList.push(t):(e.roomInfo.playerList=new Array,t&&e.roomInfo.playerList.push(t)))},e.removePlayer=function(t){var n=e.getPlayerInfo(t);qin.ArrayUtil.RemoveItem(n,e.roomInfo.playerList)},e.getPlayerInfo=function(t){if(InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.playerList)for(var n=0,i=e.roomInfo.playerList;n<i.length;n++){var a=i[n];if(a.roleId==t)return a}return null},e.getPlayerStateByRoleId=function(t){var n=e.getPlayerInfo(t);return n?n.state:PlayerState.Empty},e.getPlayerInfoByPos=function(t){if(InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.playerList)for(var n=0,i=e.roomInfo.playerList;n<i.length;n++){var a=i[n];if(a.pos==t)return a}return null},Object.defineProperty(e,"maxSeats",{get:function(){return InfoUtil.checkAvailable(e.roomInfo)?e.roomInfo.definition.seat:0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMaster",{get:function(){return GamblingUtil.getIsMaster(e.self)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isOneLoopStart",{get:function(){if(InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.playerList){for(var t=0,n=e.roomInfo.playerList;t<n.length;t++){var i=n[t];if(i.num>0)return!1}return!0}return!1},enumerable:!0,configurable:!0}),e.timeAwardHandler=new TimeAwardHandler,e.guessHandler=new GuessHandler,e.championshipHandler=new ChampionshipHandler,e.gamblingReviewHandler=new GamblingReviewHandler,e.MaxCardNum=7,e.MaxBoardNum=5,e.FlushSplitIndex=10,e.isCheckOrFold=!1,e.isCallAny=!1,e.isQuicklyEnter=!1,e._showPotChips=0,e._isOnSeat=!1,e._isInitialize=!1,e._isOnGetUserInfo=!1,e.OnGetRoomInfoEvent=new qin.DelegateDispatcher,e.OnGetRoomUserInfoEvent=new qin.DelegateDispatcher,e.NextRoundStartEvent=new qin.DelegateDispatcher,e.BuyInGameEvent=new qin.DelegateDispatcher,e.SitOrStandEvent=new qin.DelegateDispatcher,e.PlayerStateChangeEvent=new qin.DelegateDispatcher,e.HandCardComeEvent=new qin.DelegateDispatcher,e.BrightCardShowEvent=new qin.DelegateDispatcher,e.ChipsChangeEvent=new qin.DelegateDispatcher,e.PotChipsChangeEvent=new qin.DelegateDispatcher,e.OneLoopOverEvent=new qin.DelegateDispatcher,e.ActionPosChangeEvent=new qin.DelegateDispatcher,e.ReadyStateChangeEvent=new qin.DelegateDispatcher,e.ActionOverEvent=new qin.DelegateDispatcher,e.LeaveRoomEvent=new qin.DelegateDispatcher,e.LeaveRoomErrorEvent=new qin.DelegateDispatcher,e.StandUpEvent=new qin.DelegateDispatcher,e.BrightCardFlagEvent=new qin.DelegateDispatcher,e.AddCoinEvent=new qin.DelegateDispatcher,e.PlayerListStateChangeEvent=new qin.DelegateDispatcher,e.RoundOverEvent=new qin.DelegateDispatcher,e.BlindChangeEvent=new qin.DelegateDispatcher,e.RebuyORAddonEvent=new qin.DelegateDispatcher,e.InTrusteeshipEvent=new qin.DelegateDispatcher,e.TimeOutEvent=new qin.DelegateDispatcher,e.FlopCardOverEvent=new qin.DelegateDispatcher,e}();__reflect(GamblingManager.prototype,"GamblingManager");var GamblingUtil=function(){function e(){}return e.cardArr2CardInfoList=function(e,t){if(e&&t)for(var n=void 0,i=0;i<e.length;i++)if(i%2==1){for(var a=0,o=t;a<o.length;a++)n=o[a],n.card[0]!=e[i-1]||n.card[1]!=e[i]||(AlertManager.showAlertByString("已存在相同的牌"),qin.Console.logError("已存在相同的牌"));n=new CardInfo([e[i-1],e[i]]),t.push(n)}},e.isWin=function(e){if(GamblingManager.roundOverInfo){if(GamblingManager.roundOverInfo.potList&&GamblingManager.roundOverInfo.potList.length>0){for(var t=0,n=0,i=GamblingManager.roundOverInfo.potList;n<i.length;n++){var a=i[n];a.roleId&&-1!=a.roleId.indexOf(e)&&(t+=Math.floor(a.num/a.roleId.length))}var o=GamblingManager.getPlayerInfo(e);return o?t>o.totalnum:(qin.Console.log("获取是否赢牌失败,奖励的roleID列表为空！："+e),!1)}qin.Console.log("获取是否赢牌失败,底池为空！roleId："+e)}else qin.Console.log("获取是否赢牌失败，结算信息为空！roleId："+e)},e.isContainPlayer=function(e){return null!=GamblingManager.getPlayerInfo(e)},e.getOffsetPosBySbPos=function(t){var n=e.sBlindPos,i=0;return-1!=n?i=t>=n?t-n:t+(GamblingManager.maxSeats-n):i},Object.defineProperty(e,"earliestActionPos",{get:function(){var t=e.sBlindPos;if(-1!=t){var n=void 0,i=1,a=0;InfoUtil.checkAvailable(GamblingManager.roomInfo)&&!GamblingManager.roomInfo.publicCard&&(i=3);for(var o=0;o<GamblingManager.maxSeats;o++)if(n=GamblingManager.getPlayerInfoByPos(GamblingPanelSetting.getNextIndex(t,o)),n&&n.state!=PlayerState.Fold&&n.state!=PlayerState.WaitNext&&(a++,a==i))return n.pos}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sBlindPos",{get:function(){if(GamblingManager.roomInfo.playerList){var t=GamblingManager.roomInfo.playerList.length,n=void 0;if(2==t){for(var i=0,a=GamblingManager.roomInfo.playerList;i<a.length;i++)if(n=a[i],n.pos!=GamblingManager.roomInfo.buttonPos)return n.pos}else{GamblingManager.roomInfo.playerList.sort(e.sortPlayerListByPos);for(var o=void 0,r=0;t>r;r++)if(n=GamblingManager.roomInfo.playerList[r],n.pos==GamblingManager.roomInfo.buttonPos){o=r+1>t-1?r+1-t:r+1;break}if(o>=0&&o<=GamblingManager.roomInfo.playerList.length)return GamblingManager.roomInfo.playerList[o].pos}}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bBlindPos",{get:function(){if(GamblingManager.roomInfo.playerList){var t=GamblingManager.roomInfo.playerList.length,n=void 0;if(2==t)return GamblingManager.roomInfo.buttonPos;GamblingManager.roomInfo.playerList.sort(e.sortPlayerListByPos);for(var i=void 0,a=0;t>a;a++)if(n=GamblingManager.roomInfo.playerList[a],n.pos==GamblingManager.roomInfo.buttonPos){i=a+2>t-1?a+2-t:a+2;break}if(i>=0&&i<GamblingManager.roomInfo.playerList.length)return GamblingManager.roomInfo.playerList[i].pos}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"maxRaiseChips",{get:function(){if(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.playerList&&GamblingManager.self){var t=e.maxBankRoll;return t>GamblingManager.roomInfo.minRaiseNum?Math.min(t,GamblingManager.self.bankRoll+GamblingManager.self.num):GamblingManager.roomInfo.minRaiseNum}return 0},enumerable:!0,configurable:!0}),e.getIsOnAction=function(e){if(e instanceof PlayerInfo)return GamblingManager.roomInfo.pos==e.pos&&e.state!=PlayerState.WaitNext;var t=GamblingManager.getPlayerInfo(e);return t&&GamblingManager.roomInfo?t.pos==GamblingManager.roomInfo.pos&&t.state!=PlayerState.WaitNext:!1},Object.defineProperty(e,"callNum",{get:function(){return GamblingManager.self&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&e.getIsOnAction(GamblingManager.self)?GamblingManager.roomInfo.maxAnte-GamblingManager.self.num:0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"maxBankRoll",{get:function(){for(var e=0,t=0,n=GamblingManager.roomInfo.playerList;t<n.length;t++){var i=n[t];i.roleId!=UserManager.userInfo.roleId&&i.bankRoll+i.num>e&&(e=i.bankRoll+i.num)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isCanCheck",{get:function(){return GamblingManager.self&&GamblingManager.roomInfo&&e.getIsOnAction(GamblingManager.self)&&GamblingManager.self.num==GamblingManager.roomInfo.maxAnte?!0:!1
},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isCanRaise",{get:function(){return GamblingManager.self&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&e.getIsOnAction(GamblingManager.self)&&GamblingManager.self.bankRoll+GamblingManager.self.num>GamblingManager.roomInfo.maxAnte?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isNeedAllIn",{get:function(){if(InfoUtil.checkAvailable(GamblingManager.roomInfo))if(GamblingManager.roomInfo.definition.pattern==GamblingPattern.AllIn){var t=e.maxBankRoll;if(GamblingManager.self&&e.getIsOnAction(GamblingManager.self))return t>=GamblingManager.self.bankRoll||GamblingManager.roomInfo.maxAnte<=GamblingManager.roomInfo.bBlind?!0:!1}else if(GamblingManager.self&&e.getIsOnAction(GamblingManager.self)&&GamblingManager.self.bankRoll+GamblingManager.self.num<=GamblingManager.roomInfo.maxAnte)return!0;return!1},enumerable:!0,configurable:!0}),e.isOnProcess=function(t){var n;if(n=t instanceof PlayerInfo?t:GamblingManager.getPlayerInfo(t)){switch(n.state){case PlayerState.Check:case PlayerState.Call:case PlayerState.Raise:case PlayerState.Blind:case PlayerState.AllIn:case PlayerState.WaitAction:return!0}return e.getIsOnAction(n)}return!1},e.getIsMaster=function(e){return GamblingManager.roomInfo?e instanceof PlayerInfo?e.roleId==GamblingManager.roomInfo.masterId:e==GamblingManager.roomInfo.masterId:!1},Object.defineProperty(e,"isCanThanCard",{get:function(){if(GamblingManager.roundOverInfo&&GamblingManager.roundOverInfo.handCardList)for(var t=0,n=GamblingManager.roundOverInfo.handCardList;t<n.length;t++){var i=n[t],a=GamblingManager.getPlayerInfo(i.roleId);if(e.isOnProcess(a))return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isCanOper",{get:function(){if(GamblingManager.self){switch(GamblingManager.self.state){case PlayerState.AllIn:case PlayerState.Fold:case PlayerState.WaitNext:return!1}return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isRace",{get:function(){return InfoUtil.checkAvailable(GamblingManager.roomInfo)&&(GamblingManager.roomInfo.gamblingType==GamblingType.Championship||GamblingManager.roomInfo.gamblingType==GamblingType.DieOut)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMtt",{get:function(){return InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.gamblingType==GamblingType.Championship},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isSelfRaceOut",{get:function(){return e.isMtt&&GamblingManager.matchRoomInfo&&GamblingManager.self&&GamblingManager.roomInfo&&GamblingManager.self.bankRoll<=0&&0==GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Rebuy)&&0==GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Addon)?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"gamblingPanelStateIndex",{get:function(){if(GamblingManager.roomInfo)switch(GamblingManager.roomInfo.gamblingType){case GamblingType.Common:case GamblingType.Personal:return GamblingPanelStateIndex.Normal;case GamblingType.Championship:return e.getGamblingPanelStateIndex(GamblingManager.matchRoomInfo);case GamblingType.Guide:return GamblingPanelStateIndex.Guide;case GamblingType.GuidePlayWay:return GamblingPanelStateIndex.GuidePlayWay;case GamblingType.DieOut:return GamblingPanelStateIndex.Null}return e.getGamblingPanelStateIndex(GamblingManager.matchRoomInfo)},enumerable:!0,configurable:!0}),e.getGamblingPanelStateIndex=function(e){return e?e.isWaitStart?GamblingPanelStateIndex.MttWait:GamblingPanelStateIndex.Mtt:(qin.Console.logError("切换到游戏场景状态有问题，比赛的房间信息为空！"),GamblingPanelStateIndex.Mtt)},e.sortPlayerListByPos=function(e,t){return e.pos>t.pos?1:e.pos<t.pos?-1:0},e}();__reflect(GamblingUtil.prototype,"GamblingUtil");var HandCardInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){this.roleId=0,this.cardList=void 0},t.prototype.copyValueFrom=function(t){e.prototype.copyValueFrom.call(this,t),t.card&&(this.cardList=new Array,GamblingUtil.cardArr2CardInfoList(t.card,this.cardList),0==this.cardList.length&&(this.cardList=void 0))},t}(BaseServerValueInfo);__reflect(HandCardInfo.prototype,"HandCardInfo");var PlayerActionRecordInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(BaseServerValueInfo);__reflect(PlayerActionRecordInfo.prototype,"PlayerActionRecordInfo");var PlayerInfo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=100,t.height=100,t}return __extends(t,e),Object.defineProperty(t.prototype,"bankRoll",{get:function(){return this._bankRoll},set:function(e){this.lastBankRoll=this._bankRoll,this._bankRoll=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){this._state!=e&&(this._state=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sex",{get:function(){return this.userInfo?this.userInfo.sex:Sex.Unknown},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return this.userInfo?this.userInfo.head:qin.StringConstants.Empty},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.roleId=void 0,this.lastBankRoll=void 0,this.bankRoll=void 0,this.pos=void 0,this.state=PlayerState.WaitNext,this.isSitDown=!1,this.initbankRoll=void 0},t.getStateDes=function(e){switch(e){case PlayerState.AllIn:return"全下";case PlayerState.Fold:return"弃牌";case PlayerState.Check:return"过牌";case PlayerState.Raise:return"加注";case PlayerState.Call:return"跟注";case PlayerState.Action:return"思考中";case PlayerState.ShowCard:return"亮牌";case PlayerState.WaitNext:return"等待";default:return qin.StringConstants.Empty}},t.getStateImgRes=function(e){switch(e){case PlayerState.AllIn:return SheetSubName.AllInState;case PlayerState.Fold:return SheetSubName.FoldState;case PlayerState.Check:return SheetSubName.CheckState;case PlayerState.Raise:return SheetSubName.RaiseState;case PlayerState.Call:return SheetSubName.CallState;case PlayerState.Action:case PlayerState.ShowCard:return qin.StringConstants.Empty}return qin.StringConstants.Empty},t}(BaseServerValueInfo);__reflect(PlayerInfo.prototype,"PlayerInfo",["IBaseHead"]);var PlayerReviewInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"head",{get:function(){return qin.StringUtil.isNullOrEmpty(this._head)?SheetSubName.getdefaultHead(this.sex):this._head},set:function(e){0==qin.StringUtil.isNullOrEmpty(e)&&(e=e.split(GameSetting.HeadUploadVerifySign)[0]),this._head=e},enumerable:!0,configurable:!0}),t}(BaseServerValueInfo);__reflect(PlayerReviewInfo.prototype,"PlayerReviewInfo",["IBaseHead"]);var PotAwardInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){this.roleId=void 0,this.type=0,this.num=0},t}(BaseServerValueInfo);__reflect(PotAwardInfo.prototype,"PotAwardInfo");var RoomInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"roomId",{get:function(){return this._roomId},set:function(e){this._roomId=e,this._definition=RoomDefined.GetInstance().getDefinition(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sBlind",{get:function(){return(void 0==this._sBlind||0==this._sBlind&&this._definition)&&(this._sBlind=this._definition.sBlind),this._sBlind},set:function(e){this._sBlind=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bBlind",{get:function(){return(void 0==this._bBlind||0==this._bBlind&&this._definition)&&(this._bBlind=this._definition.bBlind),this._bBlind},set:function(e){this._bBlind=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gamblingType",{get:function(){return this._definition?GamblingType.getType(this._definition.type):GamblingType.Common},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAnte",{get:function(){return void 0==this._maxAnte&&(this._maxAnte=0),this._maxAnte},set:function(e){this._maxAnte=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minRaiseNum",{get:function(){return(void 0==this._minRaiseNum||this._minRaiseNum<=0)&&(GamblingManager.isOneLoopStart?this._minRaiseNum=this.bBlind:this._minRaiseNum=2*this.bBlind),this._minRaiseNum<this.bBlind&&(this._minRaiseNum=this.bBlind+this._minRaiseNum),GamblingManager.self?Math.min(GamblingManager.self.bankRoll+GamblingManager.self.num,this._minRaiseNum):this._minRaiseNum},set:function(e){this._minRaiseNum=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.id=0,this.buttonPos=0,this.potChips=void 0,this.roomId=0,this.ante=0,this.sBlind=0,this.bBlind=0,this.pos=0,this.posTime=0,this.startTime,this.publicCard=void 0,this.playerList=void 0,this.sidePot=void 0,this.isShowCard=void 0,this.handCard=void 0,this.isAutoBuy=void 0,this._definition=void 0,this.maxAnte=0,this.minRaiseNum=0,this.masterId=0,this.rebuyTimes=0,this.blindLevel=0,this.nowBlindLevel=0,this.blindTime=0,this.addbuy=0,this.isTrusteeship=void 0,this.isRaceOut=void 0,this.isFlopCardOver=void 0},t.prototype.copyValueFrom=function(t){if(e.prototype.copyValueFrom.call(this,t),qin.CopyUtil.supCopyList(this,t,"playerList",PlayerInfo),t.playerList)for(var n=void 0,i=0;i<t.playerList.length;i++)n=t.playerList[i],n.cardList=new Array,GamblingUtil.cardArr2CardInfoList(n.card,n.cardList),0==n.cardList.length&&(n.cardList=void 0)},t}(BaseServerValueInfo);__reflect(RoomInfo.prototype,"RoomInfo",["IHaveDefintionInfo"]);var CardInfo=function(e){function t(t){var n=e.call(this)||this;return n.card=t,n}return __extends(t,e),t.prototype.clone=function(){var e=new t(void 0);return this.card&&(e.card=this.card.concat()),e},t.prototype.reset=function(){this.card=void 0},t}(BaseServerValueInfo);__reflect(CardInfo.prototype,"CardInfo");var GamblingType=function(){function e(){}return e.getType=function(t){switch(t){case PlayingFieldType.Primary:case PlayingFieldType.Middle:case PlayingFieldType.High:return e.Common;case PlayingFieldType.Personal:return e.Personal;case PlayingFieldType.Race:return e.Championship;case PlayingFieldType.Guide:return e.Guide;case PlayingFieldType.GuidePlayWay:return e.GuidePlayWay}return e.Common},e.Common=1,e.Championship=2,e.Personal=3,e.DieOut=4,e.Guide=5,e.GuidePlayWay=6,e}();__reflect(GamblingType.prototype,"GamblingType");var RoundOverInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){this.potList=void 0,this.handCardList=void 0},t.prototype.copyValueFrom=function(t){e.prototype.copyValueFrom.call(this,t),qin.CopyUtil.supCopyList(this,t,"handCardList",HandCardInfo)},t}(BaseServerValueInfo);__reflect(RoundOverInfo.prototype,"RoundOverInfo");var JoinMTTProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),ChampionshipManager.OnMTTOverPushEvent.addListener(this.onProcessUpdate,this)},t.prototype.onProcessUpdate=function(t){e.prototype.onProcessUpdate.call(this,t),t.rank&&(this.process++,this.init(this.process))},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(JoinMTTProcess.prototype,"JoinMTTProcess");var PushRoomDataHandler=function(){function e(){this._isGetRoomData=!1,this.resultMap=new qin.Dictionary,this.funcMap=new qin.Dictionary}return Object.defineProperty(e.prototype,"isGetRoomData",{get:function(){return this._isGetRoomData},set:function(e){this._isGetRoomData=e},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){0==this.funcMap.count&&(this.funcMap.add(Command.NextRoundStart_Push_2107,GamblingManager.pushNextRoundStart),this.funcMap.add(Command.BlindChange_Push_2100,GamblingManager.pushBlindChange),this.funcMap.add(Command.OneLoopOver_Push_2102,GamblingManager.pushOneLoopOver),this.funcMap.add(Command.SitOrStand_Push_2103,GamblingManager.pushSitOrStand),this.funcMap.add(Command.PlayerStateChange_Push_2104,GamblingManager.pushStateChange),this.funcMap.add(Command.ActionPosChange_Push_2105,GamblingManager.pushActionPosChange),this.funcMap.add(Command.OneRoundOver_Push_2106,GamblingManager.pushOneRoundOver),this.funcMap.add(Command.HandCard_Push_2108,GamblingManager.pushHandCard),this.funcMap.add(Command.BrightCard_Push_2109,GamblingManager.pushBrightCard),this.funcMap.add(Command.ChipsChange_Push_2110,GamblingManager.pushChipsChange),this.funcMap.add(Command.InTrusteeship_Push_2119,GamblingManager.pushInTrusteeship))},e.prototype.writeResult=function(e,t){0==this.isGetRoomData&&this.resultMap.add(e,t)},e.prototype.setRoomData=function(){var e=this;this.resultMap.foreach(function(t,n){var i=e.funcMap.getValue(t);i.call(GamblingManager,n),qin.Console.log("出现了，推送先于房间数据过来："+t),AlertManager.showAlert("出现了，推送先于房间数据过来："+t+n.data)},this),this.resultMap.containsKey(Command.PlayerStateChange_Push_2104)&&(GamblingManager.ActionPosChangeEvent.dispatch(),qin.Console.log("重新抛送位置改变事件，触发操作按钮显示，重新算跟注数量")),this.reset()},e.prototype.reset=function(){this._isGetRoomData=!1,this.resultMap.clear()},e}();__reflect(PushRoomDataHandler.prototype,"PushRoomDataHandler");var GameManager=function(){function e(){}return Object.defineProperty(e,"stage",{get:function(){return e._stage},enumerable:!0,configurable:!0}),Object.defineProperty(e,"root",{get:function(){return e._root},enumerable:!0,configurable:!0}),e.initialize=function(t,n){e._stage=t,e._root=n},e.InitServer=function(t,n){e._isInitComplete=!1,e.initServerHandler.Invoke(t,n,e.ParseInitComplete,e.onInitServerError)},e.ParseInitComplete=function(){0==e._isInitComplete&&e.initServerHandler.isComplete&&(e._isInitComplete=!0,e.initAppHandler.Invoke(),e.OnInitComplete.dispatch())},e.onInitServerError=function(){e.OnInitError.dispatch()},e.reload=function(){e._isWaitReload||(e._isWaitReload=!0,SoundManager.clear(qin.Delegate.getOut(function(){e._isWaitReload=!1,window.location.reload()},this)))},e.initServerHandler=new InitServerHandler,e.initAppHandler=new InitAppHandler,e._reLogining=new ReLoginingHandler,e._isInitComplete=!1,e.OnInitComplete=new qin.DelegateDispatcher,e.OnInitError=new qin.DelegateDispatcher,e._isWaitReload=!1,e}();__reflect(GameManager.prototype,"GameManager");var LevelProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),AchieveProcessManager.addProcessListener(this.type,this.onProcessUpdate,this)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),UserManager.userInfo.level>this.process&&e.prototype.init.call(this,UserManager.userInfo.level)},t.prototype.destroy=function(){AchieveProcessManager.removeProcessListener(this.type,this.onProcessUpdate,this),e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(LevelProcess.prototype,"LevelProcess");var LevelUpProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),AchieveProcessManager.addProcessListener(this.type,this.onProcessUpdate,this)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),UserManager.userInfo.level>this.process&&e.prototype.init.call(this,UserManager.userInfo.level)},t.prototype.destroy=function(){AchieveProcessManager.removeProcessListener(this.type,this.onProcessUpdate,this),e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(LevelUpProcess.prototype,"LevelUpProcess");var MiddlePatternProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfPlayField(this,AchieveShowPattern.MiddlePattern)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(MiddlePatternProcess.prototype,"MiddlePatternProcess");var OnePairProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfCardType(this,CardType.OnePair)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(OnePairProcess.prototype,"OnePairProcess");var PrimaryPatternProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfPlayField(this,AchieveShowPattern.PrimaryPattern)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(PrimaryPatternProcess.prototype,"PrimaryPatternProcess");var GuideManager=function(){function e(){}return e.reqSetGuideStep=function(t,n){var i=function(i){UserManager.userInfo.addGuideRecord(t.phase,t.type),qin.Console.log("设置引导步骤完成type"+t.type,"-----phase:"+t.phase),e.onSetGuideStepEvent.dispatch({id:t.phase,type:t.type,uid:t.id,next:n}),t.awardId>0&&PropertyManager.ShowItemList()};t.awardId>0&&PropertyManager.OpenGet(),SocketManager.call(Command.SetGuideStep_Req_3691,{Id:t.phase,Type:t.type},i,null,this)},e.onSetGuideStepEvent=new qin.DelegateDispatcher,e}();__reflect(GuideManager.prototype,"GuideManager");var GuideInfo=function(){function e(){}return e}();__reflect(GuideInfo.prototype,"GuideInfo");var RoyalFlushProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfCardType(this,CardType.RoyalFlush)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(RoyalFlushProcess.prototype,"RoyalFlushProcess");var GuideExecutor=function(){function e(){}return Object.defineProperty(e,"notClearStepList",{get:function(){return e._notClearStepList},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isOnGuide",{get:function(){return e._isOnGuide},enumerable:!0,configurable:!0}),e.checkGuide=function(){if(!e._isOnGuide){for(var t,n,i=GuideType.NewUser,a=GuideType.NewUser,o=i;a>=o;o++){if(t=UserManager.userInfo.getGuideInfo(o),!t){n=GuideDefined.GetInstance().getGuideDefinition(o,1);break}if(t.Id<GuideDefined.GetInstance().getMaxPhase(o)){n=GuideDefined.GetInstance().getGuideDefinition(o,t.Id+1);break}}if(n){var r=GuideTriggerDefined.GetInstance().getTriggerDefinition(n.type);e.verifyTriggerType(n,r)}else e.guideProcess=void 0,qin.Console.log("未检测到有合适的引导开启or引导已经完成or引导数据异常!")}},e.verifyTriggerType=function(t,n){switch(n.triggerType){case GuideTriggerType.Login_Hall:e.run(t);break;default:qin.Console.logError("未找到合适引导触发类型！")}},e.runChildStep=function(t){var n=e.getStepProcess(t,null);n=e.getStepProcess(t,null),n&&(n.run(),e.tmpChildStepProcess.push(n))},e.clearChildStepProcess=function(){for(var t=0,n=e.tmpChildStepProcess;t<n.length;t++){var i=n[t],a=GuideStepDefined.GetInstance().getDefinition(i.definition.stepId);a&&(i.clear(),e.pushStepProcess(a.type,i))}e.tmpChildStepProcess.length=0},e.run=function(t){if(t){var n;if(n="number"==typeof t?GuideDefined.GetInstance().getDefinition(t):t,!n)return void qin.Console.log("GuideExecutor.run执行引导异常，引导数据为空！");qin.Console.log("引导------------>"+n.des),e.clearChildStepProcess(),e.guideProcess?e.guideProcess.clear():e.guideProcess=new GuideProcess,e.guideProcess.init(n,null);var i=n.steps;if(i){for(var a=void 0,o=0;o<i.length;o++)a=e.getStepProcess(i[o],e.guideProcess),a&&e.guideProcess.addStep(a);e._isOnGuide=!0,e.guideProcess.comleteEvent.addListener(e.guideProcessComplete,this),e.guideProcess.run()}else qin.Console.log("引导步骤数据为空！引导ID："+n.id),e.guideProcessComplete(e.guideProcess)}},e.guideProcessComplete=function(t,n){var i;"number"==typeof t?i=GuideDefined.GetInstance().getDefinition(t):t instanceof GuideDefinition?i=t:t instanceof BaseGuideProcess&&(t.comleteEvent.removeListener(e.guideProcessComplete,this),i=t.definition),i?1==GuideDefined.GetInstance().getDefinition(i.id).phaseEndFlag?e.trySetGuideStep(i,n):e.doNext(i,n):qin.Console.logError("处理引导完毕逻辑异常！target："+t)},e.trySetGuideStep=function(t,n){GuideManager.onSetGuideStepEvent.addListener(e.setGuideRecordComplete,this),GuideManager.reqSetGuideStep(t,n)},e.doNext=function(t,n){var i;i=n?GuideDefined.GetInstance().getDefinition(n):GuideDefined.GetInstance().getDefinition(t.next),i?t.delay>0?qin.Tick.AddTimeoutInvoke(function(n){e.clearNotClearSteps(t),e._isOnGuide=!1,e.run(n)},t.delay,this,i):(e.clearNotClearSteps(t),e._isOnGuide=!1,e.run(i)):(e._isOnGuide=!1,qin.Console.logError("同阶段触发下一步引导异常！ID:"+t.id))},e.setGuideRecordComplete=function(t){GuideManager.onSetGuideStepEvent.removeListener(e.setGuideRecordComplete,this);var n=GuideDefined.GetInstance().getGuideDefinition(t.type,t.id);n&&(t.next?n.delay>0?qin.Tick.AddTimeoutInvoke(function(t){e.clearNotClearSteps(n),e._isOnGuide=!1,e.run(t.next)},n.delay,this,t):(e.clearNotClearSteps(n),e._isOnGuide=!1,e.run(t.next)):n.delay>0?qin.Tick.AddTimeoutInvoke(function(){e.clearNotClearSteps(n),e._isOnGuide=!1,e.checkGuide()},n.delay,this):(e.clearNotClearSteps(n),e._isOnGuide=!1,e.checkGuide()))},e.addNotClearStep=function(t,n){var i=e._notClearStepList.getValue(t);i||(i=new Array,e._notClearStepList.add(t,i)),i.push(n)},e.clearNotClearSteps=function(t){if(t&&t.clear)for(var n=void 0,i=void 0,a=void 0,o=0;o<t.clear.length;o++)if(n=t.clear[o],i=e._notClearStepList.getValue(n)){for(var r=0;r<i.length;r++){a=i[r];var s=GuideStepDefined.GetInstance().getDefinition(a.definition.stepId);s&&(a.clear(),e.pushStepProcess(s.type,a))}i.length=0,e._notClearStepList.remove(n)}},e.getStepProcess=function(t,n){var i=GuideStepDefined.GetInstance().getDefinition(t.stepId);switch(i.type){case GuideStepType.CreateRoom:return e.getStepProcessInstance(GuideCreateRoomStepProcess,t,n);case GuideStepType.FlopCard:return e.getStepProcessInstance(GuideFlopCardStepProcess,t,n);case GuideStepType.BoardCard:return e.getStepProcessInstance(GuideBoardCardStepProcess,t,n);case GuideStepType.Action:return e.getStepProcessInstance(GuideRoomActionStepProcess,t,n);case GuideStepType.Tips:return e.getStepProcessInstance(GuideTipsStepProcess,t,n);case GuideStepType.OpenPanel:return e.getStepProcessInstance(GuideOpenPanelStepProcess,t,n);case GuideStepType.GamblingOver:return e.getStepProcessInstance(GuideGamblingOverStepProcess,t,n);case GuideStepType.Click:return e.getStepProcessInstance(GuideClickStepProcess,t,n);case GuideStepType.Slide:return e.getStepProcessInstance(GuideSlideStepProcess,t,n);case GuideStepType.SwitchScene:return e.getStepProcessInstance(GuideSceneSwitchStepProcess,t,n);case GuideStepType.Prompt:return e.getStepProcessInstance(GuidePromptStepProcess,t,n);case GuideStepType.HideComponent:return e.getStepProcessInstance(GuideHideComponentStepProcess,t,n);case GuideStepType.RunPanelFunc:return e.getStepProcessInstance(GuideRunPanelFuncStepProcess,t,n);default:qin.Console.logError("获取引导步骤处理器异常！"+i.type)}return null},e.getStepProcessInstance=function(t,n,i){var a,o;return a=e.stepProcessMap.getValue(t),a||(a=new Array,e.stepProcessMap.add(t,a)),o=a.pop(),o||(o=new t),o.init(n,i),o},e.pushStepProcess=function(t,n){if(n){var i;switch(t){case GuideStepType.CreateRoom:i=GuideCreateRoomStepProcess;break;case GuideStepType.FlopCard:i=GuideFlopCardStepProcess;break;case GuideStepType.BoardCard:i=GuideBoardCardStepProcess;break;case GuideStepType.Action:i=GuideRoomActionStepProcess;break;case GuideStepType.Tips:i=GuideTipsStepProcess;break;case GuideStepType.OpenPanel:i=GuideOpenPanelStepProcess;break;case GuideStepType.GamblingOver:i=GuideGamblingOverStepProcess;break;case GuideStepType.Click:i=GuideClickStepProcess;break;case GuideStepType.Slide:i=GuideSlideStepProcess;break;case GuideStepType.SwitchScene:i=GuideSceneSwitchStepProcess;break;case GuideStepType.Prompt:i=GuidePromptStepProcess;break;case GuideStepType.HideComponent:i=GuideHideComponentStepProcess;break;case GuideStepType.RunPanelFunc:i=GuideRunPanelFuncStepProcess;break;default:return void qin.Console.logError("回收引导步骤处理器异常！"+t)}var a=e.stepProcessMap.getValue(i);a||(a=new Array,e.stepProcessMap.add(i,a)),-1==a.indexOf(n)&&a.push(n)}},e._notClearStepList=new qin.Dictionary,e.tmpChildStepProcess=new Array,e.stepProcessMap=new qin.Dictionary,e}();__reflect(GuideExecutor.prototype,"GuideExecutor");var GuideGamblingProcess=function(){function e(){}return e.nextRoundStart=function(){if(GamblingManager.roomInfo.publicCard=void 0,GamblingManager.roundOverInfo=void 0,GamblingManager.roomInfo.isShowCard=!1,GamblingManager.oneLoopClear(),GamblingManager.roomInfo.potChips=void 0,GamblingManager.roomInfo.startTime=TimeManager.GetServerUtcTimestamp(),GamblingManager.NextRoundStartEvent.dispatch(),GamblingManager.roomInfo.playerList)for(var t=0,n=GamblingManager.roomInfo.playerList;t<n.length;t++){var i=n[t];e.playerStateChange(i.pos,PlayerState.WaitAction,i.num)}},e.playerStateChange=function(e,t,n){var i=GamblingManager.getPlayerInfoByPos(e);if(!i)return void qin.Console.logError("新手引导房间状态变更异常！未找到状态变更的玩家数据！"+e);if(void 0==n&&(n=0),0==GamblingManager.showPotChips&&(GamblingManager.showPotChips=GamblingManager.totalPotChips),n>0&&(i.num>0?GamblingManager.showPotChips+=n-i.num:GamblingManager.showPotChips+=n),(t==PlayerState.Check||t==PlayerState.AllIn||t==PlayerState.Blind||t==PlayerState.Raise)&&n>0&&n>GamblingManager.roomInfo.maxAnte&&(n<GamblingManager.roomInfo.bBlind?GamblingManager.roomInfo.maxAnte=GamblingManager.roomInfo.bBlind:GamblingManager.roomInfo.maxAnte=n),i.state=t,i.num=n,i.state==PlayerState.Raise||i.state==PlayerState.AllIn){var a=GamblingManager.findMaxPlayerNum(i.roleId),o=i.num-a;0==a||a==GamblingManager.roomInfo.ante?(GamblingManager.roomInfo.minRaiseNum=2*GamblingManager.roomInfo.bBlind,GamblingManager.roomInfo.minRaiseNum=Math.max(GamblingManager.roomInfo.minRaiseNum,2*o)):o>0&&(o<GamblingManager.roomInfo.bBlind?GamblingManager.roomInfo.minRaiseNum=i.num+GamblingManager.roomInfo.bBlind:GamblingManager.roomInfo.minRaiseNum=i.num+o)}(t==PlayerState.Call||t==PlayerState.AllIn)&&(GamblingManager.lastCallPos=i.pos),(t==PlayerState.Check||t==PlayerState.Fold||t==PlayerState.Raise)&&(GamblingManager.lastCallPos=void 0),GamblingManager.PlayerStateChangeEvent.dispatch({roleId:i.roleId,state:t,num:n})},e.chipsChange=function(e,t){var n=GamblingManager.getPlayerInfoByPos(e);if(!n)return void qin.Console.logError("更新玩家筹码失败，找不到玩家信息！pos"+e);var i=t.stepParams.bankRoll;n.bankRoll=i,GamblingManager.ChipsChangeEvent.dispatch(n)},e.acitionPosChange=function(e){void 0!=e.stepParams.pos&&(GamblingManager.roomInfo.pos=e.stepParams.pos,GamblingManager.roomInfo.posTime=TimeManager.GetServerUtcTimestamp(),GamblingManager.ActionPosChangeEvent.dispatch(GamblingManager.roomInfo.handCard))},e.oneLoopOver=function(e){GamblingManager.roomInfo.publicCard||(GamblingManager.roomInfo.publicCard=new Array),GamblingUtil.cardArr2CardInfoList(e.stepParams.card,GamblingManager.roomInfo.publicCard),0==GamblingManager.roomInfo.publicCard.length&&(GamblingManager.roomInfo.publicCard=void 0);var t;GamblingManager.roomInfo.handCard&&(t=GamblingManager.roomInfo.handCard.concat());var n;GamblingManager.roomInfo.publicCard&&(n=GamblingManager.roomInfo.publicCard.concat()),GamblingManager.oneLoopClear(),GamblingManager.roomInfo.minRaiseNum=GamblingManager.roomInfo.bBlind,GamblingManager.roomInfo.potChips=e.stepParams.potChips,GamblingManager.roomInfo.maxAnte=0,GamblingManager.OneLoopOverEvent.dispatch([t,n])},e.self=1,e}();__reflect(GuideGamblingProcess.prototype,"GuideGamblingProcess");var GuideProcess=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._step=0,t.steps=new Array,t}return __extends(t,e),t.prototype.run=function(){var e;this._step=0,qin.Console.log("引导步骤ID："+this.definition.id);for(var t=this.steps.length,n=0;t>n;n++)e=this.steps[n],e.comleteEvent.addListener(this.stepComplete,this),e.run()},t.prototype.addStep=function(e){e&&this.steps.push(e)},t.prototype.removeStep=function(e){qin.ArrayUtil.RemoveItem(e,this.steps)},t.prototype.stepComplete=function(e){e.comleteEvent.removeListener(this.stepComplete,this),void 0==this._step&&(this._step=0),this._step++,this._step==this.steps.length&&this.complete()},t.prototype.complete=function(){e.prototype.complete.call(this)},t.prototype.clear=function(){this.comleteEvent.clear(),this.parent=void 0;for(var e,t=0;t<this.steps.length;t++){e=this.steps[t],e.comleteEvent.removeListener(this.stepComplete,this);var n=GuideStepDefined.GetInstance().getDefinition(e.definition.stepId);n&&(1==n.isNotClear?GuideExecutor.addNotClearStep(this.definition.id,e):(e.clear(),GuideExecutor.pushStepProcess(n.type,e)))}this._step=0,this.steps.length=0},t}(BaseGuideProcess);__reflect(GuideProcess.prototype,"GuideProcess");var StraightFlushProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfCardType(this,CardType.StraightFlush)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(StraightFlushProcess.prototype,"StraightFlushProcess");var GuideBoardCardStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){if(e.prototype.run.call(this),this.definition){GuideGamblingProcess.oneLoopOver(this.definition);for(var t=void 0,n=0;n<GamblingManager.roomInfo.playerList.length;n++)t=GamblingManager.roomInfo.playerList[n],GuideGamblingProcess.playerStateChange(t.pos,PlayerState.WaitAction,0);GuideGamblingProcess.acitionPosChange(this.definition)}this.complete()},t.prototype.complete=function(){e.prototype.complete.call(this)},t}(BaseGuideStepProcess);__reflect(GuideBoardCardStepProcess.prototype,"GuideBoardCardStepProcess");var GuideClickStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){if(e.prototype.run.call(this),this.stepDef){var t=UIManager.getPanel(this.stepDef.panelName);if(!t)return void qin.Console.logError("引导点击触发异常！未找到面板，面板名："+this.stepDef.panelName);if(this.stepDef.component){var n=qin.ObjectUtil.getTreeProperty(t,this.stepDef.component);if(!n)return void qin.Console.logError("引导点击触发异常！未找到组件，面板名："+this.stepDef.panelName+"组件名："+this.stepDef.component);n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.componentClickHandler,this)}else qin.Console.logError("引导点击触发异常！未找到组件，面板名："+this.stepDef.panelName+"组件名："+this.stepDef.component)}},t.prototype.componentClickHandler=function(e){e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.componentClickHandler,this),1==this.definition.stepParams["goto"]?this.parent&&this.parent.complete():qin.Console.logError("点击子步骤无goto！")},t.prototype.clear=function(){if(this.stepDef){var t=UIManager.getPanel(this.stepDef.panelName);if(this.stepDef.component&&t){var n=qin.ObjectUtil.getTreeProperty(t,this.stepDef.component);n&&n.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.componentClickHandler,this)}}e.prototype.clear.call(this)},t}(BaseGuideStepProcess);__reflect(GuideClickStepProcess.prototype,"GuideClickStepProcess");var GuideCreateRoomStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this
}return __extends(t,e),t.prototype.run=function(){e.prototype.run.call(this),this.createRoom()},t.prototype.createRoom=function(){if(this.definition){var e=GuideRoomDefined.GetInstance().getDefinition(this.definition.stepParams.id);if(e){GamblingManager.reset(),GamblingManager.roomInfo=new RoomInfo(e);var t=GamblingManager.getPlayerInfoByPos(GuideGamblingProcess.self);t.roleId=UserManager.userInfo.roleId,t.userInfo.head=UserManager.userInfo.head,t.userInfo.sex=UserManager.userInfo.sex,t.userInfo.name=UserManager.userInfo.name;for(var n=0,i=GamblingManager.roomInfo.playerList;n<i.length;n++){var a=i[n];a.pos!=GuideGamblingProcess.self&&(a.userInfo.head=SheetSubName.getdefaultHead(a.userInfo.sex))}SceneManager.onSwitchCompleteEvent.addListener(this.onSwitchSceneComplete,this),SceneManager.switcScene(SceneType.Game)}else qin.Console.logError("新手引导创建房间数据异常！引导房间ID："+this.definition.stepParams.id)}},t.prototype.onSwitchSceneComplete=function(e){GuideGamblingProcess.nextRoundStart(),this.complete()},t.prototype.complete=function(){e.prototype.complete.call(this)},t.prototype.clear=function(){e.prototype.clear.call(this),SceneManager.onSwitchCompleteEvent.removeListener(this.onSwitchSceneComplete,this)},t}(BaseGuideStepProcess);__reflect(GuideCreateRoomStepProcess.prototype,"GuideCreateRoomStepProcess");var GuideFlopCardStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){e.prototype.run.call(this),this.flopCard()},t.prototype.flopCard=function(){if(this.definition){GamblingManager.roomInfo.handCard||(GamblingManager.roomInfo.handCard=new Array),GamblingManager.roomInfo.handCard.length=0,GamblingUtil.cardArr2CardInfoList(this.definition.stepParams.card,GamblingManager.roomInfo.handCard);var e=void 0;GamblingManager.roomInfo.handCard&&(e=GamblingManager.roomInfo.handCard.concat()),GamblingManager.HandCardComeEvent.dispatch(e),GuideGamblingProcess.acitionPosChange(this.definition)}this.complete()},t.prototype.complete=function(){e.prototype.complete.call(this)},t}(BaseGuideStepProcess);__reflect(GuideFlopCardStepProcess.prototype,"GuideFlopCardStepProcess");var GuideGamblingOverStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){e.prototype.run.call(this),this.oneRoundOver()},t.prototype.oneRoundOver=function(){if(this.definition){GamblingManager.roundOverInfo||(GamblingManager.roundOverInfo=new RoundOverInfo);var e=void 0;InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.handCard&&(e=GamblingManager.roomInfo.handCard.concat()),GamblingManager.roundOverClear(),GamblingManager.roundOverInfo.copyValueFrom(this.definition.stepParams);for(var t=0,n=GamblingManager.roundOverInfo.potList;t<n.length;t++)for(var i=n[t],a=0;a<i.roleId.length;a++)if(i.roleId[a]==GuideGamblingProcess.self){i.roleId[a]=UserManager.userInfo.roleId;break}for(var o=0,r=GamblingManager.roundOverInfo.handCardList;o<r.length;o++){var s=r[o];if(s.roleId==GuideGamblingProcess.self){s.roleId=UserManager.userInfo.roleId;break}}GamblingManager.RoundOverEvent.dispatch({initbankRoll:0,handCard:e}),this.complete()}},t.prototype.complete=function(){e.prototype.complete.call(this)},t}(BaseGuideStepProcess);__reflect(GuideGamblingOverStepProcess.prototype,"GuideGamblingOverStepProcess");var GuideHideComponentStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){if(e.prototype.run.call(this),this.stepDef){var t=UIManager.getPanel(this.stepDef.panelName);if(!t)return void qin.Console.logError("引导隐藏组件触发异常！未找到面板，面板名："+this.stepDef.panelName);if(this.stepDef.component){var n=qin.ObjectUtil.getTreeProperty(t,this.stepDef.component);if(!n)return void qin.Console.logError("引导隐藏组件触发异常！未找到组件，面板名："+this.stepDef.panelName+"组件名："+this.stepDef.component);n.visible=!1}else qin.Console.logError("引导隐藏组件触发异常！未找到组件，面板名："+this.stepDef.panelName+"组件名："+this.stepDef.component)}else qin.Console.log("引导数据未找到")},t}(BaseGuideStepProcess);__reflect(GuideHideComponentStepProcess.prototype,"GuideHideComponentStepProcess");var GuideOpenPanelStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){e.prototype.run.call(this),this.stepDef?(UIManager.onPanelOpenEvent.addListener(this.onPanelOpenHandler,this),UIManager.showPanel(this.definition.stepParams.panelName,this.definition.stepParams.params)):qin.Console.log("引导数据未找到")},t.prototype.onPanelOpenHandler=function(e){UIManager.onPanelOpenEvent.removeListener(this.onPanelOpenHandler,this),this.definition&&this.definition.stepParams&&this.definition.stepParams.panelName==e&&this.definition.stepParams.params&&this.definition.stepParams.params.self>0&&1==this.definition.stepParams.params.isAuto&&GuideExecutor.guideProcessComplete(this.definition.stepParams.params.self)},t.prototype.clear=function(){e.prototype.clear.call(this),UIManager.onPanelOpenEvent.removeListener(this.onPanelOpenHandler,this)},t}(BaseGuideStepProcess);__reflect(GuideOpenPanelStepProcess.prototype,"GuideOpenPanelStepProcess");var GuidePromptStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){if(e.prototype.run.call(this),this.stepDef){var t=UIManager.getPanel(this.stepDef.panelName);if(!t)return void qin.Console.logError("引导添加指示显示异常！未找到显示的面板，面板名："+this.stepDef.panelName);if(this.stepDef.component){var n=qin.ObjectUtil.getTreeProperty(t,this.stepDef.component);if(!n)return void qin.Console.logError("引导添加指示显示异常！未找到显示的组件，面板名："+this.stepDef.panelName+"组件名："+this.stepDef.component);this._component=GuidePromptComponent.get(),this._component.init({data:this.stepDef,parent:n})}else qin.Console.logError("引导添加指示显示异常！未找到显示的组件，面板名："+this.stepDef.panelName+"组件名："+this.stepDef.component)}},t.prototype.complete=function(){e.prototype.complete.call(this)},t.prototype.clear=function(){e.prototype.clear.call(this),this._component&&(this._component.destroy(),this._component=null)},t}(BaseGuideStepProcess);__reflect(GuidePromptStepProcess.prototype,"GuidePromptStepProcess");var GuideRoomActionStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){e.prototype.run.call(this),this.definition.stepParams.cd>0?qin.Tick.AddTimeoutInvoke(this.cdOper,this.definition.stepParams.cd,this):this.cdOper()},t.prototype.cdOper=function(){qin.Tick.RemoveTimeoutInvoke(this.cdOper,this),this.definition&&(GuideGamblingProcess.chipsChange(this.definition.target,this.definition),GuideGamblingProcess.playerStateChange(this.definition.target,this.definition.stepParams.state,this.definition.stepParams.num),GuideGamblingProcess.acitionPosChange(this.definition)),this.complete()},t.prototype.complete=function(){e.prototype.complete.call(this)},t.prototype.clear=function(){e.prototype.clear.call(this),qin.Tick.RemoveTimeoutInvoke(this.cdOper,this)},t}(BaseGuideStepProcess);__reflect(GuideRoomActionStepProcess.prototype,"GuideRoomActionStepProcess");var GuideRunPanelFuncStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){if(this.stepDef){var e=UIManager.getPanel(this.stepDef.panelName);if(!e)return void qin.Console.logError("引导执行面板函数触发异常！未找到面板，面板名："+this.stepDef.panelName);if(this.stepDef.component){for(var t=this.stepDef.component.length,n=e,i=0;t-1>i;i++)n=n[this.stepDef.component[i]];if(!n)return void qin.Console.logError("引导执行面板函数触发异常！未找到属性，面板名："+this.stepDef.panelName+"属性列表："+this.stepDef.component);n[this.stepDef.component[t-1]]?(n[this.stepDef.component[t-1]](),this.definition.stepParams&&this.definition.stepParams.self>0&&GuideExecutor.guideProcessComplete(this.definition.stepParams.self)):qin.Console.logError("引导执行面板函数触发异常！未找到函数，面板名："+this.stepDef.panelName+"属性列表："+this.stepDef.component)}else qin.Console.logError("引导执行面板函数触发异常！未找到属性，面板名："+this.stepDef.panelName+"属性列表："+this.stepDef.component)}else qin.Console.log("引导数据未找到")},t}(BaseGuideStepProcess);__reflect(GuideRunPanelFuncStepProcess.prototype,"GuideRunPanelFuncStepProcess");var GuideSceneSwitchStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){e.prototype.run.call(this),this.definition&&(SceneManager.sceneType==this.definition.stepParams.type?this.switchSceneCompleteHandler():(SceneManager.onSwitchCompleteEvent.addListener(this.switchSceneCompleteHandler,this),SceneManager.switcScene(this.definition.stepParams.type,this.definition.stepParams.params)))},t.prototype.switchSceneCompleteHandler=function(){SceneManager.onSwitchCompleteEvent.removeListener(this.switchSceneCompleteHandler,this),this.definition.stepParams&&1==this.definition.stepParams["goto"]&&this.parent&&this.parent.complete()},t.prototype.clear=function(){e.prototype.clear.call(this),SceneManager.onSwitchCompleteEvent.removeListener(this.switchSceneCompleteHandler,this)},t}(BaseGuideStepProcess);__reflect(GuideSceneSwitchStepProcess.prototype,"GuideSceneSwitchStepProcess");var GuideSlideStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){if(e.prototype.run.call(this),this.stepDef){var t=UIManager.getPanel(this.stepDef.panelName);if(!t)return void qin.Console.logError("引导滑动条处理异常！未找到显示的面板，面板名："+this.stepDef.panelName);if(this.stepDef.component){if(this._slider=t[this.stepDef.component[0]],!this._slider)return void qin.Console.logError("引导滑动条处理异常！未找到显示的滑动条，面板名："+this.stepDef.panelName+"组件名："+this.stepDef.component);if(this._slider instanceof eui.SliderBase==0)return void qin.Console.logError("引导滑动条处理异常！组件类型不是滑动条："+this.stepDef.panelName+"组件名："+this.stepDef.component);this._thumb=this._slider[this.stepDef.component[1]],this._slider.addEventListener(egret.Event.CHANGE,this.changeHandler,this),this._thumb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.confirmAddChips,this),this._thumb.addEventListener(egret.TouchEvent.TOUCH_END,this.confirmAddChips,this),this.changeHandler(null)}else qin.Console.logError("引导滑动条处理异常！未找到显示的组件，面板名："+this.stepDef.panelName+"组件名："+this.stepDef.component)}},t.prototype.confirmAddChips=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:this._posX=e.stageX,this._posY=e.stageY;break;case egret.TouchEvent.TOUCH_END:e.stageX==this._posX&&e.stageY==this._posY&&this._slider.value==this.definition.stepParams.end.limit&&(this.removeEvents(),UIManager.closePanel(this.stepDef.panelName),1==this.definition.stepParams.end["goto"]&&this.parent&&this.parent.complete())}},t.prototype.changeHandler=function(e){GuideExecutor.clearChildStepProcess(),this.definition.stepParams.start.limit==this._slider.value&&GuideExecutor.runChildStep(this.definition.stepParams.start),this.definition.stepParams.end.limit==this._slider.value&&GuideExecutor.runChildStep(this.definition.stepParams.end)},t.prototype.complete=function(){e.prototype.complete.call(this)},t.prototype.removeEvents=function(){this._slider&&this._slider.removeEventListener(egret.Event.CHANGE,this.changeHandler,this),this._thumb&&(this._thumb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.confirmAddChips,this),this._thumb.removeEventListener(egret.TouchEvent.TOUCH_END,this.confirmAddChips,this))},t.prototype.clear=function(){this.removeEvents(),this._slider=this._thumb=void 0,e.prototype.clear.call(this)},t}(BaseGuideStepProcess);__reflect(GuideSlideStepProcess.prototype,"GuideSlideStepProcess");var GuideTipsStepProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){if(e.prototype.run.call(this),this.stepDef){var t=UIManager.getPanel(this.stepDef.panelName);if(!t)return void qin.Console.logError("引导添加tips显示异常！未找到显示的面板，面板名："+this.stepDef.panelName);if(this.stepDef.component){var n=qin.ObjectUtil.getTreeProperty(t,this.stepDef.component);if(!n)return void qin.Console.logError("引导添加tips显示异常！未找到显示的组件，面板名："+this.stepDef.panelName+"组件名："+this.stepDef.component);this._component=GuideTipsComponent.get(),this._component.init({parent:n,data:this.stepDef}),this.definition.stepParams&&this.definition.stepParams.self>0&&GuideExecutor.guideProcessComplete(this.definition.stepParams.self)}else qin.Console.logError("引导添加tips显示异常！未找到显示的组件，面板名："+this.stepDef.panelName+"组件名："+this.stepDef.component)}},t.prototype.complete=function(){e.prototype.complete.call(this)},t.prototype.clear=function(){e.prototype.clear.call(this),this._component&&(this._component.destroy(),this._component=null)},t}(BaseGuideStepProcess);__reflect(GuideTipsStepProcess.prototype,"GuideTipsStepProcess");var HundredWarAnime=function(){function e(e,t,n,i,a){void 0===i&&(i=0),void 0===a&&(a=0),this.coinList=new Array,this.betPosList=new Array,this.noSeatPos=new egret.Point(59,1092),this._parent=e;for(var o=0;o<t.length;o++){var r=t[o];this.betPosList.push(this.getGlobalCenter(r,i,a))}this.betOffset=n}return e.prototype.refreshPos=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);var i=0;if(i=this.getGlobalCenter(e[0],t,n).y-this.betPosList[0].y,this.coinList&&this.coinList.length>0)for(var a=0,o=this.coinList;a<o.length;a++){var r=o[a];r.image.y=r.image.y+i}for(var s=0;s<e.length;s++){var l=e[s];this.betPosList[s]=this.getGlobalCenter(l,t,n)}},e.prototype.createCoinTween=function(e,t,n,i,a,o){if(this.coinList.length>0)for(var r=0,s=this.coinList;r<s.length;r++){var l=s[r];if(!l.image.visible)return l.image.visible=!0,l.bet=n,this.setTween(l.image,e,t,i,a,egret.Ease.quartOut,o),l}var h=new HundredWarCoinInfo(ResFixedFileName.ChipCoin_Img,40,n);return this.setTween(h.image,e,t,i,a,egret.Ease.quartOut,o),this.coinList.push(h),h},e.prototype.setTween=function(e,t,n,i,a,o,r){this._parent.addChild(e),r?egret.Tween.get(e).set({x:t.x,y:t.y}).wait(a).to({x:n.x,y:n.y},i,o).call(r):egret.Tween.get(e).set({x:t.x,y:t.y}).wait(a).to({x:n.x,y:n.y},i,o)},e.prototype.resetAllCoins=function(){for(var e=0,t=this.coinList;e<t.length;e++){var n=t[e];this.resetCoin(n)}},e.prototype.resetCoin=function(e){e.bet=void 0,e.image.visible=!1,e.image.parent&&e.image.parent.removeChild(e.image)},e.prototype.setCoinToBets=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);for(var a=0;a<t.length;a++){var o=qin.MathUtil.getRandom(0,this.betOffset.x),r=qin.MathUtil.getRandom(0,this.betOffset.y),s=new egret.Point(this.betPosList[t[a]-1].x+o,this.betPosList[t[a]-1].y+r);this.createCoinTween(this.getGlobalCenter(e,n,i),s,t[a],500,100*a),r>o&&(o=qin.MathUtil.getRandom(0,this.betOffset.x),r=qin.MathUtil.getRandom(0,this.betOffset.y),s=new egret.Point(this.betPosList[t[a]-1].x+o,this.betPosList[t[a]-1].y+r),this.createCoinTween(this.getGlobalCenter(e,n,i),s,t[a],500,100*a))}},e.prototype.setCoinToBet=function(e,t,n,i,a){void 0===i&&(i=0),void 0===a&&(a=0);for(var o=t-1,r=0;n>r;r++){var s=qin.MathUtil.getRandom(0,this.betOffset.x),l=qin.MathUtil.getRandom(0,this.betOffset.y),h=new egret.Point(this.betPosList[o].x+s,this.betPosList[o].y+l);this.createCoinTween(this.getGlobalCenter(e,i,a),h,r+1,500,10*r),l>s&&(s=qin.MathUtil.getRandom(0,this.betOffset.x),l=qin.MathUtil.getRandom(0,this.betOffset.y),h=new egret.Point(this.betPosList[o].x+s,this.betPosList[o].y+l),this.createCoinTween(this.getGlobalCenter(e,i,a),h,r+1,500,10*r))}},e.prototype.setCoinFromToByNum=function(e,t,n,i,a,o,r,s,l){void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===l&&(l=0);for(var h=this,d=function(n){var d=function(){h.resetCoin(p)},p=c.createCoinTween(c.getGlobalCenter(e,o,r),c.getGlobalCenter(t,s,l),void 0,i,n*a,d)},c=this,p=0;n>p;p++)d(p)},e.prototype.setAllCoinBack=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);for(var i=this,a=function(a){var r=o.coinList[a];if(r.bet){var s=function(){i.resetCoin(r)};o.setTween(r.image,r.image.localToGlobal(),o.getGlobalCenter(e,t,n),200,5*a,egret.Ease.quartIn,s)}},o=this,r=0;r<this.coinList.length;r++)a(r)},e.prototype.setCoinBackByBet=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);for(var a=this,o=function(o){var s=r.coinList[o];if(s.bet==e){var l=function(){a.resetCoin(s)};r.setTween(s.image,s.image.localToGlobal(),r.getGlobalCenter(t,n,i),500,5*o,egret.Ease.quartIn,l)}},r=this,s=0;s<this.coinList.length;s++)o(s)},e.prototype.getGlobalCenter=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=0),e.horizontalCenter||e.verticalCenter){var i=new egret.Point(GameManager.stage.stageWidth/2,GameManager.stage.stageHeight/2),a=new egret.Point(i.x+e.horizontalCenter,i.y+e.verticalCenter);return new egret.Point(a.x-e.width/2+t,a.y-e.height/2+n)}var a=e.localToGlobal();return new egret.Point(a.x+e.width/2+t,a.y+e.height/2+t)},e.prototype.clear=function(){this.resetAllCoins(),qin.ArrayUtil.Clear(this.coinList)},e}();__reflect(HundredWarAnime.prototype,"HundredWarAnime");var HundredWarCoinInfo=function(){function e(e,t,n){this.image=new eui.Image,this.image.source=e,this.image.touchEnabled=!1,this.image.width=this.image.height=t,this.bet=n}return e}();__reflect(HundredWarCoinInfo.prototype,"HundredWarCoinInfo");var HundredWarCardAnime=function(){function e(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0),this.cardList=new Array,this.betPosList=new Array,this._parent=e;for(var a=0;a<t.length;a++){var o=t[a],r=this.getGlobalCenter(o,n,i);this.betPosList.push(new egret.Point(r.x-15,r.y))}}return e.prototype.refreshPos=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);var i=0;if(this.cardList&&this.cardList.length>0)for(var a=0,o=this.cardList;a<o.length;a++){var r=o[a];i=0==r.bet?this.getGlobalCenter(e[0],t,n).y-this.betPosList[0].y:this.getGlobalCenter(e[1],t,n).y-this.betPosList[1].y,r.cardFaceCom.y=r.cardFaceCom.y+i}for(var s=0;s<e.length;s++){var l=e[s];this.betPosList[s]=this.getGlobalCenter(l,t,n)}},e.prototype.createCard=function(e,t,n,i,a,o,r){if(this.cardList.length>0)for(var s=void 0,l=0;l<this.cardList.length;l++)if(s=this.cardList[l],!s.cardFaceCom.parent)return s.bet=i,s.cardFaceCom.init(e),this._parent.addChildAt(s.cardFaceCom,0),this.setTween(s.cardFaceCom,t,n,a,o,egret.Ease.quartOut,r),s;var h=new HundredWarCardAnimeInfo(e,i,.7),d=this.getAnimation(AnimationType.CardFaceTurnToFace,h.cardFaceCom);return d.reset(),this._parent.addChildAt(h.cardFaceCom,0),this.setTween(h.cardFaceCom,t,n,a,o,egret.Ease.quartOut,r),this.cardList.push(h),h},e.prototype.createCardGroup=function(e,t,n,i,a,o,r){void 0===o&&(o=0),void 0===r&&(r=0);for(var s=this,l=new Array,h=0;h<e.length;h++){var d=Math.floor((h+1)/5),c=(h+1)%5,p=void 0;if(p=0==c?50*(d-1):50*d+50*(5-c),h==e.length-1){var u=function(){s.onMoveOver(l,n,a)},g=this.createCard(e[h],this.getGlobalCenter(t,o,r),this.betPosList[n],n,500,i+p,u);g.index=h,l.push(g)}else{var g=this.createCard(e[h],this.getGlobalCenter(t,o,r),this.betPosList[n],n,500,i+p);g.index=h,l.push(g)}}},e.prototype.onMoveOver=function(e,t,n){for(var i=this,a=function(){1==n&&i.onShowCardsOver()},o=0;o<e.length;o++)this.changeIndex(e[o].cardFaceCom),o==e.length-1?this.setTween(e[o].cardFaceCom,this.betPosList[t],new egret.Point(this.betPosList[t].x+22.6*e[o].index,this.betPosList[t].y),300,0,egret.Ease.cubicIn,a):this.setTween(e[o].cardFaceCom,this.betPosList[t],new egret.Point(this.betPosList[t].x+22.6*e[o].index,this.betPosList[t].y),300,0,egret.Ease.cubicIn)},e.prototype.changeIndex=function(e){this._parent.addChildAt(e,this._parent.numChildren-6)},e.prototype.onShowCardsOver=function(){this.ShowAllCard()},e.prototype.hideAllCards=function(){if(this.cardList)for(var e=0,t=this.cardList;e<t.length;e++){var n=t[e];this.resetCard(n)}},e.prototype.ShowAllCard=function(){for(var e=0;e<this.betPosList.length;e++)egret.setTimeout(this.ShowCardByBet,this,500*e,e)},e.prototype.ShowCardByBet=function(e){for(var t=0,n=this.cardList;t<n.length;t++){var i=n[t];i.bet==e&&this.startRunThanTheCardAnim(new egret.Point(i.cardFaceCom.x,i.cardFaceCom.y),i.cardFaceCom,i.index+1)}HundredWarManager.onShowCardsEvent.dispatch(e)},e.prototype.startRunThanTheCardAnim=function(e,t,n){var i=this.getAnimation(AnimationType.CardFaceMoveToPoint,t);i.nextAnimation=this.getAnimation(AnimationType.CardFaceTurnToFace,t),i.nextAnimation.scale=.7;var a=0;a=1==n?e.x+15:e.x-15,i.run(e,a)},e.prototype.getAnimation=function(e,t){var n=AnimationFactory.getCardFaceAnimation(e);return n.setTarget(t),n},e.prototype.setTween=function(e,t,n,i,a,o,r){r?egret.Tween.get(e).set({x:t.x,y:t.y}).wait(a).to({x:n.x,y:n.y},i,o).call(r):egret.Tween.get(e).set({x:t.x,y:t.y}).wait(a).to({x:n.x,y:n.y},i,o)},e.prototype.getGlobalCenter=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=0),e){if(0/0!=e.horizontalCenter||0/0!=e.verticalCenter){var i=new egret.Point(GameManager.stage.stageWidth/2,GameManager.stage.stageHeight/2),a=void 0;return a=e.top?new egret.Point(i.x+e.horizontalCenter,e.top+57):new egret.Point(i.x+e.horizontalCenter,i.y+e.verticalCenter),new egret.Point(a.x-e.width/2+t,a.y-e.height/2+n)}var a=e.localToGlobal();return new egret.Point(a.x+e.width/2+t,a.y+e.height/2+n)}},e.prototype.resetCard=function(e){e.bet=void 0,e.index=void 0,e.cardFaceCom.visible=!1;var t=this.getAnimation(AnimationType.CardFaceTurnToFace,e.cardFaceCom);t.reset(),egret.Tween.removeTweens(e.cardFaceCom),e.cardFaceCom.parent&&e.cardFaceCom.parent.removeChild(e.cardFaceCom)},e.prototype.clear=function(){this.hideAllCards(),qin.ArrayUtil.Clear(this.cardList)},e}();__reflect(HundredWarCardAnime.prototype,"HundredWarCardAnime");var HundredWarCardAnimeInfo=function(){function e(e,t,n){this.cardFaceCom=new CardFaceComponent(UIComponentSkinName.CardFaceComponent),this.cardFaceCom.scaleX=this.cardFaceCom.scaleY=n,this.bet=t,this.cardFaceCom.init(e)}return e}();__reflect(HundredWarCardAnimeInfo.prototype,"HundredWarCardAnimeInfo");var HWBetInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(HWBetInfo.prototype,"HWBetInfo");var HWBetPotInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(HWBetPotInfo.prototype,"HWBetPotInfo");var HundredWarResultType;!function(e){e[e.Lose=0]="Lose",e[e.Win=1]="Win",e[e.Dogfall=2]="Dogfall"}(HundredWarResultType||(HundredWarResultType={}));var HundredWarListInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"hwId",{get:function(){return this._hwId},set:function(e){this._hwId=e,this._definition=HundredWarDefined.GetInstance().getDefinition(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(HundredWarListInfo.prototype,"HundredWarListInfo",["IHaveDefintionInfo"]);var HundredWarlastPoolInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.copyValueFrom=function(t){if(e.prototype.copyValueFrom.call(this,t),t.prizeList){this.prizeList=new Array;for(var n=0,i=t.prizeList;n<i.length;n++){var a=i[n],o=void 0;HundredWarManager.isSysBanker(a.roleId)?o=new SimpleUserInfo(HundredWarManager.sysBanker):(o=new SimpleUserInfo,o.copyValueFrom(a)),this.prizeList.push(o)}}t.cards&&(this.cards=new Array,GamblingUtil.cardArr2CardInfoList(t.cards,this.cards))},t}(BaseServerValueInfo);__reflect(HundredWarlastPoolInfo.prototype,"HundredWarlastPoolInfo");var HundredWarManager=function(){function e(){}return Object.defineProperty(e,"self",{get:function(){return e._self=e.getPlayerInfo(UserManager.userInfo.roleId),e._self},enumerable:!0,configurable:!0}),e.addPushListener=function(){SocketManager.AddCommandListener(Command.HWSeatChange_Push_2127,e.onPosChange,this),SocketManager.AddCommandListener(Command.HWBetChange_Push_2123,e.onBetChange,this),SocketManager.AddCommandListener(Command.HWStateChange_Push_2126,e.onRoomStateChange,this),SocketManager.AddCommandListener(Command.HWCards_Push_2124,e.onCardPush,this),SocketManager.AddCommandListener(Command.OutRoom_Push_2128,e.onOutRoomPush,this),SocketManager.AddIgnoreError(ErrorCode.HundredWarOverFlow)},e.removePushListener=function(){SocketManager.RemoveCommandListener(Command.HWSeatChange_Push_2127,e.onPosChange,this),SocketManager.RemoveCommandListener(Command.HWBetChange_Push_2123,e.onBetChange,this),SocketManager.RemoveCommandListener(Command.HWStateChange_Push_2126,e.onRoomStateChange,this),SocketManager.RemoveCommandListener(Command.HWCards_Push_2124,e.onCardPush,this),SocketManager.RemoveCommandListener(Command.OutRoom_Push_2128,e.onOutRoomPush,this),SocketManager.RemoveIgnoreError(ErrorCode.HundredWarOverFlow),e.onBankerChangeEvent.removeListener(e.onBankerChange,this)},e.leaveClear=function(){e.roomInfo=void 0,e.hundredWarOverInfo=void 0,e._self=void 0},e.roundOverClear=function(){if(e.roomInfo)for(var t=0,n=e.roomInfo.betList;t<n.length;t++){var i=n[t];i.bet=0,i.myBet=0}},e.resetByReLogin=function(){e._isInitialize=!1},e.reqEnterRoom=function(t){void 0===t&&(t=0);var n=function(t){if(t.data){if(e._isInitialize||(e._isInitialize=!0,e.OnGetRoomInfoEvent.addListener(e.onFirstEnterRoom,this),e.addPushListener()),SocketManager.RemoveCommandListener(Command.EnterHW_Req_3693,n,this),e.roomInfo=new HWRoomInfo,e.roomInfo.copyValueFrom(t.data),t.data.playerList){UserManager.OnGetSimpleUserInfoEvent.addListener(e.onReqComplete,this),e.roomInfo.playerList=new Array;for(var i=void 0,a=0;a<t.data.playerList.length;a++){var o=t.data.playerList[a];i=new HWHundredWarRoomPlayerInfo,i.copyValueFrom(o),e.roomInfo.playerList.push(i)}e.startReqPlayerInfo(e.roomInfo.playerList)}if(t.data.myBet&&t.data.myBet.length>0&&t.data.betList&&t.data.betList.length>0){e.roomInfo.betList=new Array;for(var r=0,s=t.data.betList;r<s.length;r++){var l=s[r];l.myBet=t.data.myBet[l.pos-1],e.roomInfo.betList.push(l)}}e._isHadLeave=!1,e.OnGetRoomInfoEvent.dispatch()}e.onBankerChangeEvent.addListener(e.onBankerChange,this)};SocketManager.AddCommandListener(Command.EnterHW_Req_3693,n,this),t>0?SocketManager.Send(Command.EnterHW_Req_3693,{id:t}):SocketManager.Send(Command.EnterHW_Req_3693)},Object.defineProperty(e,"reqPlayerInfoListClone",{get:function(){return e._reqPlayerInfoListClone},enumerable:!0,configurable:!0}),e.startReqPlayerInfo=function(t){e._reqPlayerInfoListClone=e.roomInfo.playerList.concat(),e.nextReq()},e.nextReq=function(){if(this._reqPlayerInfoListClone.length>0){var e=this._reqPlayerInfoListClone.shift();UserManager.reqSimpleUserInfo(e.roleId)}},e.onReqComplete=function(t){t&&e.getetRoomInfoOver(t),e.nextReq()},e.onBankerChange=function(t){if(t&&t.beforeId==UserManager.userInfo.roleId){for(var n=0;n<e.panelHandler.HundredWarBankerList.length;n++)if(e.panelHandler.HundredWarBankerList[n].roleId==t.beforeId){e.panelHandler.HundredWarBankerList.splice(n,1);break}e.panelHandler.onUpDownBankerEvent.dispatch(!1)}},e.getetRoomInfoOver=function(t){if(e.roomInfo&&e.roomInfo.playerList){e.getPlayerInfoSuccess(t);var n=e.getPlayerInfoByPos(0);n&&(e.isSysBanker(n.roleId)?n.gold=e.sysBanker.gold:n.gold=e.roomInfo.bankerGold);var i=e.roomInfo.playerList.length;if(i>0){if(t.roleId==e.roomInfo.playerList[i-1].roleId)return UserManager.OnGetSimpleUserInfoEvent.removeListener(e.onReqComplete,this),void e.OnGetPlayerInfoEvent.dispatch()}else UserManager.OnGetSimpleUserInfoEvent.removeListener(e.onReqComplete,this),e.OnGetPlayerInfoEvent.dispatch()}},e.getPlayerInfoSuccess=function(t){if(t&&e.roomInfo.playerList)for(var n=0,i=e.roomInfo.playerList;n<i.length;n++){var a=i[n];if(a.roleId==t.roleId){a.copyValueFrom(t),!e.isSysBanker(t.roleId)&&e.isBanker(t.roleId)&&e.roomInfo&&e.roomInfo.bankerGold&&(a.gold=e.roomInfo.bankerGold);break}}},e.reqSeat=function(t){var n=function(n){e.onSeatEvent.dispatch(t)};SocketManager.call(Command.HWSit_Req_3701,{pos:t},n,null,this)},e.reqStandUp=function(){var t=function(t){e.onStandUpEvent.dispatch()};SocketManager.call(Command.HWStandUp_Req_3704,null,t,null,this)},e.reqBet=function(t,n){var i=function(i){for(var a=!0,o=0,r=e.roomInfo.betList;o<r.length;o++){var s=r[o];s.pos-1;if(s.pos==t){s.myBet+=n,a=!1;break}}if(a){var s=new HWBetPotInfo;s.pos=t,s.myBet=n,e.roomInfo.betList.push(s)}e.onBetEvent.dispatch({pos:t,num:n})},a=function(e){e.error==ErrorCode.HundredWarOverFlow&&UIManager.showFloatTips("当前下注金币数已达庄家金币上限")};SocketManager.call(Command.HWBet_Req_3694,{pos:t,num:n},i,a,this)},e.reqLeave=function(){var t=function(t){e.leaveClear(),e.onLeaveEvent.dispatch()};if(e.roomInfo){if(e.panelHandler.isBankerList())return void AlertManager.showAlert("您现在已上庄，请下庄后再退出房间！");e.roomInfo.state==HWState.Bet&&e.getThisBetGold()>0?AlertManager.showAlert("游戏正在进行中，您暂时不能退出房间，请等本局结束再操作。"):(e._isHadLeave=!0,SocketManager.call(Command.HWLeave_Req_3702,null,t,null,this))}},e.reqNextRoundStart=function(){var t=function(e){};!e._isHadLeave&&e.roomInfo&&SocketManager.call(Command.HWNextRoundStart_Req_3703,null,t,null,this)},e.onPosChange=function(t){if(t.data){var n=void 0;if(e.roomInfo&&e.roomInfo.playerList){if(0==t.data.pos&&!t.data.roleId&&e.isBanker(UserManager.userInfo.roleId)&&InfoUtil.checkAvailable(e.roomInfo)&&e.roomInfo.bankerGold<e.roomInfo.definition.bankerMinGold&&AlertManager.showAlert("您的当前金币低于"+qin.MathUtil.formatNum(e.roomInfo.definition.bankerMinGold)+"金币，已从庄家列表退出。"),e.roomInfo.playerList.length>0){for(var i=!0,a=0;a<e.roomInfo.playerList.length;a++)t.data.pos==e.roomInfo.playerList[a].pos&&(n=e.roomInfo.playerList[a].roleId,t.data.roleId?t.data.roleId!=e.roomInfo.playerList[a].roleId&&(e.roomInfo.playerList[a].roleId=t.data.roleId,UserManager.reqSimpleUserInfo(t.data.roleId)):e.roomInfo.playerList.splice(a,1),i=!1);if(i){var o=new HWHundredWarRoomPlayerInfo;o.pos=t.data.pos,o.roleId=t.data.roleId,e.roomInfo.playerList.push(o),UserManager.reqSimpleUserInfo(t.data.roleId)}}else if(t.data.roleId&&!e.isSysBanker(t.data.roleId)){var o=new HWHundredWarRoomPlayerInfo;o.pos=t.data.pos,o.roleId=t.data.roleId,e.roomInfo.playerList.push(o),UserManager.reqSimpleUserInfo(t.data.roleId)}else e.roomInfo.playerList.push(e.sysBanker),UserManager.OnGetSimpleUserInfoEvent.dispatch(e.sysBanker);t.data.bankerGold&&(e.roomInfo.bankerGold=t.data.bankerGold),e.isSysBanker(t.data.roleId)&&(e.roomInfo.bankerGold=e.sysBanker.gold)}0==t.data.pos&&e.onBankerChangeEvent.dispatch({beforeId:n,afterId:t.data.roleId}),e.onPosChangeEvent.dispatch({pos:t.data.pos,roleId:t.data.roleId})}},e.onBetChange=function(t){if(t.data&&t.data.bet){for(var n=new Array,i=0,a=e.roomInfo.betList;i<a.length;i++){var o=a[i];o.pos-1>=0&&(o.bet!=t.data.bet[o.pos-1]&&n.push(o.pos),o.bet=t.data.bet[o.pos-1])}t.data.bet=n,e.onBetChangeEvent.dispatch(t.data)}},e.onRoomStateChange=function(t){t.data&&(e.roomInfo&&(e.roomInfo.state=t.data.state,t.data.stateTime?e.roomInfo.stateTime=t.data.stateTime:e.roomInfo.stateTime=0),e.onRoomStateChangeEvent.dispatch())},e.onCardPush=function(t){if(t.data){if(e.hundredWarOverInfo=new HundredWarOverInfo,t.data.betList){var n=void 0,i=void 0;e.hundredWarOverInfo.betList=new Array;for(var a=0,o=t.data.betList;a<o.length;a++){var r=o[a];n=new Array,i=new HWBetPotInfo,GamblingUtil.cardArr2CardInfoList(r.cards,n),i.cards=n,i.pos=r.pos,i.win=r.win,e.hundredWarOverInfo.betList.push(i)}}t.data.rankList&&(e.hundredWarOverInfo.rankList=t.data.rankList,e.hundredWarOverInfo.rankList.sort(SortUtil.hundredOverRankSort)),e.hundredWarOverInfo.gold=t.data.gold,e.hundredWarOverInfo.pool=t.data.pool,e.hundredWarOverInfo.isWin=t.data.isWin,e.roomInfo.bankerGold=t.data.bankerGold,e.onCardPushEvent.dispatch()}},e.onOutRoomPush=function(t){t.data&&(e._isHadLeave=!0,e.onOutRoomEvent.dispatch(t.data.id))},e.onFirstEnterRoom=function(){e.OnGetRoomInfoEvent.removeListener(e.onFirstEnterRoom,this),SceneManager.switcScene(SceneType.HundredWar)
},Object.defineProperty(e,"sysBanker",{get:function(){return e._sysBanker||(e._sysBanker=new HWHundredWarRoomPlayerInfo,e._sysBanker.roleId=9999,e._sysBanker.sex=2,e._sysBanker.name="萌萌",e._sysBanker.gold=88888888,e._sysBanker.head=SheetSubName.HundredWarSysBanker_Head,e._sysBanker.pos=0),e._sysBanker},enumerable:!0,configurable:!0}),e.isSysBanker=function(t){return t==e.sysBanker.roleId?!0:!1},e.getPlayerBetTotalNum=function(){var t=0;if(e.roomInfo&&e.roomInfo.betList)for(var n=0,i=e.roomInfo.betList;n<i.length;n++){var a=i[n];a.bet>0&&(t+=a.bet)}return t},e.getSelfPoolGoldByPos=function(t){if(e.roomInfo.betList)for(var n=0,i=e.roomInfo.betList;n<i.length;n++){var a=i[n];if(a.pos==t&&a.myBet)return a.myBet}return null},e.getIsHasBetByPos=function(t){if(e.roomInfo.betList)for(var n=0,i=e.roomInfo.betList;n<i.length;n++){var a=i[n];if(a.pos==t&&a.bet>0)return!0}return!1},e.getThisBetGold=function(){var t=0;if(e.roomInfo.betList)for(var n=0,i=e.roomInfo.betList;n<i.length;n++){var a=i[n];a.myBet&&(t+=a.myBet)}return t},e.getBetPotResultByPos=function(t){var n;if(e.hundredWarOverInfo&&e.hundredWarOverInfo.betList)for(var i=0,a=e.hundredWarOverInfo.betList;i<a.length;i++){var o=a[i];if(o.pos==t){n=o.win==HundredWarResultType.Win?!0:!1;break}}return n},e.getPlayerInfoByPos=function(t){if(e.roomInfo&&e.roomInfo.playerList)for(var n=0,i=e.roomInfo.playerList;n<i.length;n++){var a=i[n];if(a.pos==t)return a}return null},e.getPlayerInfo=function(t){if(e.roomInfo&&e.roomInfo.playerList)for(var n=0,i=e.roomInfo.playerList;n<i.length;n++){var a=i[n];if(a.roleId==t)return a}return null},e.isBanker=function(t){if(e.roomInfo&&e.roomInfo.playerList)for(var n=0;n<e.roomInfo.playerList.length;n++)if(e.roomInfo.playerList[n].roleId==t&&0==e.roomInfo.playerList[n].pos)return!0;return!1},e.panelHandler=new HundredWarPanelHandler,e._isInitialize=!1,e.OnGetRoomInfoEvent=new qin.DelegateDispatcher,e.OnGetPlayerInfoEvent=new qin.DelegateDispatcher,e.onSeatEvent=new qin.DelegateDispatcher,e.onStandUpEvent=new qin.DelegateDispatcher,e.onBetEvent=new qin.DelegateDispatcher,e.onLeaveEvent=new qin.DelegateDispatcher,e.onBetChangeEvent=new qin.DelegateDispatcher,e.onCardPushEvent=new qin.DelegateDispatcher,e.onRoomStateChangeEvent=new qin.DelegateDispatcher,e.onPosChangeEvent=new qin.DelegateDispatcher,e.onBankerChangeEvent=new qin.DelegateDispatcher,e.onDealCardsEvent=new qin.DelegateDispatcher,e.onShowCardsEvent=new qin.DelegateDispatcher,e.onShowCardsAnimOverEvent=new qin.DelegateDispatcher,e.onHideCardsEvent=new qin.DelegateDispatcher,e.onOutRoomEvent=new qin.DelegateDispatcher,e}();__reflect(HundredWarManager.prototype,"HundredWarManager");var HundredWarNoSeatInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"head",{get:function(){return qin.StringUtil.isNullOrEmpty(this._head)?SheetSubName.getdefaultHead(this.sex):this._head},set:function(e){0==qin.StringUtil.isNullOrEmpty(e)&&(e=e.split(GameSetting.HeadUploadVerifySign)[0]),this._head=e},enumerable:!0,configurable:!0}),t}(BaseServerValueInfo);__reflect(HundredWarNoSeatInfo.prototype,"HundredWarNoSeatInfo",["IBaseHead"]);var HundredWarOverInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(HundredWarOverInfo.prototype,"HundredWarOverInfo");var StraightProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfCardType(this,CardType.Straight)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(StraightProcess.prototype,"StraightProcess");var HundredWarPlayerInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"head",{get:function(){return qin.StringUtil.isNullOrEmpty(this._head)?SheetSubName.getdefaultHead(this.sex):this._head},set:function(e){0==qin.StringUtil.isNullOrEmpty(e)&&(e=e.split(GameSetting.HeadUploadVerifySign)[0]),this._head=e},enumerable:!0,configurable:!0}),t}(BaseServerValueInfo);__reflect(HundredWarPlayerInfo.prototype,"HundredWarPlayerInfo",["IBaseHead"]);var HWResultCardsInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(HWResultCardsInfo.prototype,"HWResultCardsInfo");var HWRoomInfo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerList=new Array,t.betList=new Array,t}return __extends(t,e),Object.defineProperty(t.prototype,"hwId",{get:function(){return this._roomId},set:function(e){this._roomId=e,this._definition=HundredWarDefined.GetInstance().getDefinition(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(HWRoomInfo.prototype,"HWRoomInfo",["IHaveDefintionInfo"]);var HWHundredWarRoomPlayerInfo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=100,t.height=100,t}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.pos=void 0},t}(SimpleUserInfo);__reflect(HWHundredWarRoomPlayerInfo.prototype,"HWHundredWarRoomPlayerInfo",["IBaseHead"]);var InsideRoomManager=function(){function e(){}return e.initialize=function(t){if(e.list.length=0,e.lastId=void 0,t.data&&(e.lastId=t.data.lastId,t.data.roomList))for(var n=0,i=t.data.roomList;n<i.length;n++){var a=i[n];e.list.push(new InsideRoomInfo(a))}},Object.defineProperty(e,"lastInsideRoomType",{get:function(){return void 0!=e.lastId?e.getRoomType(e.lastId):InsideRoomType.None},enumerable:!0,configurable:!0}),e.getInfoListByType=function(t){var n,i;switch(t){case InsideRoomType.Game:n=e.ID_GAME_START,i=e.ID_GAME_END;break;case InsideRoomType.HundredWar:n=e.ID_HUNDREDWAR_START,i=e.ID_HUNDREDWAR_END;break;case InsideRoomType.Mtt:n=e.ID_MTT_START,i=e.ID_MTT_END;break;default:return qin.Console.logError("根据类型获取房间列表异常！type："+t),null}for(var a,o=new Array,r=0;r<e.list.length;r++)a=e.list[r],a.id>=n&&a.id<=i&&o.push(a);return o},e.getRoomType=function(t){var n;return"number"==typeof t?n=t:t instanceof RoomInfo&&(n=t.id),n>=e.ID_GAME_START&&n<=e.ID_GAME_END?InsideRoomType.Game:n>=e.ID_HUNDREDWAR_START&&n<=e.ID_HUNDREDWAR_END?InsideRoomType.HundredWar:n>=e.ID_MTT_START&&n<=e.ID_MTT_END?InsideRoomType.Mtt:(qin.Console.logError("获取房间类型异常data："+t),InsideRoomType.None)},e.list=new Array,e.ID_GAME_START=1,e.ID_GAME_END=399999,e.ID_HUNDREDWAR_START=4e5,e.ID_HUNDREDWAR_END=499999,e.ID_MTT_START=5e5,e.ID_MTT_END=Number.MAX_VALUE,e}();__reflect(InsideRoomManager.prototype,"InsideRoomManager");var InsideRoomInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(BaseServerValueInfo);__reflect(InsideRoomInfo.prototype,"InsideRoomInfo");var PrefsManager=function(){function e(){}return e.setValue=function(t,n,i){void 0===i&&(i=!1),i?egret.localStorage.setItem(e.getUserId()+t,n):egret.localStorage.setItem(t,n)},e.getValue=function(t,n){return void 0===n&&(n=!1),n?egret.localStorage.getItem(e.getUserId()+t):egret.localStorage.getItem(t)},e.removeData=function(t,n){return void 0===n&&(n=!1),n?egret.localStorage.removeItem(e.getUserId()+t):egret.localStorage.removeItem(t)},e.setBoolean=function(t,n,i){void 0===i&&(i=!1),e.setValue(t,n.toString(),i)},e.getBoolean=function(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var a=e.getValue(t,i);return qin.StringUtil.isNullOrEmpty(a)?n:qin.StringUtil.toBoolean(a)},e.setNumber=function(t,n,i){void 0===i&&(i=!1),e.setValue(t,n.toString(),i)},e.getNumber=function(t,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var a=e.getValue(t,i);return qin.StringUtil.isNullOrEmpty(a)?n:parseFloat(a)},e.getUserId=function(){return LoginManager.loginInfo?LoginManager.loginInfo.userid.toString():qin.StringConstants.Empty},e.clearLoginInfo=function(){e.setValue(e.Login_LoginType,qin.StringConstants.Empty),e.setValue(e.Login_Token,qin.StringConstants.Empty),e.setNumber(e.Login_Token_Expire,0)},e.getLoginToken=function(){var t=e.getValue(e.Login_Token);if(t){var n=e.getNumber(e.Login_Token_Expire);if(0==n||n>Math.floor(Date.now()/1e3))return t}return qin.StringConstants.Empty},e.setLoginToken=function(t,n){void 0===n&&(n=0),e.setValue(e.Login_Token,t),e.setNumber(e.Login_Token_Expire,n+Math.floor(Date.now()/1e3))},e.Login_Token="login_token",e.Login_Token_Expire="login_token_expire",e.Login_Account="login_account",e.Login_Password="login_password",e.Login_LoginType="login_loginType",e.Sound_Bg_Volume="sound_bg_volume",e.Sound_Bg_Enable="sound_bg_enable",e.Sound_Effect_Volume="sound_effect_volume",e.Sound_Effect_Enable="sound_effect_enable",e.Shake_Enable="shake_enable",e.AutoVocie_Enable="autovocie_enable",e.Language="language",e.User_LastLoginTime="user_lastLoginTime",e}();__reflect(PrefsManager.prototype,"PrefsManager");var LoginInfo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isWhitelist=!1,t.hasAlreadyCreateRole=!1,t}return __extends(t,e),t.prototype.reset=function(){},t.prototype.getServerInfo=function(){return null!=this.ServerList&&this.ServerList.length>0?this.ServerList[0]:null},t.CreateFromProto=function(e){var n=new t(e);return null!=e.status&&(n.isWhitelist=parseInt(e.status)<0),n.channeldata&&(n.channeldata=JSON.parse(n.channeldata.toString())),n},t}(BaseServerValueInfo);__reflect(LoginInfo.prototype,"LoginInfo");var RoleInfo=function(){function e(){}return e.CreateFromProto=function(e){var t=e;return t},e}();__reflect(RoleInfo.prototype,"RoleInfo");var LoginManager=function(){function e(){}return Object.defineProperty(e,"loginMode",{get:function(){return e._loginMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginInfo",{get:function(){return e._loginInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e,"account",{get:function(){return e._account},enumerable:!0,configurable:!0}),Object.defineProperty(e,"channelToken",{get:function(){return e._channelToken},enumerable:!0,configurable:!0}),e.Dispose=function(){e.OnComplete.clear(),null!=e._socket&&(e.RemoveAllListener(),e._socket.dispose(),e._socket=null)},e.Close=function(){null!=e._socket&&(e.RemoveAllListener(),e._socket.close())},e.RemoveAllListener=function(){UIManager.removeEventListener(UIModuleName.LoadingSwitchPanel,UIModuleEvent.OnTimeout,e.OnLoadingTimeout,this),e._socket.RemoveMessageListener(e.OnLoginMessage,this),e._socket.RemoveCommandListener(Command.Login_login,e.OnLogin,this),e._socket.RemoveCommandListener(Command.Login_exchange,e.OnExchange,this),e._socket.RemoveCommandListener(Command.Login_auth,e.OnAuth,this),e._socket.RemoveResultListener(e.OnResult,this)},e.GuestLogin=function(t){e._loginMode=LoginMode.Guest,e._isLogin=1,e._channel=t,e._account="游客",e._password=qin.StringConstants.Empty,e.pollingConnect()},e.AccountLogin=function(t,n,i){e._loginMode=LoginMode.Account,e._isLogin=1,e._channel=t,e._account=n,e._password=i,e.pollingConnect()},e.TokenDebug=function(t,n){e._loginMode=LoginMode.TokenDebug,e._isLogin=1,e._channel=t,e._tokenCode=n,e.pollingConnect()},e.TokenLogin=function(t,n){e._loginMode=LoginMode.Token,e._isLogin=1,e._channel=t,e._tokenCode=n,e.pollingConnect()},e.AccountRegister=function(t,n,i){e._loginMode=LoginMode.Account,e._isLogin=611,e._channel=t,e._account=n,e._password=i,e.pollingConnect()},e.pollingConnect=function(){e._connectHandler||(e._connectHandler=new PollingSocket(1,qin.Delegate.getOut(e.Connect,this),qin.Delegate.getOut(e.OnLoadingTimeout,this))),e._connectHandler.loginConnect()},e.Connect=function(){null==e._socket&&(e._socket=new qin.LoginSocket,e._socket.initialize(ProtocolManager.LoginBin)),e.Close(),e._connectHandler.isConnectFormalServer||UIManager.addEventListener(UIModuleName.LoadingSwitchPanel,UIModuleEvent.OnTimeout,e.OnLoadingTimeout,this),UIManager.showPanel(UIModuleName.LoadingSwitchPanel,!0),e._socket.AddMessageListener(e.OnLoginMessage,this),e._socket.AddResultListener(e.OnResult,this),e._socket.Connect(e._connectHandler.address,e._connectHandler.port)},e.OnLoadingTimeout=function(){e.Close(),AlertManager.showAlert("网络连接超时！",e.OnErrorConfirm,null,null,"网络超时")},e.OnLogin=function(t){e._socket.RemoveCommandListener(Command.Login_login,e.OnLogin,this);var n=t.data.Version;if(VersionManager.VerifyGameServer(n)){var i=t.data.challenge;t.data.serverkey;e._hexsecret="266f889930929ff7";var a=qin.Crypt.HmacSha1(e._hexsecret,i);e._socket.AddCommandListener(Command.Login_exchange,e.OnExchange,this),e._socket.SimpleSend(Command.Login_exchange,{hmac:a})}else UIManager.closePanel(UIModuleName.LoadingSwitchPanel),e.RemoveAllListener(),e.OnVersionError.dispatch()},e.OnExchange=function(t){e._socket.RemoveCommandListener(Command.Login_exchange,e.OnExchange,this);var n=ChannelManager.deviceId,i=qin.StringConstants.Empty;i=e._loginMode==LoginMode.Account?qin.StringUtil.format("{0}@{1}:{2}",qin.Crypt.lb64encode(e._account),qin.Crypt.lb64encode(e._password),e._isLogin):e._loginMode==LoginMode.Guest?n:e._tokenCode,i=qin.Crypt.AESEncrypt(i,e._hexsecret),e._socket.AddCommandListener(Command.Login_auth,e.OnAuth,this);var a=BundleManager.getBid();a&&e._socket.SimpleSend(Command.Login_auth,{token:i,channel:e._channel,device:n,bid:a})},e.OnAuth=function(t){if(e._socket.RemoveCommandListener(Command.Login_auth,e.OnAuth,this),e.Close(),qin.System.isLocalhost&&UIManager.closePanel(UIModuleName.LoadingSwitchPanel),e._loginInfo=LoginInfo.CreateFromProto(t.data),e._loginInfo.secret=e._hexsecret,e._loginMode==LoginMode.Token){if(null!=e._loginInfo.channeldata){var n=e._loginInfo.channeldata;n.hasOwnProperty("account")&&(e._account=n.account),e._channelToken=n.hasOwnProperty("token")?n.token:qin.StringConstants.Empty,PrefsManager.setLoginToken(e._channelToken,ChannelLoginType.getTokenExpire(ChannelManager.loginType)),ChannelManager.SetChannelData(e._account,e._channelToken)}}else e._loginMode==LoginMode.Account&&e._account&&(PrefsManager.setValue(PrefsManager.Login_Account,e._account),PrefsManager.setValue(PrefsManager.Login_Password,e._password));SocketManager.Dispose(),PrefsManager.setValue(PrefsManager.Login_LoginType,ChannelManager.loginType),e.OnComplete.dispatch()},e.OnLoginMessage=function(t){switch(qin.Console.logSocket(t),t.type){case qin.SocketMessageType.Connect:qin.Console.log("Login服务器连接成功"),e._connectHandler.stop(),e._clientKey="xuEaV3HSKms=",e._socket.AddCommandListener(Command.Login_login,e.OnLogin,this),e._socket.SimpleSend(Command.Login_login,{clientkey:e._clientKey,Version:ProjectDefined.GetInstance().codeVersion});break;case qin.SocketMessageType.NetworkError:e._connectHandler.errorConnectHandler(),e._connectHandler.isTimeout&&e.onErrorOccured(t);break;case qin.SocketMessageType.Failing:e._connectHandler.stop(),e.onErrorOccured(t);break;case qin.SocketMessageType.SendError:UIManager.closePanel(UIModuleName.LoadingSwitchPanel),e.Close();var n=new AlertInfo;n.title="发送协议出错",n.subTitle=t.errorCode,n.message=t.message,n.OnConfirm=e.OnErrorConfirm,AlertManager.showAlertInfo(n);break;case qin.SocketMessageType.NotInitialized:UIManager.closePanel(UIModuleName.LoadingSwitchPanel),e.Close(),n=new AlertInfo,n.title="协议初始化异常",n.subTitle=t.errorCode,n.message=t.message,n.OnConfirm=e.OnErrorConfirm,AlertManager.showAlertInfo(n)}},e.onErrorOccured=function(t){UIManager.closePanel(UIModuleName.LoadingSwitchPanel),e.Close();var n=new AlertInfo;n.title="网络异常",n.subTitle=t.errorCode,n.message="连接服务器失败",n.OnConfirm=e.OnErrorConfirm,AlertManager.showAlertInfo(n)},e.OnResult=function(t){if(t.op==qin.SpRpcOp.Response&&0!=t.error){e.Close(),UIManager.closePanel(UIModuleName.LoadingSwitchPanel),t.error==e.TokenErrorCode&&(PrefsManager.clearLoginInfo(),qin.System.isWeChat?GameManager.reload():e.OnValiateFail.dispatch());var n=new AlertInfo;n.title="提示",n.subTitle="protocol:"+t.cmdId+",code:"+t.error,n.message=ErrorDefined.GetInstance().getDetails(t.error),n.OnConfirm=e.OnErrorConfirm,console.warn(qin.StringUtil.format("{0},描述：{1}",n.subTitle,n.message)),AlertManager.showAlertInfo(n)}},e.OnErrorConfirm=function(t){e.OnError.dispatch()},e.TokenErrorCode=406,e.OnComplete=new qin.DelegateDispatcher,e.OnError=new qin.DelegateDispatcher,e.OnValiateFail=new qin.DelegateDispatcher,e.OnVersionError=new qin.DelegateDispatcher,e}();__reflect(LoginManager.prototype,"LoginManager");var ServerInfo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roleId=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCrowded",{get:function(){return this._count>ProjectDefined.GetInstance().getValue(ProjectDefined.serverCrowded)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{set:function(e){this._count=e},enumerable:!0,configurable:!0}),t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(ServerInfo.prototype,"ServerInfo");var MailInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){},Object.defineProperty(t.prototype,"isHavePrize",{get:function(){return null!=this.attaList&&this.attaList.length>0},enumerable:!0,configurable:!0}),t}(BaseServerValueInfo);__reflect(MailInfo.prototype,"MailInfo");var MailManager=function(){function e(){}return e.Reset=function(){e.unReadCount=0,qin.ArrayUtil.Clear(e.mailList),SocketManager.AddCommandListener(Command.Mail_Push_New_2024,e.OnMailNewNofityFromServer,this)},e.OnMailNewNofityFromServer=function(t){e.unReadCount++,e.RequestMailList(0,1)},e.initialize=function(t,n){if(t.data.MailList){for(var i=0,a=t.data.MailList;i<a.length;i++){var o=a[i],r=new MailInfo;if(r.copyValueFrom(o),r.attaJson){r.attaList=new Array;for(var s=JSON.parse(r.attaJson),l=0,h=s;l<h.length;l++){var d=h[l],c=new AwardInfoDefinition;c.id=d.Id,c.type=d.Type,c.count=d.Count,r.attaList.push(c)}}if(r.SubType){var p=MailDefined.GetInstance().getDefinition(r.SubType);if(p){r.Title=p.title;var u=p.content;if(r.attaList&&r.attaList.length>0){var g=ItemDefined.GetInstance().getDefinition(r.attaList[0].id);u=u.replace("{0}",g.name),r.Content=u}}}e.addOneMail(r,n)}e.getMailListEvent.dispatch()}},e.unshiftList=function(t){e.initialize(t,!1)},e.addOneMail=function(t,n){n?(e.mailList.push(t),e.mailList.length>GameSetting.MaxMailNum&&e.mailList.shift()):(e.mailList.unshift(t),e.mailList.length>GameSetting.MaxMailNum&&e.mailList.pop())},e.RequestMailList=function(t,n){SocketManager.call(Command.Mail_GetList_3097,{StartId:t,Count:n},e.unshiftList,null,this)},e.getMaxMailId=function(){if(e.mailList){for(var t=0,n=0;n<e.mailList.length;n++)e.mailList[n].Id>t&&(t=e.mailList[n].Id);return t}},e.getListByType=function(t){if(e.mailList){for(var n=new Array,i=0,a=e.mailList;i<a.length;i++){var o=a[i];o.Type==t&&n.push(o)}return n}return null},e.isHaveNotTakeMailByType=function(t){var n=e.getListByType(t);if(n){for(var i=0,a=n;i<a.length;i++){var o=a[i];if(o.isHavePrize&&!o.IsGot)return!0}return!1}return!1},e.mailList=new Array,e.unReadCount=0,e.getMailListEvent=new qin.DelegateDispatcher,e.getMailPrizeEvent=new qin.DelegateDispatcher,e}();__reflect(MailManager.prototype,"MailManager");var BindAccountInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){this.channel=void 0,this.time=void 0},t}(BaseServerValueInfo);__reflect(BindAccountInfo.prototype,"BindAccountInfo");var BindAccountManager=function(){function e(){}return Object.defineProperty(e,"bindedList",{get:function(){return e._bindedList},enumerable:!0,configurable:!0}),e.clear=function(){e._bindedList&&(e._bindedList.length=0)},e.reqGetList=function(){var t=function(t){e._bindedList.length=0,t.data&&t.data.Array&&(e._bindedList=t.data.Array),e.bindListEvent.dispatch()};SocketManager.call(Command.Bind_GetList_3705,null,t,null,this)},e.reqBind=function(t,n){var i=ChannelUtil.GetLoginChannel(ChannelManager.channelType,n),a=function(t){var a=new BindAccountInfo;switch(a.channel=i,a.time=TimeManager.GetServerUtcTimestamp(),e._bindedList.push(a),n){case ChannelLoginType.Qin:AlertManager.showAlert("您的手机账号绑定成功，请牢记您的账号和登录密码，如有遗忘，可通过“忘记密码”找回。");break;case ChannelLoginType.Weixin:AlertManager.showAlert("绑定微信成功，可用绑定的微信登录！")}e.bindSuccessEvent.dispatch(n)};SocketManager.callAsync(Command.Bind_Account_3597,{Token:t,Channel:i},a,null,this)},e.getIsBinding=function(t){for(var n=ChannelUtil.GetLoginChannel(ChannelManager.channelType,t),i=0,a=e._bindedList;i<a.length;i++){var o=a[i];if(o.channel==n)return!0}return!1},e.startBindQin=function(){AccountManager.Initialize(GameSetting.AppId,ChannelManager.channelType,ChannelManager.deviceId,ProjectDefined.GetInstance().getValue(ProjectDefined.usePhone)),e.RemoveQinEvents(),AccountManager.OnLoginCancel.addListener(e.OnQinLoginCancel,this),AccountManager.OnLoginSuccess.addListener(e.OnQinLoginSuccess,this),UIManager.showPanel(UIModuleName.BindPhoneAccountPanel,{prevPanelName:UIModuleName.BindAccountPanel})},e.RemoveQinEvents=function(){AccountManager.OnLoginCancel.removeListener(e.OnQinLoginCancel,this),AccountManager.OnLoginSuccess.removeListener(e.OnQinLoginSuccess,this)},e.OnQinLoginSuccess=function(t){e.RemoveQinEvents(),e.reqBind(t.token,ChannelLoginType.Qin)},e.OnQinLoginCancel=function(){e.RemoveQinEvents()},e.IsHaveChannelQin=function(){var e=ChannelLoginType.GetChannelLoginList(OperatePlatform.getCurrent(),ChannelManager.channelType,VersionManager.isServerTest,VersionManager.isSafe);return null==e||e.length<=0?!1:-1!=e.indexOf(ChannelLoginType.Qin)?!0:!1},e.tryBindWx=function(){var t=WebConfig.wxRefreshToken;t&&(t=WxAuthorizeType.Public+"###2###"+t,e.reqBind(t,ChannelLoginType.Weixin))},e._bindedList=new Array,e.bindSuccessEvent=new qin.DelegateDispatcher,e.bindListEvent=new qin.DelegateDispatcher,e}();__reflect(BindAccountManager.prototype,"BindAccountManager");var BundleManager=function(){function e(){}return e.getBundleDefinition=function(){if(null==e._definition){if(qin.System.isWeb){var t=URLOption.getNumber(URLOption.Bid);t||(t=BundleDefined.DefaultID),e._definition=BundleDefined.GetInstance().getDefinitionByWebBid(t)}else e._definition=BundleDefined.GetInstance().getDefinitionByBundleId(ChannelManager.bundleId);if(null==e._definition)throw AlertManager.showAlertByString("没有配置包ID"),new Error("没有配置包ID");if(0==qin.StringUtil.isNullOrEmpty(e._definition.bundleId)&&qin.StringUtil.isNullOrEmpty(e._definition.url))throw AlertManager.showAlertByString("安装包必须要配置包url"),new Error("安装包必须要配置包url")}return e._definition},e.getBid=function(){var t=e.getBundleDefinition();return t?t.id:0},e.getPayState=function(){var t=e.getBundleDefinition();return t?t.pay:PayState.Normal},e.getUrl=function(){var t=e.getBundleDefinition();return t?t.url:qin.StringConstants.Empty},e}();__reflect(BundleManager.prototype,"BundleManager");var NotifyManager=function(){function e(){}return e.initialize=function(){e._notifyMap=new qin.Dictionary,e._notifyMap.add(NotifyType.Mtt_HaveJoinedList,new MttHaveJoinedListHandler(NotifyType.Mtt_HaveJoinedList)),e._notifyMap.add(NotifyType.Mail_HaveNewSystem,new NewMailNotifyHandler(NotifyType.Mail_HaveNewSystem)),e._notifyMap.add(NotifyType.Mail_HaveNewPlayer,new NewMailNotifyHandler(NotifyType.Mail_HaveNewPlayer)),e._notifyMap.add(NotifyType.Achieve_HaveDaily,new AchieveNotifyHandler(NotifyType.Achieve_HaveDaily)),e._notifyMap.add(NotifyType.Achieve_HaveWeekly,new AchieveNotifyHandler(NotifyType.Achieve_HaveWeekly)),e._notifyMap.add(NotifyType.Achieve_HaveGrowUp,new AchieveNotifyHandler(NotifyType.Achieve_HaveGrowUp)),e._notifyMap.add(NotifyType.Achieve_PrimaryPattern,new AchieveNotifyHandler(NotifyType.Achieve_PrimaryPattern)),e._notifyMap.add(NotifyType.Achieve_MiddlePattern,new AchieveNotifyHandler(NotifyType.Achieve_MiddlePattern)),e._notifyMap.add(NotifyType.Achieve_HighPattern,new AchieveNotifyHandler(NotifyType.Achieve_HighPattern)),e._notifyMap.add(NotifyType.Friend_ReceivePrize,new FriendPrizeNotifyHandler(NotifyType.Friend_ReceivePrize)),e._notifyMap.add(NotifyType.Friend_HaveNew,new NewFriendNotifyHandler(NotifyType.Friend_HaveNew)),e._notifyMap.add(NotifyType.Gambling_TimeAward,new NewTimeAwardNotifyHandler(NotifyType.Gambling_TimeAward)),e._notifyMap.add(NotifyType.HundredWar_Chat,new HundredWarChatNotifyHandler(NotifyType.HundredWar_Chat)),e._notifyMap.add(NotifyType.MonthCard,new MonthCardNotifyHandler(NotifyType.MonthCard)),e._notifyMap.add(NotifyType.Signin,new SignInNotifyHandler(NotifyType.Signin)),e._notifyMap.add(NotifyType.Achieve_HaveNoTake,new MultiMessageNotifyHandle([NotifyType.Achieve_HaveNoTake,NotifyType.Achieve_HaveDaily,NotifyType.Achieve_HaveWeekly,NotifyType.Achieve_HaveGrowUp])),e._notifyMap.add(NotifyType.Friend_Hall,new MultiMessageNotifyHandle([NotifyType.Friend_Hall,NotifyType.Friend_ReceivePrize,NotifyType.Friend_HaveNew])),e._notifyMap.add(NotifyType.Mail_HaveNew,new MultiMessageNotifyHandle([NotifyType.Mail_HaveNew,NotifyType.Mail_HaveNewSystem,NotifyType.Mail_HaveNewPlayer])),e.OnInitCompleteEvent.dispatch()},e.initByReLogin=function(){e.reset(),e.OnNewInitEvent.dispatch()},e.dispatchNotify=function(t,n){var i=e.getCount(t,n);e.OnNotifyValueChanged.dispatch({type:t,count:i,id:n})},e.setParams=function(t,n,i){if(null!=e._notifyMap){var a=e._notifyMap.getValue(t);a&&a instanceof MultiNotifyHandle&&a.setParams(i)}},e.getCount=function(t,n){var i=e._notifyMap.getValue(t);return i?i instanceof MultiNotifyHandle?void 0!=n?i.getCountByParams(n):i.totalCount:i.count:0},e.clearMultiParams=function(){if(null!=e._notifyMap)for(var t=e._notifyMap.getValues(),n=0,i=t;n<i.length;n++){var a=i[n];a instanceof MultiNotifyHandle&&a.clearParams()}},e.clear=function(t){var n=e._notifyMap.getValue(t);n&&n.reset()},e.reset=function(){for(var t=e._notifyMap.getValues(),n=0,i=t;n<i.length;n++){var a=i[n];a.reset()}},e.OnNotifyValueChanged=new qin.DelegateDispatcher,e.OnInitCompleteEvent=new qin.DelegateDispatcher,e.OnNewInitEvent=new qin.DelegateDispatcher,e}();__reflect(NotifyManager.prototype,"NotifyManager");var NotifyType;!function(e){e[e.Null=0]="Null",e[e.Mtt_HaveJoinedList=1]="Mtt_HaveJoinedList",e[e.Mail_HaveNew=2]="Mail_HaveNew",e[e.Mail_HaveNewSystem=3]="Mail_HaveNewSystem",e[e.Mail_HaveNewPlayer=4]="Mail_HaveNewPlayer",e[e.Achieve_HaveDaily=5]="Achieve_HaveDaily",e[e.Achieve_HaveWeekly=6]="Achieve_HaveWeekly",e[e.Achieve_HaveGrowUp=7]="Achieve_HaveGrowUp",e[e.Achieve_HaveNoTake=8]="Achieve_HaveNoTake",e[e.Friend_ReceivePrize=9]="Friend_ReceivePrize",e[e.Friend_HaveNew=10]="Friend_HaveNew",e[e.Friend_Hall=11]="Friend_Hall",e[e.Gambling_TimeAward=12]="Gambling_TimeAward",e[e.Achieve_PrimaryPattern=13]="Achieve_PrimaryPattern",e[e.Achieve_MiddlePattern=14]="Achieve_MiddlePattern",e[e.Achieve_HighPattern=15]="Achieve_HighPattern",e[e.HundredWar_Chat=16]="HundredWar_Chat",e[e.MonthCard=17]="MonthCard",e[e.Signin=18]="Signin"}(NotifyType||(NotifyType={}));var NotifyInfo=function(){function e(){}return e}();__reflect(NotifyInfo.prototype,"NotifyInfo");var AchieveNotifyHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),AchievementManager.getAchievementPrizeEvent.addListener(this.refresh,this),AchieveProcessManager.processUpdateEvent.addListener(this.refresh,this)},Object.defineProperty(t.prototype,"count",{get:function(){switch(this.type){case NotifyType.Achieve_HaveDaily:return AchievementManager.isHaveNoTakeByType(AchieveDailyType.Daily)?1:0;case NotifyType.Achieve_HaveWeekly:return AchievementManager.isHaveNoTakeByType(AchieveDailyType.Weekly)?1:0;case NotifyType.Achieve_HaveGrowUp:return AchievementManager.isHaveNoTakeByType(AchieveDailyType.GrowUp)?1:0;case NotifyType.Achieve_PrimaryPattern:return AchievementManager.isHaveNoTakeByPlayType(AchieveShowPattern.PrimaryPattern)?1:0;case NotifyType.Achieve_MiddlePattern:return AchievementManager.isHaveNoTakeByPlayType(AchieveShowPattern.MiddlePattern)?1:0;case NotifyType.Achieve_HighPattern:return AchievementManager.isHaveNoTakeByPlayType(AchieveShowPattern.HighPattern)?1:0}},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.dispatchNotify()},t.prototype.destroy=function(){AchievementManager.getAchievementPrizeEvent.removeListener(this.refresh,this),AchieveProcessManager.processUpdateEvent.removeListener(this.refresh,this)},t}(BaseNotifyHandle);__reflect(AchieveNotifyHandler.prototype,"AchieveNotifyHandler");var ThreeOfAKindProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfCardType(this,CardType.ThreeOfAKind)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(ThreeOfAKindProcess.prototype,"ThreeOfAKindProcess");var FriendPrizeNotifyHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),FriendManager.onRefreshInfoEvent.addListener(this.refresh,this),FriendManager.onReceiveGiftEvent.addListener(this.refresh,this)},Object.defineProperty(t.prototype,"count",{get:function(){return FriendManager.giftList&&FriendManager.giftList.length>0?1:0},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.dispatchNotify()},t.prototype.destroy=function(){FriendManager.onRefreshInfoEvent.removeListener(this.refresh,this),FriendManager.onReceiveGiftEvent.removeListener(this.refresh,this)},t}(BaseNotifyHandle);__reflect(FriendPrizeNotifyHandler.prototype,"FriendPrizeNotifyHandler");var HundredWarChatNotifyHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),ChatManager.onRefreshChatRedPointEvent.addListener(this.refresh,this)},Object.defineProperty(t.prototype,"count",{get:function(){return ChatManager.isHaveNewChatMsg?1:0},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.dispatchNotify()},t.prototype.destroy=function(){ChatManager.onRefreshChatRedPointEvent.removeListener(this.refresh,this)},t}(BaseNotifyHandle);__reflect(HundredWarChatNotifyHandler.prototype,"HundredWarChatNotifyHandler");var MonthCardNotifyHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),AwardManager.getExChangeInfoEa.addListener(this.refresh,this),AwardManager.OnAwardValueChanged.addListener(this.refresh,this)},Object.defineProperty(t.prototype,"count",{get:function(){return VipManager.isActiveMonthCard()?VipManager.isBringMonthCardAward()?0:1:UserManager.isFirstLoginToday?1:0},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.dispatchNotify()},t.prototype.destroy=function(){AwardManager.getExChangeInfoEa.removeListener(this.refresh,this),AwardManager.OnAwardValueChanged.removeListener(this.refresh,this)},t}(BaseNotifyHandle);__reflect(MonthCardNotifyHandler.prototype,"MonthCardNotifyHandler");var MttHaveJoinedListHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),ChampionshipManager.onRefreshMTTListEvent.addListener(this.refresh,this),ChampionshipManager.onGetJoinedMatchListEvent.addListener(this.refresh,this)},Object.defineProperty(t.prototype,"count",{get:function(){if(ChampionshipManager.joinMTTList)for(var e=0,t=ChampionshipManager.joinMTTList;e<t.length;e++){var n=t[e];
if(!n.outTime&&!n.endTime)return 1}return 0},enumerable:!0,configurable:!0}),t.prototype.refresh=function(e){this.dispatchNotify()},t.prototype.destroy=function(){ChampionshipManager.onRefreshMTTListEvent.removeListener(this.refresh,this),ChampionshipManager.onGetJoinedMatchListEvent.removeListener(this.refresh,this)},t}(BaseNotifyHandle);__reflect(MttHaveJoinedListHandler.prototype,"MttHaveJoinedListHandler");var MultiMessageNotifyHandle=function(e){function t(t){var n=e.call(this,t[0])||this;return n._types=t,n}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),NotifyManager.OnNotifyValueChanged.addListener(this.notifyManager_OnNotifyValueChanged,this)},t.prototype.notifyManager_OnNotifyValueChanged=function(e){e.type!=this.type&&this._types&&-1!=this._types.indexOf(e.type)&&this.dispatchNotify()},Object.defineProperty(t.prototype,"count",{get:function(){var e=0;if(this._types.length>1)for(var t=1;t<this._types.length;t++)e+=NotifyManager.getCount(this._types[t]);return e},enumerable:!0,configurable:!0}),t}(BaseNotifyHandle);__reflect(MultiMessageNotifyHandle.prototype,"MultiMessageNotifyHandle");var MultiNotifyHandle=function(e){function t(t){var n=e.call(this,t)||this;return n._params=new qin.Dictionary,n}return __extends(t,e),t.prototype.getCountByParams=function(e){return this._params.getValue(e)},t.prototype.clearParams=function(){this._params.clear()},t.prototype.dispatchNotifyByParams=function(e){NotifyManager.dispatchNotify(this.type,e)},t.prototype.setParams=function(e,t){void 0===t&&(t=0),this._params.add(e,t)},Object.defineProperty(t.prototype,"totalCount",{get:function(){for(var e=this._params.getValues(),t=0,n=0;n<e.length;n++)void 0!=e[n]&&(t+=e[n]);return t},enumerable:!0,configurable:!0}),t.prototype.dispatchNotify=function(){throw new Error("这个方法不能被调用，请调用上面的dispatchNotifyByParams(string id)")},t}(BaseNotifyHandle);__reflect(MultiNotifyHandle.prototype,"MultiNotifyHandle");var NewFriendNotifyHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),FriendManager.onRefreshInfoEvent.addListener(this.refresh,this),FriendManager.onReceiveFriendRequestEvent.addListener(this.refresh,this)},Object.defineProperty(t.prototype,"count",{get:function(){return FriendManager.requestFriendList&&FriendManager.requestFriendList.length>0?1:0},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.dispatchNotify()},t.prototype.destroy=function(){FriendManager.onRefreshInfoEvent.removeListener(this.refresh,this),FriendManager.onReceiveFriendRequestEvent.removeListener(this.refresh,this)},t}(BaseNotifyHandle);__reflect(NewFriendNotifyHandler.prototype,"NewFriendNotifyHandler");var NewMailNotifyHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),MailManager.getMailListEvent.addListener(this.refresh,this),MailManager.getMailPrizeEvent.addListener(this.refresh,this)},Object.defineProperty(t.prototype,"count",{get:function(){switch(this.type){case NotifyType.Mail_HaveNewSystem:return MailManager.isHaveNotTakeMailByType(0)?1:0;case NotifyType.Mail_HaveNewPlayer:return MailManager.isHaveNotTakeMailByType(1)?1:0}},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.dispatchNotify()},t.prototype.destroy=function(){MailManager.getMailListEvent.removeListener(this.refresh,this),MailManager.getMailPrizeEvent.removeListener(this.refresh,this)},t}(BaseNotifyHandle);__reflect(NewMailNotifyHandler.prototype,"NewMailNotifyHandler");var NewTimeAwardNotifyHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),GamblingManager.timeAwardHandler.BringTimeAwardEvent.addListener(this.refresh,this),GamblingManager.timeAwardHandler.TimeAwardInfoEvent.addListener(this.refresh,this),GamblingManager.timeAwardHandler.GetTimeAwardInfoEvent.addListener(this.refresh,this)},Object.defineProperty(t.prototype,"count",{get:function(){var e=TimeAwardDefined.GetInstance().dataList.length;return GamblingManager.timeAwardHandler.round<e&&GamblingManager.timeAwardHandler.time>0||GamblingManager.timeAwardHandler.round==e||void 0==GamblingManager.timeAwardHandler.round?0:1},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.dispatchNotify()},t.prototype.destroy=function(){GamblingManager.timeAwardHandler.BringTimeAwardEvent.removeListener(this.refresh,this),GamblingManager.timeAwardHandler.TimeAwardInfoEvent.removeListener(this.refresh,this),GamblingManager.timeAwardHandler.GetTimeAwardInfoEvent.removeListener(this.refresh,this)},t}(BaseNotifyHandle);__reflect(NewTimeAwardNotifyHandler.prototype,"NewTimeAwardNotifyHandler");var SignInNotifyHandler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),ActivityManager.signInHandler.signInCompleteEvent.addListener(this.refresh,this)},Object.defineProperty(t.prototype,"count",{get:function(){return ActivityManager.signInHandler.isSignToday()?0:1},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.dispatchNotify()},t.prototype.destroy=function(){ActivityManager.signInHandler.signInCompleteEvent.removeListener(this.refresh,this)},t}(BaseNotifyHandle);__reflect(SignInNotifyHandler.prototype,"SignInNotifyHandler");var PlayingFieldManager=function(){function e(){}return e.reqRoomListInfo=function(t){SocketManager.call(Command.Req_RoomInfo_3002,{type:t},e.RoomListInfoResponse,null,this)},e.RoomListInfoResponse=function(t){if(t.data&&t.data.roomList){var n=new RoomDefinition;qin.ArrayUtil.Clear(e.roomList);for(var i=0,a=t.data.roomList;i<a.length;i++){var o=a[i],r=new PlayingFieldRoomInfo;n=RoomDefined.GetInstance().getDefinition(o.roomId),r.copyValueFrom(o),n&&(r.smallBlind=n.sBlind,r.bigBlind=n.bBlind,r.minBuy=n.sBuyin,r.maxBuy=n.bBuyin,r.tax=n.tax,r.maxPlayer=n.seat,r.type=n.type,r.pattern=n.pattern,n.ante&&n.ante.length>0&&(r.ante=n.ante[0]),e.roomList||(e.roomList=new Array),e.roomList.push(r))}}e.onGetRoomListEvent.dispatch()},e.reqCreatePersonalRoom=function(e,t,n){var i=function(e){e.data&&e.data.id>0&&(UIManager.closePanel(UIModuleName.CreateRoomPwdPanel),UIManager.closePanel(UIModuleName.KeyBoardPanel),GamblingManager.reqEnterRoom(e.data.id,t,!0))};t?SocketManager.call(Command.Req_CreatePersonalRoom_3610,{roomId:e,pwd:t,ante:n},i,null,this):SocketManager.call(Command.Req_CreatePersonalRoom_3610,{roomId:e,ante:n},i,null,this)},e.roomIdAddZero=function(t){return t?(e.fiveZero+t).slice(-5):null},e.getPatternName=function(e){var t;switch(e){case PlayingFieldType.Primary:t="初级场";break;case PlayingFieldType.Middle:t="中级场";break;case PlayingFieldType.High:t="高级场"}return t},e.isPatternRoom=function(e){switch(e){case PlayingFieldType.Primary:case PlayingFieldType.Middle:case PlayingFieldType.High:return!0;default:return!1}},e.fiveZero="00000",e.onGetRoomListEvent=new qin.DelegateDispatcher,e.onCloseKeyboardEvent=new qin.DelegateDispatcher,e.onKeyBoardCloseEvent=new qin.DelegateDispatcher,e}();__reflect(PlayingFieldManager.prototype,"PlayingFieldManager");var PlayingFieldRoomInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this)},t}(BaseServerValueInfo);__reflect(PlayingFieldRoomInfo.prototype,"PlayingFieldRoomInfo");var ChipsPot=function(){function e(){}return e.pushImg=function(t){t&&-1==e._imgList.indexOf(t)&&(t.x=t.y=0,t.alpha=1,e._imgList.push(t))},e.popImg=function(t){if(void 0==t)return new eui.Image;for(var n,i=0;i<e._imgList.length;i++)if(n=e._imgList[i],n.source==t)return e._imgList.splice(i,1),n;return new eui.Image(t)},e.pushComponent=function(t){t&&-1==e._componentList.indexOf(t)&&e._componentList.push(t)},e.popComponent=function(){var t=e._componentList.pop();return t||(t=new ChipsShowComponent(UIComponentSkinName.ChipsShowComponent)),t},e._componentList=new Array,e._imgList=new Array,e}();__reflect(ChipsPot.prototype,"ChipsPot");var PrizeEffectType;!function(e){e[e.Kind=2]="Kind",e[e.Cost=3]="Cost"}(PrizeEffectType||(PrizeEffectType={}));var PrizeInfo=function(){function e(){}return e}();__reflect(PrizeInfo.prototype,"PrizeInfo");var PrizeManager=function(){function e(){}return e.reqGetAwardList=function(t,n){void 0===t&&(t=0),void 0===n&&(n=10);var i=function(t){var i;if(i=t.data.Array&&t.data.Array.length<n?!0:!1,t.data&&t.data.Array){qin.ArrayUtil.Clear(e.hasReceiveList),e.hasReceiveList||(e.hasReceiveList=new Array);for(var a=0,o=t.data.Array;a<o.length;a++){var r=o[a],s=void 0;s=r,s.isGet=2,e.hasReceiveList.push(s)}e.onGetAwardListEvent.dispatch(i)}};SocketManager.call(Command.PrizeGetList_Req_3684,{startId:t,count:n},i,null,this)},e.reqGetAward=function(t){var n=function(n){e.onGetAwardEvent.dispatch(t)};SocketManager.call(Command.Req_UseItem_3021,{Id:t,Count:1,msg:null},n,null,this)},e.getAddressInfo=function(){var t=function(t){t.data&&(UserManager.userInfo.addressName=t.data.name,UserManager.userInfo.address=t.data.address,UserManager.userInfo.phoneNum=t.data.phone,UserManager.userInfo.qqNum=t.data.qq,UserManager.userInfo.eMail=t.data.mail),e.onGetAddressInfoEvent.dispatch()};SocketManager.call(Command.PrizeGetTakeInfo_Req_3687,null,t,null,this)},e.reqSaveInfo=function(e,t,n,i,a){var o=function(o){UserManager.userInfo.addressName=e,UserManager.userInfo.address=a,UserManager.userInfo.phoneNum=t,UserManager.userInfo.qqNum=n,UserManager.userInfo.eMail=i,AlertManager.showAlert("领奖信息保存成功")};SocketManager.call(Command.PrizeSave_Req_3686,{name:e,phone:t,qq:n,mail:i,address:a},o,null,this)},e.getOrderDetailInfo=function(t){var n=function(t){t.data&&e.onGetOrderDetailInfoEvent.dispatch(t.data)};SocketManager.call(Command.PrizeGetDetails_Req_3685,{id:t},n,null,this)},e.onGetAwardListEvent=new qin.DelegateDispatcher,e.onGetAwardEvent=new qin.DelegateDispatcher,e.onSkipEvent=new qin.DelegateDispatcher,e.onGetAddressInfoEvent=new qin.DelegateDispatcher,e.onGetOrderDetailInfoEvent=new qin.DelegateDispatcher,e}();__reflect(PrizeManager.prototype,"PrizeManager");var OrderStateType;!function(e){e[e.WaitSend=0]="WaitSend",e[e.Sent=1]="Sent",e[e.InfoError=2]="InfoError"}(OrderStateType||(OrderStateType={}));var PrizeState;!function(e){e[e.Underway=0]="Underway",e[e.Complete=1]="Complete",e[e.InfoError=2]="InfoError"}(PrizeState||(PrizeState={}));var ItemManager=function(){function e(){}return e.reset=function(){qin.ArrayUtil.Clear(e.itemList)},e.initialize=function(t){if(e.reset(),t.data&&t.data.Array)for(var n=0,i=t.data.Array;n<i.length;n++){var a=i[n],o=new ItemInfo;o.id=a.Id,o.count=a.Count,e.itemList.push(o)}SocketManager.AddCommandListener(Command.Rec_ItemListAdd_2002,this.onItemListAdd,this),SocketManager.AddCommandListener(Command.Rec_ItemListReduce_2005,this.onItemListReduce,this)},e.onItemListAdd=function(t){if(t.data&&t.data.Array)for(var n=0,i=t.data.Array;n<i.length;n++){var a=i[n],o=e.getItemById(a.Id);o?(o.count+=a.Count,e.checkItemCount(o)):(o=new ItemInfo,o.id=a.Id,o.count=a.Count,e.itemList.push(o))}e.itemAddEvent.dispatch()},e.onItemListReduce=function(t){if(t.data&&t.data.Array)for(var n=0,i=t.data.Array;n<i.length;n++){var a=i[n],o=e.getItemById(a.Id);o&&(o.count-=a.Count,e.checkItemCount(o))}e.itemReduceEvent.dispatch()},e.getItemById=function(t){for(var n=0,i=e.itemList;n<i.length;n++){var a=i[n];if(a.id==t)return a}return null},e.getItemNumById=function(e,t){for(var n=0,i=t;n<i.length;n++){var a=i[n];if(a.id==e)return a.count}return 0},e.reqUseItem=function(t,n,i){void 0===i&&(i=null);var a=e.getItemById(t);if(InfoUtil.checkAvailable(a)){var o=function(){};a.count<n?UIManager.showFloatTips("物品不存在或数量不够"):SocketManager.call(Command.Req_UseItem_3021,{Id:t,Count:n,msg:i},o,null,this)}},e.checkItemCount=function(t){0==t.count&&qin.ArrayUtil.RemoveItem(t,e.itemList)},e.getItemListByType=function(t){for(var n=new Array,i=0,a=e.itemList;i<a.length;i++){var o=a[i];o.definition.type==t&&n.push(o)}return n},e.isHaveTicket=function(t){if(e.itemList&&e.itemList.length>0)for(var n=0,i=e.itemList;n<i.length;n++){var a=i[n];if(a.id==t)return!0}return!1},e.itemList=new Array,e.itemAddEvent=new qin.DelegateDispatcher,e.itemReduceEvent=new qin.DelegateDispatcher,e}();__reflect(ItemManager.prototype,"ItemManager");var PropertyManager=function(){function e(){}return Object.defineProperty(e,"itemGetList",{get:function(){return e._itemGetList},enumerable:!0,configurable:!0}),e.OpenGet=function(){e._isOpen=!0,qin.ArrayUtil.Clear(e._itemGetList),e._itemOldList.clear();for(var t=0,n=ItemManager.itemList;t<n.length;t++){var i=n[t];e._itemOldList.add(i.id,i.count)}e._goldOffset=UserManager.userInfo.gold,e._diamondOffset=UserManager.userInfo.diamond,e._expOffset=UserManager.userInfo.exp},e.Clear=function(){e._isOpen=!1},e.ShowGoldPanel=function(t){e._isOpen&&t>0&&UIManager.showPanel(UIModuleName.GetCoinTipsPanel,"您获得了"+qin.MathUtil.formatNum(t)+"金币")},e.ShowItemList=function(){if(e._isOpen){e._goldOffset=UserManager.userInfo.gold-e._goldOffset,e._diamondOffset=UserManager.userInfo.diamond-e._diamondOffset,e._expOffset=UserManager.userInfo.exp-e._expOffset;for(var t=0,n=ItemManager.itemList;t<n.length;t++){var i=n[t];if(e._itemOldList.containsKey(i.id)){var a=e._itemOldList.getValue(i.id);i.count>a&&e.AddBase(i.id,i.count-a)}else e.AddBase(i.id,i.count)}if(e.AddBase(PropertyId.gold,e._goldOffset),e.AddBase(PropertyId.diamond,e._diamondOffset),e.AddBase(PropertyId.exp,e._expOffset),1==e._itemGetList.length&&e._itemGetList[0].id==PropertyId.gold)return e.ShowGoldPanel(e._itemGetList[0].count),void e.Clear();e._itemGetList.length>0&&UIManager.showPanel(UIModuleName.GetItemTipsPanel,e._itemGetList),e.Clear()}},e.AddBase=function(t,n){if(n>0&&e._isOpen){var i=new ItemGetInfo;i.id=t,i.count=n,e._itemGetList.push(i)}},e._isOpen=!1,e._itemOldList=new qin.Dictionary,e._itemGetList=new Array,e}();__reflect(PropertyManager.prototype,"PropertyManager");var ItemGetInfo=function(){function e(){this.size=100}return e.CreateFromAwardInfoDefinition=function(t,n){void 0===n&&(n=65);var i=new e;return null!=t&&(i.id=t.id,i.type=t.type,i.count=t.count,i.size=n),i},e.CreateFromItemInfo=function(t){var n=new e;return n.id=t.id,InfoUtil.checkAvailable(t)&&(n.type=t.definition.type),n.count=t.count,n},e}();__reflect(ItemGetInfo.prototype,"ItemGetInfo");var ItemInfo=function(){function e(){this.isNew=!1}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e,this._definition=ItemDefined.GetInstance().getDefinition(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),e}();__reflect(ItemInfo.prototype,"ItemInfo",["IHaveDefintionInfo"]);var RankChange;!function(e){e[e.NoChange=1]="NoChange",e[e.Up=2]="Up",e[e.Down=3]="Down"}(RankChange||(RankChange={}));var RankInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.copyValueFrom=function(t){e.prototype.copyValueFrom.call(this,t),t.head||(this.head=SheetSubName.getdefaultHead(this.sex))},t.prototype.reset=function(){this.roleId=0,this.name=qin.StringConstants.Empty,this.score=0,this.rank=0,this.sex=0,this.head=SheetSubName.Default_Head_Male,this.change=RankChange.NoChange},Object.defineProperty(t.prototype,"head",{get:function(){return qin.StringUtil.isNullOrEmpty(this._head)?SheetSubName.getdefaultHead(this.sex):this._head},set:function(e){0==qin.StringUtil.isNullOrEmpty(e)&&(e=e.split(GameSetting.HeadUploadVerifySign)[0]),this._head=e},enumerable:!0,configurable:!0}),t}(BaseServerValueInfo);__reflect(RankInfo.prototype,"RankInfo",["IBaseHead"]);var RankManager=function(){function e(){}return e.initialize=function(){e.allRankList=new Array;for(var t=0,n=RankDefined.GetInstance().dataList;t<n.length;t++){var i=n[t],a=new RankListInfo;a.definition=i,a.lastTime=0,e.allRankList.push(a)}},e.reset=function(){qin.ArrayUtil.Clear(e.allRankList)},e.getListType=function(e,t){return e==RankTabType.Vip?RankType.Vip:2*e+t+1},e.getRankListInfo=function(t,n,i,a){for(var o=0,r=e.allRankList;o<r.length;o++){var s=r[o],l=s.definition;if(l)if(a){if(l.type==t&&l.param1==n&&l.param2==i&&l.param3==a)return s}else if(i){if(l.type==t&&l.param1==n&&l.param2==i)return s}else if(n){if(l.type==t&&l.param1==n)return s}else if(l.type==t)return s}return qin.Console.log("排行榜表配置异常！ type:"+t+" param1:"+n+" param2:"+i+" param3:"+a),null},e.reqRankList=function(t,n,i,a,o){void 0===n&&(n=1);var r,s=function(n){if(n.data){var r=new Array;if(n.data.rankList)for(var s=0,l=n.data.rankList;s<l.length;s++){var h=l[s],d=new RankInfo;d.reset(),d.copyValueFrom(h),d.type=t,r.push(d)}var c=e.getRankListInfo(t,i,a,o);c&&(c.list=r,c.lastTime=TimeManager.GetServerUtcTimestamp()),e.getRankListEvent.dispatch(n.data.myRank)}};r=o?{type:t,rank:n,param1:i,param2:a,param3:o}:a?{type:t,rank:n,param1:i,param2:a}:i?{type:t,rank:n,param1:i}:{type:t,rank:n},SocketManager.call(Command.Req_RankList_3110,r,s,null,this)},e.getRankInfoByRoleId=function(e,t){if(e)for(var n=0,i=e;n<i.length;n++){var a=i[n];if(a.roleId==t)return a}return null},e.isRefreshRank=function(e){if(InfoUtil.checkAvailable(e)){var t=TimeManager.GetServerUtcTimestamp()-e.lastTime;if(t>e.definition.cd)return!0}return!1},e.getRankDes=function(e,t){var n=qin.StringConstants.Empty;switch(e){case 1:n+="冠";break;case 2:n+="亚";break;case 3:n+="季";break;default:return e.toString()}return t&&(n+="军"),n},e.getRankListEvent=new qin.DelegateDispatcher,e}();__reflect(RankManager.prototype,"RankManager");var RankListInfo=function(){function e(){}return e}();__reflect(RankListInfo.prototype,"RankListInfo",["IHaveDefintionInfo"]);var RankName;!function(e){e[e.Champion=1]="Champion",e[e.Runnerup=2]="Runnerup",e[e.Third=3]="Third"}(RankName||(RankName={}));var ResCache=function(){function e(e){this._keys=new Array,this._values=new Array,this._maxCacheLength=e}return e.prototype.add=function(e,t){if(this._keys.length>=this._maxCacheLength){var n=this._keys.shift();this._values.shift(),RES.destroyRes(n)}var i=this._keys.indexOf(e);-1==i?(this._keys.push(e),this._values.push(t)):this._values[i]=t},e.prototype.containsKey=function(e){return this._keys.indexOf(e)>=0},e.prototype.getValue=function(e){var t=this._keys.indexOf(e,0);return-1!=t?this._values[t]:null},e.prototype.clear=function(){qin.ArrayUtil.Clear(this._keys),qin.ArrayUtil.Clear(this._values)},e}();__reflect(ResCache.prototype,"ResCache");var ResCacheManager=function(){function e(){}return e.initialize=function(){e._cacheMap.add(resCacheType.Head,new ResCache(150)),e._cacheMap.add(resCacheType.CircleHead,new ResCache(150)),e._cacheMap.add(resCacheType.Voice,new ResCache(50))},e.getRes=function(t,n){switch(t){case resCacheType.Head:case resCacheType.CircleHead:var i=e.getCacheListByType(t);if(i)return i.getValue(n);case resCacheType.Voice:var a=e.getCacheListByType(t);if(a)return a.getValue(n)}},e.addRes=function(t,n,i){var a=e.getCacheListByType(t);a&&a.add(n,i)},e.getCacheListByType=function(t){return e._cacheMap.containsKey(t)?e._cacheMap.getValue(t):(qin.Console.log("类型不存在"),null)},e.clear=function(){e._cacheMap.foreach(function(e,t){t.clear()},this)},e._cacheMap=new qin.Dictionary,e}();__reflect(ResCacheManager.prototype,"ResCacheManager");var resCacheType;!function(e){e[e.Head=1]="Head",e[e.CircleHead=2]="CircleHead",e[e.Voice=3]="Voice"}(resCacheType||(resCacheType={}));var SafeBoxManager=function(){function e(){}return e.reqSaveWithdrawGold=function(t,n,i){var a=function(t){n==SafeType.Save?UIManager.showFloatTips("存入成功"):n==SafeType.Withdraw&&UIManager.showFloatTips("取出成功"),e.saveWithdrawEvent.dispatch(n)},o=function(e){3004==e.error&&AlertManager.showAlert("您输入的密码错误，请重新输入！")};SocketManager.call(Command.Req_saveORwithdraw_3014,{num:t,type:n,pwd:i},a,o,this)},e.reqCreatePwd=function(t){var n=function(t){UserManager.userInfo.isSafePwd=!0,e.pwdSuccessEvent.dispatch()};SocketManager.call(Command.Req_safePwd_3017,{newPwd:t},n,null,this)},e.reqModifyPwd=function(t,n){var i=function(t){e.modifyPwdEvent.dispatch()},a=function(e){3001==e.error&&AlertManager.showAlert("您的原密码不正确！")};SocketManager.call(Command.Req_safePwd_3017,{newPwd:t,oldPwd:n},i,a,this)},e.reqGetCode=function(t){var n=function(t){e.onGetCodeEvent.dispatch()};SocketManager.call(Command.PhoneCode_Req_3689,{mno:t},n,null,this)},e.reqRetrievePwd=function(t,n){var i=function(t){e.onRetrievePwdEvent.dispatch()};SocketManager.call(Command.Req_safePwd_3017,{newPwd:t,code:n},i,null,this)},e.pwdSuccessEvent=new qin.DelegateDispatcher,e.modifyPwdEvent=new qin.DelegateDispatcher,e.saveWithdrawEvent=new qin.DelegateDispatcher,e.onGetCodeEvent=new qin.DelegateDispatcher,e.onRetrievePwdEvent=new qin.DelegateDispatcher,e}();__reflect(SafeBoxManager.prototype,"SafeBoxManager");var TwoPairsProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfCardType(this,CardType.TwoPairs)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(TwoPairsProcess.prototype,"TwoPairsProcess");var GameScene=function(e){function t(){var t=e.call(this)||this;return t.resGroupName=[ResGroupName.Gambling,ResGroupName.Common],t}return __extends(t,e),t.prototype.clear=function(){UIManager.closePanel(UIModuleName.GamblingPanel)},t.prototype.initialize=function(){e.prototype.initialize.call(this)},t.prototype.onResourceLoadComplete=function(t){e.prototype.onResourceLoadComplete.call(this,t),ChannelManager.hasMicrophone||ChannelManager.requestMicrophone(),this._isResLoaded&&(UIManager.addEventListener(UIModuleName.GamblingPanel,UIModuleEvent.COMPLETE,this.panelInitialzeComplete,this),UIManager.showPanel(UIModuleName.GamblingPanel))},t.prototype.panelInitialzeComplete=function(){UIManager.removeEventListener(UIModuleName.GamblingPanel,UIModuleEvent.COMPLETE,this.panelInitialzeComplete,this),SceneManager.switchClosePanels(),this.LoadCompleteEvent.dispatch(this)},t}(BaseScene);__reflect(GameScene.prototype,"GameScene");var HallScene=function(e){function t(){var t=e.call(this)||this;return t.resGroupName=[ResGroupName.Common],t}return __extends(t,e),t.prototype.clear=function(){UIManager.closePanel(UIModuleName.GameHallPanel),UIManager.closePanel(UIModuleName.PlayingFieldPanel),UIManager.closePanel(UIModuleName.ChampionshipPanel),UIManager.closePanel(UIModuleName.HundredWarPanel)},t.prototype.initialize=function(){e.prototype.initialize.call(this)},t.prototype.onResourceLoadComplete=function(t){if(e.prototype.onResourceLoadComplete.call(this,t),this._isResLoaded){if(SceneManager.switchClosePanels(),this.sceneInfo.extendData)switch(this.sceneInfo.extendData.action){case SceneSwitchAction.RepleacePanel:UIManager.showPanel(this.sceneInfo.extendData.panel,this.sceneInfo.extendData.params);break;case SceneSwitchAction.OpenPanel:UIManager.showPanel(UIModuleName.GameHallPanel,this.sceneInfo.extendData)}else UIManager.showPanel(UIModuleName.GameHallPanel);this.LoadCompleteEvent.dispatch(this)}},t}(BaseScene);__reflect(HallScene.prototype,"HallScene");var HundredWarScene=function(e){function t(){var t=e.call(this)||this;return t.resGroupName=[ResGroupName.HundredWar,ResGroupName.Gambling,ResGroupName.Common],t}return __extends(t,e),t.prototype.clear=function(){UIManager.closePanel(UIModuleName.HundredWarRoomPanel)},t.prototype.initialize=function(){e.prototype.initialize.call(this)},t.prototype.onResourceLoadComplete=function(t){e.prototype.onResourceLoadComplete.call(this,t),this._isResLoaded&&(SceneManager.switchClosePanels(),UIManager.showPanel(UIModuleName.HundredWarRoomPanel),this.LoadCompleteEvent.dispatch(this))},t}(BaseScene);__reflect(HundredWarScene.prototype,"HundredWarScene");var LoginScene=function(e){function t(){var t=e.call(this)||this;return t._isLoginingAcount=!1,t.resGroupName=[ResGroupName.Login],t}return __extends(t,e),t.prototype.clear=function(){UIManager.closePanel(UIModuleName.LoginSceneBgPanel),ChannelManager.OnLogout.removeListener(this.OnChannelLogout,this),this.RemoveChannelEvents(),this.RemoveGameLoginEvents(),this.RemoveLoginBarEvents(),LoginManager.Dispose()},t.prototype.onResourceLoadComplete=function(t){e.prototype.onResourceLoadComplete.call(this,t),this._isResLoaded&&(SceneManager.switchClosePanels(),this.LoadCompleteEvent.dispatch(this))},t.prototype.initialize=function(){e.prototype.initialize.call(this),UIManager.showPanel(UIModuleName.LoginSceneBgPanel),VersionManager.Initialize(this.onVersionInitComplete,this)},t.prototype.onVersionInitComplete=function(){var e=UIManager.getPanel(UIModuleName.LoginSceneBgPanel);e&&e.showVersion(),this.InitNetworkVersion()},t.prototype.InitNetworkVersion=function(e){return e&&(qin.System.isWeb||qin.System.isMicro)?void GameManager.reload():void(t.SkipVersion&&qin.System.isLocalhost?this.onEnterLogin():(VersionManager.onServerComplete.addListener(this.onEnterLogin,this),VersionManager.loadServerVersion()))},t.prototype.onEnterLogin=function(){if(VersionManager.onServerComplete.removeListener(this.onEnterLogin,this),this._versionDateTime=Date.now(),RES.loadGroup(ResGroupName.Common,5),RES.loadGroup(ResGroupName.Gambling,2),RES.loadGroup(ResGroupName.HundredWar,1),qin.System.isWeb){var e=URLOption.getString(URLOption.DebugLoginType);qin.StringUtil.isNullOrEmpty(e)?this.EnterLoginStart(!0):this.GameTokenDebug(e)}else this.EnterLoginStart(!0)},t.prototype.EnterLoginStart=function(e){this._channelLoginList=ChannelLoginType.GetChannelLoginList(OperatePlatform.getCurrent(),ChannelManager.channelType,VersionManager.isServerTest,VersionManager.isSafe);var t=PrefsManager.getValue(PrefsManager.Login_LoginType);this._channelLoginList.length>1?e&&t?this.ChannelLoginStart(t,e):this.ShowEnterLoginPanel():!e||this._channelLoginList[0]&&!t?this.ShowEnterLoginPanel():this.ChannelLoginStart(this._channelLoginList[0],e)},t.prototype.ChannelLoginStart=function(e,t){ChannelManager.OnLogout.addListener(this.OnChannelLogout,this),ChannelManager.loginType=e,e==ChannelLoginType.Guest||e==ChannelLoginType.IntranetGuest?this.GameGuestLogin():(this.AddChannelEvents(),ChannelManager.login(e,t))},t.prototype.ShowEnterLoginPanel=function(){UIManager.addEventListener(UIModuleName.LoginPanel,UIModuleEvent.COMPLETE,this.OnEnterLoginSelect,this),UIManager.showPanel(UIModuleName.LoginPanel,this._channelLoginList)},t.prototype.HideEnterLoginPanel=function(){UIManager.removeEventListener(UIModuleName.LoginPanel,UIModuleEvent.COMPLETE,this.OnEnterLoginSelect,this),UIManager.closePanel(UIModuleName.LoginPanel)},t.prototype.OnEnterLoginSelect=function(e){this.HideEnterLoginPanel(),this.ChannelLoginStart(e,!1)},t.prototype.GameGuestLogin=function(){this.AddGameLoginEvents(),LoginManager.GuestLogin(ChannelType.guest)},t.prototype.AddGameLoginEvents=function(){this.RemoveGameLoginEvents(),LoginManager.OnComplete.addListener(this.OnGameLoginComplete,this),LoginManager.OnError.addListener(this.OnGameLoginError,this),LoginManager.OnVersionError.addListener(this.OnGameLoginVersionError,this)},t.prototype.RemoveGameLoginEvents=function(){LoginManager.OnComplete.removeListener(this.OnGameLoginComplete,this),LoginManager.OnError.removeListener(this.OnGameLoginError,this),LoginManager.OnVersionError.removeListener(this.OnGameLoginVersionError,this)},t.prototype.AddChannelEvents=function(){this.RemoveChannelEvents(),ChannelManager.OnAccountLoginSucceed.addListener(this.OnAccountLoginSucceed,this),ChannelManager.OnTokenLoginSucceed.addListener(this.OnTokenLoginSucceed,this),ChannelManager.OnLoginFailed.addListener(this.OnChannelLoginFailure,this),ChannelManager.OnBackToApplication.addListener(this.OnBackToApplication,this),this._isLoginingAcount=!0},t.prototype.RemoveChannelEvents=function(){ChannelManager.OnAccountLoginSucceed.removeListener(this.OnAccountLoginSucceed,this),ChannelManager.OnTokenLoginSucceed.removeListener(this.OnTokenLoginSucceed,this),ChannelManager.OnLoginFailed.removeListener(this.OnChannelLoginFailure,this),ChannelManager.OnBackToApplication.removeListener(this.OnBackToApplication,this),this._isLoginingAcount=!1,qin.Tick.RemoveTimeoutInvoke(this.CallBackToLoginLaterCoroutine,this)},t.prototype.GameTokenDebug=function(e){ChannelManager.OnLogout.addListener(this.OnChannelLogout,this),ChannelManager.loginType=e;var t=URLOption.getString(URLOption.DebugToken);qin.StringUtil.isNullOrEmpty(t)?AlertManager.showAlertByString("登录token不能为空"):(this.AddGameLoginEvents(),LoginManager.TokenDebug(ChannelManager.getLoginChannel(),t))},t.prototype.OnChannelLoginFailure=function(){this.RemoveChannelEvents(),PrefsManager.clearLoginInfo(),this.ShowEnterLoginPanel()},t.prototype.OnBackToApplication=function(){qin.Tick.RemoveTimeoutInvoke(this.CallBackToLoginLaterCoroutine,this),qin.Tick.AddTimeoutInvoke(this.CallBackToLoginLaterCoroutine,5e3,this)},t.prototype.CallBackToLoginLaterCoroutine=function(){this._isLoginingAcount&&(UIManager.showFloatTips("登录失败"),this.OnChannelLoginFailure())},t.prototype.OnAccountLoginSucceed=function(e){this.RemoveChannelEvents(),e[2]?this.GameAccountRegister(e[0],e[1]):this.GameAccountLogin(e[0],e[1])},t.prototype.OnTokenLoginSucceed=function(e){this.RemoveChannelEvents(),this.GameTokenLogin(e)},t.prototype.OnChannelLogout=function(){this.RemoveChannelEvents(),ChannelManager.OnLogout.removeListener(this.OnChannelLogout,this),this.EnterLoginStart(!1)},t.prototype.GameAccountRegister=function(e,t){this.AddGameLoginEvents(),LoginManager.AccountRegister(ChannelManager.channelType,e,t)},t.prototype.GameAccountLogin=function(e,t){this.AddGameLoginEvents(),LoginManager.AccountLogin(ChannelManager.channelType,e,t)},t.prototype.GameTokenLogin=function(e){this.AddGameLoginEvents(),LoginManager.TokenLogin(ChannelManager.getLoginChannel(),e)},t.prototype.OnGameLoginComplete=function(){this.RemoveGameLoginEvents(),UIManager.closePanel(UIModuleName.LoginPanel),UIManager.closePanel(UIModuleName.RegisterPanel),this.OnLoginBarComplete()},t.prototype.OnGameLoginError=function(){this.RemoveGameLoginEvents(),this.ShowEnterLoginPanel()},t.prototype.OnGameLoginVersionError=function(){this.RemoveGameLoginEvents();var e=new AlertInfo;e.thisObject=this,e.title="版本错误",e.message="客户端版本与服务器版本不匹配，请更新再进游戏。",e.confirmLabel="刷新",e.OnConfirm=function(){GameManager.reload()},AlertManager.showAlertInfo(e)},t.prototype.ShowLoginBar=function(){this.RemoveLoginBarEvents(),UIManager.addEventListener(UIModuleName.LoginBar,UIModuleEvent.COMPLETE,this.OnLoginBarComplete,this),UIManager.addEventListener(UIModuleName.LoginBar,UIModuleEvent.CHANGE,this.OnLoginBarChanged,this),UIManager.showPanel(UIModuleName.LoginBar,LoginManager.loginInfo)},t.prototype.RemoveLoginBarEvents=function(){UIManager.removeEventListener(UIModuleName.LoginBar,UIModuleEvent.COMPLETE,this.OnLoginBarComplete,this),UIManager.removeEventListener(UIModuleName.LoginBar,UIModuleEvent.CHANGE,this.OnLoginBarChanged,this)},t.prototype.OnLoginBarComplete=function(){this.RemoveLoginBarEvents();var e=(Date.now()-this._versionDateTime)/1e3;if(e>=300)AlertManager.showAlert("登录验证已失效，请重新登录游戏！",this.OnLoginBarBack.bind(this),null,null,null,null,"重新登录");else{var t=LoginManager.loginInfo.getServerInfo();if(!t)return void UIManager.showFloatTips("服务器信息为空！");if(1==t.status&&0==LoginManager.loginInfo.isWhitelist)return void AlertManager.showAlert("服务器正在维护中...",this.OnLoginBarBack.bind(this));this.InitServer(t)}},t.prototype.OnLoginBarBack=function(e){UIManager.closePanel(UIModuleName.LoginBar),this.RemoveLoginBarEvents(),this.InitNetworkVersion(!0)},t.prototype.OnLoginBarChanged=function(){UIManager.closePanel(UIModuleName.LoginBar),this.RemoveLoginBarEvents(),ChannelManager.logout()},t.prototype.InitServer=function(e){this.RemoveInitEvents(),GameManager.OnInitComplete.addListener(this.OnInitComplete,this),GameManager.OnInitError.addListener(this.OnInitError,this),GameManager.InitServer(LoginManager.loginInfo,e)
},t.prototype.RemoveInitEvents=function(){GameManager.OnInitComplete.removeListener(this.OnInitComplete,this),GameManager.OnInitError.removeListener(this.OnInitError,this)},t.prototype.OnInitComplete=function(){this.RemoveInitEvents(),this.EnterGame()},t.prototype.OnInitError=function(){UIManager.closePanel(UIModuleName.LoginBar),this.RemoveInitEvents(),this.InitNetworkVersion(!0)},t.prototype.EnterGame=function(){ChannelManager.SetExtData(),ChatManager.initialzie();var e=InsideRoomManager.lastInsideRoomType;switch(e){case InsideRoomType.Game:case InsideRoomType.Mtt:this.enterGambling();break;case InsideRoomType.HundredWar:this.enterHundredWar();break;case InsideRoomType.None:SceneManager.switcScene(SceneType.Hall)}},t.prototype.enterGambling=function(){GamblingManager.OnGetRoomInfoEvent.addListener(this.onGetRoomInfoResult,this),qin.Console.log("游戏初始化进入房间：reqGetRoomInfo"),GamblingManager.reqEnterRoom()},t.prototype.onGetRoomInfoResult=function(){GamblingManager.OnGetRoomInfoEvent.removeListener(this.onGetRoomInfoResult,this),SceneManager.switcScene(SceneType.Game)},t.prototype.enterHundredWar=function(){qin.Console.log("游戏初始化进入百人大战：reqGetHundredWarRoomInfo"),HundredWarManager.reqEnterRoom()},t.SkipVersion=!0,t}(BaseScene);__reflect(LoginScene.prototype,"LoginScene");var SceneInfo=function(){function e(e,t){this.type=e,this.extendData=t}return e}();__reflect(SceneInfo.prototype,"SceneInfo");var SceneManager=function(){function e(){}return e.showSwitchPanel=function(){UIManager.isShowPanelObj(e._switchPanel)||UIManager.showPanel(UIModuleName.LoadingSwitchPanel),e._switchPanel||(e._switchPanel=UIManager.getPanel(UIModuleName.LoadingSwitchPanel))},e.closeSwitchPanel=function(){UIManager.closePanel(UIModuleName.LoadingSwitchPanel)},e.initialize=function(){e.addSwitchDontClosePanel(UIModuleName.GamblingPanel,UIModuleName.HundredWarRoomPanel,UIModuleName.GameHallPanel,UIModuleName.LoginSceneBgPanel)},e.updateSwitchProgress=function(e){},Object.defineProperty(e,"sceneType",{get:function(){return e._currentScene?e._currentScene.sceneInfo.type:SceneType.None},enumerable:!0,configurable:!0}),e.switcScene=function(t,n){if(!e._currentScene||e._currentScene.sceneInfo.type!=t)if(!e._currentScene||e._currentScene&&e._currentScene.isResLoaded){e.cacheSceneList||(e.cacheSceneList=new qin.Dictionary),e._currentScene&&(e._currentScene.LoadCompleteEvent.removeListener(e.switchComplete,this),e._lastScene=e._currentScene);var i=e.cacheSceneList.getValue(t),a=!1;if(!i){switch(a=!0,t){case SceneType.Login:i=new LoginScene;break;case SceneType.Hall:i=new HallScene;break;case SceneType.Game:i=new GameScene;break;case SceneType.HundredWar:i=new HundredWarScene;break;default:qin.Console.logError("切换场景失败！未知的场景类型："+t)}i&&e.cacheSceneList.add(t,i)}i&&(e._currentScene=i,i.LoadCompleteEvent.addListener(e.switchComplete,this),e.showSwitchPanel(),i.sceneInfo?(i.sceneInfo.type=t,i.sceneInfo.extendData=n):i.sceneInfo=new SceneInfo(t,n),a?qin.Tick.AddTimeoutInvoke(e.delaySwitch,e.delayNum,this,i):i.initialize())}else e._isLogout=t==SceneType.Login},Object.defineProperty(e,"delayNum",{get:function(){return void 0==e._delayNum&&(e._delayNum=Math.ceil(1e3/GameManager.stage.frameRate*5)),e._delayNum},enumerable:!0,configurable:!0}),e.delaySwitch=function(e){e.initialize()},e.switchComplete=function(t){e._lastScene&&e._lastScene.clear(),t.LoadCompleteEvent.removeListener(e.switchComplete,this),SoundManager.playBgMusic(),e._isLogout&&(e._isLogout=!1,GameManager.reload()),e.closeSwitchPanel(),e.onSwitchCompleteEvent.dispatch()},e.getScene=function(t){return e.cacheSceneList?e.cacheSceneList.getValue(t):null},e.switchClosePanels=function(){UIManager.panelDict.foreach(e.closeChildPanel,this)},e.closeChildPanel=function(t,n){-1==e._switchDontClosePanelList.indexOf(t)&&UIManager.closePanel(t)},e.addSwitchDontClosePanel=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t?e._switchDontClosePanelList=e._switchDontClosePanelList.concat(t):qin.Console.log("添加切场景不关闭面板异常！面板信息为空！")},e.removeSwitchDontClosePanel=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t)for(var i=0,a=t;i<a.length;i++){var o=a[i];qin.ArrayUtil.RemoveItem(o,e._switchDontClosePanelList)}else qin.Console.log("移除切场景不关闭面板异常！面板信息为空！")},e._switchDontClosePanelList=new Array,e._isLogout=!1,e.onSwitchCompleteEvent=new qin.DelegateDispatcher,e}();__reflect(SceneManager.prototype,"SceneManager");var CostManager=function(){function e(){}return e.verifyDiamond=function(t,n){return void 0===n&&(n=!1),t<=UserManager.userInfo.diamond?!0:(n&&e.showBuyDiamond(),!1)},e.showBuyDiamond=function(t,n){t?AlertManager.showConfirm("钻石数量不足，是否前往充值？",t,n):(e.currentTab=ShopGroupIndex.Diamond,AlertManager.showConfirm("钻石数量不足，是否前往充值？",e.gotoShoppingPanel,n))},e.verifyGold=function(t,n){return void 0===n&&(n=!1),t<=UserManager.userInfo.gold?!0:(n&&e.showBuyGold(t),!1)},e.showBuyGold=function(e,t){t?AlertManager.showConfirm("金币数量不足，是否前往充值？",t):UIManager.showPanel(UIModuleName.GoldShortagePanel,{goldShortage:e})},e.gotoShoppingPanel=function(){UIManager.showPanel(UIModuleName.ShoppingPanel,{tab:e.currentTab})},e.currentTab=0,e}();__reflect(CostManager.prototype,"CostManager");var ShopInfo=function(){function e(){this._id=0}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e,this._definition=ShopDefined.GetInstance().getDefinition(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!0,configurable:!0}),e}();__reflect(ShopInfo.prototype,"ShopInfo",["IHaveDefintionInfo"]);var ShopManager=function(){function e(){}return e.initialize=function(){qin.ArrayUtil.Clear(e.shoppingList);for(var t,n=0;n<ShopDefined.GetInstance().dataList.length;n++)if(t=new ShopInfo,t.id=ShopDefined.GetInstance().dataList[n].id,t.definition)switch(t.definition.type){case ShopType.Gold:e.goldList.push(t);break;case ShopType.Diamond:e.diamondList.push(t);break;case ShopType.Vip:e.vipList.push(t);break;case ShopType.Prop:e.propList.push(t)}for(var i,n=0;n<e.goldList.length;n++)i=AwardDefined.GetInstance().getDefinition(e.goldList[n].definition.awardId),e.awardGoldList.push(i);for(var a=Math.ceil(e.goldList.length/3),n=0;a>n;n++)e.goldListRender.push([]);for(var n=0;n<e.goldList.length;n++)e.goldListRender[Math.floor(n/3)][n%3]=e.goldList[n];a=Math.ceil(e.diamondList.length/3);for(var n=0;a>n;n++)e.diamondListRender.push([]);for(var n=0;n<e.diamondList.length;n++)e.diamondListRender[Math.floor(n/3)][n%3]=e.diamondList[n]},e.clearList=function(){qin.ArrayUtil.Clear(e.diamondList),qin.ArrayUtil.Clear(e.goldList),qin.ArrayUtil.Clear(e.vipList)},e.shoppingList=new Array,e.goldList=new Array,e.diamondList=new Array,e.vipList=new Array,e.propList=new Array,e.awardGoldList=new Array,e.goldListRender=[],e.diamondListRender=[],e}();__reflect(ShopManager.prototype,"ShopManager");var SoundManager=function(){function e(){}return Object.defineProperty(e,"bgEnabled",{get:function(){return void 0!=e._bgEnabled?e._bgEnabled:PrefsManager.getBoolean(PrefsManager.Sound_Bg_Enable,!0)},set:function(t){e._bgEnabled=t,PrefsManager.setBoolean(PrefsManager.Sound_Bg_Enable,t),e.setBgMusicPlay()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"effectEnabled",{get:function(){return void 0!=e._effectEnabled?e._effectEnabled:PrefsManager.getBoolean(PrefsManager.Sound_Effect_Enable,!0)},set:function(t){e._effectEnabled=t,PrefsManager.setBoolean(PrefsManager.Sound_Effect_Enable,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bgVolume",{get:function(){return void 0!=e._bgVolume?e._bgVolume:PrefsManager.getNumber(PrefsManager.Sound_Bg_Volume,.7,!0)},set:function(t){e._bgVolume=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"effectVolume",{get:function(){return void 0!=e._effectVolume?e._effectVolume:PrefsManager.getNumber(PrefsManager.Sound_Effect_Volume,1,!0)},set:function(t){e._effectVolume=t},enumerable:!0,configurable:!0}),e.playBgMusic=function(){if(e.bgEnabled){e.stopBgMusic();var t=SceneManager.sceneType;(t==SceneType.None||t==SceneType.Login)&&(t=SceneType.Hall),e._lastPos=0;var n=ResPrefixPathName.Sound+MusicResEnum.getBgSoundRes(t)+ResSuffixName.MP3,i=e.soundCacheList.getValue(n);i?i.sound&&e.switchBgSound(i.sound):(i=SoundLoaderDecorator.get(n,egret.Sound.MUSIC,qin.Delegate.getOut(e.switchBgSound,this),!1),i.load())}},e.switchBgSound=function(t){var n=t.play(0,e._playTimes);n.volume=e.bgVolume,e._lastBgSound=t,e._lastBgSoundChannel=n,n.addEventListener(egret.Event.SOUND_COMPLETE,e.onSoundPlayComplete,this)},e.changeBgMusic=function(t){e._lastBgSoundChannel&&void 0!=t&&e.bgEnabled&&(e._lastBgSoundChannel.volume=t)},e.setBgMusicPlay=function(){e._lastBgSoundChannel&&e._lastBgSound?(e._bgEnabled||(e._lastPos=e._lastBgSoundChannel.position),e.stopBgMusic(),e._bgEnabled&&(e._lastBgSoundChannel=e._lastBgSound.play(e._lastPos,e._playTimes),e._lastBgSoundChannel.volume=e.bgVolume,e._lastBgSoundChannel.addEventListener(egret.Event.SOUND_COMPLETE,e.onSoundPlayComplete,this))):e._bgEnabled&&e.playBgMusic()},e.onSoundPlayComplete=function(t){var n=t.target;n.removeEventListener(egret.Event.SOUND_COMPLETE,e.onSoundPlayComplete,this),e.playBgMusic()},e.stopBgMusic=function(){e._lastBgSoundChannel&&(e._lastBgSoundChannel.stop(),e._lastBgSoundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,e.onSoundPlayComplete,this))},e.playEffect=function(t,n,i){if(e.effectEnabled){n||(n=UserManager.userInfo&&UserManager.userInfo.sex?UserManager.userInfo.sex:Sex.Male);var a=MusicDefined.GetInstance().getSexMusicDefinition(n,t,i);if(!a)return void qin.Console.logError("获取音效地址异常！sex:"+n+"action:"+t+"pai:"+i);a=ResPrefixPathName.Sound+a;var o=e.soundCacheList.getValue(a);o?o.sound&&e.effectLoadComplete(o.sound):(o=SoundLoaderDecorator.get(a,egret.Sound.EFFECT,qin.Delegate.getOut(e.effectLoadComplete,this),!1),o.load())}},e.effectLoadComplete=function(t){var n=t.play(0,1);e._effectChannelList.push(n),n.volume=e.effectVolume,n.addEventListener(egret.Event.SOUND_COMPLETE,e.onEffectPlayComplete,this)},e.onEffectPlayComplete=function(t){var n=t.currentTarget;n.stop(),n.removeEventListener(egret.Event.SOUND_COMPLETE,e.onEffectPlayComplete,this),qin.ArrayUtil.RemoveItem(n,e._effectChannelList),e.invokeReload()},e.playButtonEffect=function(t){t instanceof eui.Button&&e.playEffect(MusicAction.buttonClick)},e.playWinSoundEffect=function(t){switch(t){case CardType.Fullhouse:case CardType.FourOfAKind:case CardType.StraightFlush:case CardType.RoyalFlush:e.playEffect(MusicAction.bigWin);break;default:e.playEffect(MusicAction.win)}},e.playCardTypeSoundEffect=function(t){switch(t){case CardType.Fullhouse:e.playEffect(MusicAction.cardtype_hulu);break;case CardType.FourOfAKind:e.playEffect(MusicAction.cardtype_sitiao);break;case CardType.StraightFlush:e.playEffect(MusicAction.cardtype_tonghuashun);break;case CardType.RoyalFlush:e.playEffect(MusicAction.cardtype_huangjiatonghua)}},e.clear=function(t){UIManager.showPanel(UIModuleName.LoadingSwitchPanel,!1),e._tmpReload=t,1==URLLoader.isLoading?(qin.Tick.AddSecondsInvoke(e.tryReload,this),qin.Tick.AddTimeoutInvoke(function(){URLLoader.disposeLoader(),e.tryReload()},15e3,this)):e.tryReload()},e.tryReload=function(){0==URLLoader.isLoading&&(qin.Tick.RemoveSecondsInvoke(e.tryReload,this),e._bgEnabled=!1,e._effectEnabled=!1,e._reload=e._tmpReload,e.stopBgMusic(),qin.Tick.AddTimeoutInvoke(function(){e.invokeReload()},1e3,this))},e.invokeReload=function(){if(e._reload){for(var t=0,n=e._effectChannelList;t<n.length;t++){var i=n[t];i.stop(),i.removeEventListener(egret.Event.SOUND_COMPLETE,e.onEffectPlayComplete,this)}e._effectChannelList.length=0,e._reload.invoke(),qin.Delegate.putIn(e._reload),e._reload=null}},e._playTimes=1,e.soundCacheList=new qin.Dictionary,e._lastPos=0,e._effectChannelList=new Array,e}();__reflect(SoundManager.prototype,"SoundManager");var SoundLoaderDecorator=function(){function e(){}return e.get=function(t,n,i,a){void 0===a&&(a=!0);var o=new e;return o.url=t,o._isAutoPlay=a,o._completeCallBack=i,o},e.prototype.load=function(){var e=SoundManager.soundCacheList.getValue(this.url);e||(SoundManager.soundCacheList.add(this.url,this),RES.getResAsync(this.url,this.loadComplete,this))},e.prototype.loadComplete=function(e){if(!e)return void qin.Console.logError("音乐加载异常！"+this.url);if(this.sound=e,this._isAutoPlay){var t=e.play(0,1);t.volume=SoundManager.effectVolume}this._completeCallBack&&(this._completeCallBack.invoke(e),qin.Delegate.putIn(this._completeCallBack))},e}();__reflect(SoundLoaderDecorator.prototype,"SoundLoaderDecorator");var WinHundredWarProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),HundredWarManager.onCardPushEvent.addListener(this.onProcessUpdate,this)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),HundredWarManager.hundredWarOverInfo.gold>0&&(this.process++,this.init(this.process))},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(WinHundredWarProcess.prototype,"WinHundredWarProcess");var TimeAwardInfo=function(){function e(){}return e}();__reflect(TimeAwardInfo.prototype,"TimeAwardInfo");var AlertManager=function(){function e(){}return e.showAlert=function(t,n,i,a,o,r,s,l,h){var d=qin.PoolUtil.GetObject(AlertInfo);d.title=o,d.subTitle=r,d.message=t,d.OnConfirm=n,d.OnCancel=i,d.confirmParam=a,d.cancelParam=h,d.confirmLabel=s,d.cancelLabel=l,d.isSingle=!0,e.showAlertInfo(d)},e.showAlert2=function(t,n,i,a,o,r){var s=qin.PoolUtil.GetObject(AlertInfo);s.thisObject=n,s.message=t,s.OnConfirm=i,s.OnCancel=a,s.confirmParam=o,s.cancelParam=r,s.isSingle=!0,e.showAlertInfo(s)},e.showConfirm=function(t,n,i,a,o,r,s,l,h){var d=qin.PoolUtil.GetObject(AlertInfo);d.title=o,d.subTitle=r,d.message=t,d.OnConfirm=n,d.OnCancel=i,d.confirmParam=a,d.cancelParam=h,d.confirmLabel=s,d.cancelLabel=l,d.isSingle=!1,e.showAlertInfo(d)},e.showConfirm2=function(t,n,i,a,o,r){var s=qin.PoolUtil.GetObject(AlertInfo);s.thisObject=n,s.message=t,s.OnConfirm=i,s.OnCancel=a,s.confirmParam=o,s.cancelParam=r,s.isSingle=!1,e.showAlertInfo(s)},e.showAlertInfo=function(e){UIManager.showPanel(UIModuleName.AlertInfoPanel,e)},e.showAlertObj=function(e){UIManager.showPanel(UIModuleName.AlertInfoPanel,e)},e.showAlertByString=function(e){UIManager.showPanel(UIModuleName.AlertInfoPanel,{isSingle:!0,message:e})},e.showConfirmByString=function(e){UIManager.showPanel(UIModuleName.AlertInfoPanel,{message:e})},e}();__reflect(AlertManager.prototype,"AlertManager");var PanelAnime=function(){function e(e){this.panel=e,this.anmGroup=this.panel.anmGroup,this.anmGroup1=this.panel.anmGroup1,this.titleGroup=this.panel.titleGroup}return e.prototype.onEnable=function(){this.setEnterAnime()},e.prototype.onDisable=function(){this.isEnterOver=!1},e.prototype.setEnterAnime=function(){this.isEnterOver=!1,this.removeAllAnime(),this.resetPos(),egret.Tween.get(this.anmGroup).set({top:-100}).to({top:0},260),egret.Tween.get(this.anmGroup1).set({y:this.panel.height}).to({y:100},260),egret.Tween.get(this.titleGroup).set({top:-100}).wait(300).to({top:0},200).call(this.onEnterAnmComplete.bind(this))},e.prototype.onEnterAnmComplete=function(){this.isEnterOver=!0},e.prototype.onCloseBtnClickHandler=function(e){e&&e.target instanceof eui.Button&&SoundManager.playEffect(MusicAction.close),this.panel.prevPanelName&&this.panel.prevPanelName!=UIModuleName.GameHallPanel||this.showPrePanelName(),this.removeAllAnime();for(var t=0;t<this.panel.numChildren;t++){var n=this.panel.getChildAt(t),i=egret.Tween.get(n);n.x=0,n===this.anmGroup1?i.to({x:-720},200,egret.Ease.circOut).call(this.onCloseAnmComplete.bind(this)):i.to({x:-720},200,egret.Ease.circOut)}},e.prototype.resetPos=function(){for(var e=0;e<this.panel.numChildren;e++){var t=this.panel.getChildAt(e);t.x=0}},e.prototype.removeAllAnime=function(){egret.Tween.removeTweens(this.anmGroup),egret.Tween.removeTweens(this.anmGroup1),egret.Tween.removeTweens(this.titleGroup)},e.prototype.showPrePanelName=function(){this.panel.prevPanelName||UIManager.showPanel(UIModuleName.GameHallPanel),this.panel.prevPanelName!=UIModuleName.None&&UIManager.showPanel(this.panel.prevPanelName)},e.prototype.onCloseAnmComplete=function(){UIManager.closePanel(this.panel)},e}();__reflect(PanelAnime.prototype,"PanelAnime");var ReqScroller=function(){function e(e,t,n,i){this.index=0,this._isReqFinish=!1,this._scroller=e,this._list=t,this.reqNum=n,this.reqCallback=i,this._bottom=new ReqScrollerbotton(t.width,UIComponentSkinName.ReqScrollerbotton),this._scroller.addChild(this._bottom),this._bottom.bottom=0,this._bottom.visible=!1,this._scroller.addEventListener(eui.UIEvent.CHANGE_END,this.checkForReq,this)}return e.prototype.Clear=function(){this.index=0,this._isReqFinish=!1,this._dpList&&this._dpList.removeAll(),this._bottom.visible=!1},e.prototype.init=function(e,t){if(this._isReqFinish=t,0!=this.index)for(var n=0;n<e.source.length;n++)this._dpList.addItem(e.source[n]);else 0==this.index&&(this._dpList=new eui.ArrayCollection(e.source.concat()));this._list.dataProvider=this._dpList,this.index+=this.reqNum},e.prototype.checkForReq=function(){this.checkIsBottom()&&(this._isReqFinish||this.reqCallback(),this._bottom.init(this._isReqFinish),this._bottom.setAnime())},e.prototype.checkIsBottom=function(){if(this._dpList)for(var e=this._dpList.source[this._dpList.source.length-1],t=0;t<this._list.numChildren;t++){var n=this._list.getChildAt(t);if(n.bindData===e)return!0}return!1},e}();__reflect(ReqScroller.prototype,"ReqScroller");var UIManager=function(){function e(){}return Object.defineProperty(e,"panelDict",{get:function(){return e._panelDict},enumerable:!0,configurable:!0}),e.initialize=function(t){e._gameLayer=new eui.Group,e._mainUiLayer=new eui.Group,e._moduleLayer=new eui.Group,e._tipsLayer=new eui.Group,e._guideLayer=new eui.Group,e._warnLayer=new eui.Group,t.addChild(e._gameLayer),t.addChild(e._mainUiLayer),t.addChild(e._moduleLayer),t.addChild(e._tipsLayer),t.addChild(e._guideLayer),t.addChild(e._warnLayer),e._panelDict=new qin.Dictionary,e._layerDict=new qin.Dictionary,e._layerDict.add(UILayerType.GameContent,e._gameLayer),e._layerDict.add(UILayerType.MainUI,e._mainUiLayer),e._layerDict.add(UILayerType.Module,e._moduleLayer),e._layerDict.add(UILayerType.Tips,e._tipsLayer),e._layerDict.add(UILayerType.Guide,e._guideLayer),e._layerDict.add(UILayerType.Warn,e._warnLayer),this._layers=e._layerDict.getValues();for(var n,i=0;i<this._layers.length;i++)n=this._layers[i],n.touchEnabled=!1,n.width=GameSetting.StageWidth;e._resizeMap=new Array,e._resizeScrollerMap=new Array,e._resizeDomMap=new Array,t.addEventListener(egret.Event.RESIZE,e.resizeHandler,this),e.resizeHandler(null)},e.showPanel=function(t,n){var i;if(i=e._panelDict.getValue(t),!i){var a=egret.getDefinitionByName(t);a&&(i=new a,e._panelDict.add(t,i))}if(i){var o=e.getLayerContainer(i.layer);e.setAlignInfo(i),o&&(i.isIgnoreAdaptation||(i.height=GameManager.stage.stageHeight),o.addChild(i)),i.init(n),e.onPanelOpenEvent.dispatch(t)}},e.closePanel=function(t){var n,i;"string"==typeof t?(n=e.getPanel(t),i=t):t instanceof BasePanel&&(n=t,i=egret.getQualifiedClassName(t)),n&&n.parent&&(n.parent.removeChild(n),e.onPanelCloseEvent.dispatch(i))},e.getPanel=function(t){if(t){var n=e._panelDict.getValue(t);return n}qin.Console.logError("面板名为空！")},e.getLayerContainer=function(t){return t!=UILayerType.None?e._layerDict.getValue(t):null},e.showFloatTips=function(t){e.showPanel(UIModuleName.TextTipsPanel,t)},e.showPanelByVisible=function(t,n){var i=e.getPanel(t);i&&(i.visible=n)},e.takeToTopLayer=function(t){var n,i;"string"==typeof t?(n=e.getPanel(t),i=e.getLayerContainer(n.layer)):t instanceof BasePanel&&(n=t,i=e.getLayerContainer(t.layer)),i&&n&&n.parent.addChild(n)},e.isShowPanel=function(t){var n=e.getPanel(t);return e.isShowPanelObj(n)},e.isShowPanelObj=function(e){return e&&e.parent&&e.visible?!0:!1},e.setAlignInfo=function(e){switch(UIUtil.clearLayout(e),e.tweenGroup&&(isNaN(e.tweenGroup.horizontalCenter)&&(e.tweenGroup.horizontalCenter=0),isNaN(e.tweenGroup.verticalCenter)&&(e.tweenGroup.verticalCenter=0)),e.panelAlignType){case PanelAlignType.Center_Top:e.horizontalCenter=e.offsetH,e.top=e.offsetV;break;case PanelAlignType.Center_Center:e.horizontalCenter=e.offsetH,e.verticalCenter=e.offsetV;break;case PanelAlignType.Center_Bottom:e.horizontalCenter=e.offsetH,e.bottom=e.offsetV;break;case PanelAlignType.Left_Top:e.left=e.offsetH,e.top=e.offsetV;break;case PanelAlignType.Left_Bottom:e.left=e.offsetH,e.bottom=e.offsetV;break;case PanelAlignType.Left_Center:e.left=e.offsetH,e.verticalCenter=e.offsetV;break;case PanelAlignType.Right_Top:e.right=e.offsetH,e.top=e.offsetV;break;case PanelAlignType.Right_Center:e.right=e.offsetH,e.verticalCenter=e.offsetV;break;case PanelAlignType.Right_Bottom:e.right=e.offsetH,e.bottom=e.offsetV}},e.resizeHandler=function(t){for(var n,i=0;i<this._layers.length;i++)n=this._layers[i],n.height=GameManager.stage.stageHeight;e._panelDict.foreach(e.resizePanel,this);for(var a=0,o=e._resizeMap;a<o.length;a++){var r=o[a];r.height=GameManager.stage.stageHeight}if(GameManager.stage.stageHeight<GameSetting.StageHeight)for(var s=0,l=e._resizeScrollerMap;s<l.length;s++){var h=l[s];h.target.height=GameManager.stage.stageHeight-(GameSetting.StageHeight-h.height)}else for(var d=0,c=e._resizeScrollerMap;d<c.length;d++){var h=c[d];h.target.height=h.height}for(var p=0,u=e._resizeDomMap;p<u.length;p++){var g=u[p];e.reSizeDom(g.target,g.offsetX,g.offsetY,g.canvasWidth,g.leftByStage)}},e.resizePanel=function(e,t){t.isIgnoreAdaptation||(t.height=GameManager.stage.stageHeight)},e.pushResizeGroup=function(t,n){void 0===n&&(n=!0),t&&(n&&(t.height=GameManager.stage.stageHeight),-1==e._resizeMap.indexOf(t)&&e._resizeMap.push(t),t.touchEnabled=!1)},e.pushResizeDom=function(t,n,i,a){if(void 0===a&&(a=!0),t){var o=document.getElementsByTagName("canvas")[0].getBoundingClientRect(),r=o.width,s=o.width/GameManager.stage.width,l=void 0;l=o.top>0?0:o.top*s,a&&e.reSizeDom(t,(n+o.left)*s,i*s+l,r,n*s);for(var h=!0,d=0,c=e._resizeDomMap;d<c.length;d++){var p=c[d];if(p.target==t){h=!1;break}}if(h){var u=new Object;u.target=t,u.offsetX=(n+o.left)*s,u.offsetY=i*s+l,u.canvasWidth=r,u.leftByStage=n*s,e._resizeDomMap.push(u)}}},e.reSizeDom=function(e,t,n,i,a){var o,r,s=document.getElementsByTagName("canvas")[0].getBoundingClientRect(),l=s.width,h=s.left;l==i?(o=h>0?(h+a)/t:a/t*(l/i),r=n/n):(o=(h+a*(l/i))/t,r=l/i),e.x=t*o,e.y=n*r+s.top},e.pushResizeScroller=function(t,n,i){if(void 0===i&&(i=!0),t){i&&(GameManager.stage.stageHeight<GameSetting.StageHeight?t.height=GameManager.stage.stageHeight-(GameSetting.StageHeight-n):t.height=n);for(var a=!0,o=0,r=e._resizeScrollerMap;o<r.length;o++){var s=r[o];if(s.target==t){a=!1;break}}if(a){var l=new Object;l.target=t,l.height=n,e._resizeScrollerMap.push(l)}t.touchEnabled=!1}},e.addEventListener=function(t,n,i,a){e._eventDispatcher.addListener(t+n,i,a)},e.removeEventListener=function(t,n,i,a){e._eventDispatcher.removeListener(t+n,i,a)},e.dispatchEvent=function(t,n,i){e._eventDispatcher.dispatch(t+n,i)},e.removeAllEvent=function(){e._eventDispatcher.clear()},e._eventDispatcher=new qin.CallDispatcher,e.onPanelOpenEvent=new qin.DelegateDispatcher,e.onPanelCloseEvent=new qin.DelegateDispatcher,e}();__reflect(UIManager.prototype,"UIManager");var WinMTTProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),ChampionshipManager.OnMTTOverPushEvent.addListener(this.onProcessUpdate,this)},t.prototype.onProcessUpdate=function(t){e.prototype.onProcessUpdate.call(this,t),t.rank&&1==t.rank&&(this.process++,this.init(this.process))},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(WinMTTProcess.prototype,"WinMTTProcess");var WinProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),GamblingUtil.isWin(UserManager.userInfo.roleId)&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&PlayingFieldManager.isPatternRoom(GamblingManager.roomInfo.definition.type)&&(this.process++,e.prototype.init.call(this,this.process))},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(WinProcess.prototype,"WinProcess");var ActivityManager=function(){function e(){}return e.clear=function(){e._subHandlerList.foreach(function(e,t){t.clear()},this),e.triggerHandler.clear()},e.initialize=function(t){if(e.clear(),e.triggerHandler.initialize(),e.addHandlers(),e.initActivityList(),TimeManager.resetTime0Event.addListener(e.onTimeReset,this),SocketManager.AddCommandListener(Command.Activity_Push_2088,e.pushActivityInfo,this),t.data&&t.data.Array)for(var n=0;n<t.data.Array.length;n++)e.setActivityInfo(t.data.Array[n]);e.checkCompleteHide()},e.addHandlers=function(){0==e._subHandlerList.count&&(e._subHandlerList.add(ActivityType.Signin,e.signInHandler),e._subHandlerList.add(ActivityType.PayPrize,e.payPrizeHandler),e._subHandlerList.add(ActivityType.HappyGift,e.happyGiftHandler),e._subHandlerList.add(ActivityType.LaBa,e.shimTaeYoonHandler))},e.reqPubJson=function(t){var n=function(t){t.data&&e.onReqPubJsonEvent.dispatch(t.data)};SocketManager.call(Command.ActivityPubJoin_Req_3234,{Id:t},n,null,this)},e.reqJoinActivity=function(t,n,i){var a=function(t){t.data&&e.onJoinActivityEvent.dispatch(t.data)};i?SocketManager.call(Command.ActivityJoin_Req_3584,{Id:t,SubId:n,Param1:i},a,null,this):SocketManager.call(Command.ActivityJoin_Req_3584,{Id:t,SubId:n},a,null,this)},e.showPanelInActivityCenter=function(e){e.definition&&UIManager.showPanel(e.definition.panelName,{prevPanelName:UIModuleName.ActivityPanel,info:e})},e.getActivityInfo=function(t){for(var n=0,i=e.list;n<i.length;n++){var a=i[n];if(a.id==t)return a}return null},e.getActivityInfoByType=function(t){for(var n=0,i=e.list;n<i.length;n++){var a=i[n];if(a.definition&&a.definition.type==t)return a}return null},e.initActivityList=function(){qin.ArrayUtil.Clear(e.list);for(var t=0,n=ActivityDefined.GetInstance().dataList;t<n.length;t++){var i=n[t],a=new ActivityInfo;a.id=i.id,a.step=0,a.jsonObj={},a.gotJsonObj={},ActivityUtil.setStartTime(a),ActivityUtil.setEndTime(a);var o=void 0;o=e._subHandlerList.getValue(a.definition.type),o?o.initialize(a):qin.Console.log("处理活动类型子逻辑异常！TYPE："+a.definition.type),e.triggerHandler.register(a),e.list.push(a)}},e.checkCompleteHide=function(){qin.ArrayUtil.Clear(e.showList);for(var t=0,n=e.list;t<n.length;t++){var i=n[t];if(!i.definition.unInShowPanel){var a=ActivityUtil.getActivityOpenState(i);a==ActivityOpenState.End?1==i.definition.showFinish&&e.showList.push(i):a==ActivityOpenState.Open&&e.showList.push(i)}}},e.onTimeReset=function(){SocketManager.call(Command.Activity_GetList_3233,null,e.initialize,null,this)},e.setActivityInfo=function(t){if(t){var n=e.getActivityInfo(t.Id);if(n){n.step=t.Step,n.pubStep=t.PubStep,n.severStartDateTime=t.StartTime,n.severEndDateTime=t.EndTime;try{if(t.Json){var i=JSON.parse(t.Json);n.jsonObj=i}if(t.GotJson){var a=JSON.parse(t.GotJson);n.gotJsonObj=a}}catch(o){qin.Console.log("解析活动协议出错 Json："+t.Json),qin.Console.log("解析活动协议出错 GotJson："+t.GotJson)}}}},e.reqActivityInfo=function(t){var n=function(n){0==t?e.OnActivityGetListEvent.dispatch(n):(n.data&&n.data.Array&&(e.setActivityInfo(n.data.Array[0]),e._subHandlerList.foreach(function(e,n){n.refreshActivityInfo(t)},this)),e.onReqSingleActivityEvent.dispatch(t))};SocketManager.call(Command.Activity_GetList_3233,{Id:t},n,null,this)},e.pushActivityInfo=function(t){if(t.data){var n=t.data.Id;e.setActivityInfo(t.data),e._subHandlerList.foreach(function(e,t){n&&t.refreshActivityInfo(n)},this),e.onPushActivityEvent.dispatch(n)}},e.ReqGetActivityAward=function(t,n){var i=function(i){PropertyManager.ShowItemList(),e.getAwardResult(t,n)};PropertyManager.OpenGet(),SocketManager.call(Command.Activity_GetPrize_3202,{Id:t,SubId:n},i,null,this)},e.getShowNoticeList=function(){var e=new Array;if(ImgNotifyDefined.GetInstance().dataList)for(var t=0;t<ImgNotifyDefined.GetInstance().dataList.length;t++){var n=ImgNotifyDefined.GetInstance().dataList[t];SystemTimeManager.IsInTime(n.timeId)&&UserManager.userInfo.level>n.level&&e.push(n.imgId)}return e},e.getAwardResult=function(t,n){var i=ActivityDefined.GetInstance().getDefinition(t),a=e.getActivityInfo(t);if(i&&a){var o=e._subHandlerList.getValue(i.type);o?o.joinActivityResult(t,n):qin.Console.log("参加活动结果返回 获取子活动handler异常！"+i.type)}},e.triggerHandler=new ActivityTriggerHandler,e.signInHandler=new SignInHandler(ActivityType.Signin),e.happyGiftHandler=new HappyGiftHandler(ActivityType.HappyGift),e.payPrizeHandler=new PayPrizeHandler(ActivityType.PayPrize),e.shimTaeYoonHandler=new ShimTaeYoonHandler(ActivityType.LaBa),e._subHandlerList=new qin.Dictionary,e.list=new Array,e.showList=new Array,e.onJoinActivityEvent=new qin.DelegateDispatcher,e.onReqPubJsonEvent=new qin.DelegateDispatcher,e.onReqSingleActivityEvent=new qin.DelegateDispatcher,e.onPushActivityEvent=new qin.DelegateDispatcher,e.OnActivityGetListEvent=new qin.DelegateDispatcher,e}();__reflect(ActivityManager.prototype,"ActivityManager");var CardFaceComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.initMatrix=this.matrix.clone(),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.touchChildren=!1},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t)},t.prototype.init=function(t){if(e.prototype.init.call(this,t),this.backFace.visible=!0,this.cardGroup.visible=!1,this.showMask(!1),this.showMaxFlag(!1),this.bindData){var n=qin.StringConstants.Empty,i=qin.StringConstants.Empty;n=this.bindData.card[0]>2?ResPrefixName.card+ResPrefixName.FlushBlack+this.bindData.card[1]+ResSuffixName.PNG:ResPrefixName.card+ResPrefixName.FlushRed+this.bindData.card[1]+ResSuffixName.PNG,this.numImg.source=n,this.flushSmallImg.source=ResPrefixName.Flush+this.bindData.card[0]+ResSuffixName.PNG,this.flushBigImg1.visible=!1,this.flushBigImg.visible=!1,this.bindData.card[1]>GamblingManager.FlushSplitIndex&&this.bindData.card[1]<CardTypeMatchUtil.maxIndex?(i=ResPrefixName.card+this.bindData.card[0]+"_"+this.bindData.card[1]+ResSuffixName.PNG,this.flushBigImg1.source=i,this.flushBigImg1.visible=!0):(i=ResPrefixName.Flush+this.bindData.card[0]+ResSuffixName.PNG,this.flushBigImg.source=i,this.flushBigImg.visible=!0)}else this.numImg.source=qin.StringConstants.Empty,this.flushBigImg.source=qin.StringConstants.Empty,this.flushBigImg1.source=qin.StringConstants.Empty,this.flushSmallImg.source=qin.StringConstants.Empty},t.prototype.rendererStart=function(t){e.prototype.rendererStart.call(this,t)},t.prototype.showMask=function(e){this.maskImg.visible=e},t.prototype.showMaxFlag=function(e){this.maxFlagImg.visible=e},t.prototype.initElementsShow=function(){this.backFace.visible=!0,this.cardGroup.visible=!1,this.frontFaceImg.visible=!1},t.prototype.initElementsShow2=function(){this.backFace.visible=!1,this.frontFaceImg.visible=!1,this.cardGroup.visible=!0},t}(BaseComponent);__reflect(CardFaceComponent.prototype,"CardFaceComponent");var FirstPayItemComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.rendererStart=function(t){if(e.prototype.rendererStart.call(this,t),this.bindData){var n=ItemDefined.GetInstance().getDefinition(this.bindData.id);n&&(this.nameLabel.text=n.name,this.itemComp.init(n.icon+ResSuffixName.PNG,130,null,!1,!0)),this.countLabel.text=qin.MathUtil.numAddSpace(this.bindData.count)
}},t}(BaseComponent);__reflect(FirstPayItemComponent.prototype,"FirstPayItemComponent");var GameButton=function(e){function t(){var t=e.call(this)||this;return t._offset=.05,t.btnProxy=t,t.addEventListener(eui.UIEvent.ADDED_TO_STAGE,t.onEnable,t),t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._isTweenOver=!0,this._initSx=this.scaleX,this._initSy=this.scaleY,this._initX=this.x,this._initY=this.y,this.btnProxy.x=this._initX+this.btnProxy.width/2,this.btnProxy.y=this._initY+this.btnProxy.height/2,this.btnProxy.anchorOffsetX=this.btnProxy.width/2,this.btnProxy.anchorOffsetY=this.btnProxy.height/2},t.prototype.onTouchBegin=function(t){e.prototype.onTouchBegin.call(this,t),this._isTweenOver=!1,egret.Tween.removeTweens(this.btnProxy);var n=egret.Tween.get(this.btnProxy);n.to({scaleX:this._initSx+this._offset,scaleY:this._initSy+this._offset},255).call(this.tweenComplete.bind(this)),UIUtil.setGlowerFilter(this.btnProxy)},t.prototype.tweenComplete=function(){this._isTweenOver=!0},t.prototype.onTouchCancle=function(t){e.prototype.onTouchCancle.call(this,t),this.buttonReleased()},t.prototype.buttonReleased=function(){egret.Tween.removeTweens(this.btnProxy);var e=egret.Tween.get(this.btnProxy);e.to({scaleX:this._initSx,scaleY:this._initSy},255),UIUtil.clearFilters(this.btnProxy)},t.prototype.onEnable=function(e){this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.buttonReleased,this),this.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.onDisable,this)},t.prototype.onDisable=function(e){this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.buttonReleased,this),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.onDisable,this)},t}(eui.Button);__reflect(GameButton.prototype,"GameButton");var GameButtonGroup=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.ADDED_TO_STAGE,t.onEnable,t),t}return __extends(t,e),t.prototype.createChildren=function(){this._isTweenOver=!0,this._initSx=this.scaleX,this._initSy=this.scaleY,this.numChildren>0&&(this.btnGroup=this.getChildAt(0))},t.prototype.onTouchBegin=function(e){this._isTweenOver=!1,egret.Tween.removeTweens(this.btnGroup);var t=egret.Tween.get(this.btnGroup,{onChange:this.update.bind(this)});t.to({scaleX:1.05,scaleY:1.05},255).call(this.tweenComplete.bind(this));for(var n,i=0;i<this.btnGroup.numChildren;i++)n=this.btnGroup.getChildAt(i),n instanceof eui.Button||UIUtil.setGlowerFilter(n);UIUtil.setGlowerFilter(this.btnGroup)},t.prototype.tweenComplete=function(){this._isTweenOver=!0},t.prototype.onTouchCancle=function(e){this.buttonReleased(e)},t.prototype.buttonReleased=function(e){egret.Tween.removeTweens(this.btnGroup);var t=egret.Tween.get(this.btnGroup,{onChange:this.update.bind(this)});t.to({scaleX:1,scaleY:1},255);for(var n=0;n<this.btnGroup.numChildren;n++)UIUtil.clearFilters(this.btnGroup.getChildAt(n));UIUtil.clearFilters(this.btnGroup)},t.prototype.update=function(){if(void 0!=this._initW&&void 0!=this._initH){var e=this.btnGroup.scaleX*this._initW,t=this.btnGroup.scaleY*this._initH,n=-(e-this._initW)/2,i=-(t-this._initH)/2;this.btnGroup.x=n,this.btnGroup.y=i}},t.prototype.rendererStart=function(e){this._initW=this.btnGroup.width,this._initH=this.btnGroup.height,this.removeEventListener(egret.Event.RENDER,this.rendererStart,this)},t.prototype.onEnable=function(e){this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.buttonReleased,this),this.addEventListener(egret.Event.RENDER,this.rendererStart,this),this.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.onDisable,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.buttonReleased,this)},t.prototype.onDisable=function(e){this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.buttonReleased,this),this.removeEventListener(egret.Event.RENDER,this.rendererStart,this),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.buttonReleased,this),this.btnGroup&&(this.btnGroup.x=this.btnGroup.y=0)},t}(eui.Group);__reflect(GameButtonGroup.prototype,"GameButtonGroup");var HundredWarNumComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._height=78,t}return __extends(t,e),t.prototype.init=function(e,t){this.numList||(this.numList=new Array),this.reset();for(var n=0;n<e.length;n++){var i=e.charAt(n);this.setNum(i)}if(t){var a=this.numGroup.layout;a.gap=t}},t.prototype.setNum=function(e){for(var t,n=0,i=this.numList;n<i.length;n++){var a=i[n];if(!a.visible){a.visible=!0,t=a;break}}switch(t||(t=new eui.Image),e){case",":t.source=ResPrefixName.HundredWarNum+"10"+ResSuffixName.PNG;break;case"$":t.source=ResPrefixName.HundredWarNum+"s"+ResSuffixName.PNG;break;default:t.source=ResPrefixName.HundredWarNum+parseInt(e)+ResSuffixName.PNG}t.scaleX=t.scaleY=this.height/this._height,this.numGroup.addChild(t),this.numList.push(t)},t.prototype.reset=function(){for(var e=0,t=this.numList;e<t.length;e++){var n=t[e];n.parent&&n.parent.removeChild(n),n.visible=!1}},t}(BaseComponent);__reflect(HundredWarNumComponent.prototype,"HundredWarNumComponent");var HWBetPotComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.betGroup.touchChildren=this.betGroup.touchEnabled=!1},t.prototype.init=function(t){e.prototype.init.call(this,t),t?(t.bet?this.allChipsLabel.text=qin.MathUtil.formatNum(t.bet):this.allChipsLabel.text="",t.myBet?this.myChipsLabel.text=qin.MathUtil.formatNum(t.myBet):(this.myChipsLabel.text="",this.myChipsImg.visible=!1)):this.reset()},t.prototype.reset=function(){this.allChipsLabel.text="",this.myChipsLabel.text="",this.myChipsImg.visible=!1},t.prototype.setBg=function(e){this.bgImg.source=HWPanelSetting["BetPot"+e]},t}(BaseComponent);__reflect(HWBetPotComponent.prototype,"HWBetPotComponent");var HWCardsComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._pointList=new Array;for(var n=0;5>n;n++)this._pointList.push(new egret.Point(45+15*n,50));this.cardsGroup.touchChildren=this.cardsGroup.touchEnabled=!1},t.prototype.init=function(t){e.prototype.init.call(this,t),t?this.showFront(t):this.showReverse()},t.prototype.waitNext=function(){},t.prototype.dealCards=function(e,t,n,i,a){e.cardsAnim.createCardGroup(t,e.potGroup,n,i,a)},t.prototype.showReverse=function(){this.reset()},t.prototype.showFront=function(e,t){e&&(e.cardTypeDes&&(this.cardTypeBg.visible=!0,this.typeImg.source=e.cardTypeDes),HundredWarManager.getBetPotResultByPos(t)?this.resultDesLabel.textColor=ColorEnum.Yellow:e.cardType==CardType.RoyalFlush||e.cardType==CardType.StraightFlush||e.cardType==CardType.FourOfAKind?this.resultDesLabel.textColor=ColorEnum.Yellow:this.resultDesLabel.textColor=ColorEnum.White,this.resultDesLabel.text=e.resultDes)},t.prototype.reset=function(){this.resultDesLabel.text="",this.typeImg.source="",this.cardTypeBg.visible=!1},t}(BaseComponent);__reflect(HWCardsComponent.prototype,"HWCardsComponent");var HWHeadComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maxWidth=96,this.maxHeight=150,this.maskImg.touchEnabled=!1,this.maskImg.visible=!1,qin.FilterUtil.setColorFilters(this.cardTypeBg,0)},t.prototype.init=function(e){this.realInit(e)},t.prototype.rendererStart=function(t){e.prototype.rendererStart.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),ChatManager.onNewMessageCome.addListener(this.showOtherMsg,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),ChatManager.onNewMessageCome.removeListener(this.showOtherMsg,this),egret.Tween.removeTweens(this.emojiImg),qin.Tick.RemoveTimeoutInvoke(this.hideWinEffect,this)},t.prototype.sitDownInit=function(e){this.realInit(e)},t.prototype.realInit=function(t){e.prototype.init.call(this,t),this.emojiImg.visible=!1,t?(this.playerGroup.visible=!0,this.emptyGroup.visible=!1,this.lastRoleId=t.roleId):this.setEmpty(),this.showHead(),this.showBankRoll(),this.refreshVip()},t.prototype.showOtherMsg=function(e){this.bindData&&this.bindData.roleId==e.roleId&&e.type==ChatMessageType.InRoom&&this.emojiOrContext(e)},t.prototype.emojiOrContext=function(e){e.subType==ChatSubType.Emoji&&this.showEmoji(e)},t.prototype.showEmoji=function(e){var t=e;t.param&&t.param.length>0&&RES.getResAsync(ResPrefixPathName.Emoji+t.param[0]+ResSuffixName.PNG,this.onLoadComplete,this)},t.prototype.onLoadComplete=function(e,t){this.emojiImg.visible=!0,this.emojiImg.texture=e,egret.Tween.removeTweens(this.emojiImg),this.emojiAnimate()},t.prototype.emojiAnimate=function(){this.emojiImg.scaleX=.5,this.emojiImg.scaleY=.5,egret.Tween.get(this.emojiImg).to({scaleX:1.3,scaleY:1.3},500,egret.Ease.bounceOut).wait(1500).call(this.closeEmojiAnimate,this)},t.prototype.closeEmojiAnimate=function(){egret.Tween.removeTweens(this.emojiImg),this.emojiImg.visible=!1},t.prototype.setEmpty=function(){this.emptyGroup.visible=!0,this.playerGroup.visible=!1},t.prototype.showHead=function(){this.bindData?(this.headIcon.init(this.bindData,90),this.headIcon.visible=!0,this.borderImg.visible=!0,this.refreshVip()):(this.headIcon.visible=!1,this.borderImg.visible=!1)},t.prototype.showBase=function(){this.setEmpty()},t.prototype.showBankRoll=function(){this.bindData&&(this.chipsLabel.text=qin.MathUtil.formatNum(this.bindData.gold))},t.prototype.showWinEffect=function(){var e=this;AnimationFactory.getParticleEffect(AnimationType.WinCard,this,function(t){e._winEffect=t})},t.prototype.hideWinEffect=function(){this._winEffect&&this._winEffect.parent&&(this._winEffect.stop(),this._winEffect.parent.removeChild(this._winEffect))},t.prototype.refreshVip=function(){this.vipGroup.visible=!1,this.bindData&&this.bindData.vipLevel>0&&(this.vipGroup.visible=!0,this.vipLabel.text="VIP"+this.bindData.vipLevel.toString())},t}(BaseComponent);__reflect(HWHeadComponent.prototype,"HWHeadComponent");var ImageNumComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._imgList=new Array,t}return __extends(t,e),t.prototype.init=function(e){this.clear(),this._numWidth=e.numWidth,this._numHeight=e.numHeight,this._wordWidth=e.wordWidth,this._wordHeight=e.wordHeight;var n,i=0,a=0;this.numGroup.layout.gap=e.gap;for(var o,r=0;r<e.content.length;r++)o=e.content.substr(r,1),-1!=t._numStr.indexOf(o)?n=this.getImg(a):(n=new eui.Image,this._imgList.push(n)),n.source=this.getSource(o,e.preFix),this.numGroup.addChild(n),i+=n.width,a++;this.checkWidth(i,e.limtiWidth)},t.prototype.getImg=function(e){var t;return e<this._imgList.length?(t=this._imgList[e],this.resetImg(t),t):(t=new eui.Image,this._imgList.push(t),t)},t.prototype.getSource=function(e,t){switch(e){case"万":return SheetSubName.Achieve_Million;case"亿":return SheetSubName.Achieve_Billion;case":":return SheetSubName.CountDown_Colon;default:return e!=qin.StringConstants.Empty&&void 0!=e?t+e+"_png":qin.StringConstants.Empty}},t.prototype.checkWidth=function(e,t){if(e>t)for(var n=0,i=this._imgList;n<i.length;n++){var a=i[n],o=parseFloat((t/e).toFixed(2));a.width*=o,a.height*=o}},t.prototype.clear=function(){this.numGroup.removeChildren(),qin.ArrayUtil.Clear(this._imgList)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.clear()},t.prototype.resetImg=function(e){e.source==SheetSubName.Achieve_Million||e.source==SheetSubName.Achieve_Billion?(e.width=this._wordWidth,e.height=this._wordHeight):(e.width=this._numWidth,e.height=this._numHeight)},t._numStr="0123456789",t._wordStr="万亿",t}(BaseComponent);__reflect(ImageNumComponent.prototype,"ImageNumComponent");var NumContentInfo=function(){function e(){this.gap=0}return e.prototype.setImgWidHei=function(e,t,n,i){this.numWidth=e,this.numHeight=t,this.wordWidth=n,this.wordHeight=i},e}();__reflect(NumContentInfo.prototype,"NumContentInfo");var NotifyComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=NotifyType.Null,t}return __extends(t,e),t.prototype.init=function(n){if(e.prototype.init.call(this,n),this.bindData){if(this.visible=!1,this.type=this.bindData.type,void 0!=this.bindData.top?this.top=this.bindData.top:this.top=5,void 0!=this.bindData.right?this.right=this.bindData.right:this.right=5,this.bindData.attachObject){for(var i=0;i<this.bindData.attachObject.numChildren;i++)if(this.bindData.attachObject.getChildAt(i).name==t.redName)throw new Error("红点不能重复添加到同一容器上！");this.bindData.attachObject.addChild(this)}this.name=t.redName}this.refresh()},t.prototype.refresh=function(){this.checkVisible()},t.prototype.rendererStart=function(t){e.prototype.rendererStart.call(this,t),this.refresh()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),NotifyManager.OnNotifyValueChanged.addListener(this.notifyManager_onNotifyValueChanged,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),NotifyManager.OnNotifyValueChanged.removeListener(this.notifyManager_onNotifyValueChanged,this)},t.prototype.notifyManager_onNotifyValueChanged=function(e){this.type==e.type&&(void 0!=e.params?e.params==this.bindData.params&&this.showByCount(e.count):this.showByCount(e.count),this.showNumLabel(e.count))},t.prototype.checkVisible=function(){var e=NotifyManager.getCount(this.type,this.bindData.params);this.showByCount(e),this.showNumLabel(e)},t.prototype.showByCount=function(e){this.visible=e>0},t.prototype.showNumLabel=function(e){this.bindData.isShowNum?(this.numLabel.visible=!0,this.numLabel.text=e.toString()):this.numLabel.visible=!1},t.redName="redPointComponent_unique",t}(BaseComponent);__reflect(NotifyComponent.prototype,"NotifyComponent");var NumComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bindData&&(this.label1.text=this.bindData.toString())},t.prototype.refresh=function(e){this.label1&&(void 0!=e?this.label1.text=e.toString():this.label1.text=qin.StringConstants.Empty)},t}(BaseComponent);__reflect(NumComponent.prototype,"NumComponent");var PwdComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pwdInput=new qin.DelegateDispatcher,t._isOpenKeyPanel=!1,t._isSelect=!1,t._isInit=!1,t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._numComList=new Array;for(var n=1;6>=n;n++){var i=new NumComponent(UIComponentSkinName.NumComponent);this._numComList.push(i),this.numGroup.addChild(i)}this._isInit&&this.refresh(),this.touchChildren=!1},t.prototype.init=function(t){e.prototype.init.call(this,t),this._isInit=!0,this._isNotMaskKeyPanel=!1,this._isSelect=!1,t&&(t.isNotMaskKeyPanel&&(this._isNotMaskKeyPanel=t.isNotMaskKeyPanel),t.isSelect&&(this._isSelect=!0)),this.isLoadComplete&&this.refresh()},t.prototype.refresh=function(){this._numComList&&this._numComList.length>0&&(this.inputSelectLabel.size=this._numComList[0].label1.size),this._isOpenKeyPanel?this.setInputSelectLabel():(this.inputSelectLabel.visible=!1,egret.Tween.removeTweens(this.inputSelectLabel)),this.bindData?this.bindData.numList||this.resetLabel():this.resetLabel(),this._isSelect&&this.openPwdPanel()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openPwdPanel,this),UIManager.onPanelCloseEvent.addListener(this.panelClose,this),UIManager.addEventListener(UIModuleName.KeyBoardPanel,UIModuleEvent.OnCallTargetInit,this.onKeyTargetInit,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openPwdPanel,this),UIManager.onPanelCloseEvent.removeListener(this.panelClose,this),UIManager.removeEventListener(UIModuleName.KeyBoardPanel,UIModuleEvent.OnCallTargetInit,this.onKeyTargetInit,this),egret.Tween.removeTweens(this.inputSelectLabel)},t.prototype.panelClose=function(e){e==UIModuleName.KeyBoardPanel&&(this._isOpenKeyPanel=!1,egret.Tween.removeTweens(this.inputSelectLabel),this.inputSelectLabel.visible=!1)},t.prototype.onKeyTargetInit=function(e){e!=this&&this._isOpenKeyPanel&&(this._isOpenKeyPanel=!1,egret.Tween.removeTweens(this.inputSelectLabel),this.inputSelectLabel.visible=!1)},t.prototype.openPwdPanel=function(){UIManager.showPanel(UIModuleName.KeyBoardPanel,{callback:this.enterPwd,target:this,isNotHasMask:this._isNotMaskKeyPanel}),this._isOpenKeyPanel=!0,this.setInputSelectLabel()},t.prototype.resetLabel=function(){if(this._numComList)for(var e=0,t=this._numComList;e<t.length;e++){var n=t[e];n.refresh()}},t.prototype.enterPwd=function(e,t){if(1==e){if(t){var n=this.getUnWriteLabel();n&&n.refresh(parseInt(t)),this.setInputSelectLabel()}}else if(2==e){var i=this.getWirteLabel();i&&i.refresh(),this.setInputSelectLabel()}else 3==e?(this.resetLabel(),this.setInputSelectLabel()):4==e&&(egret.Tween.removeTweens(this.inputSelectLabel),this.inputSelectLabel.visible=!1,this._isOpenKeyPanel=!1);this.pwdInput.dispatch()},t.prototype.setInputSelectLabel=function(){if(this.inputSelectLabel){var e=this.getPwd().length;if(0>e&&(e=0),this._numComList&&this._numComList.length>e){var t=this._numComList[e];this.inputSelectLabel.visible=!0,t.addChild(this.inputSelectLabel),egret.Tween.removeTweens(this.inputSelectLabel);var n=egret.Tween.get(this.inputSelectLabel,{loop:!0});this.inputSelectLabel.alpha=1,this.inputSelectLabel.x=t.width/2-this.inputSelectLabel.width/2,this.inputSelectLabel.y=t.height/2-this.inputSelectLabel.height/2,n.to({alpha:0},200).to({alpha:1},200),n.play()}else this.inputSelectLabel.visible=!1,egret.Tween.removeTweens(this.inputSelectLabel)}},t.prototype.getUnWriteLabel=function(){for(var e,t=0;t<this._numComList.length;t++)if(e=this._numComList[t],e.label1&&!e.label1.text)return e;return null},t.prototype.getWirteLabel=function(){for(var e,t=this._numComList.length-1;t>=0;t--)if(e=this._numComList[t],e.label1&&e.label1.text)return e;return null},t.prototype.getPwd=function(){var e=qin.StringConstants.Empty;if(!this._numComList)return e;for(var t=0;t<this._numComList.length;t++){if(qin.StringUtil.isNullOrEmpty(this._numComList[t].label1.text))return e;e+=this._numComList[t].label1.text}return e},t.prototype.isTarget=function(e){return e==this?!0:!1},t}(BaseComponent);__reflect(PwdComponent.prototype,"PwdComponent");var ReqScrollerbotton=function(e){function t(t,n){var i=e.call(this,n)||this;return i.groupWidth=t,i}return __extends(t,e),t.prototype.init=function(e){this.itemGroup.width=this.groupWidth,e?this.itemLabel.text="已到最底部":this.itemLabel.text="下拉以继续"},t.prototype.setAnime=function(){this.clearAnime();var e=function(){this.visible=!1};this.visible=!0,this.alpha=1,egret.Tween.get(this).wait(1e3).to({alpha:0},200).call(e)},t.prototype.clearAnime=function(){egret.Tween.removeTweens(this)},t}(BaseComponent);__reflect(ReqScrollerbotton.prototype,"ReqScrollerbotton");var ShadowButton=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){var e=this.labelDisplay;e&&qin.FilterUtil.setShadow(e)},t}(eui.Button);__reflect(ShadowButton.prototype,"ShadowButton");var GreenShadowButton=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){var e=this.labelDisplay;e&&qin.FilterUtil.setGreenShadow(e)},t}(eui.Button);__reflect(GreenShadowButton.prototype,"GreenShadowButton");var TabComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._tabInfoList=new Array,t._radioButtonGroup=new eui.RadioButtonGroup,t.isTween=!0,t.tabChangeEvent=new qin.DelegateDispatcher,t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t)},t.prototype.build=function(e){if(this.bindData=e,null==e.groupList||null==e.nameList)return void qin.Console.log("传入数据为空");if(e.groupList[0]&&(this._stackY=e.groupList[0].y),e.tabSkinName){switch(e.tabSkinName){case TabButtonType.SmallOf2:this.tabSkinName=UIComponentSkinName.tabComponentButton2;break;case TabButtonType.SmallOf3:this.tabSkinName=UIComponentSkinName.tabComponentButton3;break;case TabButtonType.SmallOf5:this.tabSkinName=UIComponentSkinName.TabComponentButton5;break;case TabButtonType.XSmallOf5:this.tabSkinName=UIComponentSkinName.TabComponentButtonSm5;break;case TabButtonType.BigOf2:this.tabSkinName=UIComponentSkinName.tabComponentButtonBig2;break;case TabButtonType.BigOf3:this.tabSkinName=UIComponentSkinName.tabComponentButtonBig3;break;case TabButtonType.BigOf4:this.tabSkinName=UIComponentSkinName.tabComponentButtonBig4;break;case TabButtonType.SubOf2:this.tabSkinName=UIComponentSkinName.rankTabComponentButton2;break;case TabButtonType.SubOf4:this.tabSkinName=UIComponentSkinName.laBaRankTabComponentBtn4;break;case TabButtonType.HappyGiftOf4:this.tabSkinName=UIComponentSkinName.happyGiftTabtButton4;break;case TabButtonType.HappyGiftOf2:this.tabSkinName=UIComponentSkinName.happyGiftTabtButton2;break;case TabButtonType.LaBa2:this.tabSkinName=UIComponentSkinName.laBaTabCompontBtn2}for(var t=0;t<e.nameList.length;t++){var n=new TabInfo;n.group=e.groupList[t],n.group.visible=!1,n.tabButton=new eui.RadioButton,n.tabButton.skinName=this.tabSkinName,n.tabButton.label=e.nameList[t],n.tabButton.selected=!1;n.tabButton.labelDisplay;n.tabButton.group=this._radioButtonGroup,this._tabInfoList.push(n),this.tabGroup.addChild(n.tabButton)}}this.y++},t.prototype.init=function(t){e.prototype.init.call(this,t),"number"==typeof t?this.setSelectIndex(t):(this.setSelectIndex(t.enterTabindex),t.tabIndex&&t.flag&&this.setEnableTabIndex(t.enableTabIndex,t.flag)),this.setEnterAnime(this._tabInfoList[this.lastIndex].group)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.tabGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarItemTap,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.tabGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarItemTap,this),egret.Tween.removeTweens(this.tabGroup);for(var n=0,i=this._tabInfoList;n<i.length;n++){var a=i[n];egret.Tween.removeTweens(a.group)}},t.prototype.onBarItemTap=function(e){this.tabGroup.getChildIndex(e.target)!=this.lastIndex&&-1!=this.tabGroup.getChildIndex(e.target)&&(SoundManager.playEffect(MusicAction.buttonClick),this.setSelectIndex(this.tabGroup.getChildIndex(e.target)),this.tabChangeEvent.dispatch(this.lastIndex))},t.prototype.setSelectIndex=function(e){if(void 0==e&&(e=0),void 0!=this.lastIndex){this._tabInfoList[this.lastIndex].group.visible=!1,this._tabInfoList[this.lastIndex].tabButton.selected=!1;this._tabInfoList[this.lastIndex].tabButton.labelDisplay}this._tabInfoList[e].group.visible=!0,this._tabInfoList[e].tabButton.selected=!0;this._tabInfoList[e].tabButton.labelDisplay;this.lastIndex=e},t.prototype.setEnableTabIndex=function(e,t){for(var n=0,i=e;n<i.length;n++){var a=i[n],o=this._tabInfoList[a].tabButton;o.touchEnabled=t}},t.prototype.setEnterTabGroup=function(e){if(!this.bindData)return void qin.Console.log("传入数据为空");for(var t=0;t<this.bindData.groupList.length;t++)if(this.bindData[t]==e){this.lastIndex=t;break}this.setSelectIndex(this.lastIndex)},t.prototype.setEnterAnime=function(e){this.isTween&&(this.tabGroup.scaleX=0,this.tabGroup.scaleY=0,egret.Tween.get(this.tabGroup).wait(100).to({scaleX:1,scaleY:1},200),e.y=GameManager.stage.stageHeight,egret.Tween.get(e).wait(200).to({y:this._stackY},200))},t.CreatData=function(e,t,n,i){var a=new TabComponentData;return a.nameList=e,a.groupList=t,a.tabSkinName=n,a.disableTabDes=i,a},t.prototype.getBtnByLabel=function(e){if(this._tabInfoList)for(var t=0,n=this._tabInfoList;t<n.length;t++){var i=n[t];if(i.tabButton&&i.tabButton.label==e)return i.tabButton}return null},t}(BaseComponent);__reflect(TabComponent.prototype,"TabComponent");var TabComponentData=function(){function e(){}return e}();__reflect(TabComponentData.prototype,"TabComponentData");var TabInfo=function(){function e(){}return e}();__reflect(TabInfo.prototype,"TabInfo");var WaitNextRoundComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._speed=100,t._rotation=60,t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._posPointList=new Array,this._posPointList.push(new egret.Point(108.94,64.73),new egret.Point(90.69,74.23),new egret.Point(73.44,63.48),new egret.Point(73.94,42.73),new egret.Point(92.19,33.48),new egret.Point(109.19,43.73)),this.horizontalCenter=0,this.verticalCenter=-150},t.prototype.init=function(t){e.prototype.init.call(this,t),this._rotateIndex=0,this._lastTime=0},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),qin.Tick.addFrameInvoke(this.update,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),qin.Tick.removeFrameInvoke(this.update,this)},t.prototype.update=function(){if(0==this._lastTime&&(this._lastTime=egret.getTimer()),egret.getTimer()-this._lastTime>=this._speed){this._lastTime=egret.getTimer();var e=this._rotateIndex*this._rotation,t=this._posPointList[this._rotateIndex];this.rotateImg.x=t.x,this.rotateImg.y=t.y,this.rotateImg.rotation=e;for(var n=Math.ceil(this._rotateIndex/2),i=qin.StringConstants.Empty,a=0;n>a;a++)i+=qin.StringConstants.Dot;this.desLabel.text=i,this._rotateIndex++,this._rotateIndex>5&&(this._rotateIndex=0)}},t.prototype.show=function(e){e?(this.onEnable(null),this.visible=!0):(this._rotateIndex=0,this._lastTime=0,this.onDisable(null),this.visible=!1)},t}(BaseComponent);__reflect(WaitNextRoundComponent.prototype,"WaitNextRoundComponent");var ChipsShowComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"allImgList",{get:function(){return this._allImgList},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._chipsCon=new egret.DisplayObjectContainer,this._allImgList=new Array,this.addChild(this._chipsCon)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.initClear(),this._chipsCon.removeChildren(),this._betCallback=null,t.callback&&t.thisObject&&(this._betCallback=qin.Delegate.getOut(t.callback,t.thisObject)),void 0!=t.type?(this._lastPos=t.type,this.chipsShow(t.num,t.type)):(void 0==this._lastPos&&(this._lastPos=ChipsPosType.Left),this.chipsShow(t.num,this._lastPos)),void 0!=t.isNum&&(this.chipBar.visible=t.isNum),void 0!=t.isChip&&(this._chipsCon.visible=t.isChip)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),qin.Tick.RemoveTimeoutInvoke(this.runWinCallBack,this)},t.prototype.rendererStart=function(t){e.prototype.rendererStart.call(this,t),this._allImgList.length>0&&this._allImgList[0].length>0&&(this._chipsCon.y=(this.height-this._allImgList[0][0].height)/2)},t.prototype.chipsShow=function(e,n){switch(this.numLabel.text=qin.MathUtil.formatNum(e),this.bindData.isFixedWidth?(this.numLabel.width=180,this.numLabel.horizontalCenter=0):this.numLabel.horizontalCenter=void 0,this.bgImg.width=this.numLabel.width+t._oneWidth+t._offsetW,this.bgImg.x=0,this.creatChips(e),n){case ChipsPosType.Left:this.numLabel.x=t._oneWidth,this.numLabel.textAlign=egret.HorizontalAlign.LEFT;break;case ChipsPosType.Right:this.numLabel.x=t._offsetW,this.numLabel.textAlign=egret.HorizontalAlign.RIGHT}this.bindData.isFixedWidth&&(this.numLabel.textAlign=egret.HorizontalAlign.CENTER,this.numLabel.x=t._oneWidth-25),this.setInitValue(n)},t.prototype.creatChips=function(e){if(egret.Tween.removeTweens(this.chipBar),this.chipBar.alpha=1,ChipsDefined.GetInstance().dataList){for(var t=new Array,n=ChipsDefined.GetInstance().dataList.length,i=void 0,a=n-1;a>=0;a--){i=ChipsDefined.GetInstance().dataList[a];for(var o=Math.floor(e/i.phase),r=0;o>r;r++){var s=ChipsPot.popImg(i.img+ResSuffixName.PNG);t.push(s)}e%=i.phase}this._allImgList.push(t)}},t.prototype.setInitValue=function(e){var n=this._allImgList.length;if(n>0){var i=this._allImgList[0],a=i.length,o=void 0,r=-a*t._chipSelfHeight*2;-300>r?r=-300:r>-80&&(r=-80);for(var s=0;a>s;s++)o=i[s],o.y=r,e==ChipsPosType.Left?o.x=0:e==ChipsPosType.Right&&(o.x=this.bgImg.width-t._oneWidth+3),this._chipsCon.addChild(o);this.createVerticalTween()}},t.prototype.createVerticalTween=function(){var e=this._allImgList[0],n=e.length;if(this.bindData.isTween)for(var i=0;n>i;i++)i==n-1?egret.Tween.get(e[i]).wait(40*i).to({y:-i*t._chipSelfHeight},50*n,egret.Ease.quintOut).call(this.betOver,this):egret.Tween.get(e[i]).wait(40*i).to({y:-i*t._chipSelfHeight},50*n,egret.Ease.quintOut);else{for(var i=0;n>i;i++)e[i].y=-i*t._chipSelfHeight;this.betOver()}},t.prototype.betOver=function(){this._betCallback&&(this._betCallback.invoke(this),qin.Delegate.putIn(this._betCallback),this._betCallback=null)},t.prototype.winChipsTween=function(e,n,i){this._winCallBack=void 0,n&&i&&(this._winCallBack=qin.Delegate.getOut(n,i));var a,o,r,s=e.length;if(this._allImgList.length>0)for(var l=void 0,h=0;s>h;h++)l=e[h],o=egret.Point.distance(l,new egret.Point(this._allImgList[0][0].x,this._allImgList[0][0].y)),r=o*t._winChipsSpeed,0==h?this.toRunList(this._allImgList[0],l.x,l.y,!0,r):(a=this.cloneImgList(this._allImgList[0]),this.toRunList(a,l.x,l.y,!1,r))},t.prototype.toRunList=function(e,t,n,i,a){var o=e.length,r=0,s=0;a=Math.floor(a);for(var l=.6,h=.4,d=Math.floor(o/2),c=o-1;c>=0;c--)c==d&&i?(r=43*(o-c),s=r+a,egret.Tween.get(e[c]).wait(s*l).to({alpha:0},s*h),egret.Tween.get(e[c]).wait(r).to({x:t,y:n},a,egret.Ease.quartInOut).call(this.remove,this)):(r=43*(o-c),s=r+a,egret.Tween.get(e[c]).wait(s*l).to({alpha:0},s*h),egret.Tween.get(e[c]).wait(r).to({x:t,y:n},a,egret.Ease.quartInOut));qin.Tick.AddTimeoutInvoke(this.runWinCallBack,a,this)},t.prototype.runWinCallBack=function(){this._winCallBack&&(this._winCallBack.invoke(),qin.Delegate.putIn(this._winCallBack),this._winCallBack=null)},t.prototype.cloneImgList=function(e){for(var t,n,i=new Array,a=e.length,o=0;a>o;o++)n=e[o],t=ChipsPot.popImg(n.source),t.x=n.x,t.y=n.y,t.alpha=1,t.scaleX=n.scaleX,t.scaleY=n.scaleY,i.push(t),this._chipsCon.addChild(t);return this._allImgList.push(i),i},t.prototype.remove=function(){egret.Tween.get(this.chipBar).to({alpha:0},200,egret.Ease.sineIn).call(this.clear,this)},t.prototype.clear=function(){this.initClear(),ChipsPot.pushComponent(this)},t.prototype.initClear=function(){for(var e,t,n=0,i=this._allImgList;n<i.length;n++){var a=i[n];e=a.length;for(var o=0;e>o;o++)t=a[o],egret.Tween.removeTweens(t),this._chipsCon.removeChild(t),ChipsPot.pushImg(t);a.length=0}egret.Tween.removeTweens(this.chipBar),qin.Tick.RemoveTimeoutInvoke(this.runWinCallBack,this),this._allImgList.length=0,qin.Delegate.putIn(this._winCallBack),this._winCallBack=null,this._betCallback=null},t._chipSelfHeight=5.5,t._oneWidth=33,t._offsetW=8,t._winChipsSpeed=1.8,t}(BaseComponent);__reflect(ChipsShowComponent.prototype,"ChipsShowComponent");var ChipsPosType;!function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(ChipsPosType||(ChipsPosType={}));var ChipsSingleShowComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._radius=45,t._yRadius=25,t._time=300,t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.touchChildren=!1},t.prototype.init=function(t){e.prototype.init.call(this,t),egret.Tween.removeTweens(this.bgImg),this.numLabel.horizontalCenter=0,this.bgImg.horizontalCenter=0,this.bgImg.alpha=1,this.refreshNum(t.num),this.numLabel.y=this.numLabel.height+12,this._initX=this.bgImg.x,this._initY=this.bgImg.y=0,this.bindData.isShowTween&&this.showTweens()
},t.prototype.showTweens=function(){this.bgImg.horizontalCenter=this.numLabel.horizontalCenter=void 0,this.numLabel.visible=!1,this.bgImg.alpha=.1;var e=egret.Tween.get(this.bgImg,{onChange:this.onTweenHandler.bind(this)});switch(this.bindData.state){case ChipsShowState.LeftDown:case ChipsShowState.Left:this.bgImg.y-=this._yRadius,this.bgImg.x+=this._radius,e.to({x:this._initX,y:this._initY,alpha:1},this._time).call(this.tweenOver.bind(this));break;case ChipsShowState.RightDown:case ChipsShowState.Right:this.bgImg.y-=this._yRadius,this.bgImg.x-=this._radius,e.to({x:this._initX,y:this._initY,alpha:1},this._time).call(this.tweenOver.bind(this));break;case ChipsShowState.Top:this.bgImg.y=this._initY+2*this._yRadius,e.to({y:this._initY,alpha:1},this._time).call(this.tweenOver.bind(this))}},t.prototype.onTweenHandler=function(){},t.prototype.tweenOver=function(){egret.Tween.removeTweens(this.bgImg),this.numLabel.visible=!0,this.bgImg.horizontalCenter=this.numLabel.horizontalCenter=0},t.prototype.refreshNum=function(e){this.numLabel.text=qin.MathUtil.formatNum(e)},t}(BaseComponent);__reflect(ChipsSingleShowComponent.prototype,"ChipsSingleShowComponent");var ActivityPanelJumpManager=function(){function e(){}return e.showSwitchPanel=function(){UIManager.isShowPanelObj(e._switchPanel)||UIManager.showPanel(UIModuleName.LoadingSwitchPanel),e._switchPanel||(e._switchPanel=UIManager.getPanel(UIModuleName.LoadingSwitchPanel))},e.closeSwitchPanel=function(){UIManager.closePanel(UIModuleName.LoadingSwitchPanel)},e.JumpToPanel=function(t){e._isLoading||(e._currentActivityInfo=t,InfoUtil.checkAvailable(t)&&t.definition.resGroup?(RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,e.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),e._loadingName=t.definition.resGroup,e._isLoading=!0,RES.loadGroup(t.definition.resGroup),-1==e._loadedList.indexOf(t.definition.resGroup)&&e.showSwitchPanel()):UIManager.showPanel(e._currentActivityInfo.definition.panelName,{info:e._currentActivityInfo}))},e.onResourceLoadError=function(t){e._isLoading=!1,console.warn("Group:"+t.groupName+" has failed to load")},e.onResourceProgress=function(e){qin.Console.log("资源加载地址："+e.resItem.url)},e.onResourceLoadComplete=function(t){e._loadingName==t.groupName&&(e._isLoading=!1,t&&e._loadedList.push(t.groupName),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),e.closeSwitchPanel(),-1!=ActivityManager.showList.indexOf(e._currentActivityInfo)?ActivityManager.showPanelInActivityCenter(e._currentActivityInfo):UIManager.showPanel(e._currentActivityInfo.definition.panelName,{info:e._currentActivityInfo}))},e._loadedList=[],e}();__reflect(ActivityPanelJumpManager.prototype,"ActivityPanelJumpManager");var DownEfffectComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._times=0,t}return __extends(t,e),t.prototype.init=function(){this.effectGroup&&(this.effectGroup.visible=!1)},t.prototype.run=function(e){this.effectGroup&&e&&(this.effectGroup.visible=!0,e.addChild(this),this.x=e.parent.maxWidth/2-this.width/2-3,this.y=e.parent.maxHeight/2-this.height/2-30,this.tweenGroup.scaleX=1,this.tweenGroup.scaleY=1,this.tweenGroup.alpha=1,this.tweenCircle0.scaleX=1,this.tweenCircle0.scaleY=1,this.tweenCircle0.alpha=0,this.tweenCircle1.scaleX=1,this.tweenCircle1.scaleY=1,this.tweenCircle1.alpha=0,egret.Tween.removeTweens(this.tweenGroup),egret.Tween.removeTweens(this.tweenCircle0),egret.Tween.removeTweens(this.tweenCircle1),this._tween=egret.Tween.get(this.tweenGroup,{loop:!0}),this._times=0,this._tween.to({scaleX:.7,scaleY:.7},400).call(this.onTweenOverFirst,this).to({scaleX:1,scaleY:1},400),this._tween.play(),this._tween1=egret.Tween.get(this.tweenCircle0,{loop:!0}),this._tween1.to({alpha:1},0).to({scaleX:1.6,scaleY:1.6,alpha:0},600).to({scaleX:1,scaleY:1,alpha:0},200),this._tween1.play(),this._tween2=egret.Tween.get(this.tweenCircle1,{loop:!0}),this._tween2.to({alpha:0},0).wait(200).to({alpha:1},0).to({scaleX:1.3,scaleY:1.3,alpha:0},400).to({scaleX:1,scaleY:1,alpha:0},200),this._tween2.play())},t.prototype.onTweenOverFirst=function(){this._times+=1,this._times>=3&&(egret.Tween.removeTweens(this.tweenGroup),this._tween=egret.Tween.get(this.tweenGroup),this._tween.to({scaleX:1,scaleY:1,alpha:.1},400).call(this.onTweenOver,this),this._tween.play())},t.prototype.onTweenOver=function(){this.effectGroup.visible=!1,egret.Tween.removeTweens(this.tweenGroup),egret.Tween.removeTweens(this.tweenCircle0),egret.Tween.removeTweens(this.tweenCircle1)},t}(BaseComponent);__reflect(DownEfffectComponent.prototype,"DownEfffectComponent");var GamblingActionComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._initPosMap=new qin.Dictionary,this._appearMap=new qin.Dictionary,this._disappearMap=new qin.Dictionary;var n=102;this.moveAnchorOffset(this.brightCardBtn,n,n),this._initPosMap.add(this.brightCardBtn,new egret.Point(this.brightCardBtn.x,this.brightCardBtn.y)),this.moveAnchorOffset(this.centerPointComponent,n,n),this.addGroupChilrenPos(this.preActionGroup,n,n),this.addGroupChilrenPos(this.raiseGroup,88,90),this.addGroupChilrenPos(this.actionGroup,n,n),this._centerPoint=new egret.Point,this._centerPoint.x=this.centerPointComponent.x,this._centerPoint.y=this.centerPointComponent.y},t.prototype.init=function(t){e.prototype.init.call(this,t),this._disappearMap.foreach(this.resetDisapperaRunOver,this),this._appearMap.foreach(this.resetApperaRunOver,this)},t.prototype.resetDisapperaRunOver=function(e,t){t instanceof ActionButtonDisappear?t.isRunOver=!0:t instanceof OneKeyButtonDisappear&&(t.isRunOver=!0)},t.prototype.resetApperaRunOver=function(e,t){t instanceof ActionButtonAppear&&(t.isRunOver=!0)},t.prototype.rendererStart=function(t){e.prototype.rendererStart.call(this,t);for(var n,i,a=0;a<this.raiseGroup.numChildren;a++)n=this.raiseGroup.getChildAt(a),i=this._initPosMap.getValue(n),n.x=i.x,n.y=i.y},t.prototype.addGroupChilrenPos=function(e,t,n){for(var i,a,o=0;o<e.numChildren;o++)i=e.getChildAt(o),a=n,i===this.raiseBtn&&(a=111),this.moveAnchorOffset(i,t,a),this._initPosMap.add(i,new egret.Point(i.x,i.y))},t.prototype.moveAnchorOffset=function(e,t,n){e.anchorOffsetX=t/2,e.anchorOffsetY=n/2,e.x+=t/2,e.y+=n/2},t.prototype.hideAll=function(e){e?(this.showRaiseGroup(!1),this.showActionGroup(!1)):(this.raiseGroup.visible=!1,this.actionGroup.visible=!1)},t.prototype.hidePreActionGroup=function(e){e?this.showPreActionGroup(!1):this.preActionGroup.visible=!1},t.prototype.showRaiseGroup=function(e){if(!(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.isTrusteeship&&e)&&(!e||!this.raiseGroup.visible)&&(e||this.raiseGroup.visible)){e&&(this.raiseGroup.visible=e);for(var t,n=50,i=0;i<this.raiseGroup.numChildren;i++)if(t=this.raiseGroup.getChildAt(i),e){var a=this.getAnimation(t,e,OneKeyButtonAppear);a.run(i*n)}else{var o=this.getAnimation(t,e,OneKeyButtonDisappear);i==this.raiseGroup.numChildren-1?o.run(i*n,this.raiseGroup):o.run(i*n,null)}}},t.prototype.showBrightButton=function(e){InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.isTrusteeship&&e||this.runActionChild(this.brightCardBtn,e)},t.prototype.showPreActionGroup=function(e){InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.isTrusteeship&&e||this.runActionGroup(this.preActionGroup,e)},t.prototype.showActionGroup=function(e){InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.isTrusteeship&&e||this.runActionGroup(this.actionGroup,e)},t.prototype.runActionGroup=function(e,t){if((!t||!e.visible)&&(t||e.visible)){t&&(e.visible=t);for(var n,i=0;i<e.numChildren;i++)n=e.getChildAt(i),this.runActionChild(n,t,e)}},t.prototype.runActionChild=function(e,t,n){var i,a;t?(a=this.getAnimation(e,t,ActionButtonAppear),a.run(this._centerPoint,this._initPosMap.getValue(e)),i=this.getAnimation(e,!1,ActionButtonDisappear),i.isRunOver=!0):(i=this.getAnimation(e,t,ActionButtonDisappear),i.run(this._initPosMap.getValue(e),this._centerPoint,n),a=this.getAnimation(e,!0,ActionButtonAppear),a.isRunOver=!0)},t.prototype.getAnimation=function(e,t,n){var i;return t?(i=this._appearMap.getValue(e),i||(i=new n,i.target=e,this._appearMap.add(e,i))):(i=this._disappearMap.getValue(e),i||(i=new n,i.target=e,this._disappearMap.add(e,i))),i},t}(BaseComponent);__reflect(GamblingActionComponent.prototype,"GamblingActionComponent");var GamblingCdComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._angle=0,t._phase=0,t._maxPhase=0,t._color=65280,t._totalAngle=359,t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._shape=new egret.Shape,this.addChild(this._shape)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),qin.Tick.removeFrameInvoke(this.tick,this),this._shape.graphics.clear()},t.prototype.init=function(e){void 0!=e?this._cdTime=e:this._cdTime=15},t.prototype.start=function(e,t){this._shape.graphics.clear();var n=TimeManager.GetServerUtcTimestamp();n=t?e:TimeManager.GetServerUtcTimestamp();var i=n-e;0>i&&(i=0),this._phase=Math.floor(i*GameManager.stage.frameRate),this._shape.rotation=-90,this._maxPhase=GameManager.stage.frameRate*this._cdTime,this._angleStep=360/this._maxPhase,this._angle=this._angleStep*this._phase,this._timePhase1=this._maxPhase/3,this._timePhase2=1.5*this._timePhase1,this.setColorData(),this._isShock=!1,qin.Tick.addFrameInvoke(this.tick,this),this.tick()},t.prototype.setColorData=function(){this._color=65280,this._colorChangeStep1=Math.floor((this._timePhase2-this._timePhase1)/255),this._colorChangeStep2=Math.floor((this._maxPhase-this._timePhase2)/255),this._colorChangeStep1<1&&(this._colorChangeStep1=1),this._colorChangeStep2<1&&(this._colorChangeStep2=1),this._colorStep1=Math.ceil(255/(this._timePhase2-this._timePhase1)),this._colorStep2=Math.ceil(255/(this._maxPhase-this._timePhase2)),this._colorStep1<1&&(this._colorStep1=1),this._colorStep2<1&&(this._colorStep2=1),this._phase>=this._timePhase1&&this._phase<this._timePhase2?this.calculateColor(0,Math.ceil(255*Math.min(this._phase/this._timePhase2))):this._phase>=this._timePhase2&&(this.calculateColor(0,255),this.calculateColor(1,Math.ceil(255*Math.min(1,this._phase/this._maxPhase))))},t.prototype.rendererStart=function(t){var n=this;e.prototype.rendererStart.call(this,t),egret.callLater(function(){n._shape.x=n.width/2+2,n._shape.y=n.height/2+2},this)},t.prototype.tick=function(){this.showCdLabel(),this._angle=this._angleStep*this._phase,this._angle>=this._totalAngle&&(this._angle=this._totalAngle),this.mgraphics(this._angle),this._phase>=this._timePhase1&&this._phase<this._timePhase2?this._phase%this._colorChangeStep1==0&&this.calculateColor(0,this._colorStep1):this._phase>=this._timePhase2&&this._phase<this._maxPhase&&(this._phase%this._colorChangeStep2==0&&this.calculateColor(1,this._colorStep2),GameSetting.shakeEnabled&&GamblingUtil.getIsOnAction(GamblingManager.self)&&!this._isShock&&(ChannelManager.shake(),this._isShock=!0)),this._phase+=1,this._phase>this._maxPhase&&(qin.Tick.removeFrameInvoke(this.tick,this),this.mgraphics(this._totalAngle),GamblingManager.TimeOutEvent.dispatch())},t.prototype.showCdLabel=function(){var e=Math.ceil((this._maxPhase-this._phase)/GameManager.stage.frameRate);0>=e?this.cdLabel.text="0":this.cdLabel.text=qin.DateTimeUtil.formatCountdown(e)},t.prototype.mgraphics=function(e){this._shape.graphics.clear(),this._shape.graphics.lineStyle(5,this._color,1),this._shape.graphics.drawArc(0,0,43,0,e*Math.PI/180,!0),this._shape.graphics.endFill()},t.prototype.calculateColor=function(e,t){var n,i;switch(e){case 0:n=this._color>>16&255,n+=t,n>255&&(n=255),i=this._color>>8&255,this._color=n<<16|i<<8;break;case 1:n=this._color>>8&255,n-=t,0>n&&(n=0),i=this._color>>16&255,this._color=i<<16|n<<8}},t}(BaseComponent);__reflect(GamblingCdComponent.prototype,"GamblingCdComponent");var GamblingChampionshipBlindComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(BaseGamblingSlotComponent);__reflect(GamblingChampionshipBlindComponent.prototype,"GamblingChampionshipBlindComponent");var GamblingChampionshipComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.touchEnabled=!1,this.championshipGroup.touchEnabled=!1,this.left=this.right=this.top=this.bottom=0},t}(BaseGamblingSlotComponent);__reflect(GamblingChampionshipComponent.prototype,"GamblingChampionshipComponent");var GamblingChampionshipWaitComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.touchEnabled=!1,this.left=this.right=this.top=this.bottom=0},t}(BaseGamblingSlotComponent);__reflect(GamblingChampionshipWaitComponent.prototype,"GamblingChampionshipWaitComponent");var GamblingGuideComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.touchEnabled=!1,this.left=this.right=this.top=this.bottom=0},t}(BaseGamblingSlotComponent);__reflect(GamblingGuideComponent.prototype,"GamblingGuideComponent");var GamblingGuidePlayWayComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.touchEnabled=!1,this.left=this.right=this.top=this.bottom=0},t}(BaseGamblingSlotComponent);__reflect(GamblingGuidePlayWayComponent.prototype,"GamblingGuidePlayWayComponent");var GamblingHeadComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._chipsShowState=ChipsShowState.LeftDown,t}return __extends(t,e),Object.defineProperty(t.prototype,"cardFace1",{get:function(){return this._cardFace1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cardFace2",{get:function(){return this._cardFace2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cdComponent",{get:function(){return this._cdComponent||(this._cdComponent=new GamblingCdComponent(UIComponentSkinName.GamblingCdComponent),this._cdComponent.touchEnabled=this._cdComponent.touchChildren=!1),this._cdComponent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nowState",{get:function(){return this._nowState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cardAnimationSpt",{get:function(){return this._cardAnimationSpt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pitIndex",{get:function(){return this._pitIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flopIndex",{get:function(){return this._flopIndex},set:function(e){this.showHaveCardImg(!1),1==e?this.haveCard1.visible=!0:2==e&&(this.haveCard1.visible=this.haveCard2.visible=!0),this._flopIndex=e},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maxWidth=96,this.maxHeight=150,this.turnAnim=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.CommonMoveToRelativelyPos),this.turnAnim.setTarget(this),this._emptyState=new GamblingHeadEmptyState(this),this._waitNextState=new GamblingHeadWiatNextState(this),this._foldState=new GamblingHeadFoldState(this),this._actionedState=new GamblingHeadActionedState(this),this._waitActionState=new GamblingHeadWaitActionState(this),this._onActionState=new GamblingHeadOnActionState(this),this._sitDownState=new GamblingHeadSitDownState(this),this._roundStartState=new GamblingHeadRoundStartState(this),this._thanTheCard=new GamblingHeadThanTheCardState(this),this._cardAnimationSpt=new GamblingHeadCardAnimationSupport(this),this._headChatSpt=new GamblingHeadChatSupport(this),this.maskImg.touchEnabled=!1,this._cardFace1=new CardFaceComponent(UIComponentSkinName.CardFaceComponent),this._cardFace2=new CardFaceComponent(UIComponentSkinName.CardFaceComponent);var n=this.getChildIndex(this.maskImg);0>n&&(n=0);var i=n-2;this.addChildAt(this._cardFace1,i),this.addChildAt(this._cardFace2,this.getChildIndex(this._cardFace1)+1),this.dispatchEvent(new UIModuleEvent(UIModuleEvent.COMPLETE,qin.StringConstants.Empty))},t.prototype.init=function(e){this.realInit(e,!0)},t.prototype.sitDownInit=function(e){this.realInit(e,!1)},t.prototype.realInit=function(t,n){if(e.prototype.init.call(this,t),this.chatGroup.visible=!1,this.emojiImg.visible=!1,this.voiceGroup.visible=!1,t?(this.playerGroup.visible=!0,this.emptyGroup.visible=!1,this.lastRoleId=t.roleId):(this.setEmpty(),this.playerGroup.visible=!1,this._cardAnimationSpt.clear()),t)if(t.roleId==UserManager.userInfo.roleId){if(t.state==PlayerState.WaitNext&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.playerList)if(2==GamblingManager.roomInfo.playerList.length)qin.Tick.AddTimeoutInvoke(this.tryReqNextRound,2e3,this);else{for(var i=!0,a=0,o=GamblingManager.roomInfo.playerList;a<o.length;a++){var r=o[a];r.state!=PlayerState.WaitNext&&(i=!1)}i&&qin.Tick.AddTimeoutInvoke(this.tryReqNextRound,2e3,this)}InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.handCard?this.showSelfHandlerCard():(qin.Console.log("自己无手牌"),this.showCardFace(!1))}else this.showCardFace(!1);else this.showCardFace(!1);if(t&&t.roleId!=UserManager.userInfo.roleId&&GamblingUtil.isOnProcess(t)?(this.flopIndex=2,this.showHaveCardImg(!0)):this.showHaveCardImg(!1),n){var s=void 0;GamblingUtil.getIsOnAction(this.bindData)?(s=GamblingHeadStateType.OnAction,this.changeState(s,!1)):(s=this.getHeadStateByPlayerState(),this.changeState(s))}this.showHead(),this.showChipsComponent(),this.showCardTypeBgFilter(0),this.chipsAnimLabel.visible=!1,this._headChatSpt.initialize(),this.refreshVip()},t.prototype.setEmpty=function(){InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.gamblingType==GamblingType.Championship?this.emptyGroup.visible=!1:this.bindData?this.emptyGroup.visible=!1:this.emptyGroup.visible=!0},t.prototype.tryReqNextRound=function(){GamblingManager.reqNextRoundStart()},t.prototype.showHead=function(){if(this.bindData)if(this.headIcon.init(this.bindData,90),this.headIcon.visible=!0,this.borderImg.visible=!0,this.bindData.userInfo){if(this.bindData.userInfo.name)if(this.bindData.userInfo.name.length>3){var e=qin.CodeUtil.getStringByteLength(this.bindData.userInfo.name);9>=e?this.infoLabel.text=this.bindData.userInfo.name:this.infoLabel.text=this.bindData.userInfo.name.substr(0,3)+"..."}else this.infoLabel.text=this.bindData.userInfo.name;else this.infoLabel.text=qin.StringConstants.Empty;this.refreshVip()}else this.infoLabel.text=qin.StringConstants.Empty;else this.headIcon.visible=!1,this.borderImg.visible=!1,this.infoLabel.text=qin.StringConstants.Empty},t.prototype.refreshChipsShow=function(e,t){switch(t){case SeatMode.Three:2>=e?this._chipsShowState=ChipsShowState.RightDown:this._chipsShowState=ChipsShowState.LeftDown;break;case SeatMode.Five:3>=e?this._chipsShowState=ChipsShowState.RightDown:this._chipsShowState=ChipsShowState.LeftDown;break;case SeatMode.Nine:5>=e?this._chipsShowState=ChipsShowState.RightDown:this._chipsShowState=ChipsShowState.LeftDown;break;case SeatMode.Six:3>=e?this._chipsShowState=ChipsShowState.RightDown:4==e?this._chipsShowState=ChipsShowState.LeftDown:e>4&&(this._chipsShowState=ChipsShowState.LeftDown)}switch(this.chipsSingleShowComponent.top=void 0,this.chipsSingleShowComponent.horizontalCenter=void 0,this.chipsSingleShowComponent.left=void 0,this.chipsSingleShowComponent.right=void 0,this.chipsSingleShowComponent.bottom=void 0,this._chipsShowState){case ChipsShowState.Top:this.chipsSingleShowComponent.horizontalCenter=0,this.chipsSingleShowComponent.top=-94;break;case ChipsShowState.Left:this.chipsSingleShowComponent.right=this.width-1,this.chipsSingleShowComponent.bottom=7;break;case ChipsShowState.Right:this.chipsSingleShowComponent.left=this.width-1,this.chipsSingleShowComponent.bottom=7;break;case ChipsShowState.LeftDown:this.chipsSingleShowComponent.left=-55,this.chipsSingleShowComponent.bottom=0;break;case ChipsShowState.RightDown:this.chipsSingleShowComponent.right=-55,this.chipsSingleShowComponent.bottom=5}this.showChipsComponent()},t.prototype.setPit=function(e){this._pitIndex=e},t.prototype.changeState=function(e,t){void 0==e&&(e=this.getHeadStateByPlayerState());var n=this.getHeadState(e);this._nowState=n,this._nowState.run(t)},t.prototype.rendererStart=function(t){e.prototype.rendererStart.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._headChatSpt.onEnable()},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._headChatSpt.onDisable(),qin.Tick.RemoveTimeoutInvoke(this.hideWinEffect,this),qin.Tick.RemoveTimeoutInvoke(this.tryReqNextRound,this),this._cardAnimationSpt.clear()},t.prototype.hideAll=function(){this.showMask(!1),this.foldBackCard.visible=!1,this.hideCdComponent()},t.prototype.hideCdComponent=function(){this.cdComponent.parent&&this.cdComponent.parent.removeChild(this.cdComponent)},t.prototype.showCardFace=function(e){this.cardFace1.visible=e,this.cardFace2.visible=e,this.bindData&&this.bindData.roleId==UserManager.userInfo.roleId&&qin.Console.log("显示隐藏自己的手牌："+e)},t.prototype.showHaveCardImg=function(e){e?(this.showHaveCardImg(!1),1==this.flopIndex?this.haveCard1.visible=!0:2==this.flopIndex&&(this.haveCard1.visible=this.haveCard2.visible=!0)):this.haveCard1.visible=this.haveCard2.visible=e},t.prototype.showBase=function(){this.setEmpty()},t.prototype.runWinChipsAnim=function(e){this._winChipsAnim||(this._winChipsAnim=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.WinChips),this._winChipsAnim.setTarget(this.chipsAnimLabel)),this.chipsAnimLabel.text="+"+qin.MathUtil.formatNum(e),this.chipsAnimLabel.visible=!0,this._winChipsAnim.run(),SoundManager.playEffect(MusicAction.chipfly)},t.prototype.runFoldAnim=function(e){this._foldCardAnim||(this._foldCardAnim=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.FoldCard),this._foldCardAnim.setTarget(this.foldBackCard)),this._foldCardAnim.run(e)},t.prototype.getHeadStateByPlayerState=function(){if(!this.bindData)return GamblingHeadStateType.Empty;switch(this.bindData.state){case PlayerState.WaitNext:return GamblingHeadStateType.WaitNext;case PlayerState.Fold:return GamblingHeadStateType.FoldCard;case PlayerState.Check:case PlayerState.Raise:case PlayerState.Call:case PlayerState.AllIn:return GamblingHeadStateType.Actioned;case PlayerState.Blind:case PlayerState.WaitAction:return GamblingHeadStateType.WaitAction;default:return GamblingHeadStateType.WaitNext}},t.prototype.getHeadState=function(e){switch(e){case GamblingHeadStateType.Empty:return this._emptyState;case GamblingHeadStateType.SitDown:return this._sitDownState;case GamblingHeadStateType.WaitNext:return this._waitNextState;case GamblingHeadStateType.RoundStart:return this._roundStartState;case GamblingHeadStateType.WaitAction:return this._waitActionState;case GamblingHeadStateType.OnAction:return this._onActionState;case GamblingHeadStateType.Actioned:return this._actionedState;case GamblingHeadStateType.FoldCard:return this._foldState;case GamblingHeadStateType.ThanTheCard:return this._thanTheCard}},t.prototype.showSelfHandlerCard=function(){this.showCardFace(!0),this.cardFace1.init(GamblingManager.roomInfo.handCard[0]),this.cardFace2.init(GamblingManager.roomInfo.handCard[1]),this.cardFace1.initElementsShow2(),this.cardFace2.initElementsShow2(),this.cardFace1.matrix=GamblingPanelSetting.handCardMatrix1,this.cardFace2.matrix=GamblingPanelSetting.handCardMatrix2,GamblingManager.self.state==PlayerState.Fold?(this.cardFace1.maskImg.visible=!0,this.cardFace2.maskImg.visible=!0):(this.cardFace1.maskImg.visible=!1,this.cardFace2.maskImg.visible=!1)},t.prototype.showChipsComponent=function(e,t){!e&&this.bindData&&(e=this.bindData.num),e>0&&e!=this.chipsSingleShowComponent.bindData&&this.chipsSingleShowComponent.init({num:e,state:this._chipsShowState,isShowTween:t}),this.bindData&&this.bindData.num>0?this.chipsSingleShowComponent.visible=!0:this.chipsSingleShowComponent.visible=!1},t.prototype.roundOverHandler=function(){if(this.showHaveCardImg(!1),this.bindData&&GamblingManager.roundOverInfo&&GamblingManager.roundOverInfo.handCardList&&GamblingManager.roundOverInfo.potList)for(var e=GamblingManager.roundOverInfo.handCardList.length,t=void 0,n=0;e>n;n++)if(t=GamblingManager.roundOverInfo.handCardList[n],this.bindData.roleId==t.roleId&&t.cardList&&t.cardList.length>1){this.bindData.state!=PlayerState.Fold?this.bindData.roleId!=UserManager.userInfo.roleId&&(this.cardFace1.init(t.cardList[0]),this.cardFace2.init(t.cardList[1]),this.cardFace1.showMask(!0),this.cardFace2.showMask(!0),this.changeState(GamblingHeadStateType.ThanTheCard)):this.runBrightCard(t.cardList);break}},t.prototype.runBrightCard=function(e){this.showMask(!1),this.chipsLabel.text=PlayerInfo.getStateDes(PlayerState.ShowCard),this.showCardTypeBgFilter(3),this.showBase(),this.chipsSingleShowComponent.visible=!1,this.parent&&this.parent.addChildAt(this,GamblingManager.maxSeats),this.cardFace1.init(e[0]),this.cardFace2.init(e[1]),this.cardAnimationSpt.runBrightCard(this.waitNext,this)},t.prototype.waitNext=function(){},t.prototype.showBankRoll=function(){this.bindData&&(void 0!=this.bindData.lastBankRoll?this.bindData.bankRoll<=this.bindData.lastBankRoll&&(this.chipsLabel.text=qin.MathUtil.formatNum(this.bindData.bankRoll)):this.chipsLabel.text=qin.MathUtil.formatNum(this.bindData.bankRoll))},t.prototype.showMask=function(e){this.maskImg?this.maskImg.visible=e:qin.Console.log("遮罩图片是空")},t.prototype.showGroupAuto=function(e){this.showStateGroupAuto(e),this.refreshChatGroup()},t.prototype.showStateGroupAuto=function(e){if(this.bindData)switch(this.bindData.state){case PlayerState.Call:case PlayerState.Raise:case PlayerState.Check:case PlayerState.AllIn:case PlayerState.Fold:this.refreshState();break;case PlayerState.WaitAction:case PlayerState.Blind:e&&this.showStateGroup(!1)}},t.prototype.showStateGroup=function(e){this.stateGroup.visible=e,e&&this.refreshStateGroupPos(),qin.Console.log("状态组的visible:"+e)},t.prototype.refreshStateGroupPos=function(){this.posIndex<=GamblingPanelSetting.centerNum?(this.stateGroup.scaleX=this.stateLabel.scaleX=1,this.stateGroup.x=60):(this.stateGroup.scaleX=this.stateLabel.scaleX=-1,this.stateGroup.x=32)},t.prototype.refreshState=function(){this.stateLabel.text=PlayerInfo.getStateDes(this.bindData.state),this.stateImg.source=PlayerInfo.getStateImgRes(this.bindData.state),this.showStateGroup(!0)},t.prototype.refreshChatGroup=function(){this._headChatSpt.setChatGroupPos()},t.prototype.showCardTypeBgFilter=function(e){switch(e){case 1:this.cardTypeBg.alpha=1,this.chipsLabel.textColor=0,this.cardTypeBg.source=SheetSubName.Gambling_Head_BgType_Normal;break;case 2:this.cardTypeBg.alpha=1,this.chipsLabel.textColor=0,this.cardTypeBg.source=SheetSubName.Gambline_Head_BgType_Win;break;case 3:this.cardTypeBg.alpha=1,this.chipsLabel.textColor=0,this.cardTypeBg.source=SheetSubName.Gambling_Head_BgType_Normal;break;default:this.cardTypeBg.alpha=.4,this.chipsLabel.textColor=16777215,this.cardTypeBg.source=SheetSubName.Gambline_Head_BgType_Chips,this.hideWinEffect()}},t.prototype.showWinEffect=function(){var e=this;AnimationFactory.getParticleEffect(AnimationType.WinCard,this,function(t){e._winEffect=t})},t.prototype.hideWinEffect=function(){this._winEffect&&this._winEffect.parent&&(this._winEffect.stop(),this._winEffect.parent.removeChild(this._winEffect))},t.prototype.refreshVip=function(){this.vipGroup.visible=!1,this.bindData&&this.bindData.userInfo&&this.bindData.userInfo.vipLevel>0&&(this.vipGroup.visible=!0,this.vipLabel.text="VIP"+this.bindData.userInfo.vipLevel.toString())},t}(BaseComponent);__reflect(GamblingHeadComponent.prototype,"GamblingHeadComponent");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,i){function a(e){t.call(i,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var GamblingHeadActionedState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t){e.prototype.run.call(this,t),this.context.bindData&&(this.context.showBase(),this.context.showMask(!1),this.context.refreshState(),this.context.showBankRoll())},t}(BaseGamblingHeadState);__reflect(GamblingHeadActionedState.prototype,"GamblingHeadActionedState");var GamblingHeadCardAnimationSupport=function(){function e(e){this.context=e}return e.prototype.clear=function(){this._actionList&&this._actionList.foreach(this.clearAnimation,this)},e.prototype.clearAnimation=function(e,t){t.clear()},e.prototype.runSelfCard=function(e,t){var n=this.getAnimation(AnimationType.SelfCard1Appear,this.context.cardFace1,1),i=this.getAnimation(AnimationType.SelfCard2Appear,this.context.cardFace2,2);i.callBack=new qin.Delegate(e,t),n.run(!0),i.run(!0)},e.prototype.runBrightCard=function(e,t){this.startRunBrightCard(this.context.cardFace1,-10,-40,60,80,null,null,1),this.startRunBrightCard(this.context.cardFace2,13,-70,83,90,e,this,2)},e.prototype.startRunBrightCard=function(e,t,n,i,a,o,r,s){var l=this.getAnimation(AnimationType.CardFaceBright,e,s);l.run(t,n,i,a,o,r)},e.prototype.runThanTheCardAnim=function(e,t){this.startRunThanTheCardAnim(e,this.context.cardFace1,1),this.startRunThanTheCardAnim(t,this.context.cardFace2,2)},e.prototype.startRunThanTheCardAnim=function(e,t,n){var i=this.getAnimation(AnimationType.CardFaceMoveToPoint,t,n);i.nextAnimation=this.getAnimation(AnimationType.CardFaceTurnToFace,t,n),i.nextAnimation.scale=1;var a=0;a=1==n?e.x+15:e.x-15,i.run(e,a)},e.prototype.getAnimation=function(e,t,n){this._actionList||(this._actionList=new qin.Dictionary);var i=e.toString()+"_"+n.toString();if(!this._actionList.containsKey(i)){var a=AnimationFactory.getCardFaceAnimation(e);return a.setTarget(t),this._actionList.add(i,a),a}return this._actionList.getValue(i)},e}();__reflect(GamblingHeadCardAnimationSupport.prototype,"GamblingHeadCardAnimationSupport");var GamblingHeadChatSupport=function(){function e(e){this.context=e}return e.prototype.initialize=function(){this.setChatGroupPos()},e.prototype.onEnable=function(){UIUtil.hideScrollerBar(this.context.chatScroller,!0,!0),ChatManager.onNewMessageCome.addListener(this.showOtherMsg,this)},e.prototype.onDisable=function(){ChatManager.onNewMessageCome.removeListener(this.showOtherMsg,this),qin.Tick.RemoveTimeoutInvoke(this.countDownToCloseChat,this),egret.Tween.removeTweens(this.context.chatScroller.viewport),egret.Tween.removeTweens(this.context.emojiImg)},e.prototype.showOtherMsg=function(e){this.context.bindData&&this.context.bindData.roleId==e.roleId&&e.type==ChatMessageType.InRoom&&this.emojiOrContext(e)},e.prototype.emojiOrContext=function(e){e.subType==ChatSubType.Normal?this.setChatContext(e):e.subType==ChatSubType.Emoji?this.showEmoji(e):e.subType==ChatSubType.AudioRecordMessage&&this.setVoiceInfo(e)},e.prototype.setVoiceInfo=function(e){this.context.voiceGroup.visible=!0,this.context.voiceTimeLabel.text=Math.ceil(parseFloat(e.param[0]))+'"',qin.Tick.RemoveTimeoutInvoke(this.countDownToCloseChat,this),qin.Tick.AddTimeoutInvoke(this.countDownToCloseChat,4e3,this)
},e.prototype.showEmoji=function(e){var t=e;t.param&&t.param.length>0&&RES.getResAsync(ResPrefixPathName.Emoji+t.param[0]+ResSuffixName.PNG,this.onLoadComplete,this)},e.prototype.onLoadComplete=function(e,t){this.context.emojiImg.visible=!0,this.context.emojiImg.texture=e,egret.Tween.removeTweens(this.context.emojiImg),this.emojiAnimate()},e.prototype.setChatContext=function(e){this.context.chatGroup.visible=!0,this.context.chatLabel.text=e.message,egret.Tween.removeTweens(this.context.chatScroller.viewport),qin.Tick.RemoveTimeoutInvoke(this.countDownToCloseChat,this),this.context.chatLabel.width<6*this.context.chatLabel.size?(this.context.chatScroller.viewport.scrollH=0,qin.Tick.AddTimeoutInvoke(this.countDownToCloseChat,4e3,this)):(this.context.chatScroller.viewport.scrollH=(this.context.chatScroller.viewport.width-this.context.chatLabel.width)/2-2,this.scrollerAnimate())},e.prototype.countDownToCloseChat=function(){qin.Tick.RemoveTimeoutInvoke(this.countDownToCloseChat,this),this.clear()},e.prototype.scrollerAnimate=function(){var e=(this.context.chatLabel.width-this.context.chatScroller.viewport.width)/2+2,t=15*this.context.chatLabel.width;egret.Tween.get(this.context.chatScroller.viewport).wait(500).to({scrollH:e},t).wait(1e3).call(this.closeAnimate,this)},e.prototype.emojiAnimate=function(){this.context.emojiImg.scaleX=.5,this.context.emojiImg.scaleY=.5,egret.Tween.get(this.context.emojiImg).to({scaleX:1.3,scaleY:1.3},500,egret.Ease.bounceOut).wait(1500).call(this.closeEmojiAnimate,this)},e.prototype.closeAnimate=function(){egret.Tween.removeTweens(this.context.chatScroller.viewport),this.clear()},e.prototype.clear=function(){this.context.chatGroup.visible=!1,this.context.chatLabel.text="",this.context.voiceGroup.visible=!1,this.context.voiceTimeLabel.text=""},e.prototype.closeEmojiAnimate=function(){egret.Tween.removeTweens(this.context.emojiImg),this.context.emojiImg.visible=!1},e.prototype.setChatGroupPos=function(){1==this.context.posIndex?this.turnChatGroup(!1):GamblingManager.maxSeats==SeatMode.Three?this.context.posIndex<=2?this.turnChatGroup(!1):this.turnChatGroup(!0):GamblingManager.maxSeats==SeatMode.Five?this.context.posIndex<=3?this.turnChatGroup(!1):this.turnChatGroup(!0):GamblingManager.maxSeats==SeatMode.Six?this.context.posIndex<=4?this.turnChatGroup(!1):this.turnChatGroup(!0):GamblingManager.maxSeats==SeatMode.Nine&&(this.context.posIndex<=5?this.turnChatGroup(!1):this.turnChatGroup(!0))},e.prototype.turnChatGroup=function(e){e?(this.context.chatScroller.viewport.scaleX=this.context.chatGroup.scaleX=-1,this.context.chatGroup.x=-2.5):(this.context.chatScroller.viewport.scaleX=this.context.chatGroup.scaleX=1,this.context.chatGroup.x=94.5)},e}();__reflect(GamblingHeadChatSupport.prototype,"GamblingHeadChatSupport");var GamblingHeadEmptyState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t){e.prototype.run.call(this,t),this.context.bindData&&qin.Console.log(this.context.bindData.userInfo.name+"已站起"),this.context.showMask(!0),this.context.setEmpty()},t}(BaseGamblingHeadState);__reflect(GamblingHeadEmptyState.prototype,"GamblingHeadEmptyState");var GamblingHeadFoldState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t){e.prototype.run.call(this,t),this.context.bindData&&(this.context.showMask(!0),this.context.showBase(),this.context.showHaveCardImg(!1),this.context.showBankRoll(),this.context.refreshState())},t}(BaseGamblingHeadState);__reflect(GamblingHeadFoldState.prototype,"GamblingHeadFoldState");var GamblingHeadOnActionState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t){if(e.prototype.run.call(this,t),this.context.bindData){if(this.context.showMask(!1),this.context.showStateGroup(!1),InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.pos==this.context.bindData.pos){var n=this.context.playerGroup.getChildIndex(this.context.haveCard1.parent);this.context.playerGroup.addChildAt(this.context.cdComponent,n),this.context.cdComponent.init(GamblingManager.roomInfo.definition.clientCd),this.context.cdComponent.start(GamblingManager.roomInfo.posTime,t),this.context.showBase(),this.context.bindData&&(this.context.chipsLabel.text=qin.MathUtil.formatNum(this.context.bindData.bankRoll),this.context.bindData.userInfo&&qin.Console.log("说话状态显示筹码："+this.context.bindData.bankRoll+this.context.bindData.userInfo.name))}this.context.bindData&&this.context.bindData.roleId==UserManager.userInfo.roleId&&(0==this.context.cardFace1.visible||0==this.context.cardFace2.visible)&&qin.Console.log("异常处理说话状态自己还看不到手牌")}},t}(BaseGamblingHeadState);__reflect(GamblingHeadOnActionState.prototype,"GamblingHeadOnActionState");var GamblingHeadRoundStartState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t){e.prototype.run.call(this,t),this.context.bindData&&(this.context.showMask(!1),this.context.chipsSingleShowComponent.visible=!1,this.context.chipsLabel.text=qin.MathUtil.formatNum(this.context.bindData.bankRoll),this.context.showCardTypeBgFilter(0),this.context.showBankRoll())},t}(BaseGamblingHeadState);__reflect(GamblingHeadRoundStartState.prototype,"GamblingHeadRoundStartState");var GamblingHeadSitDownState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t){e.prototype.run.call(this,t),this.context.bindData&&(this.context.showMask(!0),this.context.showBase(),this.context.chipsSingleShowComponent.visible=!1,this.context.chipsLabel.text=PlayerInfo.getStateDes(this.context.bindData.state),this.context.showStateGroup(!1))},t}(BaseGamblingHeadState);__reflect(GamblingHeadSitDownState.prototype,"GamblingHeadSitDownState");var GamblingHeadThanTheCardState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t){e.prototype.run.call(this,t),this.context.bindData&&(this.context.showMask(!1),this.context.showBase(),this.context.showHaveCardImg(!1),this.context.showCardFace(!0),qin.Console.log("比牌状态显示手牌"),this._point1||(this._point1=new egret.Point(55,72),this._point2=new egret.Point(80,72)),this.context.bindData,this.context.cardAnimationSpt.runThanTheCardAnim(this._point1,this._point2))},t}(BaseGamblingHeadState);__reflect(GamblingHeadThanTheCardState.prototype,"GamblingHeadThanTheCardState");var GamblingHeadWaitActionState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t){e.prototype.run.call(this,t),this.context.bindData&&(this.context.showMask(!1),this.context.showBase(),this.context.showStateGroupAuto()),this.context.showBankRoll()},t}(BaseGamblingHeadState);__reflect(GamblingHeadWaitActionState.prototype,"GamblingHeadWaitActionState");var GamblingHeadWiatNextState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t){e.prototype.run.call(this,t),this.context.bindData&&(this.context.infoLabel.visible=!0,this.context.chipsLabel.text=PlayerInfo.getStateDes(this.context.bindData.state),this.context.showMask(!0),this.context.chipsSingleShowComponent.visible=!1,this.context.showStateGroup(!1),this.context.showBankRoll())},t}(BaseGamblingHeadState);__reflect(GamblingHeadWiatNextState.prototype,"GamblingHeadWiatNextState");var GuidePromptComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._roUp=180,t._roDown=0,t._roLeft=90,t._roRight=270,t._moveGap=15,t}return __extends(t,e),t.get=function(){var e;return e=t.cacheList.length>0?t.cacheList.pop():new t(UIComponentSkinName.GuidePromptComponent)},t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.touchEnabled=this.touchChildren=!1,this.maxWidth=47,this.maxHeight=48,this.arrowImg.horizontalCenter=this.arrowImg.verticalCenter=0},t.prototype.init=function(t){e.prototype.init.call(this,t);var n=20;this.bindData.data.offsetV>0&&(n=this.bindData.data.offsetV);var i=egret.Tween.get(this,{loop:!0});switch(this.arrowImg.alpha=1,this.bindData.data.orientation){case GuideTipsOrientation.Up:this.arrowImg.rotation=this._roUp,this.horizontalCenter=0,this.verticalCenter=n,i.to({verticalCenter:n-this._moveGap,alpha:.5},1e3).to({verticalCenter:n,alpha:1},1e3);break;case GuideTipsOrientation.Down:this.arrowImg.rotation=this._roDown,this.horizontalCenter=0,this.verticalCenter=-n,i.to({verticalCenter:-n+this._moveGap,alpha:.5},1e3).to({verticalCenter:-n,alpha:1},1e3);break;case GuideTipsOrientation.Left:this.arrowImg.rotation=this._roLeft,this.verticalCenter=0,this.horizontalCenter=n,i.to({horizontalCenter:n-this._moveGap,alpha:.5},1e3).to({horizontalCenter:n,alpha:1},1e3);break;case GuideTipsOrientation.Right:this.arrowImg.rotation=this._roRight,this.verticalCenter=0,this.horizontalCenter=-n,i.to({horizontalCenter:-n+this._moveGap,alpha:.5},1e3).to({horizontalCenter:-n,alpha:1},1e3)}t.parent&&t.parent.addChild(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.parent&&this.parent.removeChild(this),this.bindData=void 0,egret.Tween.removeTweens(this.arrowImg),t.cacheList.push(this)},t.clear=function(){t.cacheList.length=0},t.cacheList=new Array,t}(BaseComponent);__reflect(GuidePromptComponent.prototype,"GuidePromptComponent");var GuideTipsComponent=function(e){function t(t){var n=e.call(this,t)||this;return n._arrowGap=15,n._textGap=30,n._bgGap=66,n._roUp=180,n._roDown=0,n._roLeft=90,n._roRight=270,n._aw=31,n._ah=23,n._defaultBh=66,n}return __extends(t,e),t.get=function(){var e;return e=t.cacheList.length>0?t.cacheList.pop():new t(UIComponentSkinName.GuideTipsComponent),e.alpha=0,e},t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t)},t.prototype.init=function(t){e.prototype.init.call(this,t);var n=t.data;if(!n)return void qin.Console.log("引导组件提示初始化异常！"+t);this.alpha=0,egret.Tween.removeTweens(this),n.delay>0?qin.Tick.AddTimeoutInvoke(this.show,n.delay,this):this.show(),this.textLabel.text=n.data,this.bg.width=this.textLabel.width+this._textGap;var i=this.textLabel.height+this._textGap;switch(i<this._defaultBh&&(i=this._defaultBh),this.bg.height=i,this.width=this.bg.width+this._bgGap,this.height=this.bg.height+this._bgGap,this.arrowImg.horizontalCenter=this.arrowImg.verticalCenter=this.arrowImg.top=this.arrowImg.bottom=this.arrowImg.left=this.arrowImg.right=void 0,this.arrowImg.x=this.arrowImg.y=0,n.orientation){case GuideTipsOrientation.Up:this.arrowImg.rotation=this._roUp,this.arrowImg.top=this._ah-6.5;break;case GuideTipsOrientation.Down:this.arrowImg.rotation=this._roDown,this.arrowImg.bottom=this._ah-4;break;case GuideTipsOrientation.Left:this.arrowImg.rotation=this._roLeft,this.arrowImg.left=this._aw/2+1.7,this.arrowImg.verticalCenter=0;break;case GuideTipsOrientation.Right:this.arrowImg.rotation=this._roRight,this.arrowImg.right=this._aw/2+2,this.arrowImg.verticalCenter=0}void 0!=n.xoffset&&(this.x=n.xoffset),void 0!=n.yoffset&&(this.y=n.yoffset),void 0!=n.ax&&(this.arrowImg.x=n.ax),void 0!=n.ay&&(this.arrowImg.y=n.ay),t.parent&&t.parent.addChild(this),this.showNum()},t.prototype.showNum=function(){var e=this.bindData.data;void 0!=e.num?(this.numGroup.visible=!0,this.numLabel.text=e.num.toString(),this.addChild(this.numGroup)):this.numGroup.parent&&this.numGroup.parent.removeChild(this.numGroup)},t.prototype.show=function(){var e=this,t=egret.Tween.get(this);t.to({alpha:1},500).call(function(){var t=e.bindData.data;t&&t.showTime>0&&qin.Tick.AddTimeoutInvoke(e.disappear,t.showTime,e)},this)},t.prototype.disappear=function(){var e=egret.Tween.get(this);e.to({alpha:0},500)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),qin.Tick.RemoveTimeoutInvoke(this.show,this),qin.Tick.RemoveTimeoutInvoke(this.disappear,this),egret.Tween.removeTweens(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.parent&&this.parent.removeChild(this),this.alpha=1,this.bindData=void 0,t.cacheList.push(this)},t.clear=function(){t.cacheList.length=0},t.cacheList=new Array,t}(BaseComponent);__reflect(GuideTipsComponent.prototype,"GuideTipsComponent");var CommonIcon=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._defaultItemSize=.85,t}return __extends(t,e),t.prototype.init=function(e,t,n,i,a){if("string"==typeof e)this.itemImg.source=e;else if("number"==typeof e){var o=ItemDefined.GetInstance().getDefinition(e);o&&(this.itemImg.source=o.icon+ResSuffixName.PNG)}else if(e instanceof AwardDefinition){var r=e.rewardId[0],o=ItemDefined.GetInstance().getDefinition(r);o&&(this.itemImg.source=o.icon+ResSuffixName.PNG)}void 0!=t&&(this.width=this.height=t,this.itemImg.scaleX=this.itemImg.scaleY=this._defaultItemSize*t/this.itemImg.width),a?this.bgImg.visible=!1:(this.bgImg.visible=!0,void 0!=n?this.bgImg.source=n:this.bgImg.source=SheetSubName.CommonItemBg),void 0!=i?this.highLightImg.visible=i:this.highLightImg.visible=!0},t}(BaseComponent);__reflect(CommonIcon.prototype,"CommonIcon");var CircleHeadComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.group=new egret.DisplayObjectContainer,this.headMask=new egret.Bitmap,this.headMask.texture=RES.getRes(ResFixedFileName.HeadEarser),this.group.addChild(this.userImg),this.group.addChild(this.headMask),this.headMask.blendMode=egret.BlendMode.ERASE,this.touchChildren=!1,this.bmp=new egret.Bitmap,this.addChildAt(this.bmp,0)},t.prototype.init=function(t,n){e.prototype.init.call(this,t,n),this.headMask.width=this.headMask.height=this._size,this.group.width=this.group.height=this._size},t.prototype.drawHead=function(t){var n=this;e.prototype.drawHead.call(this,t),egret.callLater(function(){if(!qin.StringUtil.isNullOrEmpty(n.headPath))if(t)n.renderTexture||(n.renderTexture=new egret.RenderTexture),n.renderTexture.drawToTexture(n.group),n.bmp.texture=n.renderTexture,n.bmp.width=n.bmp.height=n.size;else{var e=ResCacheManager.getRes(resCacheType.CircleHead,n.headPath);if(e)n.bmp.texture=e,n.bmp.width=n.bmp.height=n.size;else{var i=new egret.RenderTexture;i.drawToTexture(n.group),n.bmp.texture=i,ResCacheManager.addRes(resCacheType.CircleHead,n.headPath,i)}}},this)},t}(HeadComponent);__reflect(CircleHeadComponent.prototype,"CircleHeadComponent");var HeadCache=function(){function e(){this._heads=new Array,this._textures=new Array}return e.prototype.add=function(t,n){if(this._heads.length>=e._maxCacheLength){var i=this._heads.shift();this._textures.shift(),RES.destroyRes(i)}this._heads.push(t),this._textures.push(n)},e.prototype.containsKey=function(e){return this._heads.indexOf(e)>=0},e.prototype.getValue=function(e){var t=this._heads.indexOf(e,0);return-1!=t?this._textures[t]:null},e.prototype.clear=function(){qin.ArrayUtil.Clear(this._heads),qin.ArrayUtil.Clear(this._textures)},e._headCacheList=new e,e._circleheadCacheList=new e,e._maxCacheLength=50,e}();__reflect(HeadCache.prototype,"HeadCache");var ActivityUtil=function(){function e(){}return e.isExistSubInfo=function(e,t){if(e&&e.subList)for(var n=0,i=e.subList;n<i.length;n++){var a=i[n];if(a.subId==t)return!0}return!1},e.isInJoinTime=function(t){if(!InfoUtil.checkAvailable(t)||void 0==t.startDateTime)return!1;if(void 0==t.definition.joinTime)return!0;if(e.getActivityOpenState(t)!=ActivityOpenState.Open)return!1;var n=TimeManager.GetServerLocalDateTime(),i=Math.round(n.getTime()-t.startDateTime.getTime()/1e3);return t.definition.joinTime<=i?!1:!0},e.getActivityOpenState=function(e){if(!InfoUtil.checkAvailable(e))return ActivityOpenState.None;var t=TimeManager.GetServerLocalDateTime();return e.definition.isByServerTime?t>=e.severStartDateTime&&t<e.severEndDateTime?ActivityOpenState.Open:ActivityOpenState.End:t<e.startDateTime?ActivityOpenState.UnOpen:t>e.endDateTime?ActivityOpenState.End:t>=e.startDateTime&&t<e.endDateTime?ActivityOpenState.Open:ActivityOpenState.None},e.setStartTime=function(t){t.startDateTime=t.definition.startDt,e.IsOpenServerActivity(t.definition)&&UserManager.userInfo.openServerTime>0?t.definition.openServerTimeStart>0?t.startDateTime=qin.DateTimeUtil.secondes2Date(UserManager.userInfo.openServerTime+t.definition.openServerTimeStart):t.startDateTime=qin.DateTimeUtil.secondes2Date(UserManager.userInfo.openServerTime):e.IsCreateRoleActivity(t.definition)&&UserManager.userInfo.createdTime>0&&(t.definition.keepDayStart>0?t.startDateTime=qin.DateTimeUtil.secondes2Date(UserManager.userInfo.createdTime+t.definition.keepDayStart):t.startDateTime=qin.DateTimeUtil.secondes2Date(UserManager.userInfo.createdTime))},e.setEndTime=function(t){t.endDateTime=t.definition.endDt,e.IsOpenServerActivity(t.definition)?t.definition.openServerTimeEnd>0&&UserManager.userInfo.openServerTime>0&&(t.endDateTime=qin.DateTimeUtil.secondes2Date(UserManager.userInfo.openServerTime+t.definition.openServerTimeEnd)):e.IsCreateRoleActivity(t.definition)&&t.definition.keepDayEnd>0&&UserManager.userInfo.createdTime>0&&(t.endDateTime=qin.DateTimeUtil.secondes2Date(UserManager.userInfo.createdTime+t.definition.keepDayEnd))},e.IsOpenServerActivity=function(e){return e?e.openServerTimeStart>0||e.openServerTimeEnd>0:!1},e.IsCreateRoleActivity=function(e){return null!=e?e.keepDayStart>0||e.keepDayEnd>0:!1},e}();__reflect(ActivityUtil.prototype,"ActivityUtil");var GetItemComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initInfo=function(e){this.itemComp.init(e.id,100,SheetSubName.GetItemBg);var t=ItemDefined.GetInstance().getDefinition(e.id);t&&(this.nameLabel.text=t.name+" * "+e.count)},t}(BaseComponent);__reflect(GetItemComponent.prototype,"GetItemComponent");var UIModuleEvent=function(e){function t(t,n){var i=e.call(this,t)||this;return i.panelName=qin.StringConstants.Empty,i.panelName=n,i}return __extends(t,e),t.OnTimeout="OnTimeout",t.OnCallTargetInit="OnCallTargetInit",t}(egret.Event);__reflect(UIModuleEvent.prototype,"UIModuleEvent");var AAModelPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="",t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t)},t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t)},t}(BasePanel);__reflect(AAModelPanel.prototype,"AAModelPanel");var AccountRetrievePwdPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.AccountRetrievePwdPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,this.telephoneLabel.inputType=egret.TextFieldInputType.TEL,this.telephoneLabel.restrict="0-9",this.telephoneLabel.maxChars=11,this.verificationCodeLabel.inputType=egret.TextFieldInputType.TEL,this.verificationCodeLabel.restrict="0-9",this.verificationCodeLabel.maxChars=6,this.newPwdLabel.maxChars=16,this.confirmPwdLabel.maxChars=16,this.newPwdLabel.inputType=this.confirmPwdLabel.inputType=egret.TextFieldInputType.PASSWORD},t.prototype.init=function(t){e.prototype.init.call(this,t),UserUtil.initCode(this.sendCodeBtn),this.phoneErrorLabel.text="",this.pwdErrorLabel.text="",this.telephoneLabel.text="",this.verificationCodeLabel.text="",this.newPwdLabel.text="",this.confirmPwdLabel.text=""},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onConfirmClick,this),this.sendCodeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendCodeBtnClick,this),this.telephoneLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onPhoneLabelFouseOut,this),this.verificationCodeLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onCodeLabelFouseOut,this),this.newPwdLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onPwdLabelFouceOut,this),this.confirmPwdLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onPwdLabelFouceOut,this),AccountManager.OnPhoneModifyPassword.addListener(this.phoneFindPwdSuccess,this),AccountManager.OnPhoneFindPassword.addListener(this.sendCodeSuccess,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.confirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onConfirmClick,this),this.sendCodeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sendCodeBtnClick,this),this.telephoneLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onPhoneLabelFouseOut,this),this.verificationCodeLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onCodeLabelFouseOut,this),this.newPwdLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onPwdLabelFouceOut,this),this.confirmPwdLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onPwdLabelFouceOut,this),AccountManager.OnPhoneModifyPassword.removeListener(this.phoneFindPwdSuccess,this),AccountManager.OnPhoneFindPassword.removeListener(this.sendCodeSuccess,this),UserUtil.removeCodeCountDown()},t.prototype.onPhoneLabelFouseOut=function(e){UserUtil.phoneNumIsValidate(this.telephoneLabel.text)?this.phoneErrorLabel.text="":this.phoneErrorLabel.text="您输入的手机号错误，请重新输入！"},t.prototype.sendCodeBtnClick=function(e){UserUtil.phoneNumIsValidate(this.telephoneLabel.text)?(SoundManager.playButtonEffect(e.target),this.phoneErrorLabel.text="",this.sendCodeRes()):this.phoneErrorLabel.text="您输入的手机号错误，请重新输入！"},t.prototype.sendCodeRes=function(){AccountManager.PhoneFindPassword(this.telephoneLabel.text.trim(),this.telephoneLabel.text.trim()),qin.Console.log("账号找回密码发送手机验证码")},t.prototype.sendCodeSuccess=function(){UserUtil.addCodeCountDown({sendCodeBtn:this.sendCodeBtn,leftTime:this.leftTime})},t.prototype.onCodeLabelFouseOut=function(e){this.codeValidate(!0)},t.prototype.onConfirmClick=function(e){SoundManager.playButtonEffect(e.target);var t=this.newPwdLabel.text.trim(),n=this.confirmPwdLabel.text.trim();UserUtil.phoneNumIsValidate(this.telephoneLabel.text)&&this.codeValidate(!1)&&UserUtil.checkTwoPwd(t,n,16,6,this.pwdErrorLabel)&&AccountManager.PhoneModifyPassword(this.verificationCodeLabel.text.trim(),this.telephoneLabel.text.trim(),this.newPwdLabel.text.trim())},t.prototype.phoneFindPwdSuccess=function(){this.onCloseBtnClickHandler(null)},t.prototype.onPwdLabelFouceOut=function(){var e=this.newPwdLabel.text.trim(),t=this.confirmPwdLabel.text.trim();UserUtil.checkTwoPwd(e,t,16,6,this.pwdErrorLabel)&&(this.pwdErrorLabel.text="")},t.prototype.codeValidate=function(e){void 0===e&&(e=!1);var t=this.verificationCodeLabel.text.trim();return t&&6==t.length?(this.phoneErrorLabel.text="",!0):(e&&(this.phoneErrorLabel.text="您输入的验证码错误，请重新输入！"),!1)},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e),this.showPrePanelName()},t}(BasePanel);__reflect(AccountRetrievePwdPanel.prototype,"AccountRetrievePwdPanel");var AchievementInGamePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.AchievementInGamePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!0,this.maskAlpha=.5,UIManager.pushResizeGroup(this.anmGroup)},t.prototype.init=function(t){e.prototype.init.call(this,t),t&&(this._playingFieldPattern=t),UIUtil.listRenderer(this.achieveList,this.achieveScroller,AchieveInGameItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.achieveScroller.viewport.scrollV=0,this.refreshGold(),this.refreshList()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),AchievementManager.achieveChangeEvent.addListener(this.refreshList,this),UserManager.propertyChangeEvent.addListener(this.refreshGold,this),AchievementManager.getAchievementPrizeEvent.addListener(this.refreshList,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),AchievementManager.achieveChangeEvent.removeListener(this.refreshList,this),UserManager.propertyChangeEvent.removeListener(this.refreshGold,this),AchievementManager.getAchievementPrizeEvent.removeListener(this.refreshList,this)},t.prototype.refreshGold=function(){this.goldLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold)},t.prototype.refreshList=function(){var e=AchievementManager.getShowAchieveListByPlayType(this._playingFieldPattern);UIUtil.writeListInfo(this.achieveList,e,"id",!1,SortUtil.showAchieveListSort)},t}(BasePanel);__reflect(AchievementInGamePanel.prototype,"AchievementInGamePanel");var AchievementInHundredWarPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.AchievementInHundredWarPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!0,this.maskAlpha=.5,UIManager.pushResizeGroup(this.anmGroup)},t.prototype.init=function(t){e.prototype.init.call(this,t),t&&(this._playingFieldPattern=t),UIUtil.listRenderer(this.achieveList,this.achieveScroller,AchieveInHundredWarItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.achieveScroller.viewport.scrollV=0,this.refreshList()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),AchievementManager.achieveChangeEvent.addListener(this.refreshList,this),AchievementManager.getAchievementPrizeEvent.addListener(this.refreshList,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),AchievementManager.achieveChangeEvent.removeListener(this.refreshList,this),AchievementManager.getAchievementPrizeEvent.removeListener(this.refreshList,this)},t.prototype.refreshList=function(){var e=AchievementManager.getShowAchieveListByPlayType(this._playingFieldPattern);UIUtil.writeListInfo(this.achieveList,e,"id",!1,SortUtil.showAchieveListSort)},t}(BasePanel);__reflect(AchievementInHundredWarPanel.prototype,"AchievementInHundredWarPanel");var AchievementItemPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.AchievementItemPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!0,this.maskAlpha=.5},t.prototype.init=function(t){e.prototype.init.call(this,t),t&&(this.info=t)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.item.init(this.info,150);var n=this.info.definition;if(n){if(this.achieveName.text=n.name,this.info.isComplete)this.progress.text=n.para1.toString()+"/"+n.para1.toString();else if(this.info.isOther){var i=AchievementManager.otherProcessList.getValue(n.group);this.progress.text=(void 0==i?0:i)+"/"+n.para1.toString()}else this.progress.text=AchieveProcessManager.getAchieveProcessInfoByGroup(n.group).process+"/"+n.para1.toString();this.des.text=n.description}this.complete.visible=this.info.isComplete},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t)},t}(BasePanel);__reflect(AchievementItemPanel.prototype,"AchievementItemPanel");var ActivityPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.ActivityPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,UIManager.pushResizeGroup(this.resizeGroup),UIManager.pushResizeScroller(this.activityScroller,1180)},t.prototype.init=function(t){e.prototype.init.call(this,t),UIUtil.listRenderer(this.activityList,this.activityScroller,ActivityItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.activityScroller.viewport.scrollV=0,this.refreshList()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable()},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable()},t.prototype.refreshList=function(){UIUtil.writeListInfo(this.activityList,ActivityManager.showList,"id")},t.prototype.showPrePanelName=function(){this.prevPanelName==UIModuleName.GamblingPanel?UIManager.showPanel(this.prevPanelName,!0):UIManager.showPanel(this.prevPanelName)},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BasePanel);__reflect(ActivityPanel.prototype,"ActivityPanel");var AddChipsPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.AddChipsPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!0,this.maskAlpha=.5,UIUtil.setCircleBorderButtonFilter(this.addChipsVs.thumb,16572748),this.addChipsVs.maximum=100,this.addChipsVs.addChild(this.countGroup),this.countGroup.x=-125},t.prototype.init=function(t){e.prototype.init.call(this,t);var n=t.minChips/t.maxChips*100;n>100&&(n=100),this.addChipsVs.snapInterval=100/(t.maxChips/t.minChips),this.addChipsVs.snapInterval>1&&(this.addChipsVs.snapInterval=1),this.addChipsVs.minimum=this.addChipsVs.value=n,this.addChipsHandle(),void 0!=t.guideValue?(this.isMaskClickClose=!1,this.grayMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnClickHandler,this)):(this.isMaskClickClose=!0,this.grayMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnClickHandler,this))},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addChipsVs.addEventListener(egret.Event.CHANGE,this.addChipsHandle,this),this.addChipsVs.thumb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.confirmAddChips,this),this.addChipsVs.thumb.addEventListener(egret.TouchEvent.TOUCH_END,this.confirmAddChips,this),GamblingManager.ActionOverEvent.addListener(this.actionOverHandler,this),qin.Tick.addFrameInvoke(this.update,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.addChipsVs.removeEventListener(egret.Event.CHANGE,this.addChipsHandle,this),this.addChipsVs.thumb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.confirmAddChips,this),this.addChipsVs.thumb.removeEventListener(egret.TouchEvent.TOUCH_END,this.confirmAddChips,this),GamblingManager.ActionOverEvent.removeListener(this.actionOverHandler,this),qin.Tick.removeFrameInvoke(this.update,this),this._isPosChanged=!1},t.prototype.addChipsHandle=function(){this._isPosChanged=!0;var e=this.getRealChips();this.addChipsVs.maximum==this.addChipsVs.value&&GamblingManager.self&&e>=GamblingManager.self.bankRoll?this.countLabel.text="AllIn":this.countLabel.text=qin.MathUtil.formatNum(e),SoundManager.playEffect(MusicAction.bet_slider)},t.prototype.update=function(){this._isPosChanged&&(this._isPosChanged=!1,this.countGroup.y=this.addChipsVs.thumb.y)},t.prototype.confirmAddChips=function(e){switch(SoundManager.playEffect(MusicAction.buttonClick),e.type){case egret.TouchEvent.TOUCH_BEGIN:this._posX=e.stageX,this._posY=e.stageY;break;case egret.TouchEvent.TOUCH_END:if(e.stageX==this._posX&&e.stageY==this._posY){var t=this.getRealChips();void 0==this.panelData.guideValue&&t>0&&GamblingManager.self&&(GamblingManager.self.bankRoll+GamblingManager.self.num>t?GamblingManager.reqAction(PlayerState.Raise,t-this.panelData.value):GamblingManager.reqAction(PlayerState.AllIn,t-this.panelData.value))}}},t.prototype.actionOverHandler=function(){this.onCloseBtnClickHandler(null)},t.prototype.getRealChips=function(){var e=this.addChipsVs.value/100*this.panelData.maxChips,t=Math.floor(e/this.panelData.bBlind),n=t*this.panelData.bBlind;return n=Math.max(n,this.panelData.minChips),n=Math.min(n,this.panelData.maxChips),100==this.addChipsVs.value&&(n=this.panelData.maxChips),n
},t}(BasePanel);__reflect(AddChipsPanel.prototype,"AddChipsPanel");var AlertInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.layer=UILayerType.Tips,t.setSkinName(UIModuleName.AlertInfoPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),this.infoTxt.text=qin.StringConstants.Empty,this.subTxt.text=qin.StringConstants.Empty,this.confirmBtn.label="确定",this.cancelBtn.label="取消",t&&(t.subTitle&&(this.subTxt.text=t.subTitle),t.message&&(this.infoTxt.textFlow=qin.TextUtil.parse(t.message)),t.confirmLabel&&(this.confirmBtn.label=t.confirmLabel),t.cancelLabel&&(this.cancelBtn.label=t.cancelLabel),t.alignment&&(this.infoTxt.textAlign=t.alignment),t.isSingle?(this.cancelBtn.visible=!1,this.addChildAt(this.cancelBtn,0)):(this.cancelBtn.visible=!0,this.group.addChildAt(this.cancelBtn,0)))},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onConfirmClick,this),this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelClick,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.confirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onConfirmClick,this),this.cancelBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelClick,this),this.panelData instanceof AlertInfo&&qin.PoolUtil.PutObject(this.panelData)},t.prototype.onConfirmClick=function(t){SoundManager.playEffect(MusicAction.buttonClick),this.panelData&&this.panelData.OnConfirm&&qin.FuncUtil.invoke(this.panelData.OnConfirm,this.panelData.thisObject,this.panelData.confirmParam),e.prototype.onCloseBtnClickHandler.call(this,null)},t.prototype.onCancelClick=function(t){SoundManager.playEffect(MusicAction.buttonClick),this.panelData&&this.panelData.OnCancel&&qin.FuncUtil.invoke(this.panelData.OnCancel,this.panelData.thisObject,this.panelData.cancelParam),e.prototype.onCloseBtnClickHandler.call(this,null)},t}(BasePanel);__reflect(AlertInfoPanel.prototype,"AlertInfoPanel");var AlertInfo=function(){function e(){this.title=qin.StringConstants.Empty,this.subTitle=qin.StringConstants.Empty,this.message=qin.StringConstants.Empty,this.confirmLabel=qin.StringConstants.Empty,this.cancelLabel=qin.StringConstants.Empty,this.OnConfirm=null,this.OnCancel=null,this.confirmParam=null,this.cancelParam=null,this.extraData=null,this.alignment=egret.HorizontalAlign.CENTER,this.isSingle=!0}return e.prototype.reset=function(){this.thisObject=null,this.title=qin.StringConstants.Empty,this.subTitle=qin.StringConstants.Empty,this.message=qin.StringConstants.Empty,this.confirmLabel=qin.StringConstants.Empty,this.cancelLabel=qin.StringConstants.Empty,this.OnConfirm=null,this.OnCancel=null,this.confirmParam=null,this.cancelParam=null,this.extraData=null,this.alignment=egret.HorizontalAlign.CENTER,this.isSingle=!0},e}();__reflect(AlertInfo.prototype,"AlertInfo",["qin.IPoolObject","Object"]);var AssignmentPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.AssignmentPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,this.prevPanelName=UIModuleName.GameHallPanel,this.assignmentTab.build(TabComponent.CreatData(["每日任务","每周任务","成长任务"],[this.achieveGroup,this.achieveGroup,this.achieveGroup],TabButtonType.BigOf3)),UIUtil.listRenderer(this.achieveList,this.achieveScroller,AssignmentItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),egret.callLater(this.addRedPoint,this),UIManager.pushResizeScroller(this.achieveScroller,1020)},t.prototype.addRedPoint=function(){var e=this.assignmentTab.getBtnByLabel("每日任务");UIUtil.addSingleNotify(e,NotifyType.Achieve_HaveDaily,8,38),e=this.assignmentTab.getBtnByLabel("每周任务"),UIUtil.addSingleNotify(e,NotifyType.Achieve_HaveWeekly,8,38),e=this.assignmentTab.getBtnByLabel("成长任务"),UIUtil.addSingleNotify(e,NotifyType.Achieve_HaveGrowUp,8,38)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.assignmentTab.init(0),this.achieveScroller.viewport.scrollV=0,this.refreshList()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.assignmentTab.tabChangeEvent.addListener(this.onBarItemTap,this),AchievementManager.achieveChangeEvent.addListener(this.refreshList,this),AchievementManager.getAchievementPrizeEvent.addListener(this.refreshList,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.assignmentTab.tabChangeEvent.removeListener(this.onBarItemTap,this),AchievementManager.achieveChangeEvent.removeListener(this.refreshList,this),AchievementManager.getAchievementPrizeEvent.removeListener(this.refreshList,this)},t.prototype.refreshList=function(){var e=AchievementManager.getShowAchieveListByType(this.assignmentTab.lastIndex+1);UIUtil.writeListInfo(this.achieveList,e,"id",!0,SortUtil.showAchieveListSort)},t.prototype.onBarItemTap=function(e){this.refreshList()},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BasePanel);__reflect(AssignmentPanel.prototype,"AssignmentPanel");var AudioRecordingPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.AudioRecordingPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t)},t.prototype.ShowValue=function(){this.play.play()},t.prototype.init=function(t){e.prototype.init.call(this,t),this.setCancel(!1)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.ShowValue(),UIManager.addEventListener(UIModuleName.AudioRecordingPanel,UIModuleEvent.CHANGE,this.onCancel,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.play.pause(),RecordAudioManager.ClearData(),UIManager.removeEventListener(UIModuleName.AudioRecordingPanel,UIModuleEvent.CHANGE,this.onCancel,this)},t.prototype.onCancel=function(){this.setCancel(!0)},t.prototype.setCancel=function(e){this.cancelGroup.visible=e,this.recordGroup.visible=!e},t}(BasePanel);__reflect(AudioRecordingPanel.prototype,"AudioRecordingPanel");var AutoLoginPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.AutoLoginPanel),t}return __extends(t,e),t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),AccountManager.OnLoginSuccess.addListener(this.loginSuccessHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),AccountManager.OnLoginSuccess.removeListener(this.loginSuccessHandler,this)},t.prototype.loginSuccessHandler=function(){UIManager.showFloatTips("欢迎回来 "+AccountManager.account),this.onCloseBtnClickHandler(null)},t}(BasePanel);__reflect(AutoLoginPanel.prototype,"AutoLoginPanel");var AchievementManager=function(){function e(){}return e.initialize=function(t){if(TimeManager.resetTime0Event.addListener(this.onResetTime,this),!e.allList){e.allList=new Array;for(var n=0,i=AchieveDefined.GetInstance().dataList;n<i.length;n++){var a=i[n],o=new AchievementInfo;o.id=a.id,o.isComplete=!1,o.isTake=!1,o.isOther=!1,e.allList.push(o)}}e.setAllAchieveList(UserManager.userInfo,t)},e.reqUserAchieveList=function(t){if(t.roleId==UserManager.userInfo.roleId)return void(t.allAchieveList=UserManager.userInfo.allAchieveList);var n=function(n){e.setAllAchieveList(t,n)};SocketManager.call(Command.Achievement_GetList_3090,{roleId:t.roleId},n,null,this)},e.setAllAchieveList=function(t,n){var i=new Array;if(e.otherProcessList?e.otherProcessList.clear():e.otherProcessList=new qin.Dictionary,n.data.groupList)for(var a=0,o=n.data.groupList;a<o.length;a++){var r=o[a],s=e.getAchieveListByGroup(e.allList,r.group);e.otherProcessList.add(r.group,r.process);for(var l=0,h=s;l<h.length;l++){var d=h[l];if(InfoUtil.checkAvailable(d)&&d.definition.para1<=r.process){var c=new AchievementInfo;c.id=d.id,c.isTake=!1,c.isComplete=!0,c.isOther=t.roleId!=UserManager.userInfo.roleId,i.push(c)}}}t.allAchieveList=e.getCompleteAchieveInfoDic(i,t)},e.setAchieveInfoByGroupInfo=function(t,n,i){e.otherProcessList.add(n,i);for(var a=e.getAchieveListByGroup(e.allList,n),o=0,r=a;o<r.length;o++){var s=r[o];if(s.definition&&s.definition.para1<=i)for(var l=0,h=t.allAchieveList;l<h.length;l++){var d=h[l];if(d.id==s.id){d.isComplete=!0;break}}}},e.getCompleteAchieveInfoDic=function(t,n){if(null==t||0==t.length)return e.allList;for(var i=new Array,a=0;a<e.allList.length;a++){for(var o=e.allList[a],r=void 0,s=0;s<t.length;s++){if(t[s].id==o.id){r=t[s];break}r=new AchievementInfo,r.id=o.id,r.isTake=!1,r.isComplete=!1,r.isOther=n.roleId!=UserManager.userInfo.roleId}i.push(r)}return i},e.getAchieveListByTag=function(e,t){for(var n=new Array,i=0,a=e.allAchieveList;i<a.length;i++){var o=a[i];o.definition&&o.definition.tag==t&&n.push(o)}return n},e.getAchieveListByGroup=function(e,t){for(var n=new Array,i=0,a=e;i<a.length;i++){var o=a[i];o.definition&&o.definition.group==t&&n.push(o)}return n},e.onGetAchieveInfo=function(t){if(t.data){var n=e.getAchieveInfoById(UserManager.userInfo.allAchieveList,t.data.id);n.isComplete=!0,e.achieveChangeEvent.dispatch(n)}},e.getAchieveInfoById=function(e,t){for(var n=0,i=e;n<i.length;n++){var a=i[n];if(a.id==t)return a}return null},e.getShowAchieveList=function(){for(var t=AchieveProcessManager.getAchieveProcessListByTag(AchieveTag.Quest),n=new Array,i=0,a=t;i<a.length;i++){var o=a[i];if(!o.isTakeComplete){var r=e.getAchieveInfoById(UserManager.userInfo.allAchieveList,o.takeStep);VersionManager.isSafe?r.definition.isSafe&&n.push(r):n.push(r)}}return n},e.getShowAchieveListByType=function(t){for(var n=e.getShowAchieveList(),i=new Array,a=0,o=n;a<o.length;a++){var r=o[a];r.definition&&r.definition.dailyQuest==t&&i.push(r)}return i},e.isHaveNoTakeByType=function(t){for(var n=e.getShowAchieveListByType(t),i=0,a=n;i<a.length;i++){var o=a[i];if(1==o.isComplete&&0==o.isTake)return!0}return!1},e.getShowAchieveListByPlayType=function(t){for(var n=e.getShowAchieveList(),i=new Array,a=0,o=n;a<o.length;a++){var r=o[a];if(r.definition){var s=r.definition.playingFieldPattern;(s==AchieveShowPattern.All||s==t)&&i.push(r),s==AchieveShowPattern.AllPattern&&(t==AchieveShowPattern.PrimaryPattern||t==AchieveShowPattern.MiddlePattern||t==AchieveShowPattern.HighPattern)&&i.push(r)}}return i},e.isHaveNoTakeByPlayType=function(t){for(var n=e.getShowAchieveListByPlayType(t),i=0,a=n;i<a.length;i++){var o=a[i];if(1==o.isComplete&&0==o.isTake)return!0}return!1},e.playingFieldTypeToAchieveShowPattern=function(e){switch(e){case PlayingFieldType.Primary:return AchieveShowPattern.PrimaryPattern;case PlayingFieldType.Middle:return AchieveShowPattern.MiddlePattern;case PlayingFieldType.High:return AchieveShowPattern.HighPattern;case PlayingFieldType.Race:return AchieveShowPattern.Race}},e.reqTakeAchievePrize=function(t){PropertyManager.OpenGet(),SocketManager.call(Command.Achievement_GetPrize_3088,{Id:t},e.onTakeAchievePrize,null,this)},e.onTakeAchievePrize=function(t){if(t.data&&t.data.Id){PropertyManager.ShowItemList();for(var n=0,i=t.data.Id;n<i.length;n++){var a=i[n],o=e.getAchieveInfoById(UserManager.userInfo.allAchieveList,a);o&&!o.isTake&&(o.isTake=!0)}e.getAchievementPrizeEvent.dispatch()}else UIManager.showFloatTips("领取失败")},e.onResetTime=function(t){e.resetAchievement(AchieveDailyType.Daily),TimeManager.GetServerLocalDateTime().getDay()==WeekDay.Monday&&e.resetAchievement(AchieveDailyType.Weekly)},e.resetAchievement=function(e){for(var t=0,n=AchieveProcessManager.getAchieveProcessListByTag(AchieveTag.Quest);t<n.length;t++){var i=n[t];i.dailyQuest==e&&i.resetProcess()}},e.achieveChangeEvent=new qin.DelegateDispatcher,e.getAchievementPrizeEvent=new qin.DelegateDispatcher,e}();__reflect(AchievementManager.prototype,"AchievementManager");var AchievementInfo=function(){function e(){}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e,this._definition=AchieveDefined.GetInstance().getDefinition(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!0,configurable:!0}),e}();__reflect(AchievementInfo.prototype,"AchievementInfo",["IHaveDefintionInfo"]);var AchieveTag;!function(e){e[e.Achievement=0]="Achievement",e[e.Quest=1]="Quest"}(AchieveTag||(AchieveTag={}));var AchieveDailyType;!function(e){e[e.Daily=1]="Daily",e[e.Weekly=2]="Weekly",e[e.GrowUp=3]="GrowUp"}(AchieveDailyType||(AchieveDailyType={}));var ActivityInfo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.completeState=!1,t.actionNum=0,t.IsOutOfTime=!1,t.severStartDateTime=TimeManager.Utc1970,t.severEndDateTime=TimeManager.Utc1970,t.startDateTime=TimeManager.Utc1970,t.endDateTime=TimeManager.Utc1970,t.notifyTime=TimeManager.Utc1970,t}return __extends(t,e),t.prototype.reset=function(){},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e,this._definition=ActivityDefined.GetInstance().getDefinition(this._id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},enumerable:!0,configurable:!0}),t}(BaseServerValueInfo);__reflect(ActivityInfo.prototype,"ActivityInfo",["IHaveDefintionInfo"]);var BindAccountPanel=function(e){function t(){var t=e.call(this)||this;return t.isTween=!0,t.setSkinName(UIModuleName.BindAccountPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),this.userHeadCom.init(UserManager.userInfo,110),this.nameLabel.text=UserManager.userInfo.name,this.idLabel.text=UserManager.userInfo.roleId.toString(),BindAccountManager.reqGetList()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),BindAccountManager.bindListEvent.addListener(this.bindListHandler,this),BindAccountManager.bindSuccessEvent.addListener(this.bindSuccessHandler,this),this.bindPhoneBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bindPhoneHandler,this),this.bindWXBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bindWXHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),BindAccountManager.bindListEvent.removeListener(this.bindListHandler,this),BindAccountManager.bindSuccessEvent.removeListener(this.bindSuccessHandler,this),this.bindPhoneBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.bindPhoneHandler,this),this.bindWXBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.bindWXHandler,this)},t.prototype.bindListHandler=function(){this.refreshQinBindState(),this.refreshWxBindState()},t.prototype.refreshQinBindState=function(){BindAccountManager.getIsBinding(ChannelLoginType.Qin)||ChannelManager.loginType==ChannelLoginType.Qin?(this.bindPhoneBtn.visible=!1,this.phoneImg.visible=!0,this.phoneNumLabel.text="已绑定"):(this.bindPhoneBtn.visible=!0,this.phoneImg.visible=!1,this.phoneNumLabel.text="未绑定")},t.prototype.refreshWxBindState=function(){BindAccountManager.getIsBinding(ChannelLoginType.Weixin)||ChannelManager.loginType==ChannelLoginType.Weixin?(this.bindWXBtn.visible=!1,this.wxImg.visible=!0,this.wxNameLabel.text="已绑定"):(qin.System.isWeChat?this.bindWXBtn.enabled=!0:qin.System.isWeb?this.bindWXBtn.enabled=!1:this.bindWXBtn.enabled=!0,this.bindWXBtn.visible=!0,this.wxImg.visible=!1,this.wxNameLabel.text="未绑定")},t.prototype.bindSuccessHandler=function(e){switch(e){case ChannelLoginType.Qin:this.refreshQinBindState();break;case ChannelLoginType.Weixin:this.refreshWxBindState()}},t.prototype.bindPhoneHandler=function(e){SoundManager.playButtonEffect(e.target),BindAccountManager.getIsBinding(ChannelLoginType.Qin)||BindAccountManager.startBindQin()},t.prototype.bindWXHandler=function(e){SoundManager.playButtonEffect(e.target),BindAccountManager.getIsBinding(ChannelLoginType.Weixin)||BindAccountManager.tryBindWx()},t}(BasePanel);__reflect(BindAccountPanel.prototype,"BindAccountPanel");var BindPhoneAccountPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.BindPhoneAccountPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.registerGroup.visible=this.hasAccountGroup.visible=!1;var n=new Array;n.push(this.registerGroup),n.push(this.hasAccountGroup),this.tabCom.build(TabComponent.CreatData(["注册手机账号","已有手机账号"],n,TabButtonType.BigOf2)),this.accountText.inputType=egret.TextFieldInputType.TEL,this.accountText.restrict="0-9",this.accountText.maxChars=11,this.pwdText.inputType=egret.TextFieldInputType.PASSWORD},t.prototype.init=function(t){e.prototype.init.call(this,t),this.tabCom.init(0)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.loginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginHandler,this),this.findPwdBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.findPwdHandler,this),AccountManager.OnLoginSuccess.addListener(this.loginSuccessHandler,this),AccountManager.OnLoadingStart.addListener(this.showLoading,this),AccountManager.OnLoadingFinish.addListener(this.closeLoading,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.loginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginHandler,this),this.findPwdBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.findPwdHandler,this),AccountManager.OnLoginSuccess.removeListener(this.loginSuccessHandler,this),AccountManager.OnLoadingStart.removeListener(this.showLoading,this),AccountManager.OnLoadingFinish.removeListener(this.closeLoading,this)},t.prototype.registerSuccessHandler=function(e){AccountManager.OnLoginSuccess.dispatch({token:e.token,uid:e.uid}),this.onCloseBtnClickHandler(null)},t.prototype.loginHandler=function(e){var t=this.accountText.text.trim(),n=this.pwdText.text.trim();if(SoundManager.playButtonEffect(e.target),!t||!n)return void AlertManager.showAlert("您的账号或密码为空，请重新输入！");var i=AccountPlayerPrefs.IsMatchAccountPassword(t,n);AccountManager.Login(t,n,i,!0)},t.prototype.loginSuccessHandler=function(){var e=this.accountText.text.trim(),t=this.pwdText.text.trim();e&&(ChannelManager.DispatchAccountLoginSucceed(e,t,!1),this.onCloseBtnClickHandler(null))},t.prototype.findPwdHandler=function(e){SoundManager.playEffect(MusicAction.buttonClick),JumpUtil.JumpToRetrievePwd(UIModuleName.BindPhoneAccountPanel)},t.prototype.showLoading=function(){UIManager.showPanel(UIModuleName.LoadingPanel)},t.prototype.closeLoading=function(){UIManager.closePanel(UIModuleName.LoadingPanel)},t}(BaseRegisterTelPanel);__reflect(BindPhoneAccountPanel.prototype,"BindPhoneAccountPanel");var BuyAccessGamePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.BuyAccessGamePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){this.isCloseButtonTween=!1,this.isMaskClickClose=!0,this.maskAlpha=.5,e.prototype.onAwake.call(this,t)},t.prototype.init=function(t){e.prototype.init.call(this,t),t.isGoldInsufficient?(this.buyAccessGp.visible=!1,this.unEnoughGoldHandle(t.minNum),this.unEnoughGoldGp.visible=!0,t.isBankruptcy?(this.bankruptcyImage.visible=!0,this.insufficientImage.visible=!1):(this.bankruptcyImage.visible=!1,this.insufficientImage.visible=!0)):(this.unEnoughGoldGp.visible=!1,this.buyAccessGp.visible=!0,this.smallestLabel.text=qin.MathUtil.formatNum(t.minNum),this.biggestLabel.text=qin.MathUtil.formatNum(t.maxNum),this.currentProperty.text=qin.MathUtil.formatNum(UserManager.userInfo.gold),this.buyAccessHs.minimum=t.minNum,this.buyAccessHs.maximum=t.maxNum,this.buyAccessHs.value=Math.min(UserManager.userInfo.gold,Math.round(t.bbBuyIn/2)),this.buyAccessHs.snapInterval=t.bBlind,this.buyAccessHs.minimum==this.buyAccessHs.maximum?(this.buyAccessHs.minimum=this.buyAccessHs.maximum-1,this.buyAccessHs.value=this.buyAccessHs.maximum,this.buyAccessHs.thumb.touchEnabled=!1):this.buyAccessHs.thumb.touchEnabled=!0,this.countLable.text="$"+qin.MathUtil.formatNum(this.buyAccessHs.value),GamblingManager.roomInfo&&(void 0!=GamblingManager.roomInfo.isAutoBuy?this.autoBuyCheck.selected=GamblingManager.roomInfo.isAutoBuy:this.autoBuyCheck.selected=!0),this.autoBuyCheck.visible=!this.panelData.isAddCoin,this.addCoinTitle.visible=this.buyTitle.visible=!1,this.panelData.isAddCoin?this.addCoinTitle.visible=!0:this.buyTitle.visible=!0)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.buyAccessHs.addEventListener(egret.Event.CHANGE,this.countBuyGold,this),this.buyNowBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buNow,this),this.shoppingBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goShopping,this),this.buyAccessBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyAccessHandle,this),this.backButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this),GamblingManager.SitOrStandEvent.addListener(this.sitOrStandHandler,this),GamblingManager.AddCoinEvent.addListener(this.buyInGameHandler,this),GamblingManager.BuyInGameEvent.addListener(this.buyInGameHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.buyAccessHs.removeEventListener(egret.Event.CHANGE,this.countBuyGold,this),this.buyNowBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buNow,this),this.shoppingBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goShopping,this),this.buyAccessBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buyAccessHandle,this),this.backButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this),GamblingManager.SitOrStandEvent.removeListener(this.sitOrStandHandler,this),GamblingManager.AddCoinEvent.removeListener(this.buyInGameHandler,this),GamblingManager.BuyInGameEvent.removeListener(this.buyInGameHandler,this),AwardManager.OnExchanged.removeListener(this.onExchanged,this)},t.prototype.buNow=function(e){if(this._shopInfo&&this._shopInfo.definition){var t=AwardDefined.GetInstance().getDefinition(this._shopInfo.definition.awardId);if(t){for(var n=void 0,i=0,a=t.costList;i<a.length;i++){var o=a[i];o.type==CostType.RMB&&(n=o)}AwardManager.OnExchanged.removeListener(this.onExchanged,this),AwardManager.OnExchanged.addListener(this.onExchanged,this),ChannelManager.PaySend(this._shopInfo.id)}}},t.prototype.onExchanged=function(e){this._shopInfo&&this._shopInfo.definition&&this._shopInfo.definition.awardId==e&&(AwardManager.OnExchanged.removeListener(this.onExchanged,this),this.onCloseBtnClickHandler(null))},t.prototype.onBack=function(e){this.onCloseBtnClickHandler(e)},t.prototype.goShopping=function(e){this.onCloseBtnClickHandler(null),UIManager.showPanel(UIModuleName.ShoppingPanel,{prevPanelName:UIModuleName.GamblingPanel,toRight:!1})},t.prototype.buyAccessHandle=function(e){this.panelData.isAddCoin?GamblingManager.self&&GamblingManager.reqAddCoin(this.buyAccessHs.value-GamblingManager.self.bankRoll):GamblingManager.reqBuyInGame(this.buyAccessHs.value,this.autoBuyCheck.selected,this.panelData.pos)},t.prototype.sitOrStandHandler=function(e){e.pInfo.roleId!=UserManager.userInfo.roleId||this.panelData&&this.panelData.isGoldInsufficient||this.onCloseBtnClickHandler(null)},t.prototype.buyInGameHandler=function(){this.onCloseBtnClickHandler(null)},t.prototype.unEnoughGoldHandle=function(e){var t=e-UserManager.userInfo.gold;this._shopInfo=null;var n;if(ShopManager.goldList.length>0){for(var i=0;i<ShopManager.goldList.length;i++){var a=ShopManager.goldList[i];if(a&&a.definition&&(n=AwardDefined.GetInstance().getDefinition(a.definition.awardId),n&&t<=n.rewardNum[0]||i==ShopManager.goldList.length-1)){this._shopInfo=a;break}}this._shopInfo&&n&&(n.costNum&&n.costNum.length>0&&(this.priceLabel.text="仅需"+n.costNum[0]/100+"元"),this.goldLabel.text=n.name)}},t.prototype.countBuyGold=function(e){this.countLable.text="$"+qin.MathUtil.formatNum(this.buyAccessHs.value)},t}(BasePanel);__reflect(BuyAccessGamePanel.prototype,"BuyAccessGamePanel");var ChampionshipBuyChipsPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.ChampionshipBuyChipsPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){this.isCloseButtonTween=!1,e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),GamblingManager.roomInfo&&(t&&t.endTime?this._starTime=ProjectDefined.GetInstance().MTTBuyTimeoutClient+t.endTime:this._starTime=ProjectDefined.GetInstance().MTTBuyTimeoutClient+GamblingManager.roomInfo.endTime),this.setInfoUI()},t.prototype.setInfoUI=function(){if(GamblingManager.roomInfo&&(this._blindLevel=GamblingManager.roomInfo.nowBlindLevel),GamblingManager.matchRoomInfo&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.matchRoomInfo.definition)if(this.panelData&&this.panelData.isRebuy){if(this.timesLabel.text=qin.StringUtil.format("剩余买入比赛次数:{0}",GamblingManager.matchRoomInfo.definition.rebuy-GamblingManager.roomInfo.rebuyTimes),this.rebuyGroup.visible=!0,this.addonGroup.visible=!1,this.panelData.isOver)return this.desLabel.text=qin.StringUtil.format("比赛筹码输光了,是否花费{0}金币重新购买{1}比赛筹码?",GamblingManager.matchRoomInfo.definition.rebuyCost,GamblingManager.matchRoomInfo.definition.initialChips),this._text=this.desLabel.text,void this.showDownCount();this.desLabel.text=qin.StringUtil.format("是否花费{0}金币重新购买{1}比赛筹码?",GamblingManager.matchRoomInfo.definition.rebuyCost,GamblingManager.matchRoomInfo.definition.initialChips)}else{if(this.timesLabel.text=qin.StringUtil.format("剩余买入比赛次数:{0}",GamblingManager.matchRoomInfo.definition.addon-GamblingManager.roomInfo.addonTimes),this.rebuyGroup.visible=!1,this.addonGroup.visible=!0,this.panelData&&this.panelData.isOver)return this.desLabel.text=qin.StringUtil.format("比赛筹码输光了,是否花费{0}金币重新购买{1}比赛筹码?",GamblingManager.matchRoomInfo.definition.addonCost,GamblingManager.matchRoomInfo.definition.addonChips),this._text=this.desLabel.text,void this.showDownCount();this.desLabel.text=qin.StringUtil.format("是否花费{0}金币增购{1}比赛筹码?",GamblingManager.matchRoomInfo.definition.addonCost,GamblingManager.matchRoomInfo.definition.addonChips)}},t.prototype.showDownCount=function(){if(GamblingManager.roomInfo){var e=Math.floor(this._starTime-TimeManager.GetServerUtcTimestamp());qin.Tick.AddSecondsInvoke(this.refreshTime,this),0>=e&&(e=0),this.desLabel.text=this._text+qin.StringUtil.format("({0})",e)}},t.prototype.refreshTime=function(){var e=Math.floor(this._starTime-TimeManager.GetServerUtcTimestamp());return 0>=e?(this.onCloseBtnClickHandler(null),void this.outChampionship()):void(this.desLabel.text=this._text+qin.StringUtil.format("({0})",e))},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.isRaceOut&&(AlertManager.showAlert("比赛已结束"),this.onCloseBtnClickHandler(null))},t.prototype.buyBtnClick=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.panelData&&this.panelData.isRebuy?GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Rebuy,!0)?CostManager.verifyGold(GamblingManager.matchRoomInfo.definition.rebuyCost,!0)&&GamblingManager.championshipHandler.addShip(ChampionshipBuyType.Rebuy):(this.outChampionship(),this.onCloseBtnClickHandler(null)):GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Addon,!0)?CostManager.verifyGold(GamblingManager.matchRoomInfo.definition.addonCost,!0)&&GamblingManager.championshipHandler.addShip(ChampionshipBuyType.Addon):(this.outChampionship(),this.onCloseBtnClickHandler(null))},t.prototype.onRebuyORAddonEvent=function(e){e&&e.isSuccess?this.onCloseBtnClickHandler(null):this.panelData&&this.panelData.isOver?this.showDownCount():this.onCloseBtnClickHandler(null)},t.prototype.outChampionship=function(){this.panelData&&this.panelData.isOver&&GamblingManager.championshipHandler.addShip(ChampionshipBuyType.Out)},t.prototype.onNextRoundStartEvent=function(){if(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&this._blindLevel!=GamblingManager.roomInfo.nowBlindLevel){this._blindLevel=GamblingManager.roomInfo.nowBlindLevel;var e=GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Rebuy,!1),t=GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Addon,!1);this.panelData&&this.panelData.isRebuy&&!e&&t?(this.panelData.isRebuy=!1,this.setInfoUI()):e&&!t?(this.panelData?this.panelData.isRebuy=!0:this.panelData={isRebuy:!0},this.setInfoUI()):this.panelData&&this.panelData.isOver&&!e&&!t&&(AlertManager.showAlert("重购/增加购阶段已结束"),this.outChampionship(),this.onCloseBtnClickHandler(null))}},t.prototype.outBtnClick=function(e){this.outChampionship(),this.onCloseBtnClickHandler(e)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyBtnClick,this),this.outButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.outBtnClick,this),GamblingManager.RebuyORAddonEvent.addListener(this.onRebuyORAddonEvent,this),GamblingManager.NextRoundStartEvent.addListener(this.onNextRoundStartEvent,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buyBtnClick,this),this.outButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.outBtnClick,this),GamblingManager.RebuyORAddonEvent.removeListener(this.onRebuyORAddonEvent,this),GamblingManager.NextRoundStartEvent.removeListener(this.onNextRoundStartEvent,this),qin.Tick.RemoveSecondsInvoke(this.refreshTime,this)},t}(BasePanel);__reflect(ChampionshipBuyChipsPanel.prototype,"ChampionshipBuyChipsPanel");var ChampionshipInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.ChampionshipInfoPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.matchInfoTab.isTween=!1,UIUtil.listRenderer(this.rankList,this.rankScroller,ChampionshipRankItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.reqscroller=new ReqScroller(this.rankScroller,this.rankList,10,this.getMTTInfoRank.bind(this)),UIUtil.listRenderer(this.blindList,this.blindScroller,BlindItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.awardList,this.awardScroller,AwardItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.rankScroller.scrollPolicyH=this.blindScroller.scrollPolicyH=this.awardScroller.scrollPolicyH=eui.ScrollPolicy.OFF;var n=new Array;n.push(this.baseInfoGroup),n.push(this.outsGroup),n.push(this.rankGroup),n.push(this.blindGroup),n.push(this.awardGroup),this._outsIndex=n.indexOf(this.outsGroup),this.matchInfoTab.build(TabComponent.CreatData(["概述","赛况","排名","盲注","奖励"],n,TabButtonType.SmallOf5))},t.prototype.init=function(t){e.prototype.init.call(this,t),this.matchInfoTab.init(0),this._isInRoom=void 0,t&&t.isInRoom&&(this._isInRoom=!0,this.matchInfoTab.setSelectIndex(this._outsIndex),this.withdrawBtn.visible=!1),this._championshipInfo=t.championshipInfo},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.rebuyGroup.visible=this.addonGroup.visible=this.applicationBtn.visible=this.withdrawBtn.visible=this.hasJoinGroup.visible=this.noJoinGroup.visible=!1,this.setAwardInfo(),this.reset(),this._championshipInfo.definition&&ChampionshipManager.reqOutsInfo(this._championshipInfo.recordId,this._championshipInfo.definition.blindType)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.matchInfoTab.tabChangeEvent.addListener(this.onTabClickHandler,this),ChampionshipManager.OnOutsInfoEvent.addListener(this.setOutsInfo,this),ChampionshipManager.OnRankInfoEvent.addListener(this.setRankInfo,this),this.applicationBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onApplicationBtnClick,this),this.withdrawBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onWithdrawBtnClick,this),ChampionshipManager.OnWithdrawEvent.addListener(this.closePanel,this),ChampionshipManager.onRequestJoinEvent.addListener(this.joinSuccess,this)
},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.matchInfoTab.tabChangeEvent.removeListener(this.onTabClickHandler,this),ChampionshipManager.OnOutsInfoEvent.removeListener(this.setOutsInfo,this),ChampionshipManager.OnRankInfoEvent.removeListener(this.setRankInfo,this),qin.Tick.RemoveSecondsInvoke(this.countDown,this),qin.Tick.RemoveSecondsInvoke(this.countUp,this),this.applicationBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onApplicationBtnClick,this),this.withdrawBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onWithdrawBtnClick,this),ChampionshipManager.OnWithdrawEvent.removeListener(this.closePanel,this),ChampionshipManager.onRequestJoinEvent.removeListener(this.joinSuccess,this)},t.prototype.getMTTInfoRank=function(){ChampionshipManager.reqRankInfo(this._championshipInfo.recordId,this.reqscroller.index,this.reqscroller.reqNum)},t.prototype.joinSuccess=function(){this.applicationBtn.visible=!1,this.withdrawBtn.visible=!0;var t=this._championshipInfo.startTime-TimeManager.GetServerUtcTimestamp();0>=t&&e.prototype.onCloseBtnClickHandler.call(this,null)},t.prototype.closePanel=function(e){e.joinWay==JoinChampionshipWay.Ticket?AlertManager.showAlert("退赛成功，您的门票已返回账户"):AlertManager.showAlert("退赛成功，报名费已返回账户"),this.onCloseBtnClickHandler(null)},t.prototype.onWithdrawBtnClick=function(e){SoundManager.playButtonEffect(e.target),TimeManager.GetServerUtcTimestamp()>=this._championshipInfo.startTime?AlertManager.showAlert("比赛已经开启，不可退赛。"):this._championshipInfo.joinWay==JoinChampionshipWay.Ticket?ChampionshipManager.reqWithdraw(this._championshipInfo.recordId):AlertManager.showConfirm("提示：主动退赛仅退还报名费，服务费将不予退还。",this.confirmWithdraw,null,this._championshipInfo.recordId)},t.prototype.confirmWithdraw=function(e){ChampionshipManager.reqWithdraw(e)},t.prototype.onApplicationBtnClick=function(e){if(SoundManager.playButtonEffect(e.target),this._championshipInfo.definition){var t=ItemManager.isHaveTicket(this._championshipInfo.definition.ticketId);t?ChampionshipManager.reqRequestJoin(this._championshipInfo.recordId,JoinChampionshipWay.Ticket,this._championshipInfo.startTime):CostManager.verifyGold(this._championshipInfo.definition.signCost+this._championshipInfo.definition.serveCost,!0)&&ChampionshipManager.reqRequestJoin(this._championshipInfo.recordId,JoinChampionshipWay.Gold,this._championshipInfo.startTime)}},t.prototype.setAwardInfo=function(){var e=ChampionshipManager.getAwardList(this._championshipInfo.id);if(ChampionshipManager.awardList||(ChampionshipManager.awardList=new Array),ChampionshipManager.awardList.length=0,e&&e.length>0)for(var t=0,n=e;t<n.length;t++){var i=n[t],a=new ChampionshipAwardInfo,o=AwardDefined.GetInstance().getAwardNameById(i.awardId);o&&(a.des=o,a.rank=i.start,ChampionshipManager.awardList.push(a))}ChampionshipManager.awardList.length>0&&UIUtil.writeListInfo(this.awardList,ChampionshipManager.awardList,"rank")},t.prototype.setBlindInfo=function(){ChampionshipManager.blindList&&ChampionshipManager.blindList.length>0&&UIUtil.writeListInfo(this.blindList,ChampionshipManager.blindList,"id")},t.prototype.setRankInfo=function(e){e.rankList&&e.rankList.length>0?(this.hasJoinGroup.visible=!0,this.noJoinGroup.visible=!1,this.reqscroller.init(new eui.ArrayCollection(e.rankList),e.isBottom)):(this.hasJoinGroup.visible=!1,this.noJoinGroup.visible=!0)},t.prototype.reset=function(){this.rankLabel.text="0",this.joinLabel.text="0",this.nowAnteLabel.text="0",this.nextAnteLabel.text="0",this.forTimeLabel.text="00:00:00",this.forTimeLabel.text="00:00:00",this.surplusTimeGroup.visible=this.notStartGroup.visible=!1},t.prototype.setOutsInfo=function(){if(ChampionshipManager.matchOutsInfo){ChampionshipManager.matchOutsInfo.rank&&(this.rankLabel.text=ChampionshipManager.matchOutsInfo.rank.toString()),this._championshipInfo.join&&(this.joinLabel.text=this._championshipInfo.join.toString());var e=Math.floor(TimeManager.GetServerUtcTimestamp())-this._championshipInfo.startTime;e>0?(this.countUpNum=e,this.countUpLabel=this.forTimeLabel,qin.Tick.AddSecondsInvoke(this.countUp,this),this.surplusTimeGroup.visible=!0,this.notStartGroup.visible=!1,this.countDownNum=ChampionshipManager.matchOutsInfo.addBlindTime,this.countDownLabel=this.surplusTimeLabel,qin.Tick.AddSecondsInvoke(this.countDown,this)):(this.surplusTimeGroup.visible=!1,this.notStartGroup.visible=!0),this.nowBlindLabel.text=qin.MathUtil.formatNum(ChampionshipManager.matchOutsInfo.nowSBlind)+"/"+qin.MathUtil.formatNum(ChampionshipManager.matchOutsInfo.nowBBlind),ChampionshipManager.matchOutsInfo.nowAnte&&(this.nowAnteLabel.text=qin.MathUtil.formatNum(ChampionshipManager.matchOutsInfo.nowAnte)),this.nextBlindLabel.text=qin.MathUtil.formatNum(ChampionshipManager.matchOutsInfo.nextSBlind)+"/"+qin.MathUtil.formatNum(ChampionshipManager.matchOutsInfo.nextBBlind),ChampionshipManager.matchOutsInfo.nextAnte&&(this.nextAnteLabel.text=qin.MathUtil.formatNum(ChampionshipManager.matchOutsInfo.nextAnte))}this.setApplicationInfo()},t.prototype.setApplicationInfo=function(){var e=this._championshipInfo.definition;if(e){this.nameLabel.text=e.name,0==e.signCost?this.applicationFeeLabel.text="免费+"+e.serveCost+"服务费 ":this.applicationFeeLabel.text=e.signCost+"金币+"+e.serveCost+"服务费 或 "+e.name+"门票1张";var t=new Date(1e3*this._championshipInfo.startTime);e.delaySign?this.timeLabel.text=t.getMonth()+1+"-"+t.getDate()+" "+qin.DateTimeUtil.formatDate(t,qin.DateTimeUtil.Format_Standard_NoSecond).split(" ")[1]+"（延迟报名"+Math.floor(e.delaySign/60)+"分钟）":this.timeLabel.text=t.getMonth()+1+"-"+t.getDate()+" "+qin.DateTimeUtil.formatDate(t,qin.DateTimeUtil.Format_Standard_NoSecond).split(" ")[1],this.joinNumLabel.text=e.sNum+"-"+e.bNum+"人",this.initChipLabel.text=e.initialChips.toString(),this.getChampionshipBlindInfo(e.blindType),e.rebuy&&(this.rebuyGroup.visible=!0,this.rebuyDesLabel.textFlow=qin.TextUtil.parse('可重购比赛，次数：<font color="#F3C655" size="24">'+e.rebuy+'次</font>，第<font color="#F3C655" size="24">'+this.nthRebuy+'</font>个盲注级别前可用<font color="#F3C655" size="24">'+e.rebuyCost+'金币</font>兑换<font color="#F3C655" size="24">'+e.initialChips+"比赛筹码</font>")),e.addon&&(this.addonGroup.visible=!0,this.addonDesLabel.textFlow=qin.TextUtil.parse('可增购比赛，次数：<font color="#F3C655" size="24">'+e.addon+'次</font>，第<font color="#F3C655" size="24">'+this.nthAddon+'</font>个盲注级别前可用<font color="#F3C655" size="24">'+e.addonCost+'金币</font>兑换<font color="#F3C655" size="24">'+e.addonChips+"比赛筹码</font>"))}this._championshipInfo.joinWay?this._isInRoom||(this.withdrawBtn.visible=!0):this.applicationBtn.visible=!0},t.prototype.onTabClickHandler=function(e){1==e?this._championshipInfo.definition&&ChampionshipManager.reqOutsInfo(this._championshipInfo.recordId,this._championshipInfo.definition.blindType):2==e&&(this.reqscroller.Clear(),ChampionshipManager.reqRankInfo(this._championshipInfo.recordId,this.reqscroller.index,10))},t.prototype.getChampionshipBlindInfo=function(e){ChampionshipManager.blindList||(ChampionshipManager.blindList=new Array),ChampionshipManager.blindList.length=0;for(var t=0,n=ChampionshipBlindDefined.GetInstance().dataList;t<n.length;t++){var i=n[t];i.blindId==e&&(ChampionshipManager.blindList.push(i),i.rebuy&&(this.nthRebuy=i.level),i.addon&&(this.nthAddon=i.level))}this.setBlindInfo()},t.prototype.countDown=function(){if(this.countDownNum<=0?this.countDownLabel.text=qin.DateTimeUtil.countDownFormat(this.countDownNum,!1):(this.countDownNum--,this.countDownLabel.text=qin.DateTimeUtil.countDownFormat(this.countDownNum,!1)),this.countDownNum<=0&&(qin.Tick.RemoveSecondsInvoke(this.countDown,this),ChampionshipManager.blindList&&ChampionshipManager.blindList.length>0&&ChampionshipManager.nowBlindRank<ChampionshipManager.blindList.length)){ChampionshipManager.nowBlindRank++,this.refreshNowBlindColor();var e=ChampionshipBlindDefined.GetInstance().getBlindInfoByLevel(ChampionshipManager.nowBlindRank,ChampionshipManager.nowBlindId);ChampionshipManager.setOutsBlindInfo(e),e&&ChampionshipManager.setOutsAddBlindTimeInfo(e.upTime),this.setOutsInfo()}},t.prototype.refreshNowBlindColor=function(){if(ChampionshipManager.nowBlindItem){ChampionshipManager.nowBlindItem.rankLabel.textColor=ColorEnum.White,ChampionshipManager.nowBlindItem.blindLabel.textColor=ColorEnum.White,ChampionshipManager.nowBlindItem.anteLabel.textColor=ColorEnum.White,ChampionshipManager.nowBlindItem.timeLabel.textColor=ColorEnum.White;for(var e=void 0,t=0;t<this.blindList.numChildren;t++)if(e=this.blindList.getChildAt(t),e.bindData.level==ChampionshipManager.nowBlindRank){e.rankLabel.textColor=ColorEnum.Golden,e.blindLabel.textColor=ColorEnum.Golden,e.anteLabel.textColor=ColorEnum.Golden,e.timeLabel.textColor=ColorEnum.Golden,ChampionshipManager.nowBlindItem=e;break}}},t.prototype.countUp=function(){this.countUpNum++,this.countUpLabel.text=qin.DateTimeUtil.countDownFormat(this.countUpNum,!0),this.countUpNum>=359999&&qin.Tick.RemoveSecondsInvoke(this.countUp,this)},t}(BasePanel);__reflect(ChampionshipInfoPanel.prototype,"ChampionshipInfoPanel");var ChampionshipPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.ChampionshipPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){var n=this;e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,this.prevPanelName=UIModuleName.GameHallPanel,UIUtil.listRenderer(this.matchList,this.matchScroller,ChampionshipItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.signedUpList,this.signedUpScroller,ChampionshipItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.ticketList,this.ticketScroller,MyTicketItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.resultList,this.resultScroller,OutsItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!1),this.matchScroller.scrollPolicyH=this.signedUpScroller.scrollPolicyH=this.ticketScroller.scrollPolicyH=this.resultScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.hasMatchGroup.visible=this.noMatchGroup.visible=this.hasSignedUpGroup.visible=this.noSignedUpGroup.visible=this.hasTicketGroup.visible=this.noTicketGroup.visible=this.hasResultGroup.visible=this.noResultGroup.visible=!1;var i=new Array;i.push(this.matchGroup),i.push(this.signedUpGroup),i.push(this.ticketsGroup),i.push(this.resultsGroup),this.matchTab.build(TabComponent.CreatData(["赛事列表","已报名","我的门票","最近赛况"],i,TabButtonType.BigOf4)),egret.callLater(function(){var e=n.matchTab.getBtnByLabel("已报名");UIUtil.addSingleNotify(e,NotifyType.Mtt_HaveJoinedList,10,30)},this),UIManager.pushResizeScroller(this.matchScroller,1020),UIManager.pushResizeScroller(this.signedUpScroller,1020),UIManager.pushResizeScroller(this.ticketScroller,1070),UIManager.pushResizeScroller(this.resultScroller,1020),UIManager.pushResizeScroller(this.noSignedUpGroup,1070),UIManager.pushResizeScroller(this.noMatchGroup,1070),UIManager.pushResizeScroller(this.noTicketGroup,1070),UIManager.pushResizeScroller(this.noResultGroup,1070)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.matchTab.init(0),ChampionshipManager.reqGetMTTListInfo()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.matchTab.tabChangeEvent.addListener(this.onTabClickHandler,this),this.matchList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.getMatchDetail,this),this.signedUpList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.getJoinMatchDetail,this),ChampionshipManager.onGetMatchListEvent.addListener(this.setMatchListInfo,this),ChampionshipManager.onGetJoinedMatchListEvent.addListener(this.setSignedUpListInfo,this),ChampionshipManager.onGetRecentActionInfoEvent.addListener(this.setRecentActionListInfo,this),ChampionshipManager.onRefreshMTTListEvent.addListener(this.refreshMatchInfo,this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showHelpPanel,this),ChampionshipManager.OnGetRankListEvent.addListener(this.setOutsRankInfo,this),ChampionshipManager.OnNewMTTPushEvent.addListener(this.getNewMatchListInfo,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.matchTab.tabChangeEvent.removeListener(this.onTabClickHandler,this),this.matchList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.getMatchDetail,this),this.signedUpList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.getJoinMatchDetail,this),ChampionshipManager.onGetMatchListEvent.removeListener(this.setMatchListInfo,this),ChampionshipManager.onGetJoinedMatchListEvent.removeListener(this.setSignedUpListInfo,this),ChampionshipManager.onGetRecentActionInfoEvent.removeListener(this.setRecentActionListInfo,this),ChampionshipManager.onRefreshMTTListEvent.removeListener(this.refreshMatchInfo,this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showHelpPanel,this),ChampionshipManager.OnGetRankListEvent.removeListener(this.setOutsRankInfo,this),ChampionshipManager.OnNewMTTPushEvent.removeListener(this.getNewMatchListInfo,this)},t.prototype.getNewMatchListInfo=function(){0==this.matchTab.lastIndex&&ChampionshipManager.reqGetMTTListInfo()},t.prototype.refreshMatchInfo=function(e){e.type==MTTRefreshType.MTTList?(ChampionshipManager.reqJoinedMTTList(),this.setMatchListInfo()):e.type==MTTRefreshType.MTTJOinNum&&(this.refreshMatchNumInfo(e.data,this.matchList),this.refreshMatchNumInfo(e.data,this.signedUpList))},t.prototype.getMatchDetail=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.matchList.selectedItem&&UIManager.showPanel(UIModuleName.ChampionshipInfoPanel,{championshipInfo:this.matchList.selectedItem})},t.prototype.getJoinMatchDetail=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.signedUpList.selectedItem&&!this.signedUpList.selectedItem.endTime?UIManager.showPanel(UIModuleName.ChampionshipInfoPanel,{championshipInfo:this.signedUpList.selectedItem}):AlertManager.showAlert("该赛事已经结束。")},t.prototype.setRecentActionListInfo=function(){this.spreadItemTS=null,this.childlist=null,ChampionshipManager.outsList&&ChampionshipManager.outsList.length>0?(this.hasResultGroup.visible=!0,this.noResultGroup.visible=!1,UIUtil.writeListInfo(this.resultList,ChampionshipManager.outsList,"recordId")):(this.noResultGroup.visible=!0,this.hasResultGroup.visible=!1)},t.prototype.setMatchListInfo=function(){ChampionshipManager.showMTTList&&ChampionshipManager.showMTTList.length>0?(this.hasMatchGroup.visible=!0,this.noMatchGroup.visible=!1,UIUtil.writeListInfo(this.matchList,ChampionshipManager.showMTTList,"recordId",!1,SortUtil.matchStartTimeSort)):(this.noMatchGroup.visible=!0,this.hasMatchGroup.visible=!1),1==this.matchTab.lastIndex&&ChampionshipManager.reqJoinedMTTList()},t.prototype.refreshMatchNumInfo=function(e,t){if(e)for(var n=0;n<e.length;n++)for(var i=0;i<t.numChildren;i++){var a=t.getChildAt(i);if(a.bindData.recordId==e[n].id){a.updateData();break}}},t.prototype.setSignedUpListInfo=function(){ChampionshipManager.joinMTTList&&ChampionshipManager.joinMTTList.length>0?(this.hasSignedUpGroup.visible=!0,this.noSignedUpGroup.visible=!1,UIUtil.writeListInfo(this.signedUpList,ChampionshipManager.joinMTTList,"recordId")):(this.noSignedUpGroup.visible=!0,this.hasSignedUpGroup.visible=!1)},t.prototype.setMyTicketListInfo=function(){var e;e=ItemManager.getItemListByType(ItemType.Ticket),e&&e.length>0?(this.hasTicketGroup.visible=!0,this.noTicketGroup.visible=!1,UIUtil.writeListInfo(this.ticketList,e,"id",!1,SortUtil.TicketIdSort)):(this.hasTicketGroup.visible=!1,this.noTicketGroup.visible=!0)},t.prototype.onTabClickHandler=function(e){0==e?ChampionshipManager.reqGetMTTListInfo():1==e?ChampionshipManager.reqJoinedMTTList():2==e?this.setMyTicketListInfo():3==e&&ChampionshipManager.reqGetRecentActionInfo()},t.prototype.showHelpPanel=function(){SoundManager.playEffect(MusicAction.buttonClick),UIManager.showPanel(UIModuleName.TextInfoPanel,TextFixedId.PlayWay)},t.prototype.setOutsRankInfo=function(e){for(var t,n=ChampionshipManager.getOutsInfoByRecordId(e),i=0;i<this.resultList.numChildren;i++)if(t=this.resultList.getChildAt(i),t.bindData.recordId==e?this.spreadItemTS?this.spreadItemTS==t.dirBtn?t.dirBtn.selected=!t.dirBtn.selected:(this.childlist&&(this.childlist.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.cancelBubble,this),this.spreadItemTS.parent.removeChild(this.childlist),this.spreadItemTS.parent.height=this.spreadItemTS.parent.height-this.childlist.height,this.childlist=null),this.spreadItemTS.selected=!1,this.spreadItemTS=t.dirBtn,t.dirBtn.selected=!0):(this.spreadItemTS=t.dirBtn,t.dirBtn.selected=!0):t.dirBtn.selected=!1,1==t.dirBtn.selected)this.createChild(t,n);else if(this.spreadItemTS&&this.childlist){var a=this.spreadItemTS.parent;t.bindData.recordId==a.bindData.recordId&&this.delChild()}},t.prototype.createChild=function(e,t){UIUtil.bindRender(e.list,OutsChildItemRenderer),e.list.useVirtualLayout=!0,e.list.width=720;var n=new eui.VerticalLayout;n.gap=1,e.list.layout=n;var i=new Array;if(t&&t.rankList)for(var a=1;a<t.rankList.length;a++)i[a-1]=t.rankList[a];e.list.dataProvider=new eui.ArrayCollection(i),e.list.y=e.height,e.list.height=64*i.length,e.list.bottom=1,e.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cancelBubble,this),this.childlist=e.list,e.addChild(e.list),e.height=e.list.height+e.height},t.prototype.delChild=function(){var e=this.spreadItemTS.parent;e.list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.cancelBubble,this),this.childlist=null,e.height=e.height-e.list.height,e.removeChild(e.list)},t.prototype.cancelBubble=function(e){e.stopImmediatePropagation()},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BasePanel);__reflect(ChampionshipPanel.prototype,"ChampionshipPanel");var ChangeUserNamePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.ChangeUserNamePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.nameTextLabel.text=UserManager.userInfo.name},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),UserManager.onCreateRoleEvent.addListener(this.onChangeComplete,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),UserManager.onCreateRoleEvent.removeListener(this.onChangeComplete,this)},t.prototype.clickHandler=function(e){switch(SoundManager.playButtonEffect(e.target),e.target){case this.randomBtn:this.nameTextLabel.text=UserUtil.randomNickName(UserManager.userInfo.sex);break;case this.changeNameBtn:if(this.nameTextLabel.text==UserManager.userInfo.name){UIManager.showFloatTips("请输入一个新的昵称");break}UserUtil.isLegalNickName(this.nameTextLabel.text)&&UserManager.editUserName(this.nameTextLabel.text)}},t.prototype.onChangeComplete=function(){this.tweenClose(),UIManager.showFloatTips("修改成功")},t}(BasePanel);__reflect(ChangeUserNamePanel.prototype,"ChangeUserNamePanel");var ChatPanel=function(e){function t(){var t=e.call(this)||this;return t._listItemHeight=63,t._hornItemId=401,t._hornAwardId=6,t.setSkinName(UIModuleName.ChatPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,UIUtil.listRenderer(this.list,this.scroller,ChatItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.faceList,this.faceScroller,FaceItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.fastList,this.fastScroller,FastChatItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.scroller.scrollPolicyH=this.faceScroller.scrollPolicyH=this.fastScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.disGroup.visible=this.fastGroup.visible=!1,this.faceGroup.visible=!0,this.fastChatFlag=!0,this.faceTB.selected=!0,this.fastEnterTB.selected=!1,UIManager.pushResizeGroup(this.actionGroup),UIManager.pushResizeScroller(this.scroller,680)},t.prototype.init=function(t){e.prototype.init.call(this,t),ChatManager.clearNewMsg(),this.setFace(),this.setHornNum()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),SceneManager.sceneType==SceneType.Game&&GamblingManager.self||SceneManager.sceneType==SceneType.HundredWar&&HundredWarManager.getPlayerInfo(UserManager.userInfo.roleId)?this.disGroup.visible=!1:this.disGroup.visible=!0,this.onResize(),this.refreshUI()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),this.faceTB.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeActive,this),this.writeLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onWriteLabelClick,this),this.writeLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.writeLabelFocueout,this),this.writeLabel.addEventListener(egret.Event.CHANGE,this.checkForbid,this),this.scroller.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePanel,this),this.faceList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onFaceClick,this),this.fastList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onFastChatClick,this),ChatManager.onNewMessageCome.addListener(this.setChatInfo,this),ChatManager.OnMessageSend.addListener(this.showChatMsg,this),this.fastEnterTB.addEventListener(egret.TouchEvent.TOUCH_TAP,this.setFastChatInfo,this),this.sendTB.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendMsg,this),this.scroller.addEventListener(egret.Event.RESIZE,this.onResize,this),this.hornTB.addEventListener(egret.TouchEvent.TOUCH_TAP,this.setPromptInfo,this),AwardManager.OnAwardValueChanged.addListener(this.onUseHornSuccess,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),this.faceTB.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeActive,this),this.writeLabel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onWriteLabelClick,this),this.writeLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.writeLabelFocueout,this),this.writeLabel.removeEventListener(egret.Event.CHANGE,this.checkForbid,this),this.scroller.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePanel,this),this.faceList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onFaceClick,this),this.fastList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onFastChatClick,this),ChatManager.onNewMessageCome.removeListener(this.setChatInfo,this),ChatManager.OnMessageSend.removeListener(this.showChatMsg,this),this.fastEnterTB.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.setFastChatInfo,this),this.sendTB.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sendMsg,this),this.scroller.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.hornTB.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.setPromptInfo,this),AwardManager.OnAwardValueChanged.removeListener(this.onUseHornSuccess,this)},t.prototype.setHornNum=function(){this.hornTB.desLabel.text=this.getHornNum().toString(),this.resetHorn()},t.prototype.getHornNum=function(){var e;e=ItemManager.getItemListByType(ItemType.Horn);var t=0;return e&&e.length>0&&(t=e[0].count),t},t.prototype.resetHorn=function(){this.hornTB.selected=!1,this.setPromptInfo()},t.prototype.setPromptInfo=function(){1==this.hornTB.selected?this.writeLabel.prompt="请在此输入小喇叭内容。":this.writeLabel.prompt=""},t.prototype.onUseHornSuccess=function(e){e==this._hornAwardId&&this.closePanel()},t.prototype.checkForbid=function(){this.writeLabel.text&&(this.writeLabel.text=UserUtil.replaceForbidden(this.writeLabel.text))},t.prototype.onFastChatClick=function(e){SceneManager.sceneType==SceneType.Game&&GamblingManager.self||SceneManager.sceneType==SceneType.HundredWar?this.fastList.selectedItem&&ChatManager.SendChatMessage(this.fastList.selectedItem.des,ChatMessageType.InRoom):this.closePanel()},t.prototype.setFastChatInfo=function(){this.faceTB.selected=!1,this.resetHorn(),this.fastEnterTB.selected=!0,this.fastChatFlag&&(this.fastList.dataProvider=new eui.ArrayCollection(FastChatDefined.GetInstance().dataList),this.fastChatFlag=!1)},t.prototype.showChatMsg=function(e){this.closePanel()},t.prototype.sendMsg=function(e){if(SceneManager.sceneType==SceneType.Game&&GamblingManager.self||SceneManager.sceneType==SceneType.HundredWar){var t=this.writeLabel.text.trim();if(t)if(this.hornTB.selected)this.userHorn();else{var n=/\#/g;t=t.replace(n,qin.StringConstants.Empty),ChatManager.SendChatMessage(t,ChatMessageType.InRoom)}}else this.closePanel();this.writeLabel.text=""},t.prototype.userHorn=function(){AwardManager.IsToLimitClient(this._hornAwardId)?UIManager.showFloatTips("您今天发送小喇叭次数已用完，请明天再试！"):this.getHornNum()>0?ItemManager.reqUseItem(this._hornItemId,1,this.writeLabel.text.trim()):UIManager.showFloatTips("您还没有小喇叭，不可进行发送！")},t.prototype.onFaceClick=function(e){this.faceList.selectedItem&&(ChatManager.SendChatMessage(ChatSpecialStrings.Emoji+this.faceList.selectedItem.id,ChatMessageType.InRoom),this.closePanel())},t.prototype.onWriteLabelClick=function(){qin.RuntimeTypeName.getCurrentName()==qin.RuntimeTypeName.Android&&(this.parent.y=-150),this.writeLabel.setFocus()},t.prototype.writeLabelFocueout=function(){qin.RuntimeTypeName.getCurrentName()==qin.RuntimeTypeName.Android&&(this.parent.y=0)},t.prototype.changeActive=function(){this.fastGroup.visible=!1,this.faceGroup.visible=!0,this.faceTB.selected=!0,this.fastEnterTB.selected=!1,this.resetHorn(),SceneManager.sceneType==SceneType.Game&&GamblingManager.self||SceneManager.sceneType==SceneType.HundredWar&&HundredWarManager.getPlayerInfo(UserManager.userInfo.roleId)?this.disGroup.visible=!1:this.disGroup.visible=!0},t.prototype.setFace=function(){if(ChatManager.faceList||(ChatManager.faceList=new Array),ChatManager.faceList.length<=0){for(var e=1;24>=e;e++)ChatManager.faceList[e-1]=new Emoji,ChatManager.faceList[e-1].id=e,ChatManager.faceList[e-1].source=e+ResSuffixName.PNG;this.faceList.dataProvider=new eui.ArrayCollection(ChatManager.faceList)}},t.prototype.onClickHandler=function(e){switch(SoundManager.playButtonEffect(e.target),e.target){case this.fastEnterTB:this.fastGroup.visible=!0,this.faceGroup.visible=!1;break;case this.keyBoradGroup:this.closePanel()}},t.prototype.setChatInfo=function(){ChatManager.chatList.length>0&&this.refreshUI()},t.prototype.refreshUI=function(){UIUtil.writeListInfo(this.list,ChatManager.chatList),this.list.validateNow(),this.setScrollV()},t.prototype.setScrollV=function(){ChatManager.chatList.length>=this._rows&&(this.scroller.viewport.scrollV=(ChatManager.chatList.length-this._rows+1)*this._listItemHeight)},t.prototype.onResize=function(){this._scrollerHeight=this.scroller.height,this._rows=Math.ceil(this._scrollerHeight/this._listItemHeight)},t.prototype.closePanel=function(){UIManager.closePanel(UIModuleName.ChatPanel)},t}(BasePanel);__reflect(ChatPanel.prototype,"ChatPanel");var CreateRolePanel=function(e){function t(){var t=e.call(this)||this;return t.radioGroup=new eui.RadioButtonGroup,t.layer=UILayerType.Tips,t.setSkinName(UIModuleName.CreateRolePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.nickNameLable.type=egret.TextFieldType.INPUT,this.manRadioBtn.label="男",this.manRadioBtn.value=Sex.Male,this.manRadioBtn.selected=!0,this.sex=this.manRadioBtn.value,this.manRadioBtn.group=this.radioGroup,this.womanRadioBtn.label="女",this.womanRadioBtn.value=Sex.Female,this.womanRadioBtn.group=this.radioGroup},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.nickNameLable.text=UserUtil.randomNickName(this.sex)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.radioGroup.addEventListener(eui.UIEvent.CHANGE,this.sexRadioChangeHandler,this),this.manRadioBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sexRadioClickHandler,this),this.womanRadioBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sexRadioClickHandler,this),this.randomBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.randomNameHandler,this),this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.radioGroup.removeEventListener(eui.UIEvent.CHANGE,this.sexRadioChangeHandler,this),this.manRadioBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sexRadioClickHandler,this),this.womanRadioBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sexRadioClickHandler,this),this.randomBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.randomNameHandler,this),this.enterBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterHandler,this)},t.prototype.sexRadioChangeHandler=function(e){var t=e.target;this.sex=t.selectedValue,this.nickNameLable.text=UserUtil.randomNickName(this.sex)},t.prototype.sexRadioClickHandler=function(e){SoundManager.playButtonEffect(e.target)},t.prototype.randomNameHandler=function(e){SoundManager.playButtonEffect(e.target),this.nickNameLable.text=UserUtil.randomNickName(this.sex)},t.prototype.enterHandler=function(e){SoundManager.playButtonEffect(e.target),UserUtil.isLegalNickName(this.nickNameLable.text)&&UserManager.reqCreateRole(this.nickNameLable.text,this.sex)},t}(BasePanel);__reflect(CreateRolePanel.prototype,"CreateRolePanel");var CreateRoomPwdPanel=function(e){function t(){var t=e.call(this,!0)||this;return t.setSkinName(UIModuleName.CreateRoomPwdPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.setAlignInfo(PanelAlignType.Center_Center),this.isShowKeyBoardPanel=!1},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.goldLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold),this.getMaxCarrayInfo()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.createBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.createRoom,this),this.labelGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeIndex,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),PlayingFieldManager.onKeyBoardCloseEvent.addListener(this.restoreY,this),this.blindHS.addEventListener(egret.Event.CHANGE,this.chooseBlind,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.createBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.createRoom,this),this.labelGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeIndex,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),PlayingFieldManager.onKeyBoardCloseEvent.removeListener(this.restoreY,this),this.blindHS.removeEventListener(egret.Event.CHANGE,this.chooseBlind,this),this.restoreY()},t.prototype.enterPwd=function(e,t){if(t){var n=this.getUnWriteLabel();n&&n.refresh(parseInt(t))}if(2==e){var i=this.getWirteLabel();i&&i.refresh()}else 3==e&&this.resetLabel()},t.prototype.chooseBlind=function(){var e=PlayingFieldManager.maxCarryList[this.blindHS.value];this.blindLabel.text=qin.MathUtil.formatNum(e.sBlind)+"/"+qin.MathUtil.formatNum(e.bBlind),this.sBuyLabel.text=qin.MathUtil.formatNum(e.sBuyin),this.setAnte(e.id)},t.prototype.setAnte=function(e){var t=RoomDefined.GetInstance().getDefinition(e);t&&(this.ante1ToggleSwitch.label=qin.MathUtil.formatNum(t.ante[0]),this.ante2ToggleSwitch.label=qin.MathUtil.formatNum(t.ante[1]),this.ante3ToggleSwitch.label=qin.MathUtil.formatNum(t.ante[2]),this.ante4ToggleSwitch.label=qin.MathUtil.formatNum(t.ante[3])),this.ante=0,this.selectedAnte&&(this.selectedAnte.selected=!1,this.ante1ToggleSwitch.selected=!0,this.selectedAnte=this.ante1ToggleSwitch),PlayingFieldManager.selectedId=e},t.prototype.reset=function(){PlayingFieldManager.maxCarryList&&(PlayingFieldManager.selectedId=PlayingFieldManager.maxCarryList[0].id,this.ante1ToggleSwitch.label=qin.MathUtil.formatNum(PlayingFieldManager.maxCarryList[0].ante[0]),this.ante2ToggleSwitch.label=qin.MathUtil.formatNum(PlayingFieldManager.maxCarryList[0].ante[1]),this.ante3ToggleSwitch.label=qin.MathUtil.formatNum(PlayingFieldManager.maxCarryList[0].ante[2]),this.ante4ToggleSwitch.label=qin.MathUtil.formatNum(PlayingFieldManager.maxCarryList[0].ante[3])),this.selectedAnte&&(this.selectedAnte.selected=!1),this.ante=0,this.ante1ToggleSwitch.selected=!0,this.selectedAnte=this.ante1ToggleSwitch
},t.prototype.onClickHandler=function(e){switch(SoundManager.playEffect(MusicAction.buttonClick),e.target){case this.ante1ToggleSwitch:this.ante=this.changeToNum(this.ante1ToggleSwitch.label),this.changSelectAnte(this.ante1ToggleSwitch);break;case this.ante2ToggleSwitch:this.ante=this.changeToNum(this.ante2ToggleSwitch.label),this.changSelectAnte(this.ante2ToggleSwitch);break;case this.ante3ToggleSwitch:this.ante=this.changeToNum(this.ante3ToggleSwitch.label),this.changSelectAnte(this.ante3ToggleSwitch);break;case this.ante4ToggleSwitch:this.ante=this.changeToNum(this.ante4ToggleSwitch.label),this.changSelectAnte(this.ante4ToggleSwitch)}},t.prototype.changSelectAnte=function(e){this.selectedAnte?e!=this.selectedAnte?(this.selectedAnte.selected=!1,e.selected=!0,this.selectedAnte=e):this.selectedAnte.selected=!this.selectedAnte.selected:(e.selected=!0,this.selectedAnte=e)},t.prototype.changeToNum=function(e){var t=e.indexOf("万"),n=e.indexOf("亿");return-1==t&&-1==n?parseInt(e):-1!=t?1e4*parseInt(e):-1!=n?1e8*parseInt(e):null},t.prototype.changeIndex=function(){UIManager.showPanel(UIModuleName.KeyBoardPanel,{callback:this.callback,target:this,isbgNotCanClick:!1}),this.verticalCenter=-300},t.prototype.getMaxCarrayInfo=function(){var e=RoomDefined.GetInstance().getInfoByType(PlayingFieldType.Personal);e&&(PlayingFieldManager.maxCarryList=e,this.reset()),this.blindHS.maximum=e.length-1,this.blindHS.value=0;var t=new RoomDefinition;t=e[0],this.setAnte(e[0].id),this.blindLabel.text=qin.MathUtil.formatNum(t.sBlind)+"/"+qin.MathUtil.formatNum(t.bBlind),this.sBuyLabel.text=qin.MathUtil.formatNum(t.sBuyin)},t.prototype.createRoom=function(e){SoundManager.playButtonEffect(e.target);var t=this.getRoomPwd();if(""==t)return void AlertManager.showAlert("请先输入6位数的密码再创建房间！");if(t&&t.length<6)return void AlertManager.showAlert("请先输入6位数的密码再创建房间！");if(void 0!=PlayingFieldManager.selectedId){var n=RoomDefined.GetInstance().getDefinition(PlayingFieldManager.selectedId);if(n&&UserManager.userInfo.gold<n.sBuyin)return void AlertManager.showAlert("您的金币不足"+qin.MathUtil.formatNum(n.sBuyin)+",请补充金币或者选择较低场次。");PlayingFieldManager.reqCreatePersonalRoom(PlayingFieldManager.selectedId,t,this.ante)}else AlertManager.showAlert("请选择盲注级别！")},t.prototype.restoreY=function(){this.verticalCenter=0},t}(EnterRoomPwdPanel);__reflect(CreateRoomPwdPanel.prototype,"CreateRoomPwdPanel");var EditUserInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.EditUserInfoPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.sexButtonGroup=new eui.RadioButtonGroup,this.sexMaleButton.group=this.sexButtonGroup,this.sexMaleButton.value=Sex.Male,this.sexFemaleButton.group=this.sexButtonGroup,this.sexFemaleButton.value=Sex.Female,this.sexUnkonwnButton.group=this.sexButtonGroup,this.sexUnkonwnButton.value=Sex.Unknown,this._headInfo=new SimpleHeadInfo},t.prototype.init=function(t){e.prototype.init.call(this,t),this.sexButtonGroup.selectedValue=UserManager.userInfo.sex,this.ageLabel.inputType=egret.TextFieldInputType.TEL,this.ageLabel.restrict="0-9",this.ageLabel.maxChars=2},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.refreshInfo()},t.prototype.refreshInfo=function(){this.refreshHead(),this.ageLabel.text=UserManager.userInfo.age.toString(),this.sexLabel.text=this.sexButtonGroup.getRadioButtonAt(UserManager.userInfo.sex).label},t.prototype.refreshHead=function(){qin.StringUtil.isNullOrEmpty(UserManager.userInfo.verifyHead)?this._headInfo.head=UserManager.userInfo.head:this._headInfo.head=UserManager.userInfo.verifyHead,this._headInfo.sex=UserManager.userInfo.sex,this.userHeadComp.init(this._headInfo),this.addheadlabel.visible=!1,this.verifyLabel.visible=!1,this.userHeadComp.touchEnabled=!0,UserManager.userInfo.isHeadVerify?(this.headMask.visible=!0,this.verifyLabel.text="审核中",this.verifyLabel.visible=!0,this.userHeadComp.touchEnabled=!1):UserManager.userInfo.isHeadUnPass?(this.headMask.visible=!0,this.verifyLabel.text="未通过",this.verifyLabel.visible=!0):(this.headMask.visible=!1,this.addheadlabel.visible=!1)},t.prototype.reqSaveEdit=function(){var e=null,t=void 0,n=void 0;this.sexButtonGroup.selectedValue!=UserManager.userInfo.sex&&(t=this.sexButtonGroup.selectedValue),this.ageLabel.text!=qin.StringConstants.Empty&&parseInt(this.ageLabel.text)!=UserManager.userInfo.age&&(n=parseInt(this.ageLabel.text)),UserManager.reqSetUserInfo(e,t,n)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),this.sexButtonGroup.addEventListener(egret.Event.CHANGE,this.changeActive,this),UploadHeadManager.OnUploadHeadUpdate.addListener(this.refreshHead,this),UserManager.headImageUpdateEvent.addListener(this.refreshHead,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),this.sexButtonGroup.removeEventListener(egret.Event.CHANGE,this.changeActive,this),UserManager.headImageUpdateEvent.removeListener(this.refreshHead,this),UploadHeadManager.OnUploadHeadUpdate.removeListener(this.refreshHead,this),UploadHeadManager.clear()},t.prototype.clickHandler=function(e){switch(SoundManager.playButtonEffect(e.target),this.sexGroup.visible&&(this.sexGroup.visible=!1),e.target){case this.closeButton:this.reqSaveEdit();break;case this.sexLabel:case this.showSexSelect:this.sexGroup.visible=!0;break;case this.userHeadComp:UploadHeadManager.selectHead()}},t.prototype.changeActive=function(e){this.sexLabel.text=this.sexButtonGroup.selection.label},t}(BasePanel);__reflect(EditUserInfoPanel.prototype,"EditUserInfoPanel");var SimpleHeadInfo=function(){function e(){}return e}();__reflect(SimpleHeadInfo.prototype,"SimpleHeadInfo",["IBaseHead"]);var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?i(a):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var FirstPayPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.FirstPayPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){if(e.prototype.init.call(this,t),InfoUtil.checkAvailable(this.activityInfo)&&0==this.itemGroup.numChildren){for(var n=0;n<this.activityInfo.subList.length;n++)if(this.activityInfo.subList[n].id==ActivityId.FirstPay){var i=this.activityInfo.subList[n].definition,a=AwardDefined.GetInstance().getDefinition(i.awardId);if(a)for(var o=0,r=a.rewardList;o<r.length;o++){var s=r[o],l=new FirstPayItemComponent(UIComponentSkinName.FirstPayItemComponent);l.init(s),this.itemGroup&&this.itemGroup.addChild(l)}i&&(this.deslabel2.text=i.des)}this.deslabel1.text=this.activityInfo.definition.des}ActivityManager.payPrizeHandler.getIsFirstPay(ActivityId.FirstPay)?this.prizeBtn.visible=!1:this.prizeBtn.visible=!0},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.prizeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPrizeBtnClick,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.prizeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onPrizeBtnClick,this)},t.prototype.onPrizeBtnClick=function(e){JumpUtil.JumpToShopping(ShopGroupIndex.Gold,UIModuleName.GameHallPanel),UIManager.closePanel(this),UIManager.closePanel(UIModuleName.GameHallPanel)},t}(BaseActivityPanel);__reflect(FirstPayPanel.prototype,"FirstPayPanel");var FriendMsgPanel=function(e){function t(){var t=e.call(this)||this;return t.isTween=!1,t.layer=UILayerType.Tips,t.setSkinName(UIModuleName.FriendMsgPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t)},t.prototype.init=function(t){e.prototype.init.call(this,t),qin.Tick.RemoveSecondsInvoke(this.onTimeRefresf,this),qin.Tick.AddSecondsInvoke(this.onTimeRefresf,this),this.refreshUI(t),this.tweenGp.y=-100,egret.Tween.get(this.tweenGp).to({y:0},600,egret.Ease.backOut),SoundManager.playEffect(MusicAction.notice)},t.prototype.refreshUI=function(e){this._requestInfo=e,this._requestInfo&&(this._requestInfo.type==FriendMsgType.InviteMsg?(this.inviteMsg_bg.visible=!0,this.requireMsg_bg.visible=!1):this._requestInfo.type==FriendMsgType.RequireMsg&&(this.inviteMsg_bg.visible=!1,this.requireMsg_bg.visible=!0))},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),qin.Tick.RemoveSecondsInvoke(this.onTimeRefresf,this)},t.prototype.clickHandler=function(e){if(this._requestInfo){switch(this._requestInfo.type){case FriendMsgType.InviteMsg:UIManager.showPanel(UIModuleName.InviteMsgPanel,this._requestInfo.info);break;case FriendMsgType.RequireMsg:SceneManager.sceneType==SceneType.Hall?UIManager.showPanel(UIModuleName.FriendPanel,{tabFlag:FriendUIType.RequestList}):UIManager.showPanel(UIModuleName.FriendPanel,{tabFlag:FriendUIType.RequestList,prevPanelName:UIModuleName.None})}this.removeFriendMsg()}},t.prototype.removeFriendMsg=function(){if(this._requestInfo){FriendManager.removeFriendMsgInfo(this._requestInfo);var e=FriendManager.getFriendMsgInfo();e?this.refreshUI(e):this.onCloseBtnClickHandler(null)}},t.prototype.onTimeRefresf=function(){if(this._requestInfo&&this._requestInfo.time&&TimeManager.GetServerUtcTimestamp()-this._requestInfo.time>FriendManager.msgTime){var e=FriendManager.getFriendMsgInfo();e?this.init({type:e.type,data:e.info,time:e.time}):this.onCloseBtnClickHandler(null)}},t.prototype.friendInviteHandler=function(){this.onCloseBtnClickHandler(null)},t}(BasePanel);__reflect(FriendMsgPanel.prototype,"FriendMsgPanel");var FriendPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.FriendPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,this.searchText.maxChars=15,UIUtil.listRenderer(this.list,this.scroller,FriendItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.giftList,this.giftScroller,GiftItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.requestList,this.requestScroller,FriendRequestItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.addList,this.addScroller,AddFriendItemRenderer,ScrollViewDirection.Vertical_T_D),this.scroller.scrollPolicyH=this.giftScroller.scrollPolicyH=this.requestScroller.scrollPolicyH=this.addScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.hasFriendGroup.visible=!1,this.noFriendGroup.visible=!1,this.hasGiftGroup.visible=!1,this.noGiftGroup.visible=!1,this.hasRequestGroup.visible=!1,this.noRequestGroup.visible=!1;var n=new Array;n.push(this.tabGroup),n.push(this.giftTabGroup),n.push(this.requestTabGroup),n.push(this.addTabGroup),this.friendTabCompontent.build(TabComponent.CreatData(["好友","收到礼物","好友请求","添加"],n,TabButtonType.BigOf4)),egret.callLater(this.addRedPoint,this),UIManager.pushResizeGroup(this.actionBtnGroup),UIManager.pushResizeScroller(this.scroller,1070),UIManager.pushResizeScroller(this.giftScroller,880),UIManager.pushResizeScroller(this.requestScroller,1070),UIManager.pushResizeScroller(this.noFriendGroup,1070),UIManager.pushResizeScroller(this.noGiftGroup,880),UIManager.pushResizeScroller(this.noRequestGroup,1070)},t.prototype.addRedPoint=function(){var e=this.friendTabCompontent.getBtnByLabel("收到礼物");UIUtil.addSingleNotify(e,NotifyType.Friend_ReceivePrize,8,10),e=this.friendTabCompontent.getBtnByLabel("好友请求"),UIUtil.addSingleNotify(e,NotifyType.Friend_HaveNew,8,10)},t.prototype.init=function(t){e.prototype.init.call(this,t),this._tabFlag=FriendUIType.FriendList,t&&t.tabFlag&&(this._tabFlag=t.tabFlag),this.friendTabCompontent.init(0),this._tabFlag&&this.friendTabCompontent.setSelectIndex(this._tabFlag-1),this.inviteGroup.visible=qin.System.isWeChat||ChannelManager.loginType==ChannelLoginType.Weixin,this.setFriendListInfo(),this.setFriendRequestList(),this.setGiftListInfo()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListClickHandler,this),this.addList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onAddListClickHandler,this),this.requestList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onRequestListClickHandler,this),this.inviteLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.inviteFriend,this),this.friendTabCompontent.tabChangeEvent.addListener(this.onTabClickHandler,this),FriendManager.onReceiveGiftEvent.addListener(this.receiveGiftSuccess,this),this.fastReceiveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fastReceive,this),FriendManager.onFriendRequestEvent.addListener(this.setFriendRequestList,this),FriendManager.onReceiveFriendRequestEvent.addListener(this.refreshFriendRequestList,this),this.searchBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.searchPlayer,this),this.searchText.addEventListener(eui.UIEvent.CHANGE,this.searchTextChange,this),FriendManager.onSearchPlayerEvent.addListener(this.setAddList,this),FriendManager.onRemovePlayerEvent.addListener(this.removePlayerSuccess,this),FriendManager.onRefreshInfoEvent.addListener(this.refreshUI,this),FriendManager.onGetFriendListEvent.addListener(this.setFriendListInfo,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListClickHandler,this),this.addList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onAddListClickHandler,this),this.requestList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onRequestListClickHandler,this),this.inviteLabel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.inviteFriend,this),this.friendTabCompontent.tabChangeEvent.removeListener(this.onTabClickHandler,this),FriendManager.onReceiveGiftEvent.removeListener(this.receiveGiftSuccess,this),this.fastReceiveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.fastReceive,this),FriendManager.onFriendRequestEvent.removeListener(this.setFriendRequestList,this),FriendManager.onReceiveFriendRequestEvent.removeListener(this.refreshFriendRequestList,this),this.searchBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.searchPlayer,this),this.searchText.removeEventListener(eui.UIEvent.CHANGE,this.searchTextChange,this),FriendManager.onSearchPlayerEvent.removeListener(this.setAddList,this),FriendManager.onRemovePlayerEvent.removeListener(this.removePlayerSuccess,this),FriendManager.onRefreshInfoEvent.removeListener(this.refreshUI,this),FriendManager.onGetFriendListEvent.removeListener(this.setFriendListInfo,this)},t.prototype.refreshUI=function(){FriendManager.refreshUIFlag==FriendUIType.FriendList?(this.setFriendListInfo(),this.setGiftListInfo()):FriendManager.refreshUIFlag==FriendUIType.GiftList?this.setGiftListInfo():FriendManager.refreshUIFlag==FriendUIType.RequestList&&this.setFriendRequestList()},t.prototype.removePlayerSuccess=function(){FriendManager.friendList.length<=0&&(this.hasFriendGroup.visible=!1,this.noFriendGroup.visible=!0),UIUtil.writeListInfo(this.list,FriendManager.friendList,"roleId",!1,SortUtil.friendSort)},t.prototype.searchTextChange=function(e){this.searchText.text.trim().length<=0?this.searchBtn.visible=!1:this.searchBtn.visible=!0},t.prototype.setAddList=function(){FriendManager.searchList&&FriendManager.searchList.length>0&&UIUtil.writeListInfo(this.addList,FriendManager.searchList,"roleId")},t.prototype.searchPlayer=function(e){SoundManager.playButtonEffect(e.target),this.searchText.text.trim().length>0&&FriendManager.reqSearchPlayer(this.searchText.text.trim())},t.prototype.refreshFriendRequestList=function(){FriendManager.requestFriendList.length>0?UIUtil.writeListInfo(this.requestList,FriendManager.requestFriendList,"roleId"):(this.noRequestGroup.visible=!0,this.hasRequestGroup.visible=!1)},t.prototype.setFriendRequestList=function(){FriendManager.requestFriendList&&FriendManager.requestFriendList.length>0?(UIUtil.writeListInfo(this.requestList,FriendManager.requestFriendList,"roleId"),this.hasRequestGroup.visible=!0,this.noRequestGroup.visible=!1):(this.noRequestGroup.visible=!0,this.hasRequestGroup.visible=!1)},t.prototype.fastReceive=function(e){SoundManager.playButtonEffect(e.target),FriendManager.reqReceiveGift(0)},t.prototype.receiveGiftSuccess=function(){FriendManager.giftList.length<=0&&(this.hasGiftGroup.visible=!1,this.noGiftGroup.visible=!0,this.fastReceiveBtn.enabled=!1),UIUtil.writeListInfo(this.giftList,FriendManager.giftList,"roleId"),AlertManager.showAlert("您已成功领取好友赠送的"+FriendManager.getGoldNum+"金币！")},t.prototype.onTabClickHandler=function(e){1==e?FriendManager.isGiftLisFirstOpen&&(this.setGiftListInfo(),FriendManager.isGiftLisFirstOpen=!1):2==e?FriendManager.isRequestLisFirstOpen&&(FriendManager.reqFriendRequest(),FriendManager.isRequestLisFirstOpen=!1):3==e?(this.searchText.text="",FriendManager.searchList=[],UIUtil.writeListInfo(this.addList,FriendManager.searchList,"roleId"),this.searchBtn.visible=!1):0==e&&this.setFriendListInfo()},t.prototype.inviteFriend=function(){SoundManager.playEffect(MusicAction.buttonClick),ChannelManager.share(ChannelShareType.WxMessage,ChannelManager.appName,qin.StringUtil.format("一直听说你的牌技不错，快来和我较量较量。我已经在玩{0}，你不来吗？",ChannelManager.appName))},t.prototype.onListClickHandler=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.list.selectedItem&&(UserManager.reqShowOtherUserInfoPanel(this.list.selectedItem.roleId),FriendManager.userInfoPanelStyle=3)},t.prototype.onAddListClickHandler=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.addList.selectedItem&&(UserManager.reqShowOtherUserInfoPanel(this.addList.selectedItem.roleId),FriendManager.isFriend(this.addList.selectedItem.roleId)?FriendManager.userInfoPanelStyle=3:FriendManager.userInfoPanelStyle=FriendInfoType.Send)},t.prototype.onRequestListClickHandler=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.requestList.selectedItem&&(UserManager.reqShowOtherUserInfoPanel(this.requestList.selectedItem.roleId),FriendManager.userInfoPanelStyle=FriendInfoType.Receive)},t.prototype.setFriendListInfo=function(){FriendManager.friendList&&FriendManager.friendList.length>0?(UIUtil.writeListInfo(this.list,FriendManager.friendList,"roleId",!1,SortUtil.friendSort),this.hasFriendGroup.visible=!0,this.noFriendGroup.visible=!1):(this.noFriendGroup.visible=!0,this.hasFriendGroup.visible=!1)},t.prototype.setGiftListInfo=function(){FriendManager.giftList&&FriendManager.giftList.length>0?(UIUtil.writeListInfo(this.giftList,FriendManager.giftList,"roleId"),this.hasGiftGroup.visible=!0,this.fastReceiveBtn.enabled=!0,this.noGiftGroup.visible=!1):(this.noGiftGroup.visible=!0,this.hasGiftGroup.visible=!1,this.fastReceiveBtn.enabled=!1)},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BasePanel);__reflect(FriendPanel.prototype,"FriendPanel");var GamblingPanel=function(e){function t(){var t=e.call(this)||this;return t._isNextRoundStart=!1,t._isOnAwaked=!1,t.isTween=!1,t.setSkinName(UIModuleName.GamblingPanel),t}return __extends(t,e),Object.defineProperty(t.prototype,"card1",{get:function(){return this._card1||this.createCard(1),this._card1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"card2",{get:function(){return this._card2||this.createCard(2),this._card2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"card3",{get:function(){return this._card3||this.createCard(3),this._card3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"card4",{get:function(){return this._card4||this.createCard(4),this._card4},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"card5",{get:function(){return this._card5||this.createCard(5),this._card5},enumerable:!0,configurable:!0}),t.prototype.createCard=function(e){this["_card"+e.toString()]=new CardFaceComponent(UIComponentSkinName.CardFaceComponent),this["_card"+e.toString()].scaleX=this["_card"+e.toString()].scaleY=.1,this["_card"+e.toString()].horizontalCenter=0,this["_card"+e.toString()].verticalCenter=-183.5,this["_card"+e.toString()].visible=!1;var t=this.currencyGroup.getChildIndex(this.anteGroup);this.currencyGroup.addChildAt(this["_card"+e.toString()],t)},Object.defineProperty(t.prototype,"cardList",{get:function(){if(!this._cardList){this._cardList=new Array;for(var e=1;e<=GamblingManager.MaxBoardNum;e++)this._cardList.push(this["card"+e.toString()])}return this._cardList},enumerable:!0,configurable:!0}),t.prototype.hideCard=function(){if(this._cardList)for(var e=this.cardList.length,t=0;e>t;t++)this.cardList[t].visible=!1},Object.defineProperty(t.prototype,"actionGroup",{get:function(){return this._actionGroup||(this._actionGroup=new GamblingActionComponent(UIComponentSkinName.GamblingActionComponent),this.addChildActionGroup()),this._actionGroup},enumerable:!0,configurable:!0}),t.prototype.actionGroupHideAll=function(e){this._actionGroup&&this._actionGroup.hideAll(e)},t.prototype.addChildActionGroup=function(){var e=this.currencyGroup.getChildIndex(this.buttonPosFlagImg);this._actionGroup.horizontalCenter=0,this._actionGroup.bottom=171,this.currencyGroup.addChildAt(this._actionGroup,e)},Object.defineProperty(t.prototype,"waitNextRoundComponent",{get:function(){return this._waitNextRoundComponent||(this._waitNextRoundComponent=new WaitNextRoundComponent(UIComponentSkinName.WaitNextRoundComponent),this._waitNextRoundComponent.horizontalCenter=0,this._waitNextRoundComponent.verticalCenter=-152,this._waitNextRoundComponent.init(null),this.currencyGroup.addChild(this._waitNextRoundComponent)),this._waitNextRoundComponent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panelState",{get:function(){return this._panelState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stateIndex",{get:function(){return this._stateIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sptCreater",{get:function(){return this._sptCreater},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(t){var n=this;e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.tweenGroup.visible=!1;var i=1,a=function(){i>GamblingPanelSetting.MaxPitIndex?n.delayAwake():(n["pit"+i.toString()]=new GamblingHeadComponent(UIComponentSkinName.GamblingHeadComponent),qin.Tick.AddTimeoutInvoke(a,100,n)),i++};this.currencyGroup.removeChild(this.allInAnimeGroup),qin.Tick.AddTimeoutInvoke(a,100,this),VersionManager.setComponentVisibleBySafe(this.safeBtn,this.activityBtn),this.recordBtn=new AudioRecordButton(this.audioRecordBtn,this)},t.prototype.delayAwake=function(){this.tweenGroup.visible=!0,this.pitList=new Array;for(var e,t=GamblingPanelSetting.MinPitIndex;t<=GamblingPanelSetting.MaxPitIndex;t++)e=new GamblingPitInfo,e.index=t,e.headComponent=this["pit"+t.toString()],e.headComponent.parentPanel=this,e.headComponent.posIndex=t,this.pitList.push(e);this.setPit(),this.allinAnime=new GamblingPanelAllinAnime(this);for(var n=this.currencyGroup.getChildIndex(this.buttonPosFlagImg),t=GamblingPanelSetting.MinPitIndex;t<=GamblingPanelSetting.MaxPitIndex;t++)this.currencyGroup.addChildAt(this["pit"+t.toString()],n-1);this.initShow(),this.addRedPoint(),this.currencyGroup.touchEnabled=!1,this.ordinaryRoomGroup.touchEnabled=!1,this._sptCreater=new GamblingSupportCreater(this),this._isOnAwaked=!0,this.onEnable(null),this.init(this.panelData)},t.prototype.addRedPoint=function(){if(UIUtil.addSingleNotify(this.onlineAwardBtn,NotifyType.Gambling_TimeAward,-7,-5),UIUtil.addSingleNotify(this.chatBtn,NotifyType.HundredWar_Chat,-7,-5),InfoUtil.checkAvailable(GamblingManager.roomInfo))switch(GamblingManager.roomInfo.definition.type){case PlayingFieldType.Primary:UIUtil.addSingleNotify(this.achieveBtn,NotifyType.Achieve_PrimaryPattern,-7,-5);break;case PlayingFieldType.Middle:UIUtil.addSingleNotify(this.achieveBtn,NotifyType.Achieve_MiddlePattern,-7,-5);break;case PlayingFieldType.High:UIUtil.addSingleNotify(this.achieveBtn,NotifyType.Achieve_HighPattern,-7,-5)}},t.prototype.init=function(t){e.prototype.init.call(this,t),this._isOnAwaked&&this.initPanel()},t.prototype.initPanel=function(){this._stateIndex=GamblingUtil.gamblingPanelStateIndex,this._stateIndex||(this._stateIndex=GamblingPanelStateIndex.Normal),this.initShow(),!this._actionGroup&&GamblingManager.self&&this.initActionGroup(),this._actionGroup&&!GamblingManager.self&&this.initActionGroup(),GamblingManager.isQuicklyEnter&&GamblingManager.reqQuicklyBuyInGame(),this.switchState(),ChannelManager.checkUnFinishedPayList(),this._isNextRoundStart=!1,UIManager.dispatchEvent(UIModuleName.GamblingPanel,UIModuleEvent.COMPLETE)},t.prototype.initActionGroup=function(){this.actionGroup.init(null),this.actionGroup.brightCardBtn.visible=!1,this.actionGroup.hideAll(!1),this.actionGroup.hidePreActionGroup(!1),this.actionGroup.visible=!0},t.prototype.tryAddChildActionGroup=function(){this._actionGroup&&(this.addChildActionGroup(),this._actionGroup.addChild(this._actionGroup.preActionGroup))},t.prototype.switchState=function(){this._panelState&&this._panelState.clear(),this._panelState=this.getState(),this._panelState.onEnable(),this._panelState.initialize(),this._panelState.run()},t.prototype.getState=function(){switch(this._stateIndex){case GamblingPanelStateIndex.Normal:return this._normalState||(this._sptCreater.createNormal(),this._normalState=new GamblingPanelNormalState(this,this._sptCreater.supportNormalList),this._normalState.onAwake()),this._normalState;case GamblingPanelStateIndex.MttWait:return this._mttWaitState||(this._sptCreater.createMttWait(),this._mttWaitState=new GamblingPanelMttWaitState(this,this._sptCreater.supportMttWaitList),this._mttWaitState.onAwake()),this._mttWaitState;case GamblingPanelStateIndex.Mtt:return this._mttState||(this._sptCreater.createMtt(),this._mttState=new GamblingPanelMttState(this,this._sptCreater.supportMttList),this._mttState.onAwake()),this._mttState;case GamblingPanelStateIndex.Guide:return this._guidState||(this._sptCreater.createGuide(),this._guidState=new GamblingPanelGuideState(this,this._sptCreater.supportGuideList),this._guidState.onAwake()),this._guidState;case GamblingPanelStateIndex.GuidePlayWay:return this._guidePlayWayState||(this._sptCreater.createGuidePlayWay(),this._guidePlayWayState=new GamblingPanelGuidePlayWayState(this,this._sptCreater.supportGuidePlayWayList),this._guidePlayWayState.onAwake()),this._guidePlayWayState;default:return qin.Console.logError("牌局面板状态异常！"+this._stateIndex),null}},t.prototype.switchToGameSceneInRoom=function(){this._isOnAwaked&&(this.onDisable(null),this.onEnable(null),this.initPanel())},t.prototype.initShow=function(){this._waitNextRoundComponent&&this._waitNextRoundComponent.show(!1);for(var e=GamblingPanelSetting.MinPitIndex;e<=GamblingPanelSetting.MaxPitIndex;e++)this["pit"+e.toString()].visible=!1;this.buttonPosFlagImg.visible=!1},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._isOnAwaked&&GamblingManager.NextRoundStartEvent.addListener(this.nextRoundStartHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._isOnAwaked&&(this._panelState&&this._panelState.onDisable(),this.resetPitIndex(),qin.Tick.RemoveTimeoutInvoke(this.delayHideGroup,this),GamblingManager.NextRoundStartEvent.removeListener(this.nextRoundStartHandler,this),this._actionGroup&&this.sptCreater.funcSupport&&this.sptCreater.funcSupport.removeActionGroupClickEvent())},t.prototype.hideSateGroup=function(e){void 0===e&&(e=!1),this._isNextRoundStart=!1,qin.Tick.RemoveTimeoutInvoke(this.delayHideGroup,this),qin.Tick.AddTimeoutInvoke(this.delayHideGroup,500,this,e)},t.prototype.nextRoundStartHandler=function(){this._isNextRoundStart=!0},t.prototype.delayHideGroup=function(e){if(void 0===e&&(e=!1),0==this._isNextRoundStart)for(var t=0,n=this.pitList;t<n.length;t++){var i=n[t];e?i.headComponent.bindData&&i.headComponent.bindData.state==PlayerState.WaitAction&&i.headComponent.showStateGroup(!1):i.headComponent.showStateGroup(!1)}},t.prototype.resetPitIndex=function(){for(var e,t=GamblingPanelSetting.MinPitIndex;t<=GamblingPanelSetting.MaxPitIndex;t++)e=this.pitList[t-1],e.index=t,e.headComponent.posIndex=t},t.prototype.clearPotChips=function(){this.potChipsGroup.visible=!1,this.potChipsGroup.dataList&&(this.potChipsGroup.dataList.length=0);for(var e=0;e<this.chipsBgGroup.numChildren;e++){var t=this.chipsBgGroup.getChildAt(e),n=this.chipsNumGroup.getChildAt(e);t.clear(),n.clear()}this.chipsBgGroup.removeChildren(),this.chipsNumGroup.removeChildren()},t.prototype.onClose=function(){e.prototype.onCloseBtnClickHandler.call(this,null)},t.prototype.setPit=function(){if(this.pitList)for(var e=this.pitList.length,t=void 0,n=0;e>n;n++)t=this.pitList[n],t&&t.headComponent.setPit(t.index)},t.prototype.getPlayerPos=function(e){return this._sptCreater.pitDataSupport.getPlayerPos(e)},t.prototype.getPitInfo=function(e){return this._sptCreater.pitDataSupport.getPitInfo(e)},t.prototype.getPitInfoByIndex=function(e){return this._sptCreater.pitDataSupport.getPitInfoByIndex(e)},t.prototype.getHeadComponent=function(e){return this._sptCreater.pitDataSupport.getHeadComponent(e)},t.prototype.getHeadComponentByRole=function(e){if(e instanceof PlayerInfo)return this._sptCreater.pitDataSupport.getHeadComponent(e.pos);var t=GamblingManager.getPlayerInfo(e);return t?this._sptCreater.pitDataSupport.getHeadComponent(t.pos):null},t.prototype.getHeadComponentByLastRoleId=function(e){for(var t=0,n=this.pitList;t<n.length;t++){var i=n[t];if(i.headComponent.lastRoleId==e)return i.headComponent}return null},t.prototype.getNextPlayerPitInfo=function(e){return this._sptCreater.pitDataSupport.getNextPlayerPitInfo(e)},t.prototype.getNextPlayerInfo=function(e){return this._sptCreater.pitDataSupport.getNextPlayerInfo(e)},t.prototype.getPitInfoByPlayerInfo=function(e){return this._sptCreater.pitDataSupport.getPitInfoByPlayerInfo(e)},Object.defineProperty(t.prototype,"downEffect",{get:function(){return this._downEffect||(this._downEffect=new DownEfffectComponent(UIComponentSkinName.DownEfffectComponent),this._downEffect.init()),this._downEffect},enumerable:!0,configurable:!0}),t.prototype.showDownEffect=function(e){this.downEffect.run(e)},t.prototype.hideDownEffect=function(){this.downEffect.init()},t.prototype.refreshButtonPos=function(){this._sptCreater.buttonPosSpt.initialize()},t.prototype.gameGroupMove=function(){this._sptCreater.moveSpt.move()},t.prototype.moveTouchEnd=function(e){return this.gameGroup.x>0?(this._sptCreater.moveSpt.onTouchBegin(e),this._sptCreater.moveSpt.onTouchEnd(e,!0),!0):!1},t.prototype.checkRebuyAddon=function(){this._sptCreater.championshipSupport.checkRebuyAddon()},t}(BasePanel);__reflect(GamblingPanel.prototype,"GamblingPanel");var GamblingReviewPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.GamblingReviewPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!0,this.maskAlpha=.5,UIUtil.listRenderer(this.reviewList,this.reviewScroller,GamblingReviewItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.reviewScroller.scrollPolicyH=eui.ScrollPolicy.OFF},t.prototype.init=function(t){e.prototype.init.call(this,t),this.reqReviewInfo()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),GamblingManager.gamblingReviewHandler.onGetAllPlayerInfoEvent.addListener(this.setPanelInfo,this)
},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),GamblingManager.gamblingReviewHandler.onGetAllPlayerInfoEvent.removeListener(this.setPanelInfo,this)},t.prototype.setPanelInfo=function(){GamblingManager.gamblingReviewHandler.reviewInfoList.length>0?(this.hasReviewGroup.visible=!0,this.noReviewGroup.visible=!1,GamblingManager.gamblingReviewHandler.reviewInfoList&&GamblingManager.gamblingReviewHandler.reviewInfoList.length>0&&UIUtil.writeListInfo(this.reviewList,GamblingManager.gamblingReviewHandler.reviewInfoList,"roleId")):(this.hasReviewGroup.visible=!1,this.noReviewGroup.visible=!0)},t.prototype.reqReviewInfo=function(){this.panelData&&GamblingManager.gamblingReviewHandler.reqReviewInfo(this.panelData)},t}(BasePanel);__reflect(GamblingReviewPanel.prototype,"GamblingReviewPanel");var GameHallPanel=function(e){function t(){var t=e.call(this)||this;return t.listNum=4,t.setSkinName(UIModuleName.GameHallPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.addRedPoint(),this.moreGroup.visible=!1,UIManager.pushResizeGroup(this.panelBottom),this._buttonAnime=new GameHallButtonAnime(this),this._panelAnime=new GameHallPanelAnime(this),this._rankListInfo=RankManager.getRankListInfo(RankType.FriendGold),VersionManager.setComponentVisibleBySafe(this.firstpayBtn,this.activityBtn,this.matchBtn,this.ranking,this.safeBoxBtn,this.vipGroup)},t.prototype.addRedPoint=function(){UIUtil.addSingleNotify(this.matchBtn,NotifyType.Mtt_HaveJoinedList,15,55),UIUtil.addSingleNotify(this.mailBtn,NotifyType.Mail_HaveNew,10,10),UIUtil.addSingleNotify(this.assignmentBtn,NotifyType.Achieve_HaveNoTake,-5,15),UIUtil.addSingleNotify(this.friendBtn,NotifyType.Friend_Hall,-5,25),UIUtil.addSingleNotify(this.monthCardBtn,NotifyType.MonthCard,-5,5),UIUtil.addSingleNotify(this.signBtn,NotifyType.Signin,10,10)},t.prototype.init=function(t){e.prototype.init.call(this,t),!UserManager.userInfo.name||UserManager.userInfo.name.length<=0?this.showCreateRolePanel():(GuideExecutor.checkGuide(),RankManager.isRefreshRank(this._rankListInfo)&&RankManager.reqRankList(RankManager.getListType(RankTabType.Gold,RankListType.Friend))),this.refreshUserInfoUI(),this.resetFreeGoldTime(),ChannelManager.checkUnFinishedPayList(),VersionManager.isSafe||this.refreshFirstButton(),UserManager.userInfo.isHeadVerify||UserManager.userInfo.isHeadUnPass||qin.Tick.AddTimeoutInvoke(UserManager.tryUpLoadWxHead,1e3,UserManager)},t.prototype.creatItem=function(){var e=new Array,t=new AchievementInfo;return t.id=101,t.isComplete=!0,e.push(t),t=new AchievementInfo,t.id=102,t.isComplete=!0,e.push(t),t=new AchievementInfo,t.id=103,t.isComplete=!0,e.push(t),e},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),UIManager.isShowPanel(UIModuleName.FriendMsgPanel)&&UIManager.takeToTopLayer(UIModuleName.FriendMsgPanel)},t.prototype.refreshUserInfoUI=function(){this.userNameLabel.text=UserManager.userInfo.name.toString(),this.userHeadComp.init(UserManager.userInfo,120),VipManager.isVip()?(this.vipLevelLabel.text="VIP"+UserManager.userInfo.vipLevel,this.vipGroup.visible=!0):this.vipGroup.visible=!1,this.refreshGold()},t.prototype.refreshFirstButton=function(){var e=ActivityManager.payPrizeHandler.getIsShow(ActivityId.FirstPay);e?(this.firstpayBtn.bg.play(),this.rightMenu.getChildIndex(this.firstpayBtn)<0&&this.rightMenu.addChild(this.firstpayBtn)):(this.firstpayBtn.bg.pause(),this.rightMenu.getChildIndex(this.firstpayBtn)>=0&&this.rightMenu.removeChild(this.firstpayBtn))},t.prototype.refreshGold=function(e){this.goldNumLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold),this.diamondNumLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.diamond)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._buttonAnime.onEnable(),this._panelAnime.onEnable(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),VipManager.vipUpgradeEvent.addListener(this.refreshUserInfoUI,this),UserManager.propertyChangeEvent.addListener(this.refreshGold,this),RankManager.getRankListEvent.addListener(this.getRankList,this),UserManager.onCreateRoleEvent.addListener(this.refreshUserInfoUI,this),UserManager.onSetUserInfoComplete.addListener(this.refreshUserInfoUI,this),UserManager.headImageUpdateEvent.addListener(this.refreshUserInfoUI,this),qin.Tick.AddSecondsInvoke(this.refreshFreeGoldTime,this),UserManager.getFreeGoldEvent.addListener(this.resetFreeGoldTime,this),UIManager.onPanelCloseEvent.addListener(this._panelAnime.setRankEnterAnime.bind(this._panelAnime),this),ActivityManager.payPrizeHandler.firstPayCompleteEvent.addListener(this.refreshFirstButton,this),AwardManager.OnAwardValueChanged.addListener(this.refreshFirstButton,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._buttonAnime.onDisable(),this._panelAnime.onDisable(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),VipManager.vipUpgradeEvent.removeListener(this.refreshUserInfoUI,this),UserManager.propertyChangeEvent.removeListener(this.refreshGold,this),RankManager.getRankListEvent.removeListener(this.getRankList,this),UserManager.onCreateRoleEvent.removeListener(this.refreshUserInfoUI,this),UserManager.onSetUserInfoComplete.removeListener(this.refreshUserInfoUI,this),UserManager.headImageUpdateEvent.removeListener(this.refreshUserInfoUI,this),qin.Tick.RemoveSecondsInvoke(this.refreshFreeGoldTime,this),UserManager.getFreeGoldEvent.removeListener(this.resetFreeGoldTime,this),UIManager.onPanelCloseEvent.removeListener(this._panelAnime.setRankEnterAnime.bind(this._panelAnime),this),ActivityManager.payPrizeHandler.firstPayCompleteEvent.removeListener(this.refreshFirstButton,this),AwardManager.OnAwardValueChanged.removeListener(this.refreshFirstButton,this)},t.prototype.getRankList=function(){if(this._rankList?qin.ArrayUtil.Clear(this._rankList):this._rankList=new Array,this._rankListInfo){for(var e=0;e<this.listNum;e++)e<this._rankListInfo.list.length?this._rankList.push(this._rankListInfo.list[e]):this._rankList.push(null);this.setRankInfo(this.rankingImg0,this.rank0Group,this._rankList[0]),this.setRankInfo(this.rankingImg1,this.rank1Group,this._rankList[1]),this.setRankInfo(this.rankingImg2,this.rank2Group,this._rankList[2]),this.setRankInfo(this.rankingImg3,this.rank3Group,this._rankList[3])}},t.prototype.setRankInfo=function(e,t,n){t.visible=!1,n&&(t.visible=!0,e.init(n,60))},t.prototype.onClickHandler=function(e){switch(this.moreGroup.visible&&e.target!=this.moreBtn&&this._panelAnime.setMoreOutAnime(),e.target){case this.userHeadComp:SoundManager.playEffect(MusicAction.buttonClick),UserManager.reqShowOtherUserInfoPanel(UserManager.userInfo.roleId);break;case this.addDiamondBtn:SoundManager.playEffect(MusicAction.buttonClick),this._panelAnime.setOutAnime(),JumpUtil.JumpToShopping(ShopGroupIndex.Diamond);break;case this.addGoldGroup:SoundManager.playEffect(MusicAction.buttonClick),this._panelAnime.setOutAnime(),JumpUtil.JumpToShopping(ShopGroupIndex.Gold);break;case this.pokerBtn:SoundManager.playButtonEffect(e.target),this._panelAnime.setOutAnime(),JumpUtil.JumpToPlayingField();break;case this.matchBtn:SoundManager.playButtonEffect(e.target),this._panelAnime.setOutAnime(),JumpUtil.JumpToChampionship();break;case this.hundredBattle:SoundManager.playButtonEffect(e.target),this._panelAnime.setOutAnime(),JumpUtil.JumpToHundredWar();break;case this.signBtn:SoundManager.playEffect(MusicAction.buttonClick);break;case this.activityBtn:SoundManager.playEffect(MusicAction.buttonClick),this._panelAnime.setOutAnime(),JumpUtil.JumpToActivity();break;case this.mailBtn:SoundManager.playEffect(MusicAction.buttonClick),JumpUtil.JumpToMail();break;case this.shopBtn:SoundManager.playEffect(MusicAction.buttonClick),this._panelAnime.setOutAnime(),JumpUtil.JumpToShopping();break;case this.friendBtn:SoundManager.playEffect(MusicAction.buttonClick),this._panelAnime.setOutAnime(),JumpUtil.JumpTofriend();break;case this.assignmentBtn:SoundManager.playEffect(MusicAction.buttonClick),this._panelAnime.setOutAnime(),JumpUtil.JumpToAssignment();break;case this.moreBtn:SoundManager.playEffect(MusicAction.buttonClick),this.moreGroup.visible?this._panelAnime.setMoreOutAnime():this._panelAnime.setMoreEnterAnime();break;case this.freeGoldGroup:SoundManager.playEffect(MusicAction.buttonClick),UserManager.reqGetFreeGold();break;case this.safeBoxBtn:SoundManager.playEffect(MusicAction.buttonClick),JumpUtil.JumpToSafeBox();break;case this.gameRuleBtn:SoundManager.playEffect(MusicAction.buttonClick),this._panelAnime.setOutAnime(),JumpUtil.JumpToGameRule();break;case this.settingBtn:SoundManager.playEffect(MusicAction.buttonClick),this._panelAnime.setOutAnime(),JumpUtil.JumpToSetting();break;case this.bindBtn:SoundManager.playEffect(MusicAction.buttonClick),this.gotoBinding();break;case this.rankingImg0:SoundManager.playEffect(MusicAction.buttonClick),this._rankList[0]&&UserManager.reqShowOtherUserInfoPanel(this._rankList[0].roleId);break;case this.rankingImg1:SoundManager.playEffect(MusicAction.buttonClick),this._rankList[1]&&UserManager.reqShowOtherUserInfoPanel(this._rankList[1].roleId);break;case this.rankingImg2:SoundManager.playEffect(MusicAction.buttonClick),this._rankList[2]&&UserManager.reqShowOtherUserInfoPanel(this._rankList[2].roleId);break;case this.rankingImg3:SoundManager.playEffect(MusicAction.buttonClick),this._rankList[3]&&UserManager.reqShowOtherUserInfoPanel(this._rankList[3].roleId);break;case this.rankingImg4:case this.rankingImg5:SoundManager.playEffect(MusicAction.buttonClick),this._panelAnime.setRankOutAnime(),JumpUtil.JumpTorank();break;case this.monthCardBtn:SoundManager.playEffect(MusicAction.buttonClick),UIManager.showPanel(UIModuleName.MonthCardPanel)}},t.prototype.gotoBinding=function(){UIManager.showPanel(UIModuleName.BindAccountPanel)},t.prototype.refreshFreeGoldTime=function(){if(TimeManager.GetServerUtcTimestamp()-UserManager.userInfo.lastGoldTime>=ProjectDefined.GetInstance().getValue(ProjectDefined.freeGoldTime))this.freeGoldTimeLabel.visible=!1,this.freeGoldBtn.getFreeGoldImg.visible=!0,this.freeGoldBtn.lightBg.visible=!0,egret.Tween.get(this.freeGoldBtn.lightBg,{loop:!0}).set({scaleX:.5,scaleY:.5,alpha:0}).to({scaleX:1,scaleY:1,alpha:.8},800).to({scaleX:.5,scaleY:.5,alpha:0},800).wait(2e3),egret.Tween.get(this.freeGoldBtn,{loop:!0}).set({y:90}).to({y:80},800).to({y:90},800,egret.Ease.bounceOut).wait(2e3),this.freeGoldGroup.touchEnabled=!0,qin.Tick.RemoveSecondsInvoke(this.refreshFreeGoldTime,this);else{var e=Math.floor(UserManager.userInfo.lastGoldTime+ProjectDefined.GetInstance().getValue(ProjectDefined.freeGoldTime)-TimeManager.GetServerUtcTimestamp());this.freeGoldTimeLabel.text=qin.DateTimeUtil.countDownFormat(e,!1)}},t.prototype.resetFreeGoldTime=function(){this.refreshFreeGoldTime(),TimeManager.GetServerUtcTimestamp()-UserManager.userInfo.lastGoldTime<ProjectDefined.GetInstance().getValue(ProjectDefined.freeGoldTime)&&(this.freeGoldTimeLabel.visible=!0,this.freeGoldBtn.getFreeGoldImg.visible=!1,this.freeGoldBtn.lightBg.visible=!1,egret.Tween.removeTweens(this.freeGoldBtn.lightBg),egret.Tween.removeTweens(this.freeGoldBtn),this.freeGoldBtn.y=90,this.freeGoldGroup.touchEnabled=!1,qin.Tick.AddSecondsInvoke(this.refreshFreeGoldTime,this))},t.prototype.showCreateRolePanel=function(){UserManager.onCreateRoleEvent.addListener(this.onCreateRoleComplete,this),UIManager.showPanel(UIModuleName.CreateRolePanel),UIManager.closePanel(UIModuleName.GameHallPanel)},t.prototype.onCreateRoleComplete=function(){UserManager.onCreateRoleEvent.removeListener(this.onCreateRoleComplete,this),this.refreshUserInfoUI(),UIManager.showPanel(UIModuleName.GameHallPanel),UIManager.closePanel(UIModuleName.CreateRolePanel)},t}(BasePanel);__reflect(GameHallPanel.prototype,"GameHallPanel");var GameRulePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.GameRulePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0;var n=new Array;n.push(this.RuleIntroGroup),n.push(this.cardTypeGroup),n.push(this.resizeGroup),this.gameRullTab.build(TabComponent.CreatData(["玩法介绍","牌型介绍","功能键介绍"],n,TabButtonType.BigOf3)),this.resizeScroller.viewport=this.resizeScrollerGroup,UIManager.pushResizeScroller(this.resizeScroller,820),UIManager.pushResizeGroup(this.resizeBottomGroup),this.cardScroller.viewport=this.cardGroup,UIManager.pushResizeScroller(this.cardScroller,1020),this.funcKeyIntroScroller.viewport=this.funcKeyIntroGroup,UIManager.pushResizeScroller(this.funcKeyIntroScroller,1020)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.gameRullTab.init(0),this.onTabTap(0)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.gameRullTab.tabChangeEvent.addListener(this.onTabTap,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.gameRullTab.tabChangeEvent.addListener(this.onTabTap,this)},t.prototype.showPrePanelName=function(){this.prevPanelName==UIModuleName.GamblingPanel?UIManager.showPanel(this.prevPanelName,!0):UIManager.showPanel(this.prevPanelName)},t.prototype.onTabTap=function(e){switch(e){case 0:this.resizeScroller.viewport.scrollV=0;break;case 1:this.cardScroller.viewport.scrollV=0;break;case 2:this.funcKeyIntroScroller.viewport.scrollV=0}},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BasePanel);__reflect(GameRulePanel.prototype,"GameRulePanel");var GetCoinTipsPanel=function(e){function t(){var t=e.call(this)||this;return t.layer=UILayerType.Tips,t.setTouchChildren(!1),t.setTouchEnable(!1),t.setSkinName(UIModuleName.GetCoinTipsPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),this.panelData&&(this.textLabel.text=this.panelData,this.removeTweenEvents(),this.creatCoinTween(),this.ptc&&this.createTween(),SoundManager.playEffect(MusicAction.gold_fall))},t.prototype.creatCoinTween=function(){var e=this;AnimationFactory.getParticleEffect(AnimationType.GetCoin,this,function(t){e.ptc=t,e.createTween()})},t.prototype.createTween=function(){this.removeTweenEvents(),this.alpha=1,egret.Tween.get(this).wait(2100).to({alpha:1},50,egret.Ease.quadOut).call(this.onPlayOver,this)},t.prototype.onPlayOver=function(e){this.ptc&&(this.ptc.stop(),null!=this.ptc.parent&&this.ptc.parent.removeChild(this.ptc)),this.onCloseBtnClickHandler(null)},t.prototype.removeTweenEvents=function(){egret.Tween.removeTweens(this)},t}(BasePanel);__reflect(GetCoinTipsPanel.prototype,"GetCoinTipsPanel");var GetItemTipsPanel=function(e){function t(){var t=e.call(this)||this;return t.itemGetList=new Array,t._cellTime=1200,t.layer=UILayerType.Tips,t.setTouchChildren(!1),t.setTouchEnable(!1),t.setSkinName(UIModuleName.GetItemTipsPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),egret.Tween.removeTweens(this.group),t&&t.length>0?(this.itemGetList=t,SoundManager.playEffect(MusicAction.item_fall),this.startPlay()):this.onCloseBtnClickHandler(null)},t.prototype.startPlay=function(){this.getItemRender||(this.getItemRender=new GetItemComponent(UIComponentSkinName.GetItemComponent),this.group.addChild(this.getItemRender)),this.nextPlay()},t.prototype.nextPlay=function(){if(this.itemGetList.length>0){var e=this.itemGetList.shift();this.getItemRender.initInfo(e),egret.Tween.get(this.group).set({scaleX:0,scaleY:0}).to({scaleX:1,scaleY:1},200).wait(800).to({scaleX:0,scaleY:0},200).call(this.nextPlay,this)}else egret.Tween.removeTweens(this.group),this.onCloseBtnClickHandler(null)},t}(BasePanel);__reflect(GetItemTipsPanel.prototype,"GetItemTipsPanel");var GetTimeAwardRemindPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.GetTimeAwardRemindPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.anmGroup.touchEnabled=!1,this.layer=UILayerType.Tips},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.enterAnime(),this.countDownNum=5;var n=this.panelData.round+1;if(n<TimeAwardDefined.GetInstance().dataList.length){this.nextTimeGroup.visible=!0;var i=TimeAwardDefined.GetInstance().getDefinition(n+1);i&&(this.nextTimeLabel.text=Math.round(i.time/60)+"分钟")}else this.nextTimeGroup.visible=!1;this.panelData.num&&(this.awardNumLabel.text=this.panelData.num.toString()+"金币"),this.desLabel.text="您完成了计时奖励第"+n+"轮",qin.Tick.AddSecondsInvoke(this.countDown,this)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getTimeAward,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeTweens(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getTimeAward,this),qin.Tick.RemoveSecondsInvoke(this.countDown,this)},t.prototype.removeTweens=function(){this.anmGroup&&egret.Tween.removeTweens(this.anmGroup)},t.prototype.enterAnime=function(){egret.Tween.removeTweens(this.anmGroup);var e=egret.Tween.get(this.anmGroup);this.anmGroup.y=-100,e.to({y:0},200)},t.prototype.outAnime=function(){var e=egret.Tween.get(this.anmGroup);this.anmGroup.y=0,e.to({y:-100},200).call(this.onCloseAnmComplete,this)},t.prototype.onCloseAnmComplete=function(){qin.Tick.RemoveTimeoutInvoke(this.outAnime,this),UIManager.closePanel(UIModuleName.GetTimeAwardRemindPanel)},t.prototype.getTimeAward=function(e){SoundManager.playButtonEffect(e.target),PropertyManager.OpenGet(),GamblingManager.timeAwardHandler.reqGetTimeAward(this.panelData.pattern),this.outAnime(),qin.Tick.RemoveSecondsInvoke(this.countDown,this)},t.prototype.countDown=function(){this.countDownNum--,this.countDownNum<=0&&(qin.Tick.RemoveSecondsInvoke(this.countDown,this),qin.Tick.AddTimeoutInvoke(this.outAnime,.5,this))},t}(BasePanel);__reflect(GetTimeAwardRemindPanel.prototype,"GetTimeAwardRemindPanel");var GoldShortagePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.GoldShortagePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){this.isCloseButtonTween=!1,this.isMaskClickClose=!0,this.maskAlpha=.5,e.prototype.onAwake.call(this,t)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.panelData&&this.panelData.goldShortage>0&&(this.unEnoughGoldHandle(),t.isBankruptcy?(this.bankruptcyImage.visible=!0,this.insufficientImage.visible=!1):(this.bankruptcyImage.visible=!1,this.insufficientImage.visible=!0))},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.buyNowBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buNow,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.buyNowBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buNow,this),AwardManager.OnExchanged.removeListener(this.onExchanged,this)},t.prototype.buNow=function(e){if(this._shopInfo&&this._shopInfo.definition){var t=AwardDefined.GetInstance().getDefinition(this._shopInfo.definition.awardId);if(t){for(var n=void 0,i=0,a=t.costList;i<a.length;i++){var o=a[i];o.type==CostType.RMB&&(n=o)}AwardManager.OnExchanged.removeListener(this.onExchanged,this),AwardManager.OnExchanged.addListener(this.onExchanged,this),ChannelManager.PaySend(this._shopInfo.id)}}},t.prototype.onExchanged=function(e){this._shopInfo&&this._shopInfo.definition&&this._shopInfo.definition.awardId==e&&(AwardManager.OnExchanged.removeListener(this.onExchanged,this),this.onCloseBtnClickHandler(null))},t.prototype.buyInGameHandler=function(){this.onCloseBtnClickHandler(null)},t.prototype.unEnoughGoldHandle=function(){this._shopInfo=null;var e;if(ShopManager.goldList.length>0){for(var t=0;t<ShopManager.goldList.length;t++){var n=ShopManager.goldList[t];if(n&&n.definition&&(e=AwardDefined.GetInstance().getDefinition(n.definition.awardId),e&&this.panelData.goldShortage<=e.rewardNum[0]||t==ShopManager.goldList.length-1)){this._shopInfo=n;break}}this._shopInfo&&e&&(e.costNum&&e.costNum.length>0&&(this.priceLabel.text="仅需"+e.costNum[0]/100+"元"),this.goldLabel.text=e.name)}},t}(BasePanel);__reflect(GoldShortagePanel.prototype,"GoldShortagePanel");var GuessPanel=function(e){function t(){var t=e.call(this)||this;return t._txtCount=24,t._contentList=new Array,t.setSkinName(UIModuleName.GuessPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!0,this.tabComponent.isTween=!1,this.maskAlpha=.5;var n=new Array;n.push(this.buyGroup),n.push(this.weekGroup),n.push(this.resultGroup),n.push(this.buyrRecordGroup),n.push(this.helpGroup),this.tabComponent.build(TabComponent.CreatData(["购买","本周榜单","开奖信息","购买记录","帮助"],n,TabButtonType.XSmallOf5)),UIUtil.listRenderer(this.buyList,this.buyScroller,GuessBuyItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!1),UIUtil.listRenderer(this.weekList,this.weekScroller,GuessWeekItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.resultList,this.resultScroller,GuessResultItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.buyrRecordList,this.buyrRecordScroller,GuessRecordItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.buyScroller.scrollPolicyH=this.weekScroller.scrollPolicyH=this.resultScroller.scrollPolicyH=this.buyrRecordScroller.scrollPolicyH=this.helpScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.toggleBtns=new Array,this.toggleBtns.push(this.buyOnceRB),this.toggleBtns.push(this.buyEveryRB),this.buyOnceRB.desBT.label="购买一局",this.buyEveryRB.desBT.label="购买每局",this.totalBuyLabel.text="$0",this.helpScroller.viewport=this.txtGroup,GamblingManager.guessHandler.getGuessOddsInfo(),this.setHelpInfo(),UIManager.pushResizeGroup(this.anmGroup)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.tabComponent.init(0),this.buyOnceRB.selected=GamblingManager.guessHandler.buyOnceRBSel,0==GamblingManager.guessHandler.totalAnte&&(this.totalBuyLabel.text="$0",this.buyOnceRB.selected=this.buyEveryRB.selected=!1),void 0==GamblingManager.guessHandler.buyInning&&(this.buyEveryRB.selected=!1),this.refreshGoldNum(),this.setGuessOddsInfo()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),UserManager.propertyChangeEvent.addListener(this.refreshGoldNum,this),GamblingManager.guessHandler.onChangeTotalAnteEvent.addListener(this.refreshTotalNum,this),this.buyOnceRB.addEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler,this),this.buyEveryRB.addEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler,this),this.tabComponent.tabChangeEvent.addListener(this.onTabClickHandler,this),GamblingManager.guessHandler.onWeekInfoEvent.addListener(this.setWeekInfo,this),GamblingManager.guessHandler.onGetBuyRecordInfoEvent.addListener(this.setBuyRecordInfo,this),GamblingManager.guessHandler.onResetBuyOnceStateEvent.addListener(this.resetBuyOnceState,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),UserManager.propertyChangeEvent.removeListener(this.refreshGoldNum,this),GamblingManager.guessHandler.onChangeTotalAnteEvent.removeListener(this.refreshTotalNum,this),this.buyOnceRB.removeEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler,this),this.buyEveryRB.removeEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler,this),this.tabComponent.tabChangeEvent.removeListener(this.onTabClickHandler,this),GamblingManager.guessHandler.onWeekInfoEvent.removeListener(this.setWeekInfo,this),GamblingManager.guessHandler.onGetBuyRecordInfoEvent.removeListener(this.setBuyRecordInfo,this),GamblingManager.guessHandler.onResetBuyOnceStateEvent.removeListener(this.resetBuyOnceState,this)},t.prototype.resetBuyOnceState=function(){this.buyOnceRB.selected=!1},t.prototype.setGuessOddsInfo=function(){GamblingManager.guessHandler.guessOddsList&&UIUtil.writeListInfo(this.buyList,GamblingManager.guessHandler.guessOddsList,"id")},t.prototype.refreshGoldNum=function(){var e=GamblingManager.getPlayerInfo(UserManager.userInfo.roleId);if(e){var t=e.bankRoll;this.goldNumLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold+t)}else this.goldNumLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold)},t.prototype.refreshTotalNum=function(){InfoUtil.checkAvailable(GamblingManager.roomInfo)&&(this.totalBuyLabel.text="$"+GamblingManager.guessHandler.totalAnte*GamblingManager.roomInfo.definition.bBlind)},t.prototype.radioChangeHandler=function(e){if(0==GamblingManager.guessHandler.totalAnte)return e.target.selected=!1,void AlertManager.showAlert("请选择要买入项");for(var t=parseInt(e.target.label),n=0,i=this.toggleBtns;n<i.length;n++){var a=i[n];a==e.target?a.selected=e.target.selected:a.selected=!1}return GamblingManager.guessHandler.buyInning&&GamblingManager.guessHandler.buyInning==t?(GamblingManager.guessHandler.reqBuyGuessAnte(),GamblingManager.guessHandler.buyInning=void 0,GamblingManager.guessHandler.buyOnceRBSel=!1,void(GamblingManager.guessHandler.isBuyGuess=!1)):GamblingManager.guessHandler.totalAnte*GamblingManager.roomInfo.bBlind>UserManager.userInfo.gold?(e.target.selected=!1,void AlertManager.showConfirm("您牌桌外的剩余金币不足。",this.goShoppingPanel,null,null,null,null,"充值")):(GamblingManager.guessHandler.buyInning=t,GamblingManager.guessHandler.isBuyGuess=!0,this.setBuyInfo(GamblingManager.guessHandler.buyGuessAnteInfo),void(1==GamblingManager.guessHandler.buyInning?(GamblingManager.guessHandler.buyOnceRBSel=!0,GamblingManager.guessHandler.reqBuyGuessAnte(1,this.buyAnteInfo)):2==GamblingManager.guessHandler.buyInning&&(GamblingManager.guessHandler.reqBuyGuessAnte(2,this.buyAnteInfo),GamblingManager.guessHandler.buyOnceRBSel=!1)))},t.prototype.goShoppingPanel=function(e){UIManager.showPanel(UIModuleName.ShoppingPanel,{prevPanelName:UIModuleName.GamblingPanel})},t.prototype.setBuyInfo=function(e){if(qin.ArrayUtil.Clear(this.buyAnteInfo),this.buyAnteInfo||(this.buyAnteInfo=new Array),e&&e.length>0)for(var t=0,n=e;t<n.length;t++){var i=n[t],a=new BuyGuessAnteInfo;a.handType=i.handType,a.num=i.num,this.buyAnteInfo.push(a)}},t.prototype.payGold=function(){UIManager.showPanel(UIModuleName.ShoppingPanel,{tab:ShopGroupIndex.Gold})},t.prototype.setWeekInfo=function(){GamblingManager.guessHandler.weekGuessRankList&&(this.weekList.dataProvider=new eui.ArrayCollection(GamblingManager.guessHandler.weekGuessRankList))},t.prototype.setBuyRecordInfo=function(){GamblingManager.guessHandler.recordList&&(this.buyrRecordList.dataProvider=new eui.ArrayCollection(GamblingManager.guessHandler.recordList))},t.prototype.setHelpInfo=function(){this._def=TextDefined.GetInstance().getDefinition(TextFixedId.GuessHelp),this._def&&(this.helpTitleLabel.textFlow=qin.TextUtil.parse(this._def.title),this.txtLabel.textFlow=qin.TextUtil.parse(this._def.text),this.txtGroup.visible=!0,this._lastShowContainer=this.txtGroup)},t.prototype.onTabClickHandler=function(e){1==e?GamblingManager.guessHandler.reqGetWeekInfo():2==e?GamblingManager.guessHandler.resultList&&(this.resultList.dataProvider=new eui.ArrayCollection(GamblingManager.guessHandler.resultList.sort(SortUtil.guessResultTimeSort))):3==e&&GamblingManager.guessHandler.reqGetBuyRecordInfo()},t}(BasePanel);__reflect(GuessPanel.prototype,"GuessPanel");var GuideAnswerErrorPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.GuideAnswerErrorPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,UIUtil.listRenderer(this.cardList,this.cardScroller,GuideAnswerErrorItemRenderer,ScrollViewDirection.Horizontal_L_R,eui.ScrollPolicy.ON,null,!1),UIUtil.listRenderer(this.cardList0,this.cardScroller0,GuideAnswerErrorItemRenderer,ScrollViewDirection.Horizontal_L_R,eui.ScrollPolicy.ON,null,!1),this.cardScroller.scrollPolicyV=this.cardScroller0.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.init=function(t){e.prototype.init.call(this,t),this.setCardInfo()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t);var n=new Array;GamblingUtil.cardArr2CardInfoList(this.panelData.mask2,n);var i=this.cardList.layout;i.gap=this.panelData.gap,i=this.cardList0.layout,i.gap=this.panelData.gap;for(var a=0;a<this.cardList0.numChildren;a++)for(var o=this.cardList0.getChildAt(a),r=0,s=n;r<s.length;r++){var l=s[r];l.card[0]==o.bindData.info.card[0]&&l.card[1]==o.bindData.info.card[1]&&o.showMask()}},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onConfirmBtnClick,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.confirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onConfirmBtnClick,this)},t.prototype.onConfirmBtnClick=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.panelData&&this.panelData.self&&GuideExecutor.guideProcessComplete(this.panelData.self),this.onCloseBtnClickHandler(null)},t.prototype.setCardInfo=function(){var e=new Array,t=new Array;GamblingUtil.cardArr2CardInfoList(this.panelData.cardList1,e),GamblingUtil.cardArr2CardInfoList(this.panelData.cardList2,t),CardTypeMatchUtil.matchCardType(e),CardTypeMatchUtil.getCardDes(CardTypeMatchUtil.cardType)&&(this.desLabel.text="您的牌型为"+CardTypeMatchUtil.getCardDes(CardTypeMatchUtil.cardType));for(var n=new Array,i=0,a=0,o=e;a<o.length;a++){var r=o[a];i++,n.push({id:i,scale:this.panelData.scale,info:r})}this.cardInit(this.cardList,n);var s=new Array;i=0;for(var l=0,h=t;l<h.length;l++){var d=h[l];i++,s.push({id:i,scale:this.panelData.scale,info:d})}this.cardInit(this.cardList0,s)},t.prototype.cardInit=function(e,t){t&&UIUtil.writeListInfo(e,t,"id")},t}(BasePanel);__reflect(GuideAnswerErrorPanel.prototype,"GuideAnswerErrorPanel");var GuideBringGoldPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.GuideBringGoldPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t);var n=GuideDefined.GetInstance().getDefinition(t.self);if(n){var i=AwardDefined.GetInstance().getDefinition(n.awardId);i&&i.rewardId.length>0&&(this.iconImg.init(i.rewardId[0],48,qin.StringConstants.Empty),this.goldNumLabel.text=i.rewardNum[0].toString())}},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.bringBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bringBtnClick,this),GuideManager.onSetGuideStepEvent.addListener(this.setGuideStepHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.bringBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.bringBtnClick,this),GuideManager.onSetGuideStepEvent.removeListener(this.setGuideStepHandler,this)},t.prototype.bringBtnClick=function(e){SoundManager.playButtonEffect(e.target),this.panelData.self>0&&GuideExecutor.guideProcessComplete(this.panelData.self)},t.prototype.setGuideStepHandler=function(e){e&&this.panelData&&e.uid==this.panelData.self&&this.onCloseBtnClickHandler(null)},t}(BasePanel);__reflect(GuideBringGoldPanel.prototype,"GuideBringGoldPanel");var GuideCardTypeIntroPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.GuideCardTypeIntroPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.desScroller.viewport=this.desGroup,this.desScroller.scrollPolicyH=eui.ScrollPolicy.OFF,UIUtil.loadBg(ResFixedFileName.Guide_Bg_1,this.bgImg),UIManager.pushResizeScroller(this.desScroller,915)},t.prototype.init=function(t){e.prototype.init.call(this,t)
},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.nextStepBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextStepBtnClick,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.nextStepBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextStepBtnClick,this)},t.prototype.nextStepBtnClick=function(e){SoundManager.playButtonEffect(e.target),UIManager.showPanel(this.panelData.panelName,this.panelData),this.onCloseBtnClickHandler(null)},t}(BasePanel);__reflect(GuideCardTypeIntroPanel.prototype,"GuideCardTypeIntroPanel");var GuideChoosePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.GuideChoosePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),this.panelData&&(this.panelData.type==GuideChooseType.IsEnterGuide?(this.chooseGroup2.visible=!1,this.chooseGroup1.visible=!0,this.titleLabel.text="您熟悉德州扑克吗？",this.goldGroup.visible=!1):this.panelData.type==GuideChooseType.IsEnterTrainingCamp&&(this.chooseGroup2.visible=!0,this.chooseGroup1.visible=!1,this.titleLabel.text="是否进入训练营？",this.goldGroup.visible=!0,this._guideTipsComponent||(this._guideTipsComponent=new GuideTipsComponent(UIComponentSkinName.GuideTipsComponent)),this._guideTipsComponent.init({parent:this.goldGroup,data:{orientation:GuideTipsOrientation.Down,delay:10,ax:75,xoffset:-35,yoffset:-35,data:"可获得额外金币奖励"}})))},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.passBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.passBtnClick,this),this.enterBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterBtnClick,this),this.passBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.passBtn0Click,this),this.enterBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterBtn0Click,this),GuideManager.onSetGuideStepEvent.addListener(this.changGuideStepSuccess,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.passBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.passBtnClick,this),this.enterBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterBtnClick,this),this.passBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.passBtn0Click,this),this.enterBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterBtn0Click,this),GuideManager.onSetGuideStepEvent.removeListener(this.changGuideStepSuccess,this)},t.prototype.passBtnClick=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.panelData&&GuideExecutor.guideProcessComplete(this.panelData.self,this.panelData.skip)},t.prototype.enterBtnClick=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.panelData&&GuideExecutor.guideProcessComplete(this.panelData.self,this.panelData.next)},t.prototype.passBtn0Click=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.panelData&&GuideExecutor.guideProcessComplete(this.panelData.self,this.panelData.skip)},t.prototype.enterBtn0Click=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.panelData&&GuideExecutor.guideProcessComplete(this.panelData.self,this.panelData.next)},t.prototype.changGuideStepSuccess=function(e){this.panelData&&e.uid==this.panelData.skip&&this.finishGuide()},t.prototype.finishGuide=function(){UIManager.showPanel(UIModuleName.GameHallPanel),this.onCloseBtnClickHandler(null)},t}(BasePanel);__reflect(GuideChoosePanel.prototype,"GuideChoosePanel");var GuideGameDescriptionPanel=function(e){function t(){var t=e.call(this,!0)||this;return t.setSkinName(UIModuleName.GuideGameDescriptionPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!1,UIUtil.loadBg(ResFixedFileName.Guide_Bg_1,this.bgImg)},t.prototype.init=function(t){e.prototype.init.call(this,TextFixedId.GuidePlayWay),this.panelData=t},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.nextStepBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextStepBtnClick,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.nextStepBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextStepBtnClick,this)},t.prototype.nextStepBtnClick=function(e){SoundManager.playButtonEffect(e.target),this.panelData&&this.panelData.self&&GuideExecutor.guideProcessComplete(this.panelData.self),this.onCloseBtnClickHandler(null)},t}(TextInfoPanel);__reflect(GuideGameDescriptionPanel.prototype,"GuideGameDescriptionPanel");var GuideQuestionPanel=function(e){function t(){var t=e.call(this)||this;return t.isIgnoreAdaptation=!0,t.panelAlignType=PanelAlignType.Center_Top,t.offsetV=105,t.setSkinName(UIModuleName.GuideQuestionPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,UIUtil.listRenderer(this.answerList,this.answerScroller,GuideQueItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!1)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.getQuestionInfo()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.answerList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.getChoiceResult,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.answerList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.getChoiceResult,this)},t.prototype.getChoiceResult=function(e){if(SoundManager.playEffect(MusicAction.buttonClick),this.answerList.selectedItem){var t=new Array;GamblingUtil.cardArr2CardInfoList(this.panelData.cardList1,t),CardTypeMatchUtil.matchCardType(t),this.answerList.selectedItem.id==CardTypeMatchUtil.cardType?this.panelData.self>0&&GuideExecutor.guideProcessComplete(this.panelData.self):UIManager.showPanel(UIModuleName.GuideAnswerErrorPanel,this.panelData),this.onCloseBtnClickHandler(null)}},t.prototype.getQuestionInfo=function(){var e=GuideQuestionDefined.GetInstance().getDefinition(this.panelData.question);e&&(e.title&&(this.titleLabel.text=e.title),e.answer&&UIUtil.writeListInfo(this.answerList,e.answer,"id",!0))},t}(BasePanel);__reflect(GuideQuestionPanel.prototype,"GuideQuestionPanel");var HappyGiftPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.HappyGiftPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,this.activityTab.build(TabComponent.CreatData(["礼品","排行榜","使用记录","活动帮助"],[this.prizeGroup,this.rankGroup,this.useGroup,this.helpGroup],TabButtonType.HappyGiftOf4)),this.rankTab.build(TabComponent.CreatData(["总排行","好友排行"],[this.rankScrollerGroup,this.rankScrollerGroup],TabButtonType.HappyGiftOf2)),UIUtil.listRenderer(this.prizeList,this.prizeScroller,HappyGiftItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.rankList,this.rankScroller,HappyGiftRankRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.useList,this.useScroller,HappyGiftUseRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.setLabel(this.helpTitleLabel,this.helpLabel,TextFixedId.HappyGiftHelp),this.helpScroller.viewport=this.helpTextGroup,UIManager.pushResizeScroller(this.prizeScroller,700),UIManager.pushResizeScroller(this.rankScroller,580),UIManager.pushResizeScroller(this.useScroller,640),UIManager.pushResizeScroller(this.helpScroller,640)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.activityTab.init(0),this.rankTab.init(0),ActivityManager.reqActivityInfo(this.activityInfo.id)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.activityTab.tabChangeEvent.addListener(this.onActTabTap,this),this.rankTab.tabChangeEvent.addListener(this.onRankTabTap,this),RankManager.getRankListEvent.addListener(this.refreshRank,this),ActivityManager.onReqSingleActivityEvent.addListener(this.onEventRefresh,this),ActivityManager.happyGiftHandler.takePrizeCompleteEvent.addListener(this.refreshUI,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.activityTab.tabChangeEvent.removeListener(this.onActTabTap,this),this.rankTab.tabChangeEvent.removeListener(this.onRankTabTap,this),RankManager.getRankListEvent.removeListener(this.refreshRank,this),ActivityManager.onReqSingleActivityEvent.removeListener(this.onEventRefresh,this),ActivityManager.happyGiftHandler.takePrizeCompleteEvent.removeListener(this.refreshUI,this)},t.prototype.onEventRefresh=function(e){InfoUtil.checkAvailable(this.activityInfo)&&e==this.activityInfo.id&&this.refreshUI()},t.prototype.refreshUI=function(){if(this.titleLabel.text=this.activityInfo.definition.name,this.ticketNumLabel.text="您的欢乐券："+qin.MathUtil.numAddSpace(this.activityInfo.step),ActivityUtil.isInJoinTime(this.activityInfo)){var e=Math.round(this.activityInfo.startDateTime.getTime()/1e3),t=Math.round(this.activityInfo.endDateTime.getTime()/1e3),n=void 0;n=this.activityInfo.definition.joinTime?e+this.activityInfo.definition.joinTime-TimeManager.GetServerUtcTimestamp():t-TimeManager.GetServerUtcTimestamp(),qin.DateTimeUtil.GetLefttimeText(n,!1,!1),this.leftTimeLabel.text="距离结束还有："+qin.DateTimeUtil.GetLefttimeText(n)}else this.leftTimeLabel.text="活动已结束";UIUtil.writeListInfo(this.prizeList,this.activityInfo.subList,"subId",!1)},t.prototype.setLabel=function(e,t,n){var i=TextDefined.GetInstance().getDefinition(n);i&&(i.isRichTxt?(t.textFlow=qin.TextUtil.parse(i.text),e.textFlow=qin.TextUtil.parse(i.title)):(t.text=i.text,e.text=i.title))},t.prototype.onActTabTap=function(e){switch(this.resetScrollV(e),e){case 0:break;case 1:this.rankTab.setSelectIndex(0),this._currentRankListInfo=RankManager.getRankListInfo(RankType.Activity,this.activityInfo.id,HappyGiftRankSubType.All),RankManager.isRefreshRank(this._currentRankListInfo)?RankManager.reqRankList(RankType.Activity,1,this.activityInfo.id,HappyGiftRankSubType.All):this.refreshRank();break;case 2:var t=ActivityManager.happyGiftHandler.getHaveTakenPrizeList(this.activityInfo.id);t.length>0?(UIUtil.writeListInfo(this.useList,ActivityManager.happyGiftHandler.getHaveTakenPrizeList(this.activityInfo.id),"subId"),this.noUseLabel.visible=!1):this.noUseLabel.visible=!0;break;case 3:}},t.prototype.onRankTabTap=function(e){switch(this.rankScroller.stopAnimation(),this.rankScroller.viewport.scrollV=0,e){case 0:this._currentRankListInfo=RankManager.getRankListInfo(RankType.Activity,this.activityInfo.id,HappyGiftRankSubType.All),RankManager.isRefreshRank(this._currentRankListInfo)?RankManager.reqRankList(RankType.Activity,1,this.activityInfo.id,HappyGiftRankSubType.All):this.refreshRank();break;case 1:this._currentRankListInfo=RankManager.getRankListInfo(RankType.Activity,this.activityInfo.id,HappyGiftRankSubType.Friend),RankManager.isRefreshRank(this._currentRankListInfo)?RankManager.reqRankList(RankType.Activity,1,this.activityInfo.id,HappyGiftRankSubType.Friend):this.refreshRank()}},t.prototype.refreshRank=function(){UIUtil.writeListInfo(this.rankList,this._currentRankListInfo.list,"roleId",!0)},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t.prototype.resetScrollV=function(e){switch(e){case 0:this.prizeScroller.stopAnimation(),this.prizeScroller.viewport.scrollV=0;break;case 1:this.rankScroller.stopAnimation(),this.rankScroller.viewport.scrollV=0;break;case 2:this.useScroller.stopAnimation(),this.useScroller.viewport.scrollV=0;break;case 3:this.helpScroller.stopAnimation(),this.helpScroller.viewport.scrollV=0}},t}(BaseActivityPanel);__reflect(HappyGiftPanel.prototype,"HappyGiftPanel");var HundredWarBankerListPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.HundredWarBankerListPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,UIUtil.listRenderer(this.bankerList,this.bankerScroller,HundredWarBankerItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.bankerScroller.scrollPolicyH=eui.ScrollPolicy.OFF,UIManager.pushResizeScroller(this.bankerScroller,500)},t.prototype.init=function(t){e.prototype.init.call(this,t),HundredWarManager.panelHandler.reqHundredWarBankerList(),this.refreshGold(),InfoUtil.checkAvailable(HundredWarManager.roomInfo)&&HundredWarManager.roomInfo.definition.bankerRound?(this.tipsLabel1.visible=!0,this.tipsLabel1.text="每次最多坐庄"+HundredWarManager.roomInfo.definition.bankerRound+"轮比赛！"):this.tipsLabel1.visible=!1},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),HundredWarManager.panelHandler.OnGetHundredWarBankerListEvent.addListener(this.refreshUI,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),HundredWarManager.panelHandler.onUpDownBankerEvent.addListener(this.refreshBankerBtn,this),this.bankerGoldHs.addEventListener(egret.Event.CHANGE,this.onHsSlide,this),UserManager.propertyChangeEvent.addListener(this.refreshGold,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),HundredWarManager.panelHandler.OnGetHundredWarBankerListEvent.removeListener(this.refreshUI,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),HundredWarManager.panelHandler.onUpDownBankerEvent.removeListener(this.refreshBankerBtn,this),this.bankerGoldHs.removeEventListener(egret.Event.CHANGE,this.onHsSlide,this),UserManager.propertyChangeEvent.removeListener(this.refreshGold,this)},t.prototype.refreshGold=function(){this.goldLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold)},t.prototype.refreshBankerBtn=function(e){0==e&&HundredWarManager.roomInfo&&HundredWarManager.roomInfo.state==HWState.Bet&&(this.bankBtn.enabled=!1),this.refreshUI()},t.prototype.refreshUI=function(){HundredWarManager.panelHandler.isBankerList()?(this.tipsLabel.visible=!1,this.bankerGoldHs.visible=!1,this.bankBtn.label="下庄"):(this.tipsLabel.visible=!0,this.bankerGoldHs.visible=!0,this.bankBtn.label="我要上庄",this.bankBtn.enabled=!0,InfoUtil.checkAvailable(HundredWarManager.roomInfo)&&(UserManager.userInfo.gold>HundredWarManager.roomInfo.definition.bankerGold?(this.bankerGoldHs.maximum=UserManager.userInfo.gold,this.bankerGoldHs.touchChildren=!0,this.bankerGoldHs.minimum=this.bankerGoldHs.value=HundredWarManager.roomInfo.definition.bankerGold,this.tipsLabel.text=qin.MathUtil.formatNum(this.bankerGoldHs.value)):(this.bankerGoldHs.maximum=this.bankerGoldHs.value=HundredWarManager.roomInfo.definition.bankerGold,this.bankerGoldHs.touchChildren=!1,this.tipsLabel.text="上庄至少需要"+qin.MathUtil.formatNum(HundredWarManager.roomInfo.definition.bankerGold)))),UIUtil.writeListInfo(this.bankerList,HundredWarManager.panelHandler.HundredWarBankerList,"roleId",!1)},t.prototype.onHsSlide=function(e){InfoUtil.checkAvailable(HundredWarManager.roomInfo)&&(UserManager.userInfo.gold>HundredWarManager.roomInfo.definition.bankerGold?this.tipsLabel.text=qin.MathUtil.formatNum(this.bankerGoldHs.value):this.bankerGoldHs.value=HundredWarManager.roomInfo.definition.bankerGold)},t.prototype.onClick=function(e){switch(e.target){case this.bankBtn:SoundManager.playEffect(MusicAction.buttonClick),HundredWarManager.panelHandler.isBankerList()?HundredWarManager.panelHandler.reqDownBanker():InfoUtil.checkAvailable(HundredWarManager.roomInfo)&&(UserManager.userInfo.gold>HundredWarManager.roomInfo.definition.bankerGold?HundredWarManager.panelHandler.reqUpBanker(this.bankerGoldHs.value):AlertManager.showConfirm("您的金币不足"+qin.MathUtil.formatNum(HundredWarManager.roomInfo.definition.bankerGold)+"，无法上庄！",null,function(){JumpUtil.JumpToShopping(ShopGroupIndex.Gold,UIModuleName.HundredWarBankerListPanel)},null,"系统提示",null,"确定","充值",null))}},t}(BasePanel);__reflect(HundredWarBankerListPanel.prototype,"HundredWarBankerListPanel");var HundredWarHelpPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.HundredWarHelpPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t);var n=new Array(this.playHelpGroup,this.uiHelpGroup,this.prizeHelpGroup);this.tab.build(TabComponent.CreatData(["玩法说明","界面说明","奖池说明"],n,TabButtonType.SmallOf3)),this.tab.isTween=!1,this.setLabel(this.playwayLabel,TextFixedId.HundredWarRule),this.playHelpScroller.viewport=this.imgLabelGroup,this.uiHelpScroller.viewport=this.imgGroup,this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),this.tab.init(0),this.resetScroller()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.tab.tabChangeEvent.addListener(this.onBarItemTap,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.tab.tabChangeEvent.removeListener(this.onBarItemTap,this)},t.prototype.setLabel=function(e,t){var n=TextDefined.GetInstance().getDefinition(t);n&&(n.isRichTxt?e.textFlow=qin.TextUtil.parse(n.text):e.text=n.text)},t.prototype.onBarItemTap=function(e){0==e&&this.resetScroller(this.playHelpScroller),1==e&&(this.uiHelpBg.texture||UIUtil.loadBg(ResFixedFileName.HundredWar_Help,this.uiHelpBg),this.resetScroller(this.uiHelpScroller)),2==e&&qin.StringUtil.isNullOrEmpty(this.prizeLabel.text)&&this.setLabel(this.prizeLabel,TextFixedId.HundredWarPrize)},t.prototype.resetScroller=function(e){e?(e.stopAnimation(),e.viewport.scrollV=0):(this.playHelpScroller.stopAnimation(),this.playHelpScroller.viewport.scrollV=0,this.uiHelpScroller.stopAnimation(),this.uiHelpScroller.viewport.scrollV=0)},t}(BasePanel);__reflect(HundredWarHelpPanel.prototype,"HundredWarHelpPanel");var HundredWarNoSeatPlayerPanel=function(e){function t(){var t=e.call(this)||this;return t._reqNum=12,t.setSkinName(UIModuleName.HundredWarNoSeatPlayerPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),UIUtil.listRenderer(this.userList,this.userScroller,HundredWarNoSeatItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.reqscroller=new ReqScroller(this.userScroller,this.userList,this._reqNum,this.reqInfo.bind(this)),this.userScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.showGroup(),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),this.reqscroller.Clear(),this.reqInfo()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),HundredWarManager.panelHandler.OnGetHundredWarNoSeatInfoEvent.addListener(this.refreshUI,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),HundredWarManager.panelHandler.OnGetHundredWarNoSeatInfoEvent.removeListener(this.refreshUI,this)},t.prototype.reqInfo=function(){HundredWarManager.panelHandler.reqHundredWarNoSeatInfo(this.reqscroller.index,this.reqscroller.reqNum)},t.prototype.refreshUI=function(e){this.reqscroller.init(new eui.ArrayCollection(e.userList),e.isBottom),e.playerNum>0?(this.showGroup(this.userGroup),this.playerNumLabel.text="当前无座玩家共有"+e.playerNum+"人"):this.showGroup(this.noUserGroup)},t.prototype.showGroup=function(e){this.userGroup.visible=!1,this.noUserGroup.visible=!1,e&&(e.visible=!0)},t}(BasePanel);__reflect(HundredWarNoSeatPlayerPanel.prototype,"HundredWarNoSeatPlayerPanel");var HundredWarOverPanel=function(e){function t(){var t=e.call(this)||this;return t._headIndex=0,t.setSkinName(UIModuleName.HundredWarOverPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),this.reset(),this.coundDown(),qin.Tick.AddSecondsInvoke(this.coundDown,this);var n=HundredWarManager.hundredWarOverInfo;n&&(this.numComp.init("$"+qin.MathUtil.numAddSpace(n.gold)),n.isWin?(this.tipsLabel.text="恭喜，您赢取了",this.titleImg.source=SheetSubName.HundredWar_Win,this.overBgImg.source=SheetSubName.HundredWar_WinBg):(this.tipsLabel.text="您输了",this.titleImg.source=SheetSubName.HundredWar_Lose,this.overBgImg.source=SheetSubName.HundredWar_LoseBg),n.rankList&&this.startReqRank(n.rankList))},t.prototype.startReqRank=function(e){this._headIndex=0,this._rankListClone=e.concat(),this.nextReq()},t.prototype.nextReq=function(){if(this._rankListClone.length>0){var e=this._rankListClone.shift();this["winGold"+this._headIndex].text=qin.MathUtil.formatNum(e.num),HundredWarManager.isSysBanker(e.roleId)?(this.userGroup.getChildAt(this._headIndex).visible=!0,this["head"+this._headIndex].init(HundredWarManager.sysBanker,80),this.onReqComplete(null)):UserManager.reqSimpleUserInfo(e.roleId)}},t.prototype.onReqComplete=function(e){if(e){var t=new SimpleUserInfo(e);this.userGroup.getChildAt(this._headIndex).visible=!0,this["head"+this._headIndex].init(t,80)}this._headIndex++,this.nextReq()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePanel,this),UserManager.OnGetSimpleUserInfoEvent.addListener(this.onReqComplete,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.confirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePanel,this),qin.Tick.RemoveSecondsInvoke(this.coundDown,this),UserManager.OnGetSimpleUserInfoEvent.removeListener(this.onReqComplete,this)},t.prototype.coundDown=function(){this.confirmBtn.labelDisplay.text="确定  "+this._countDownTime,this._countDownTime>0?this._countDownTime--:(qin.Tick.RemoveSecondsInvoke(this.coundDown,this),this.closePanel(null))},t.prototype.closePanel=function(e){e&&SoundManager.playButtonEffect(e.target),!HundredWarManager.isBanker(UserManager.userInfo.roleId)&&InfoUtil.checkAvailable(HundredWarManager.roomInfo)&&UserManager.userInfo.gold<HundredWarManager.roomInfo.definition.minBuyin&&AlertManager.showConfirm("您的金币不足，快去商城补充点金币吧！",this.goToShopping,this.outRoom,null,null,null,"前往商城"),this.onCloseBtnClickHandler(null)},t.prototype.goToShopping=function(){JumpUtil.JumpToShopping(ShopGroupIndex.Gold,UIModuleName.HundredWarRoomPanel)},t.prototype.outRoom=function(){HundredWarManager.reqLeave()},t.prototype.reset=function(){this._countDownTime=HundredWarManager.roomInfo.definition.confirmTime;for(var e=0;e<this.userGroup.numChildren;e++)this.userGroup.getChildAt(e).visible=!1},t}(BasePanel);__reflect(HundredWarOverPanel.prototype,"HundredWarOverPanel");var HundredWarPanel=function(e){function t(){var t=e.call(this)||this;return t._secondNum=0,t.setSkinName(UIModuleName.HundredWarPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),UIUtil.listRenderer(this.matchList,this.matchScroller,HundredWarItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.matchScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.showGroup(),UIManager.pushResizeScroller(this.matchScroller,1145),UIManager.pushResizeScroller(this.noMatchGroup,1145)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.getHundredWarInfo(),qin.ArrayUtil.Clear(HundredWarManager.panelHandler.hundredWarList),HundredWarManager.panelHandler.hundredWarList||(HundredWarManager.panelHandler.hundredWarList=new Array),this.getHundredWarInfoSuccess()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),HundredWarManager.panelHandler.OnGetHundredWarInfoEvent.addListener(this.getHundredWarInfoSuccess,this),HundredWarManager.OnGetRoomInfoEvent.addListener(this.closePanel,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.matchList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.setRoomId,this),qin.Tick.AddSecondsInvoke(this.refreshPerTenSeconds,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),HundredWarManager.panelHandler.OnGetHundredWarInfoEvent.removeListener(this.getHundredWarInfoSuccess,this),HundredWarManager.OnGetRoomInfoEvent.removeListener(this.closePanel,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.matchList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.setRoomId,this),qin.Tick.RemoveSecondsInvoke(this.refreshPerTenSeconds,this)},t.prototype.refreshPerTenSeconds=function(){10==this._secondNum?(this._secondNum=0,HundredWarManager.panelHandler.reqGetHundredWarInfo()):this._secondNum++},t.prototype.getHundredWarInfo=function(){HundredWarManager.panelHandler.reqGetHundredWarInfo()},t.prototype.setRoomId=function(e){this.matchList.selectedItem&&(this._enterRoomId=this.matchList.selectedItem.hwId)},t.prototype.getHundredWarInfoSuccess=function(){HundredWarManager.panelHandler.hundredWarList&&HundredWarManager.panelHandler.hundredWarList.length>0?(this.showGroup(this.hasMatchGroup),UIUtil.writeListInfo(this.matchList,HundredWarManager.panelHandler.hundredWarList,"id",!1,SortUtil.hundredWarRoomIdUpSort)):this.showGroup(this.noMatchGroup)},t.prototype.onClick=function(e){switch(e.target){case this.shoppingBtn:JumpUtil.JumpToShopping(ShopGroupIndex.Gold,UIModuleName.HundredWarPanel)}},t.prototype.closePanel=function(){SceneManager.switcScene(SceneType.HundredWar)},t.prototype.showGroup=function(e){this.hasMatchGroup.visible=!1,this.noMatchGroup.visible=!1,e&&(e.visible=!0)},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BasePanel);__reflect(HundredWarPanel.prototype,"HundredWarPanel");var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.Logger.logLevel=egret.Logger.ERROR,qin.Console.enabled=URLOption.getBoolean(URLOption.Log)||qin.System.isLocalhost,this.stage.setContentSize(GameSetting.StageWidth,GameSetting.StageHeight),0==egret.Capabilities.isMobile&&qin.System.isWeb&&0==qin.System.isEditor&&(this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL,this.stage.orientation=egret.OrientationMode.AUTO),(qin.RuntimeTypeName.getCurrentName()==qin.RuntimeTypeName.WindowsPhone||qin.RuntimeTypeName.getCurrentName()==qin.RuntimeTypeName.WindowsPC)&&(egret.TextField.default_fontFamily="Microsoft YaHei"),qin.System.isMicro?RES.setMaxLoadingThread(8):RES.setMaxLoadingThread(4),qin.I18n.initSystem(PrefsManager.getValue(PrefsManager.Language),OperatePlatform.getLangs()),egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),qin.System.isWeb||qin.System.isMicro?RES.loadConfig(WebConfig.resUrl+WebConfig.defaultResJson,WebConfig.resUrl+"resource/"):RES.loadConfig(PathName.Default_res_json,"resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),qin.I18n.isDefault?this.loadAssetText():RES.getResAsync(ResPrefixPathName.Lang+qin.I18n.lang+ResSuffixName.ZIP,this.onLangComplete,this)},t.prototype.onLangComplete=function(e){e&&qin.I18n.initMap(e),this.loadAssetText()},t.prototype.loadAssetText=function(){var e=qin.I18n.isDefault?ResGroupName.Text:ResGroupName.Text+qin.StringConstants.UnderLine+qin.I18n.lang;RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onAssetTextLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onAssetTextLoadError,this),RES.loadGroup(e)},t.prototype.onAssetTextLoadComplete=function(e){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onAssetTextLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onAssetTextLoadError,this),this.loadResource()},t.prototype.onAssetTextLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onAssetTextLoadComplete(e)},t.prototype.loadResource=function(){var e="";e=qin.System.isWeb||qin.System.isMicro?WebConfig.resUrl+WebConfig.defaultThmJson:PathName.Default_thm_json;var t=new eui.Theme(e,this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(ResGroupName.Login)},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,egret.ImageLoader.crossOrigin="anonymous",this.createScene()},t.prototype.onResourceLoadComplete=function(e){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene()},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&(this.setLoadingText(qin.I18n.getText("正在进入游戏...")),GameManager.initialize(this.stage,this),UIManager.initialize(this.stage),qin.Tick.initialize(this.stage),this.startCreateScene())},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){this.setLoadingText(qin.I18n.getText("正在加载资源...")+e.itemsLoaded+"/"+e.itemsTotal),console.log("资源加载地址："+e.resItem.url)},t.prototype.startCreateScene=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return LoadConfig.startLoad(this.loadConfigComplete,this),[2]})})},t.prototype.loadConfigComplete=function(){ChannelManager.OnInitComplete.addListener(this.OnChannelInitComplete,this),ChannelManager.initialize()},t.prototype.OnChannelInitComplete=function(){this.closeLoading(),ChannelManager.OnInitComplete.removeListener(this.OnChannelInitComplete,this),SceneManager.switcScene(SceneType.Login)},t.prototype.setLoadingText=function(e){qin.System.isWeb&&WebLoading.setText(e)},t.prototype.closeLoading=function(){qin.System.isWeb?WebLoading.hide():qin.System.isMicro&&window.closeLoadingView&&window.closeLoadingView()},t}(eui.UILayer);__reflect(Main.prototype,"Main");var HundredWarRoomPanel=function(e){function t(){var t=e.call(this)||this;return t.isTween=!1,t.setSkinName(UIModuleName.HundredWarRoomPanel),t}return __extends(t,e),Object.defineProperty(t.prototype,"supportNomalList",{get:function(){return this._supportNomalList},enumerable:!0,configurable:!0}),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this._betListInfo=new Array,this.preBetList=new Array,this.pitList=new Array;for(var n,i=0;9>i;i++)n=new HWPitInfo,n.pos=i,n.headComponent=this["pit"+i.toString()],n.headComponent.parentPanel=this,n.headComponent.pos=i,this.pitList.push(n);this.poolList=new Array;for(var a,i=1;4>=i;i++)a=new HundredWarPoolInfo,a.pos=i,a.betPotComponent=this["betPotComponent"+i],this.poolList.push(a);this.cardsList=new Array;for(var o,i=0;5>i;i++)o=new HundredWarCardsInfo,o.pos=i,o.cardsComponent=this["cardsComponent"+i],this.cardsList.push(o);this.betPotList=new Array;for(var i=1;4>=i;i++)this["betPotComponent"+i].init(),this["betPotComponent"+i].setBg(i),this.betPotList.push(this["betPotComponent"+i]);this.cardsComponentList=new Array;
for(var i=0;5>i;i++)this["cardsComponent"+i].init(),this.cardsComponentList.push(this["cardsComponent"+i]);UIUtil.bindRender(this.betList,HWBetItemRenderer,null),this.betList.useVirtualLayout=!1,this.betScroller.viewport=this.chooseBetGroup,this.betScroller.scrollPolicyH=eui.ScrollPolicy.AUTO,this._supportNomalList=new Array,this.supportsConstructor(),this.hwAnim=new HundredWarAnime(this.coinsGroup,this.betPotList,new egret.Point(115,90),0,38),this.cardsAnim=new HundredWarCardAnime(this.cardsGroup,this.cardsComponentList,63,43),this.currencyGroup.touchEnabled=this.ordinaryRoomGroup.touchEnabled=this.betGroup.touchEnabled=!1,this.cardsComponentGroup.touchEnabled=this.alertGroup.touchEnabled=this.chooseBetGroup.touchEnabled=!1,this.coinActionGroup.touchEnabled=this.coinsGroup.touchEnabled=this.cardsGroup.touchEnabled=!1;for(var r,s=this.supportNomalList.length,i=0;s>i;i++)r=this.supportNomalList[i],this.panelData&&r instanceof HWPanelMoveSupport&&r.toRight(!1);this._downEffect=new DownEfffectComponent(UIComponentSkinName.DownEfffectComponent),this._downEffect.init(),this.addRedPoint()},t.prototype.init=function(t){e.prototype.init.call(this,t),this.goldChange(),this.setBetInfo(),qin.ArrayUtil.Clear(this._betListInfo),this.showBetItem(),this.initPanel()},t.prototype.initPanel=function(){this._downEffect.init(),this.onSupportInitialize(),ChannelManager.checkUnFinishedPayList()},t.prototype.addRedPoint=function(){UIUtil.addSingleNotify(this.chatBtn,NotifyType.HundredWar_Chat,8,2)},t.prototype.supportsConstructor=function(){this._pitDataSupport=new HWPanelPitDataSupport(this),this._moveSpt=new HWPanelMoveSupport(this),this.roundOverSupport=new HWPanelRoundOverSupport(this),this.sitDownAndAddCoin=new HWPanelSitDownAndChooseCoinSupport(this),this.betPotSupport=new HWPanelBetPotSupport(this),this.stateSupport=new HWStateSupport(this);var e=new HWFuncSupport(this),t=new HWPanelPitSupport(this),n=new HWPanelActionSupport(this);this._supportNomalList.push(n,this._moveSpt,t,this._pitDataSupport,this.sitDownAndAddCoin,this.betPotSupport,e,this.stateSupport,this.roundOverSupport)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.onSupportEnable(),HundredWarManager.addPushListener(),HundredWarManager.onLeaveEvent.addListener(this.leaveClear,this),HundredWarManager.onBetEvent.addListener(this.goldChange,this),HundredWarManager.onShowCardsAnimOverEvent.addListener(this.showOverPanel,this),HundredWarManager.panelHandler.onUpDownBankerEvent.addListener(this.goldChange,this),HundredWarManager.onPosChangeEvent.addListener(this.goldChange,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.onSupportDisable(),HundredWarManager.removePushListener(),HundredWarManager.onLeaveEvent.removeListener(this.leaveClear,this),HundredWarManager.onBetEvent.removeListener(this.goldChange,this),HundredWarManager.onShowCardsAnimOverEvent.removeListener(this.showOverPanel,this),HundredWarManager.panelHandler.onUpDownBankerEvent.removeListener(this.goldChange,this),HundredWarManager.onPosChangeEvent.removeListener(this.goldChange,this)},t.prototype.showOverPanel=function(){(HundredWarManager.getPlayerBetTotalNum()>0&&HundredWarManager.isBanker(UserManager.userInfo.roleId)||HundredWarManager.getThisBetGold()>0)&&JumpUtil.JumpToHundredWarOver()},t.prototype.goldChange=function(){UserManager.userInfo&&(this.selfInfoLabel.textFlow=qin.TextUtil.parse(UserManager.userInfo.name+'  <font color="#E6C21D" size="24">'+qin.MathUtil.formatNum(UserManager.userInfo.gold)+"</font>"))},t.prototype.onSupportInitialize=function(){for(var e,t=this.supportNomalList.length,n=0;t>n;n++)e=this.supportNomalList[n],e.initialize()},t.prototype.onSupportEnable=function(){for(var e,t=this.supportNomalList.length,n=0;t>n;n++)e=this.supportNomalList[n],e.onEnable()},t.prototype.onSupportDisable=function(){for(var e,t=this.supportNomalList.length,n=0;t>n;n++)e=this.supportNomalList[n],e.onDisable()},t.prototype.leaveClear=function(){this.betPotSupport.leaveClear(),this.roundOverSupport.leaveClear(),qin.ArrayUtil.Clear(this.preBetList)},t.prototype.setBetInfo=function(){var e=HundredWarManager.roomInfo.definition;if(e&&e.bet)for(var t=void 0,n=0;n<e.bet.length;n++)t=new HWBetInfo,t.bet=e.bet[n],t.id=n,this._betListInfo[n]=t},t.prototype.showBetItem=function(){this.setBetInfo(),this._betListInfo&&this._betListInfo.length>0&&UIUtil.writeListInfo(this.betList,this._betListInfo,"id",!0)},t.prototype.gameGroupMove=function(){this._moveSpt.move()},t.prototype.moveTouchEnd=function(e){return this.gameGroup.x>0?(this._moveSpt.onTouchBegin(e),this._moveSpt.onTouchEnd(e,!0),!0):!1},t.prototype.onClose=function(){e.prototype.onCloseBtnClickHandler.call(this,null)},t.prototype.refreshPreBetList=function(){if(HundredWarManager.roomInfo&&HundredWarManager.roomInfo.betList)for(var e=0,t=HundredWarManager.roomInfo.betList;e<t.length;e++){for(var n=t[e],i=!0,a=void 0,o=0;o<this.preBetList.length;o++){var r=this.preBetList[o];if(0!=n.pos&&r.pos==n.pos){n.myBet?r.myBet=n.myBet:this.preBetList.splice(o,1),i=!1;break}}i&&0!=n.pos&&(a=new HWBetPotInfo,a.pos=n.pos,a.myBet=n.myBet,this.preBetList.push(a))}},t.prototype.getPreBetGold=function(){if(this.preBetList&&this.preBetList.length>0){for(var e=0,t=0,n=this.preBetList;t<n.length;t++){var i=n[t];e+=i.myBet}return e}return 0},t.prototype.getHeadComponent=function(e){return this._pitDataSupport.getHeadComponent(e)},t.prototype.getPitInfoByIndex=function(e){if(void 0!=e)for(var t=0,n=this.pitList;t<n.length;t++){var i=n[t];if(i.pos==e)return i}return null},t.prototype.getPoolInfoByIndex=function(e){if(void 0!=e)for(var t=0,n=this.poolList;t<n.length;t++){var i=n[t];if(i.pos==e)return i}return null},t.prototype.getCardsInfoByIndex=function(e){if(void 0!=e)for(var t=0,n=this.cardsList;t<n.length;t++){var i=n[t];if(i.pos==e)return i}return null},t.prototype.getHeadComponentByRole=function(e){if(e instanceof HWHundredWarRoomPlayerInfo)return this._pitDataSupport.getHeadComponent(e.pos);var t=HundredWarManager.getPlayerInfo(e);return t?this._pitDataSupport.getHeadComponent(t.pos):null},t.prototype.showDownEffect=function(e){this._downEffect.run(e)},t.prototype.hideDownEffect=function(){this._downEffect.init()},t}(BasePanel);__reflect(HundredWarRoomPanel.prototype,"HundredWarRoomPanel");var HundredWarTrendPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.HundredWarTrendPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,UIUtil.listRenderer(this.recordList,this.recordScroller,HundredWarTrendItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.recordScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.showGroup()},t.prototype.init=function(t){e.prototype.init.call(this,t),HundredWarManager.panelHandler.reqHundredWarTrendList()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),HundredWarManager.panelHandler.OnGetHundredWarTrendListEvent.addListener(this.refreshUI,this)},t.prototype.refreshUI=function(){HundredWarManager.panelHandler.HundredWarTrendList.length>0?(this.showGroup(this.recordGroup),UIUtil.writeListInfo(this.recordList,HundredWarManager.panelHandler.HundredWarTrendList)):this.showGroup(this.noRecordGroup)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),HundredWarManager.panelHandler.OnGetHundredWarTrendListEvent.removeListener(this.refreshUI,this)},t.prototype.showGroup=function(e){this.recordGroup.visible=!1,this.noRecordGroup.visible=!1,e&&(e.visible=!0)},t}(BasePanel);__reflect(HundredWarTrendPanel.prototype,"HundredWarTrendPanel");var ImgNotifyPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.ImgNotifyPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),UIManager.pushResizeGroup(this),this.isMaskClickClose=!0,this.maskAlpha=.3},t.prototype.init=function(t){e.prototype.init.call(this,t),this.loadImg(t.shift())},t.prototype.loadImg=function(e){RES.getResByUrl(e,this.onLoadComp,this,RES.ResourceItem.TYPE_IMAGE)},t.prototype.onLoadComp=function(e,t){this.noticeImg.bitmapData=e},t.prototype.onCloseBtnClickHandler=function(t){e.prototype.onCloseBtnClickHandler.call(this,t),this.panelData.length>0?JumpUtil.JumpToNoticePanel(this.panelData):ActivityManager.signInHandler.isSignToday()?ActivityManager.payPrizeHandler.getIsShow(ActivityId.FirstPay)&&JumpUtil.JumpToFirstPayPanel():JumpUtil.JumpToSignIn(!0)},t}(BasePanel);__reflect(ImgNotifyPanel.prototype,"ImgNotifyPanel");var InviteFriendPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.InviteFriendPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.isCloseButtonTween=!1,UIUtil.listRenderer(this.inviteFriendList,this.inviteFriend_scroller,InviteFriendListItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0)},t.prototype.init=function(t){if(e.prototype.init.call(this,t),this.checkAll.selected=!1,FriendManager.friendList){this._infoList=new Array;for(var n=0;n<FriendManager.friendList.length;n++){var i=new InviteInfo;i.friendInfo=FriendManager.friendList[n],this._infoList.push(i)}}},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.setFriendListInfo()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.checkAll.addEventListener(egret.Event.CHANGE,this.checkAllHandler,this),this.inviteFriendList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.checkBtnHandler,this),this.inviteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendInviteHandler,this),FriendManager.InviteFriendEvent.addListener(this.inviteFriendHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.checkAll.removeEventListener(egret.Event.CHANGE,this.checkAllHandler,this),this.inviteFriendList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.checkBtnHandler,this),this.inviteBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sendInviteHandler,this),FriendManager.InviteFriendEvent.removeListener(this.inviteFriendHandler,this),this._infoList=null},t.prototype.setFriendListInfo=function(){this._infoList&&(this._dp=new eui.ArrayCollection(this._infoList.sort(SortUtil.inviteFriendSort)),this.inviteFriendList.dataProvider=this._dp)},t.prototype.checkAllHandler=function(){if(this._infoList)for(var e=0;e<this._infoList.length;e++){this._infoList[e].state=this.checkAll.selected;var t=this.getItemRender(this._infoList[e].friendInfo);t&&t.setChecked(this.checkAll.selected)}},t.prototype.getItemRender=function(e){for(var t=0;t<this.inviteFriendList.numChildren;t++){var n=this.inviteFriendList.getChildAt(t);if(n.bindData.friendInfo.roleId==e.roleId)return n}return null},t.prototype.checkBtnHandler=function(e){var t=this.getItemRender(this.inviteFriendList.selectedItem.friendInfo);if(t){var n=!t.isCheckedBtn.selected;t.bindData.state=n,t.setChecked(n),n||(this.checkAll.selected=n)}},t.prototype.sendInviteHandler=function(){if(!GamblingManager.roomInfo||0==GamblingManager.roomInfo.id)return void AlertManager.showAlert("您当前不在房间中,无法邀请好友");var e=new Array;if(this._infoList){for(var t=0;t<this._infoList.length;t++)this._infoList[t].state&&this._infoList[t].friendInfo&&e.push(this._infoList[t].friendInfo.roleId);e.length>0?FriendManager.reqInviteFriend(GamblingManager.roomInfo.id,e):AlertManager.showAlert("您未选择要邀请的好友")}},t.prototype.inviteFriendHandler=function(){AlertManager.showAlert("好友邀请已发送"),this.onCloseBtnClickHandler(null)},t}(BasePanel);__reflect(InviteFriendPanel.prototype,"InviteFriendPanel");var InviteInfo=function(){function e(){}return e}();__reflect(InviteInfo.prototype,"InviteInfo");var InviteMsgPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.InviteMsgPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!0,this.maskAlpha=.5},t.prototype.init=function(t){e.prototype.init.call(this,t);var n=FriendManager.getFriendInfoById(t.roleId);if(n?(this.inviteMsgLable.text="你的好友"+n.name+"现在邀请您一起游戏！",this.headComp.init(n,120)):qin.Console.logError("ERROR好友信息未找到角色ID："+t.roleId),t.id&&(t.id.toString().length<5?this.roomIdLabel.text=PlayingFieldManager.roomIdAddZero(t.id):this.roomIdLabel.text=t.id.toString()),t.roomId&&0!=t.roomId){var i=RoomDefined.GetInstance().getDefinition(t.roomId);i?this.roomBuyLabel.text=qin.MathUtil.formatNum(i.sBuyin)+"买入":this.roomBuyLabel.text=""}else this.roomBuyLabel.text=""},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.joinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.joinBtnHandler,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackBtnClickHandler,this),GamblingManager.OnGetRoomInfoEvent.addListener(this.onGetRoomInfoHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.joinBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.joinBtnHandler,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackBtnClickHandler,this),GamblingManager.OnGetRoomInfoEvent.removeListener(this.onGetRoomInfoHandler,this)},t.prototype.onBackBtnClickHandler=function(){this.onCloseBtnClickHandler(null)},t.prototype.joinBtnHandler=function(e){return SceneManager.sceneType==SceneType.Game&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&0!=GamblingManager.roomInfo.id&&GamblingManager.roomInfo.id==this.panelData.id?(UIManager.showFloatTips("已在房间内"),void this.onBackBtnClickHandler()):void this.confirmGotoRoom()},t.prototype.confirmGotoRoom=function(){this.panelData&&GamblingManager.reqEnterRoom(this.panelData.id,this.panelData.pwd)},t.prototype.onGetRoomInfoHandler=function(){if(SceneManager.sceneType==SceneType.Game){var e=UIManager.getPanel(UIModuleName.GamblingPanel);e?e.switchToGameSceneInRoom():UIManager.showPanel(UIModuleName.GamblingPanel)}else SceneManager.switcScene(SceneType.Game);this.onCloseBtnClickHandler(null)},t.prototype.backToHall=function(){if(GamblingManager.roomInfo)switch(GamblingManager.roomInfo.gamblingType){case GamblingType.Common:GamblingManager.reqLeaveRoom();break;case GamblingType.Championship:AlertManager.showConfirm("退出比赛后，比赛将进入托管状态，是否确认退出？",this.leaveRoom,null,this.panelData);break;case GamblingType.Personal:GamblingManager.isMaster?AlertManager.showConfirm("是否退出并解散当前房间,进入被邀请房间?",this.leaveRoom,null,this.panelData):this.leaveRoom(this.panelData)}},t.prototype.leaveRoom=function(e){e&&GamblingManager.reqEnterRoom(e.id,e.pwd)},t}(BasePanel);__reflect(InviteMsgPanel.prototype,"InviteMsgPanel");var JoinChampionshipSuccessPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.JoinChampionshipSuccessPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!0,this.maskAlpha=.5},t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.nameLabel.text=this.panelData.name;var n=new Date(1e3*this.panelData.time);this.panelData.time-TimeManager.GetServerUtcTimestamp()>86400?this.timeLabel.text=n.getMonth()+1+"-"+n.getDate()+ +qin.DateTimeUtil.formatDate(n,qin.DateTimeUtil.Format_Standard_NoSecond).split(" ")[1]:this.timeLabel.text="今日"+qin.DateTimeUtil.formatDate(n,qin.DateTimeUtil.Format_Standard_NoSecond).split(" ")[1],this.numLabel.text=this.panelData.applyNum+"/"+this.panelData.bNum,this.chipLabel.text=this.panelData.chip},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePanel,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePanel,this)},t.prototype.closePanel=function(e){SoundManager.playButtonEffect(e.target),UIManager.closePanel(UIModuleName.JoinChampionshipSuccessPanel)},t}(BasePanel);__reflect(JoinChampionshipSuccessPanel.prototype,"JoinChampionshipSuccessPanel");var KeyBoardPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.KeyBoardPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=.1,this._btnList=new Array;for(var n=0;9>=n;n++)this._btnList.push(this["numBtn"+n.toString()]);UIManager.pushResizeGroup(this.panelBottom)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.panelData&&this.panelData.target&&UIManager.dispatchEvent(UIModuleName.KeyBoardPanel,UIModuleEvent.OnCallTargetInit,this.panelData.target),this.isbgNotCanClick=!1,this.isNotHasMask=!1,this.searchLabelFlag="",1==this.panelData.isbgNotCanClick&&(this.isbgNotCanClick=!0),1==this.panelData.isNotHasMask&&(this.isNotHasMask=!0),this.isNotHasMask?this.setGrayMask(!1):this.maskAlpha=0,this.panelData.searchLabelFlag&&(this.searchLabelFlag=this.panelData.searchLabelFlag),this.anmGroup.bottom=-502,egret.Tween.removeTweens(this.anmGroup);var n=egret.Tween.get(this.anmGroup);n.to({bottom:0},200)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.keyboardClickHandler,this),PlayingFieldManager.onCloseKeyboardEvent.addListener(this.immediatelyClose,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.keyboardClickHandler,this),PlayingFieldManager.onCloseKeyboardEvent.removeListener(this.immediatelyClose,this)},t.prototype.immediatelyClose=function(){this.anmGroup.bottom=-502,UIManager.closePanel(UIModuleName.KeyBoardPanel)},t.prototype.outAnime=function(){var e=egret.Tween.get(this.anmGroup);this.anmGroup.bottom=0,e.to({bottom:-502},200).call(this.onCloseAnmComplete,this)},t.prototype.onCloseAnmComplete=function(){PlayingFieldManager.onKeyBoardCloseEvent.dispatch(),UIManager.closePanel(UIModuleName.KeyBoardPanel)},t.prototype.keyboardClickHandler=function(e){SoundManager.playButtonEffect(e.target),this.type=-1;var t=this._btnList.indexOf(e.target);if(t>=0)this.type=1,this.panelData.callback&&(this.panelData.target?this.searchLabelFlag?this.panelData.callback.call(this.panelData.target,this.type,this.searchLabelFlag,t.toString()):this.panelData.callback.call(this.panelData.target,this.type,t.toString()):this.searchLabelFlag?this.panelData.callback(this.type,this.searchLabelFlag,t.toString()):this.panelData.callback(this.type,t.toString()));else{switch(e.target){case this.resetBtn:this.type=3;break;case this.delBtn:this.type=2;break;case this.anmGroup:break;case this.bgImg:break;default:this.type=4,this.isbgNotCanClick||this.outAnime()}this.panelData.callback&&(this.panelData.target?this.searchLabelFlag?this.panelData.callback.call(this.panelData.target,this.type,this.searchLabelFlag):this.panelData.callback.call(this.panelData.target,this.type):this.searchLabelFlag?this.panelData.callback(this.type,this.searchLabelFlag):this.panelData.callback(this.type))}},t}(BasePanel);__reflect(KeyBoardPanel.prototype,"KeyBoardPanel");var LoadingPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.LoadingPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){this.isTween=!1,e.prototype.onAwake.call(this,t),this.maskAlpha=.01},t.prototype.init=function(e){this._allowTimeout=!0,e&&(this._allowTimeout=e),this._time=egret.getTimer(),this._isOut=!1},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.setAnime(),this.addEventListener(egret.Event.ENTER_FRAME,this.update,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeAnime(),this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this)},t.prototype.update=function(e){if(this._allowTimeout&&0==this._isOut){var t=egret.getTimer()-this._time;t>=ProjectDefined.GetInstance().getValue(ProjectDefined.onTimeOut)&&(this._isOut=!0,UIManager.closePanel(UIModuleName.LoadingPanel),UIManager.dispatchEvent(UIModuleName.LoadingPanel,UIModuleEvent.OnTimeout))}},t.prototype.setAnime=function(){egret.Tween.get(this.image,{loop:!0}).set({rotation:0}).to({rotation:360},1e3)},t.prototype.removeAnime=function(){egret.Tween.removeTweens(this.image)},t}(BasePanel);__reflect(LoadingPanel.prototype,"LoadingPanel");var LoadingSwitchPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.LoadingSwitchPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t);var n=qin.MathUtil.getRandom(0,LoadingTextDefined.GetInstance().dataList.length-1),i=LoadingTextDefined.GetInstance().getDefinition(n);i&&(this.textLabel.text=i.des),this.loading.play(),this._allowTimeout=t,this._time=egret.getTimer(),this._isOut=!1},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._allowTimeout&&qin.Tick.addFrameInvoke(this.update,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.loading.pause(),qin.Tick.removeFrameInvoke(this.update,this)},t.prototype.update=function(e){if(this._allowTimeout&&0==this._isOut){var t=egret.getTimer()-this._time;t>=ProjectDefined.GetInstance().getValue(ProjectDefined.onTimeOut)&&(this._isOut=!0,UIManager.closePanel(UIModuleName.LoadingSwitchPanel),UIManager.dispatchEvent(UIModuleName.LoadingSwitchPanel,UIModuleEvent.OnTimeout))}},t}(BasePanel);__reflect(LoadingSwitchPanel.prototype,"LoadingSwitchPanel");var LoginBar=function(e){function t(){var t=e.call(this)||this;return t.isTween=!0,t.setSkinName(UIModuleName.LoginBar),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t)},t.prototype.init=function(t){e.prototype.init.call(this,t);var n=t;if(null!=n.ServerList&&n.ServerList.length>0){if(n.LastSId>0)for(var i=0;i<n.ServerList.length;i++){var a=n.ServerList[i];if(a.id==n.LastSId){this._serverInfo=a;break}}if(null==this._serverInfo){for(var i=n.ServerList.length-1;i>=0;i--){var a=n.ServerList[i];if(1!=a.status){this._serverInfo=a;break}}null==this._serverInfo&&(this._serverInfo=n.ServerList[n.ServerList.length-1])}}ChannelLoginType.IsViewAccount(ChannelManager.loginType)&&(this.accountLabel.text=LoginManager.account)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.switchAccountButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchClickHandler,this),this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterClickHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.switchAccountButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchClickHandler,this),this.enterBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterClickHandler,this)},t.prototype.switchClickHandler=function(e){SoundManager.playButtonEffect(e.target),UIManager.dispatchEvent(UIModuleName.LoginBar,UIModuleEvent.CHANGE)},t.prototype.enterClickHandler=function(t){SoundManager.playButtonEffect(t.target),UIManager.dispatchEvent(UIModuleName.LoginBar,UIModuleEvent.COMPLETE,this._serverInfo),e.prototype.onCloseBtnClickHandler.call(this,t)},t}(BasePanel);__reflect(LoginBar.prototype,"LoginBar");var LoginLocalPanel=function(e){function t(){var t=e.call(this)||this;return t.isTween=!0,t.setSkinName(UIModuleName.LoginLocalPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.accountLabel.type=egret.TextFieldType.INPUT,this.pwdLabel.type=egret.TextFieldType.INPUT,this.pwdLabel.inputType=egret.TextFieldInputType.PASSWORD,this.accountLabel.text=PrefsManager.getValue(PrefsManager.Login_Account),this.pwdLabel.text=PrefsManager.getValue(PrefsManager.Login_Password)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.loginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginHandler,this),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.registerHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.loginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginHandler,this),this.registerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.registerHandler,this)},t.prototype.loginHandler=function(e){var t=this.accountLabel.text.trim(),n=this.pwdLabel.text.trim();return SoundManager.playButtonEffect(e.target),t&&n?(this.onCloseBtnClickHandler(null),void ChannelManager.DispatchAccountLoginSucceed(t,n,!1)):void AlertManager.showAlert("您的账号或密码为空，请重新输入！")},t.prototype.registerHandler=function(e){SoundManager.playButtonEffect(e.target),this.onCloseBtnClickHandler(null),UIManager.showPanel(UIModuleName.RegisterPanel)},t.prototype.onCloseBtnClickHandler=function(t){e.prototype.onCloseBtnClickHandler.call(this,t),t&&ChannelManager.OnLoginFailed.dispatch()},t}(BasePanel);__reflect(LoginLocalPanel.prototype,"LoginLocalPanel");var LoginPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.LoginPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){this.isTween=!1,e.prototype.onAwake.call(this,t),this.logoImg.source=ResFixedFileName.getResNameByBundle(ResFixedFileName.Logo_png)},t.prototype.init=function(t){e.prototype.init.call(this,t);var n=ChannelLoginType.GetChannelLoginList(OperatePlatform.getCurrent(),ChannelManager.channelType,VersionManager.isServerTest,VersionManager.isSafe);this.agreeCheckBox.selected=!0,GameSetting.IsAgreeUserAgreement=this.agreeCheckBox.selected,this.guestLoginBtn.visible=!1,this.intranetAccountBtn.visible=!1,this.weixinLoginBtn.visible=!1,this.accountBtn.visible=!1,this.intranetGuestBtn.visible=!1,this.telLoginBtn.visible=!1;for(var i=0,a=n;i<a.length;i++){var o=a[i];o==ChannelLoginType.Qin?(this.telLoginBtn.visible=!0,this.telLoginBtn.includeInLayout=!0):o==ChannelLoginType.Guest?(this.guestLoginBtn.visible=!0,this.guestLoginBtn.includeInLayout=!0):o==ChannelLoginType.IntranetAccount?(this.intranetAccountBtn.visible=!0,this.intranetAccountBtn.includeInLayout=!0):o==ChannelLoginType.Weixin?(this.weixinLoginBtn.visible=!0,this.weixinLoginBtn.includeInLayout=!0):o==ChannelLoginType.Account?(this.accountBtn.visible=!0,this.accountBtn.includeInLayout=!0):o==ChannelLoginType.IntranetGuest&&(this.intranetGuestBtn.visible=!0,this.intranetGuestBtn.includeInLayout=!0)}this.versionLabel.text=VersionManager.getVersionStr()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.weixinLoginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.weixinClickHandler,this),this.guestLoginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.guestLoginClickHandler,this),this.intranetAccountBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.intranetAccountClickHandler,this),this.userBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.userBtnClickHandler,this),this.accountBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.accountBtnClickHandler,this),this.intranetGuestBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.intranetGuestBtnClickHandler,this),this.telLoginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.telAccountBtnClickHandler,this),this.agreeCheckBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.agreeCheckBoxClickHandler,this),UIManager.addEventListener(UIModuleName.UserAngreementPanel,UIModuleEvent.CHANGE,this.outAngree,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.weixinLoginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.weixinClickHandler,this),this.guestLoginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.guestLoginClickHandler,this),this.intranetAccountBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.intranetAccountClickHandler,this),this.userBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.userBtnClickHandler,this),this.accountBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.accountBtnClickHandler,this),this.intranetGuestBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.intranetGuestBtnClickHandler,this),this.telLoginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.telAccountBtnClickHandler,this),this.agreeCheckBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.agreeCheckBoxClickHandler,this),UIManager.removeEventListener(UIModuleName.UserAngreementPanel,UIModuleEvent.CHANGE,this.outAngree,this)},t.prototype.guestLoginClickHandler=function(e){SoundManager.playButtonEffect(e.target),UIManager.dispatchEvent(UIModuleName.LoginPanel,UIModuleEvent.COMPLETE,ChannelLoginType.Guest)},t.prototype.accountBtnClickHandler=function(e){SoundManager.playButtonEffect(e.target),UIManager.dispatchEvent(UIModuleName.LoginPanel,UIModuleEvent.COMPLETE,ChannelLoginType.Account)},t.prototype.intranetGuestBtnClickHandler=function(e){SoundManager.playButtonEffect(e.target),UIManager.dispatchEvent(UIModuleName.LoginPanel,UIModuleEvent.COMPLETE,ChannelLoginType.IntranetGuest)},t.prototype.telAccountBtnClickHandler=function(e){SoundManager.playButtonEffect(e.target),this.isAgreeUserAgreement()&&UIManager.dispatchEvent(UIModuleName.LoginPanel,UIModuleEvent.COMPLETE,ChannelLoginType.Qin)},t.prototype.intranetAccountClickHandler=function(e){SoundManager.playButtonEffect(e.target),UIManager.dispatchEvent(UIModuleName.LoginPanel,UIModuleEvent.COMPLETE,ChannelLoginType.IntranetAccount)},t.prototype.weixinClickHandler=function(e){SoundManager.playButtonEffect(e.target),this.isAgreeUserAgreement()&&(qin.System.isWeb||ChannelManager.hasWeixin?UIManager.dispatchEvent(UIModuleName.LoginPanel,UIModuleEvent.COMPLETE,ChannelLoginType.Weixin):UIManager.showFloatTips("请安装微信后重启本游戏！"))},t.prototype.userBtnClickHandler=function(e){SoundManager.playButtonEffect(e.target),UIManager.showPanel(UIModuleName.UserAngreementPanel)},t.prototype.isAgreeUserAgreement=function(){return GameSetting.IsAgreeUserAgreement?!0:(UIManager.showFloatTips("用户必须同意用户协议才可进行登录！"),!1)},t.prototype.agreeCheckBoxClickHandler=function(e){SoundManager.playButtonEffect(e.target),GameSetting.IsAgreeUserAgreement=this.agreeCheckBox.selected},t.prototype.outAngree=function(){this.agreeCheckBox.selected=!0,GameSetting.IsAgreeUserAgreement=this.agreeCheckBox.selected},t}(BasePanel);__reflect(LoginPanel.prototype,"LoginPanel");var LoginSceneBgPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.LoginSceneBgPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.logoImg.source=ResFixedFileName.getResNameByBundle(ResFixedFileName.Logo_png)},t.prototype.showVersion=function(){this.versionLabel&&(this.versionLabel.text=VersionManager.getVersionStr())},t}(BasePanel);__reflect(LoginSceneBgPanel.prototype,"LoginSceneBgPanel");var LoginTelPanel=function(e){function t(){var t=e.call(this)||this;return t.isTween=!0,t.setSkinName(UIModuleName.LoginTelPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.accountText.inputType=egret.TextFieldInputType.TEL,this.accountText.restrict="0-9",this.accountText.maxChars=11,this.pwdText.inputType=egret.TextFieldInputType.PASSWORD,this.isMaskClickClose=!0,this.maskAlpha=0,this.tweenGroup.verticalCenter=220},t.prototype.init=function(t){e.prototype.init.call(this,t),this.accountText.text=qin.StringConstants.Empty,this.pwdText.text=qin.StringConstants.Empty;var n=AccountPlayerPrefs.GetAccountList();if(null!=n&&n.length>0){var i=n[0];this.accountText.text=i.account,this.pwdText.text=i.pw}},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.loginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginHandler,this),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.registerHandler,this),this.findPwdBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.findPwdHandler,this),AccountManager.OnLoginSuccess.addListener(this.loginSuccessHandler,this),AccountManager.OnLoadingStart.addListener(this.showLoading,this),AccountManager.OnLoadingFinish.addListener(this.closeLoading,this)
},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.loginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginHandler,this),this.registerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.registerHandler,this),this.findPwdBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.findPwdHandler,this),AccountManager.OnLoginSuccess.removeListener(this.loginSuccessHandler,this),AccountManager.OnLoadingStart.removeListener(this.showLoading,this),AccountManager.OnLoadingFinish.removeListener(this.closeLoading,this)},t.prototype.loginHandler=function(e){var t=this.accountText.text.trim(),n=this.pwdText.text.trim();if(SoundManager.playButtonEffect(e.target),!t||!n)return void AlertManager.showAlert("您的账号或密码为空，请重新输入！");var i=AccountPlayerPrefs.IsMatchAccountPassword(t,n);AccountManager.Login(t,n,i)},t.prototype.loginSuccessHandler=function(){var e=this.accountText.text.trim(),t=this.pwdText.text.trim();UIManager.showFloatTips("欢迎回来 "+AccountManager.account),ChannelManager.DispatchAccountLoginSucceed(e,t,!1),this.onCloseBtnClickHandler(null)},t.prototype.registerHandler=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.onCloseBtnClickHandler(null),UIManager.showPanel(UIModuleName.RegisterTelPanel,{prevPanelName:UIModuleName.LoginTelPanel})},t.prototype.findPwdHandler=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.onCloseBtnClickHandler(null),JumpUtil.JumpToRetrievePwd(UIModuleName.LoginTelPanel)},t.prototype.onCloseBtnClickHandler=function(t){e.prototype.onCloseBtnClickHandler.call(this,t),t&&ChannelManager.OnLoginFailed.dispatch()},t.prototype.showLoading=function(){UIManager.showPanel(UIModuleName.LoadingPanel)},t.prototype.closeLoading=function(){UIManager.closePanel(UIModuleName.LoadingPanel)},t}(BasePanel);__reflect(LoginTelPanel.prototype,"LoginTelPanel");var MailPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.MailPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.tab.build(TabComponent.CreatData(["系统邮箱","私人邮箱"],[this.mailGroup,this.mailGroup],TabButtonType.SmallOf2)),this.tab.isTween=!1,UIUtil.listRenderer(this.mailList,this.mailScroller,MailItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.addRedPoint(),this.maskAlpha=0},t.prototype.addRedPoint=function(){var e=this.tab.getBtnByLabel("系统邮箱");UIUtil.addSingleNotify(e,NotifyType.Mail_HaveNewSystem,3,78),e=this.tab.getBtnByLabel("私人邮箱"),UIUtil.addSingleNotify(e,NotifyType.Mail_HaveNewPlayer,3,78)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.tab.init(0),MailManager.unReadCount=0,this.onBarItemTap(0)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.tab.tabChangeEvent.addListener(this.onBarItemTap,this),MailManager.getMailListEvent.addListener(this.getMailList,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.tab.tabChangeEvent.removeListener(this.onBarItemTap,this),MailManager.getMailListEvent.removeListener(this.getMailList,this),this.mailScroller.stopAnimation()},t.prototype.getMailList=function(){this.refreshUI()},t.prototype.refreshUI=function(){this.noMailLabel.visible=0==MailManager.mailList.length,UIUtil.writeListInfo(this.mailList,MailManager.mailList,"Id")},t.prototype.onBarItemTap=function(e){var t=MailManager.getListByType(e);t?(this.noMailLabel.visible=0==t.length,UIUtil.writeListInfo(this.mailList,MailManager.getListByType(e),"Id",!1,SortUtil.MailDateSort)):this.noMailLabel.visible=!0,this.mailScroller.stopAnimation()},t}(BasePanel);__reflect(MailPanel.prototype,"MailPanel");var MarqueePanel=function(e){function t(){var t=e.call(this)||this;return t.isTween=!1,t.panelAlignType=PanelAlignType.Center_Top,t.layer=UILayerType.Tips,t.setTouchChildren(!1),t.setTouchEnable(!1),t.setSkinName(UIModuleName.MarqueePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){this.scroller.viewport=this.textGroup,e.prototype.onAwake.call(this,t)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.setMarqueePos(),egret.Tween.removeTweens(this.scroller.viewport),t&&(this.textLabel.text=t),this.panelData||(UIManager.showFloatTips("跑马灯内容为空！"),this.onTweenGroupComplete())},t.prototype.onRender=function(t){ChatManager.isOnMessage=!0,this.move=new egret.Tween(this.scroller.viewport,null,null);var n=20*this.textLabel.width,i=this.textLabel.width;this.scroller.viewport.scrollH=-this.bgImg.width,1e4>n&&(n=1e4),this.move.to({scrollH:i},n).call(this.onTweenGroupComplete,this),this.move.play(),e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),UIUtil.hideScrollerBar(this.scroller,!0,!0),SceneManager.onSwitchCompleteEvent.addListener(this.setMarqueePos,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),ChatManager.isOnMessage=!1,egret.Tween.removeTweens(this.scroller.viewport),SceneManager.onSwitchCompleteEvent.removeListener(this.setMarqueePos,this)},t.prototype.onTweenGroupComplete=function(){egret.Tween.removeTweens(this.textGroup),this.onCloseBtnClickHandler(null),ChatManager.nextMarqueeMessage()},t.prototype.setMarqueePos=function(){if(SceneManager.sceneType==SceneType.Game||SceneManager.sceneType==SceneType.HundredWar){if(this.top=0,SceneManager.sceneType==SceneType.Game){var e=void 0;e=UIManager.panelDict.getValue(UIModuleName.GamblingPanel),e&&(this.marqueeGroup.horizontalCenter=e.gameGroup.x)}else if(SceneManager.sceneType==SceneType.HundredWar){var e=void 0;e=UIManager.panelDict.getValue(UIModuleName.HundredWarRoomPanel),e&&(this.marqueeGroup.horizontalCenter=e.gameGroup.x)}}else this.top=150,this.marqueeGroup.horizontalCenter=0},t.prototype.onMoveing=function(e){this.marqueeGroup.horizontalCenter=e},t.prototype.onMoveEnd=function(e){e.showAnimate?this.run(e.num):this.marqueeGroup.horizontalCenter=e.num},t.prototype.run=function(e){var t=egret.Tween.get(this.marqueeGroup);t.to({horizontalCenter:e},200,egret.Ease.sineIn).call(this.runOver,this),t.play()},t.prototype.runOver=function(){egret.Tween.removeTweens(this.marqueeGroup)},t}(BasePanel);__reflect(MarqueePanel.prototype,"MarqueePanel");var MinuteRemindPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.MinuteRemindPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t)},t.prototype.init=function(t){e.prototype.init.call(this,t),this._isClick=!1,t&&(this.countDownNum=t.countDownNum,this.recordId=t.recordId)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterMacth,this),ChampionshipManager.OnWithdrawEvent.addListener(this.outAnime,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.enterBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterMacth,this),ChampionshipManager.OnWithdrawEvent.removeListener(this.outAnime,this),qin.Tick.RemoveTimeoutInvoke(this.palyOutAnime,this)},t.prototype.setRemindInfo=function(){this.desLabel.text="您报名的比赛将于00:60秒后开始！"},t.prototype.withdrawClose=function(e){e.recordId==this.recordId&&this.outAnime()},t.prototype.onCloseAnmComplete=function(){this._isClick||UIManager.closePanel(UIModuleName.MinuteRemindPanel)},t.prototype.enterMacth=function(e){SoundManager.playButtonEffect(e.target);var t=ChampionshipManager.getMathInfoByRecordId(this.recordId);t&&(ChampionshipManager.enterMttHandler.enterMatch(t,UIModuleName.MinuteRemindPanel),this._isClick=!0)},t.prototype.countDown=function(){this.countDownNum--,this.desLabel.text="您报名的比赛将于"+qin.DateTimeUtil.countDownFormat(this.countDownNum,!1)+"秒后开始！",this.countDownNum<=0&&(this.desLabel.text="比赛即将开始",qin.Tick.RemoveSecondsInvoke(this.countDown,this),qin.Tick.AddTimeoutInvoke(this.palyOutAnime,500,this))},t.prototype.palyOutAnime=function(){qin.Tick.RemoveTimeoutInvoke(this.palyOutAnime,this),this.outAnime()},t}(BaseBannerRemindPanel);__reflect(MinuteRemindPanel.prototype,"MinuteRemindPanel");var MonthCardPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.MonthCardPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this._monthCardsList=new Array;for(var n,i=0;i<ShopDefined.GetInstance().dataList.length;i++)n=new ShopInfo,n.id=ShopDefined.GetInstance().dataList[i].id,n.definition&&n.definition.type==ShopType.MonthCard&&this._monthCardsList.push(n);UIUtil.listRenderer(this.list,this.scroller,MonthCardItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.AUTO,null,!0),this.scroller.scrollPolicyH=eui.ScrollPolicy.OFF},t.prototype.init=function(t){e.prototype.init.call(this,t),this.refreshUI()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t)},t.prototype.refreshUI=function(){UIUtil.writeListInfo(this.list,this._monthCardsList,null)},t}(BasePanel);__reflect(MonthCardPanel.prototype,"MonthCardPanel");var MTTOverPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.MTTOverPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),qin.System.isWeChat||ChannelManager.loginType==ChannelLoginType.Weixin?(this.shareBtn.visible=!0,this.bottomGroup.addChildAt(this.shareBtn,0)):(this.shareBtn.visible=!1,this.addChildAt(this.shareBtn,0)),this.setInfo()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmBtnClick,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareBtnClick,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.confirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmBtnClick,this),this.shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.shareBtnClick,this)},t.prototype.setInfo=function(){this.panelData.rank<=3?this.iconImg.source=SheetSubName.MTTOverGoldenCup:this.iconImg.source=SheetSubName.MTTOverSilverCup,1==this.panelData.rank?this.endRankLabel.text="冠军":this.endRankLabel.text="第"+this.panelData.rank.toString()+"名";var e=ChampionshipManager.getAwardList(this.panelData.id);if(e)for(var t=0,n=e;t<n.length;t++){var i=n[t];if(this.panelData.rank<=e.length&&this.panelData.rank==i.start){var a="恭喜你获得了",o=AwardDefined.GetInstance().getAwardNameById(i.awardId);o&&(a=a+o+"奖励！",this.awardDesLabel.text=a);break}this.awardDesLabel.text="您没有获得任何奖励"}this.allJoinNumLabel.text=this.panelData.join.toString();for(var r=0,s=ChampionshipManager.processMTTList;r<s.length;r++){var l=s[r];if(l.recordId==this.panelData.recordId){var h=Math.floor(TimeManager.GetServerUtcTimestamp())-l.startTime,d=Math.round(h/60);this.processTimeLabel.text=d.toString();break}}this.outNumLabel.text=(this.panelData.join-this.panelData.rank).toString(),this.panelData.maxRank&&(this.highestLabel.text=this.panelData.maxRank.toString())},t.prototype.onCloseBtnClickHandler=function(t){e.prototype.onCloseBtnClickHandler.call(this,t),SceneManager.switcScene(SceneType.Hall,{action:SceneSwitchAction.RepleacePanel,panel:UIModuleName.GameHallPanel})},t.prototype.confirmBtnClick=function(t){e.prototype.onCloseBtnClickHandler.call(this,t),SceneManager.switcScene(SceneType.Hall,{action:SceneSwitchAction.RepleacePanel,panel:UIModuleName.GameHallPanel})},t.prototype.shareBtnClick=function(e){SoundManager.playButtonEffect(e.target),qin.System.isWeChat||ChannelManager.loginType==ChannelLoginType.Weixin?ChannelManager.share(ChannelShareType.WxTimeLine,ChannelManager.appName,qin.StringUtil.format("我在{0}中获得了冠军。服吗？不服来战！",ChannelManager.appName)):AlertManager.showAlert("您未安装微信，分享失败。")},t}(BasePanel);__reflect(MTTOverPanel.prototype,"MTTOverPanel");var NetworkPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="",t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t)},t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t)},t}(BasePanel);__reflect(NetworkPanel.prototype,"NetworkPanel");var NormalActivityPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.NormalActivityPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,UIUtil.listRenderer(this.activityList,this.activityScroller,ActivityAwardItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0)},t.prototype.init=function(t){e.prototype.init.call(this,t),InfoUtil.checkAvailable(this.activityInfo)&&(this.titleLabel.text=this.activityInfo.definition.name)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable()},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable()},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BaseActivityPanel);__reflect(NormalActivityPanel.prototype,"NormalActivityPanel");var OrderDetailPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.OrderDetailPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),this.trackGroup.visible=this.addressGroup.visible=!1,1==t.isGet?(this.receivedGroup.visible=!1,egret.callLater(this.setBaseInfo,this)):2==t.isGet&&(this.receivedGroup.visible=!0,PrizeManager.getOrderDetailInfo(t.id))},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),PrizeManager.onGetOrderDetailInfoEvent.addListener(this.setPanelInfo,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),PrizeManager.onGetOrderDetailInfoEvent.removeListener(this.setPanelInfo,this)},t.prototype.setPanelInfo=function(e){this.setBaseInfo(),this.panelData.state==OrderStateType.WaitSend?this.panelData.effectType==PrizeEffectType.Kind?this.stateLabel.text="等待发货":this.panelData.effectType==PrizeEffectType.Cost&&(this.stateLabel.text="充值中"):this.panelData.state==OrderStateType.Sent?this.panelData.effectType==PrizeEffectType.Kind?this.stateLabel.text="已发货":this.panelData.effectType==PrizeEffectType.Cost&&(this.stateLabel.text="已充值"):this.panelData.state==OrderStateType.InfoError&&(this.stateLabel.text="信息错误，已返回"),this.pNameLabel.text=e.name,this.telLabel.text=e.phone,this.panelData.effectType==PrizeEffectType.Kind&&(this.addressGroup.visible=!0,this.addressLabel.text=e.address,e.trackNo&&(this.trackGroup.visible=!0,this.trackInfoLabel.text=e.trackName+e.trackNo))},t.prototype.setBaseInfo=function(){var e=ItemDefined.GetInstance().getDefinition(this.panelData.itemId);e&&(this.comItemIcon.init(this.panelData.itemId,118,SheetSubName.GetItemBg),this.nameLabel.text=e.name,this.desLabel.text=e.des,this.getTypeLabel.text=e.extern)},t}(BasePanel);__reflect(OrderDetailPanel.prototype,"OrderDetailPanel");var PayMaskPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.PayMaskPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=.5},t}(BasePanel);__reflect(PayMaskPanel.prototype,"PayMaskPanel");var PayModePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.PayModePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=.3},t.prototype.init=function(t){e.prototype.init.call(this,t);var n=AwardDefined.GetInstance().getDefinition(t.awardId);if(n){this.goldLabel.text=n.name;for(var i=0,a=n.costList;i<a.length;i++){var o=a[i];o.type==CostType.RMB&&(this.moneyLabel.text=o.count/100+"元")}}},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){switch(e.target){case this.appStoreGroup:this.panelData.payState=PayState.Normal,ChannelManager.OnPayModelSelectEvent.dispatch(this.panelData);break;case this.weiXinGroup:case this.aliPayGroup:this.panelData.payState=PayState.Third,ChannelManager.OnPayModelSelectEvent.dispatch(this.panelData)}},t}(BasePanel);__reflect(PayModePanel.prototype,"PayModePanel");var PlayingFieldPanel=function(e){function t(){var t=e.call(this)||this;return t.blindIsUpSort=!0,t.playNumIsUpSort=!0,t.roomIdIsUpSort=!0,t.buyIsUpSort=!0,t.setSkinName(UIModuleName.PlayingFieldPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,UIUtil.listRenderer(this.list,this.scroller,PlayingFieldItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.searchLable.type=egret.TextFieldType.DYNAMIC,this.searchLable.touchEnabled=!0,this.playingFieldTabCompontent.build(TabComponent.CreatData(["初级场","中级场","高级场"],[this.tabGroup,this.tabGroup,this.tabGroup],TabButtonType.BigOf3)),UIManager.pushResizeGroup(this.actionBtnGroup),UIManager.pushResizeScroller(this.scroller,780),VersionManager.setComponentVisibleBySafe(this.createPrivateRoomBtn)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.playingFieldTabCompontent.init(0),this.resetSearchLabel(),this.panelData&&this.panelData.enterIndex?(this.playingFieldTabCompontent.setSelectIndex(this.panelData.enterIndex),PlayingFieldManager.reqRoomListInfo(this.panelData.enterIndex+1)):(this.playingFieldTabCompontent.setSelectIndex(0),PlayingFieldManager.reqRoomListInfo(PlayingFieldType.Primary)),this.roomInfoList=new Array},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onRoomClickHandler,this),this.searchLable.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showKeyboard,this),this.playingFieldTabCompontent.tabChangeEvent.addListener(this.onTabClickHandler,this),PlayingFieldManager.onGetRoomListEvent.addListener(this.setRoomListInfo,this),PlayingFieldManager.onKeyBoardCloseEvent.addListener(this.setsearchImgVisible,this),GamblingManager.OnGetRoomInfoEvent.addListener(this.onGetRoomInfoHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onRoomClickHandler,this),this.searchLable.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showKeyboard,this),this.playingFieldTabCompontent.tabChangeEvent.removeListener(this.onTabClickHandler,this),PlayingFieldManager.onGetRoomListEvent.removeListener(this.setRoomListInfo,this),PlayingFieldManager.onKeyBoardCloseEvent.removeListener(this.setsearchImgVisible,this),GamblingManager.OnGetRoomInfoEvent.removeListener(this.onGetRoomInfoHandler,this)},t.prototype.setsearchImgVisible=function(){this.searchLable.text.length<1&&(this.focuseOutGroup.visible=!0)},t.prototype.onTabClickHandler=function(e){this.resetSearchLabel(),0==e?PlayingFieldManager.reqRoomListInfo(PlayingFieldType.Primary):1==e?PlayingFieldManager.reqRoomListInfo(PlayingFieldType.Middle):PlayingFieldManager.reqRoomListInfo(PlayingFieldType.High)},t.prototype.resetSearchLabel=function(){this.searchLable.text="",this.focuseOutGroup.visible=!0},t.prototype.setRoomListInfo=function(){if(PlayingFieldManager.roomList.length>0){qin.ArrayUtil.Clear(this.roomInfoList);for(var e=0,t=PlayingFieldManager.roomList;e<t.length;e++){var n=t[e];this.roomInfoList.push(n)}}UIUtil.writeListInfo(this.list,this.roomInfoList,"id",!0,SortUtil.blindUpSort)},t.prototype.onGetRoomInfoHandler=function(){SceneManager.switcScene(SceneType.Game)},t.prototype.showKeyboard=function(e){this.focuseOutGroup.visible=!1,UIManager.showPanel(UIModuleName.KeyBoardPanel,{callback:this.searchRoom,target:this})},t.prototype.roomIdSort=function(){this.roomIdIsUpSort?UIUtil.setListDpInfo(this.list.dataProvider,this.roomInfoList,"id",SortUtil.roomIdUpSort):UIUtil.setListDpInfo(this.list.dataProvider,this.roomInfoList,"id",SortUtil.roomIdDownSort),this.roomIdIsUpSort=!this.roomIdIsUpSort},t.prototype.playerNumSort=function(){this.playNumIsUpSort?UIUtil.setListDpInfo(this.list.dataProvider,this.roomInfoList,"id",SortUtil.roomPlayNumUpSort):UIUtil.setListDpInfo(this.list.dataProvider,this.roomInfoList,"id",SortUtil.roomPlayNumDownSort),this.playNumIsUpSort=!this.playNumIsUpSort},t.prototype.blindSort=function(){this.blindIsUpSort?UIUtil.setListDpInfo(this.list.dataProvider,this.roomInfoList,"id",SortUtil.blindUpSort):UIUtil.setListDpInfo(this.list.dataProvider,this.roomInfoList,"id",SortUtil.blindDownSort),this.blindIsUpSort=!this.blindIsUpSort},t.prototype.buySort=function(){this.buyIsUpSort?UIUtil.setListDpInfo(this.list.dataProvider,this.roomInfoList,"id",SortUtil.blindUpSort):UIUtil.setListDpInfo(this.list.dataProvider,this.roomInfoList,"id",SortUtil.blindDownSort),this.buyIsUpSort=!this.buyIsUpSort},t.prototype.refreshUI=function(){this.list.dataProvider=this._dp},t.prototype.clickHandler=function(e){switch(e.target){case this.roomIdLable:SoundManager.playEffect(MusicAction.buttonClick),this.roomIdSort();break;case this.playerNumLable:SoundManager.playEffect(MusicAction.buttonClick),this.playerNumSort();break;case this.blindLable:SoundManager.playEffect(MusicAction.buttonClick),this.blindSort();break;case this.buyLable:SoundManager.playEffect(MusicAction.buttonClick),this.buySort();break;case this.startGameBtn:SoundManager.playEffect(MusicAction.buttonClick),this.fastJoinGame();break;case this.createPrivateRoomBtn:SoundManager.playEffect(MusicAction.buttonClick),this.createPrivateRoom()}},t.prototype.fastJoinGame=function(){if(PlayingFieldManager.roomList){for(var e=1/0,t=1/0,n=void 0,i=1/0,a=void 0,o=0,r=PlayingFieldManager.roomList;o<r.length;o++){var s=r[o];s.minBuy<t&&(t=s.minBuy),s.maxPlayer>s.player&&s.player>0?Math.abs(UserManager.userInfo.gold-s.maxBuy)<e&&(e=Math.abs(UserManager.userInfo.gold-s.maxBuy),n=s.id):Math.abs(UserManager.userInfo.gold-s.maxBuy)<i&&(i=Math.abs(UserManager.userInfo.gold-s.maxBuy),a=s.id)}if(0==UserManager.userInfo.gold)return void UIManager.showPanel(UIModuleName.GoldShortagePanel,{goldShortage:t,isBankruptcy:!0});if(UserManager.userInfo.gold<t)return void AlertManager.showAlert("对不起，您的金币不足最小买入");n?GamblingManager.reqEnterRoom(n,null,!0):GamblingManager.reqEnterRoom(a,null,!0)}},t.prototype.createPrivateRoom=function(){if(VipManager.isVip())UIManager.showPanel(UIModuleName.CreateRoomPwdPanel);else{var e=ShopGroupIndex.Vip;AlertManager.showConfirm("私人房仅对VIP开放，您现在还不是VIP，是否马上开通？",this.openShoppingPanel,null,e,null,null,"立即开通VIP")}},t.prototype.searchRoom=function(e,t){if(1==e)this.searchLable.text.length<5&&(this.searchLable.text=this.searchLable.text+t);else if(2==e)this.searchLable.text.length>0&&(this.searchLable.text=this.searchLable.text.slice(0,this.searchLable.text.length-1));else{if(3!=e)return;this.resetSearchLabel()}var n=this.searchLable.text;if(n.length>0){this.focuseOutGroup.visible=!1;var i=new Array;if(PlayingFieldManager.roomList.length>0){for(var a=0,o=PlayingFieldManager.roomList;a<o.length;a++){var r=o[a];PlayingFieldManager.roomIdAddZero(r.id).indexOf(n)>=0&&i.push(r)}this._dp=new eui.ArrayCollection(i.sort(SortUtil.blindUpSort))}}else this.focuseOutGroup.visible=!0,this._dp=new eui.ArrayCollection(this.roomInfoList.sort(SortUtil.blindUpSort));this.refreshUI()},t.prototype.onRoomClickHandler=function(e){if(SoundManager.playEffect(MusicAction.buttonClick),this.list.selectedItem)if(UserManager.userInfo.gold>=this.list.selectedItem.minBuy)11==this.list.selectedItem.type&&this.list.selectedItem.hasPwd?(PlayingFieldManager.roomId=this.list.selectedItem.id,UIManager.showPanel(UIModuleName.EnterRoomPwdPanel)):GamblingManager.reqEnterRoom(this.list.selectedItem.id);else{var t=this.list.selectedItem.minBuy;UIManager.showPanel(UIModuleName.BuyAccessGamePanel,{minNum:t,isGoldInsufficient:!0})}},t.prototype.openShoppingPanel=function(e){UIManager.showPanel(UIModuleName.ShoppingPanel,{tab:e}),UIManager.closePanel(UIModuleName.PlayingFieldPanel)},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BasePanel);__reflect(PlayingFieldPanel.prototype,"PlayingFieldPanel");var PrizeOrderSurePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.PrizeOrderSurePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.nameGroup.visible=this.addressGroup.visible=!1,this.panelData.type==PrizeEffectType.Kind?(this.nameGroup.visible=this.addressGroup.visible=!0,this.nameLabel.text=UserManager.userInfo.addressName,this.awardNameLabel.text=this.panelData.awardName,this.telLabel.text=UserManager.userInfo.phoneNum,this.addressLabel.text=UserManager.userInfo.address):(this.awardNameLabel.text=this.panelData.awardName,this.telLabel.text=UserManager.userInfo.phoneNum,this.qqLabel.text=UserManager.userInfo.qqNum)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmBtnClick,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.confirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmBtnClick,this)},t.prototype.confirmBtnClick=function(e){SoundManager.playButtonEffect(e.target),PrizeManager.reqGetAward(this.panelData.id)},t}(BasePanel);__reflect(PrizeOrderSurePanel.prototype,"PrizeOrderSurePanel");var PrizePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.PrizePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),UIUtil.listRenderer(this.notReceiveList,this.notReceiveScroller,MyAwardPanelItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.hasReceiveList,this.hasReceiveScroller,MyAwardPanelItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.reqscroller=new ReqScroller(this.hasReceiveScroller,this.hasReceiveList,10,this.getPrizeList.bind(this)),this.notReceiveScroller.scrollPolicyH=this.hasReceiveScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.disAwardGroup.visible=this.enAwardGroup.visible=this.disHasReceiveGroup.visible=!1,this.nameLabel.type=this.telLabel.type=this.qqLabel.type=this.emailLabel.type=this.addressLabel.type=egret.TextFieldType.INPUT,this.telLabel.inputType=egret.TextFieldInputType.TEL;var n=new Array;n.push(this.notReceiveGroup),n.push(this.hasReceiveGroup),n.push(this.receiveAwardInfoGroup),this.tabComponent.build(TabComponent.CreatData(["未领取","已领取","领奖信息"],n,TabButtonType.SmallOf3)),this.tabComponent.isTween=!1,this.isMaskClickClose=!0,this.maskAlpha=.5},t.prototype.init=function(t){e.prototype.init.call(this,t),this.tabComponent.init(0),this.setAwardListInfo(),PrizeManager.getAddressInfo()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.tabComponent.setSelectIndex(0)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),PrizeManager.onGetAwardListEvent.addListener(this.setHasReceiveListInfo,this),this.tabComponent.tabChangeEvent.addListener(this.onTabClickHandler,this),this.saveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaveBtnClick,this),this.joinChampionshipsBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goToMTT,this),PrizeManager.onSkipEvent.addListener(this.setInfoSelected,this),PrizeManager.onGetAwardEvent.addListener(this.refreshUI,this),PrizeManager.onGetAddressInfoEvent.addListener(this.setAddressInfo,this),this.notReceiveList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.showPrizeDetailInfo,this),this.hasReceiveList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.showOrderDetailInfo,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),PrizeManager.onGetAwardListEvent.removeListener(this.setHasReceiveListInfo,this),this.tabComponent.tabChangeEvent.removeListener(this.onTabClickHandler,this),this.saveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaveBtnClick,this),this.joinChampionshipsBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goToMTT,this),PrizeManager.onSkipEvent.removeListener(this.setInfoSelected,this),PrizeManager.onGetAwardEvent.removeListener(this.refreshUI,this),PrizeManager.onGetAddressInfoEvent.removeListener(this.setAddressInfo,this),this.notReceiveList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.showPrizeDetailInfo,this),this.hasReceiveList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.showOrderDetailInfo,this)},t.prototype.refreshUI=function(e){var t=new PrizeInfo;if(this.notReceiveInfoList.length>0)for(var n=0;n<this.notReceiveInfoList.length;n++)if(this.notReceiveInfoList[n].itemId==e){t=this.notReceiveInfoList[n],this.notReceiveInfoList.splice(n,1);break}UIManager.closePanel(UIModuleName.PrizeOrderSurePanel),AlertManager.showAlertByString('您的奖品正在发货中，预计时间为1-5个工作日，发货详情请在"已领取"页签内查看！'),this.setAwardListInfo()},t.prototype.setInfoSelected=function(){this.tabComponent.setSelectIndex(2)},t.prototype.goToMTT=function(e){SoundManager.playButtonEffect(e.target),UIManager.showPanel(UIModuleName.ChampionshipPanel,{prevPanelName:UIModuleName.ChampionshipPanel})},t.prototype.showPrizeDetailInfo=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.notReceiveList.selectedItem&&UIManager.showPanel(UIModuleName.OrderDetailPanel,this.notReceiveList.selectedItem)},t.prototype.showOrderDetailInfo=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.hasReceiveList.selectedItem&&UIManager.showPanel(UIModuleName.OrderDetailPanel,this.hasReceiveList.selectedItem)},t.prototype.setAddressInfo=function(){this.nameLabel.text=UserManager.userInfo.addressName,this.telLabel.text=UserManager.userInfo.phoneNum,this.qqLabel.text=UserManager.userInfo.qqNum,this.emailLabel.text=UserManager.userInfo.eMail,this.addressLabel.text=UserManager.userInfo.address},t.prototype.getPrizeList=function(){PrizeManager.reqGetAwardList(this.reqscroller.index,this.reqscroller.reqNum)},t.prototype.onTabClickHandler=function(e){0==e?this.setAwardListInfo():1==e?(this.reqscroller.Clear(),PrizeManager.reqGetAwardList(this.reqscroller.index,10)):2==e&&PrizeManager.getAddressInfo()},t.prototype.onSaveBtnClick=function(e){SoundManager.playButtonEffect(e.target);var t=this.nameLabel.text.trim(),n=this.telLabel.text.trim(),i=this.qqLabel.text.trim(),a=this.emailLabel.text.trim(),o=this.addressLabel.text.trim();if(t&&n&&i&&a&&o){if(t==UserManager.userInfo.addressName&&n==UserManager.userInfo.phoneNum&&i==UserManager.userInfo.qqNum&&a==UserManager.userInfo.eMail&&o==UserManager.userInfo.address)return;this.validity()&&PrizeManager.reqSaveInfo(t,n,i,a,o)}else UIManager.showFloatTips("领奖信息必须填写完整！")},t.prototype.validity=function(){return this.nameLabel.text.length>6?(UIManager.showFloatTips("收件人输入长度不得大于6个字符"),!1):this.telLabel.text.match(/^1\d{10}$/)?this.qqLabel.text.match(/^\d{5,11}$/)?this.emailLabel.text.match(/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/)?this.addressLabel.text.length>35?(UIManager.showFloatTips("详细地址的输入长度不得大于35个字符"),!1):!0:(UIManager.showFloatTips("请输入正确格式的邮箱"),!1):(UIManager.showFloatTips("请输入有效的qq号码"),!1):(UIManager.showFloatTips("请输入有效的手机号码"),!1)
},t.prototype.setAwardListInfo=function(){var e;if(e=ItemManager.getItemListByType(ItemType.Raffle),qin.ArrayUtil.Clear(this.notReceiveInfoList),this.notReceiveInfoList||(this.notReceiveInfoList=new Array),e&&e.length>0){for(var t=0,n=e;t<n.length;t++){var i=n[t];if(i.count&&i.count>1)for(var a=0;a<i.count;a++)this.setNotRecInfo(i);else this.setNotRecInfo(i)}this.enAwardGroup.visible=!0,this.disAwardGroup.visible=!1,UIUtil.writeListInfo(this.notReceiveList,this.notReceiveInfoList,"itemId")}else this.disAwardGroup.visible=!0,this.enAwardGroup.visible=!1},t.prototype.setNotRecInfo=function(e){var t=new PrizeInfo;t.itemId=e.id,t.isGet=1,this.notReceiveInfoList.push(t)},t.prototype.setHasReceiveListInfo=function(e){PrizeManager.hasReceiveList&&PrizeManager.hasReceiveList.length>0?(this.enHasReceiveGroup.visible=!0,this.disHasReceiveGroup.visible=!1,this.reqscroller.init(new eui.ArrayCollection(PrizeManager.hasReceiveList),e)):(this.enHasReceiveGroup.visible=!1,this.disHasReceiveGroup.visible=!0)},t}(BasePanel);__reflect(PrizePanel.prototype,"PrizePanel");var RankPanel=function(e){function t(){var t=e.call(this)||this;return t.isTween=!1,t.setSkinName(UIModuleName.RankPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.panelAlignType=PanelAlignType.Left_Center,this.rankTypeTab.build(TabComponent.CreatData(["财富","等级","VIP"],[this.rankGroup,this.rankGroup,this.rankGroup],TabButtonType.SmallOf3)),this.rankTypeTab.isTween=!1,this.listTypeTab.build(TabComponent.CreatData(["全部","好友"],[this.rankGroup,this.rankGroup],TabButtonType.SubOf2)),this.listTypeTab.isTween=!1,UIUtil.listRenderer(this.rankList,this.rankScroller,RankItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.rankTypeTab.init(0),this.listTypeTab.init(0),this._currentRankType=this.rankTypeTab.lastIndex,this._currentListType=this.listTypeTab.lastIndex,this.reqRankList(),this.setEnterAnime()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.rankTypeTab.tabChangeEvent.addListener(this.onRankTypeTabTap,this),this.listTypeTab.tabChangeEvent.addListener(this.onListTypeTabTap,this),RankManager.getRankListEvent.addListener(this.getRankList,this),UIManager.onPanelCloseEvent.addListener(this.setOutAnime,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.rankTypeTab.tabChangeEvent.removeListener(this.onRankTypeTabTap,this),this.listTypeTab.tabChangeEvent.removeListener(this.onListTypeTabTap,this),RankManager.getRankListEvent.removeListener(this.getRankList,this),UIManager.onPanelCloseEvent.removeListener(this.setOutAnime,this),this.rankScroller.stopAnimation()},t.prototype.getRankList=function(e){UIUtil.writeListInfo(this.rankList,this._currentRankListInfo.list,"roleId",!0)},t.prototype.onRankTypeTabTap=function(e){this._currentRankType=e,this._currentListType=RankListType.All,this.listTypeTab.setSelectIndex(0),this.reqRankList(),this.rankScroller.stopAnimation(),this.rankScroller.viewport.scrollV=0},t.prototype.onListTypeTabTap=function(e){this._currentListType=e,this.reqRankList(),this.rankScroller.stopAnimation(),this.rankScroller.viewport.scrollV=0},t.prototype.reqRankList=function(){var e=this.getListType(this._currentRankType,this._currentListType);this._currentRankListInfo=RankManager.getRankListInfo(e),RankManager.isRefreshRank(this._currentRankListInfo)?RankManager.reqRankList(e):this.getRankList(e)},t.prototype.getListType=function(e,t){return e==RankTabType.Vip?(this.listTypeTab.visible=!1,this.listTabBg.visible=!1,this.rankGroup.y=200,this.rankGroup.height=620,this.rankList.height=620,this.rankScroller.height=620,RankType.Vip):(this.listTypeTab.visible=!0,this.listTabBg.visible=!0,this.rankGroup.y=270,this.rankGroup.height=550,this.rankList.height=550,this.rankScroller.height=550,2*e+t+1)},t.prototype.setEnterAnime=function(){this.removeAnime(),this.left=-this.width,egret.Tween.get(this).to({left:20},200).to({left:0},120,egret.Ease.backIn)},t.prototype.setOutAnime=function(e){e==UIModuleName.RankPanel&&(this.removeAnime(),this.left=0,egret.Tween.get(this).to({left:-this.width},400,egret.Ease.backOut).call(this.tweenClose,this))},t.prototype.removeAnime=function(){egret.Tween.removeTweens(this)},t.prototype.onCloseBtnClickHandler=function(e){e&&e.target instanceof eui.Button&&SoundManager.playEffect(MusicAction.close),this.isTweenCloseing||(this.onTweenOver(),this.isTweenCloseing=!0,this.setOutAnime(UIModuleName.RankPanel))},t}(BasePanel);__reflect(RankPanel.prototype,"RankPanel");var RankTabType;!function(e){e[e.Gold=0]="Gold",e[e.Level=1]="Level",e[e.Vip=2]="Vip"}(RankTabType||(RankTabType={}));var RankListType;!function(e){e[e.All=0]="All",e[e.Friend=1]="Friend"}(RankListType||(RankListType={}));var RegisterPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.RegisterPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.accountLabel.type=egret.TextFieldType.INPUT,this.pwdLabel.type=egret.TextFieldType.INPUT,this.pwdLabel.inputType=egret.TextFieldInputType.PASSWORD},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.registerClickHandler,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backClickHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.registerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.registerClickHandler,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.backClickHandler,this)},t.prototype.registerClickHandler=function(e){SoundManager.playButtonEffect(e.target);var t=this.accountLabel.text.trim(),n=this.pwdLabel.text.trim();t&&n&&(ChannelManager.DispatchAccountLoginSucceed(t,n,!0),this.onCloseBtnClickHandler(e))},t.prototype.backClickHandler=function(e){SoundManager.playButtonEffect(e.target),UIManager.showPanel(UIModuleName.LoginLocalPanel),this.onCloseBtnClickHandler(e)},t}(BasePanel);__reflect(RegisterPanel.prototype,"RegisterPanel");var RegisterTelPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.RegisterTelPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t)},t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t)},t}(BaseRegisterTelPanel);__reflect(RegisterTelPanel.prototype,"RegisterTelPanel");var SafeBoxPanel=function(e){function t(){var t=e.call(this)||this;return t.pwdIndex=2,t.getGold=1,t.setSkinName(UIModuleName.SafeBoxPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0;var n=new Array;n.push(this.saveGoldGroup),n.push(this.withdrawGroup),n.push(this.modifyPwdGroup),this.saveTab.build(TabComponent.CreatData(["存款","提现","修改密码"],n,TabButtonType.SmallOf3)),this.saveTab.isTween=!1,this.setTips(""),this.oldPwdCom=new PwdComponent(UIComponentSkinName.PwdComponent),this.pwdGroup.addChild(this.oldPwdCom),this.newPwdCom=new PwdComponent(UIComponentSkinName.PwdComponent),this.pwdGroup.addChild(this.newPwdCom),this.againPwdCom=new PwdComponent(UIComponentSkinName.PwdComponent),this.pwdGroup.addChild(this.againPwdCom),this.withdrawPwd=new PwdComponent(UIComponentSkinName.PwdComponent),this.withdrawPwdGroup.addChild(this.withdrawPwd)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.refreshProperty(),this.saveGoldHs.value=0,this.withdrawGoldHs.value=0,this._safeGold=UserManager.userInfo.safeGold,this.importGoldHs(),this.exportGoldHs(),this.saveTab.init(0)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),(void 0==UserManager.userInfo.isSafePwd||0==UserManager.userInfo.isSafePwd)&&UIManager.showPanel(UIModuleName.SafeCreatePanel),this.oldPwdCom.init({isNotMaskKeyPanel:!0}),this.newPwdCom.init({isNotMaskKeyPanel:!0}),this.againPwdCom.init({isNotMaskKeyPanel:!0}),this.withdrawPwd.init({isNotMaskKeyPanel:!0})},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.saveGoldHs.addEventListener(egret.Event.CHANGE,this.importGoldHs,this),this.saveGoldHs.addEventListener(eui.UIEvent.CHANGE_START,this.unEnoughGold,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldBtnHandle,this),this.subBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldBtnHandle,this),this.withdrawGoldHs.addEventListener(egret.Event.CHANGE,this.exportGoldHs,this),this.withdrawGoldHs.addEventListener(eui.UIEvent.CHANGE_START,this.unEnoughGold,this),this.withdrawAddBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldBtnHandle,this),this.withdrawSubBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldBtnHandle,this),this.saveTab.tabChangeEvent.addListener(this.onBarItemTap,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandle,this),SafeBoxManager.modifyPwdEvent.addListener(this.modifyPwdSuccessHandle,this),UserManager.propertyChangeEvent.addListener(this.refreshProperty,this),this.newPwdCom.pwdInput.addListener(this.pwdInput,this),this.againPwdCom.pwdInput.addListener(this.pwdInput,this),SafeBoxManager.saveWithdrawEvent.addListener(this.saveWithdrawEvent,this),this.withdrawPwdGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeIndex,this),UIManager.onPanelCloseEvent.addListener(this.restoreY,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.saveGoldHs.removeEventListener(egret.Event.CHANGE,this.importGoldHs,this),this.saveGoldHs.removeEventListener(eui.UIEvent.CHANGE_START,this.unEnoughGold,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goldBtnHandle,this),this.subBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goldBtnHandle,this),this.withdrawGoldHs.removeEventListener(egret.Event.CHANGE,this.exportGoldHs,this),this.withdrawGoldHs.removeEventListener(eui.UIEvent.CHANGE_START,this.unEnoughGold,this),this.withdrawAddBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goldBtnHandle,this),this.withdrawSubBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goldBtnHandle,this),this.saveTab.tabChangeEvent.removeListener(this.onBarItemTap,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandle,this),SafeBoxManager.modifyPwdEvent.removeListener(this.modifyPwdSuccessHandle,this),UserManager.propertyChangeEvent.removeListener(this.refreshProperty,this),this.newPwdCom.pwdInput.removeListener(this.pwdInput,this),this.againPwdCom.pwdInput.removeListener(this.pwdInput,this),SafeBoxManager.saveWithdrawEvent.removeListener(this.saveWithdrawEvent,this),this.withdrawPwdGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeIndex,this),UIManager.onPanelCloseEvent.removeListener(this.restoreY,this),UIManager.closePanel(UIModuleName.KeyBoardPanel),this.restoreY()},t.prototype.changeIndex=function(){this.verticalCenter=-220},t.prototype.restoreY=function(){this.verticalCenter=0},t.prototype.saveWithdrawEvent=function(e){e==SafeType.Withdraw&&(this.withdrawGoldHs.value=0,this.withdrawCount.text="0万")},t.prototype.pwdInput=function(){var e=this.newPwdCom.getPwd(),t=this.againPwdCom.getPwd();if(e.length>0&&t.length>0){var n=Math.min(e.length,t.length);e.substring(0,n)!=t.substring(0,n)?this.setTips("*新密码两次不一致"):this.setTips("")}},t.prototype.onBarItemTap=function(e){e==this.pwdIndex?(this.goldGroup.visible=!1,this.oldPwdCom.init({isNotMaskKeyPanel:!0,isSelect:!0}),this.newPwdCom.init({isNotMaskKeyPanel:!0}),this.againPwdCom.init({isNotMaskKeyPanel:!0}),this.setTips("")):e==this.getGold?(UIManager.closePanel(UIModuleName.KeyBoardPanel),this.goldGroup.visible=!0,this.withdrawPwd.init({isNotMaskKeyPanel:!0})):(UIManager.closePanel(UIModuleName.KeyBoardPanel),this.goldGroup.visible=!0)},t.prototype.refreshProperty=function(){this.withdrawPwd.init({isNotMaskKeyPanel:!0}),this.currentGold.text=qin.MathUtil.numAddSpace(UserManager.userInfo.gold),this.saveGold.text=qin.MathUtil.numAddSpace(UserManager.userInfo.safeGold),this._safeGold>UserManager.userInfo.safeGold&&(this.withdrawGoldHs.value=0),this._safeGold=UserManager.userInfo.safeGold,UserManager.userInfo.gold>=1e4?this.saveGoldHs.maximum=Math.floor(UserManager.userInfo.gold/1e4):this.saveGoldHs.maximum=0,this.withdrawGoldHs.maximum=UserManager.userInfo.safeGold/1e4},t.prototype.modifyPwdSuccessHandle=function(){this.oldPwdCom.init({isNotMaskKeyPanel:!0}),this.newPwdCom.init({isNotMaskKeyPanel:!0}),this.againPwdCom.init({isNotMaskKeyPanel:!0}),UIManager.closePanel(UIModuleName.KeyBoardPanel),UIManager.showFloatTips("密码修改成功")},t.prototype.onClickHandle=function(e){var t=!0;switch(e.target){case this.saveBtn:this.saveGoldHandler();break;case this.withdrawBtn:this.withdrawGoldHandler();break;case this.modifyPwdBtn:this.modifyPwdHandle();break;case this.buyVIPlabel:JumpUtil.JumpToShopping(ShopGroupIndex.Vip,UIModuleName.SafeBoxPanel);break;case this.retrievePwd:JumpUtil.JumpToSafeRetrievePwd();break;default:t=!1}t&&SoundManager.playButtonEffect(e.target),this.saveTab&&this.saveTab.tabGroup&&e.target.parent==this.saveTab.tabGroup||this.oldPwdCom.isTarget(e.target)||this.newPwdCom.isTarget(e.target)||this.againPwdCom.isTarget(e.target)||this.withdrawPwd.isTarget(e.target)||UIManager.closePanel(UIModuleName.KeyBoardPanel)},t.prototype.importGoldHs=function(){this.saveCount.text=this.saveGoldHs.value.toString()+"万"},t.prototype.saveGoldHandler=function(){if(this.saveGoldHs.value>=1){var e=1e4*Math.floor(this.saveGoldHs.value);this.saveGoldHs.value=0,this.saveCount.text="0万",SafeBoxManager.reqSaveWithdrawGold(e,SafeType.Save)}else UIManager.showFloatTips("存入金币不能低于1万")},t.prototype.exportGoldHs=function(){this.withdrawCount.text=this.withdrawGoldHs.value.toString()+"万"},t.prototype.withdrawGoldHandler=function(){var e=this.withdrawPwd.getPwd();if(0==e.length)UIManager.showFloatTips("密码不能为空");else if(6!=e.length)UIManager.showFloatTips("密码长度为6位");else if(this._safeGold=UserManager.userInfo.safeGold,this.withdrawGoldHs.value>=1){var t=1e4*Math.floor(this.withdrawGoldHs.value);SafeBoxManager.reqSaveWithdrawGold(t,SafeType.Withdraw,e),this.withdrawPwd.init({isNotMaskKeyPanel:!0})}else if(this.withdrawGoldHs.value>0&&UserManager.userInfo.safeGold<1e4){var t=1e4*this.withdrawGoldHs.value;SafeBoxManager.reqSaveWithdrawGold(t,SafeType.Withdraw,e),this.withdrawPwd.init({isNotMaskKeyPanel:!0})}else UIManager.showFloatTips("取出金额不能为空")},t.prototype.unEnoughGold=function(e){switch(e.target){case this.saveGoldHs:0==this.saveGoldHs.maximum&&UIManager.showFloatTips("当前可存金币不足一万");break;case this.withdrawGoldHs:0==this.withdrawGoldHs.maximum&&UIManager.showFloatTips("保险箱金币为0")}},t.prototype.goldBtnHandle=function(e){switch(SoundManager.playButtonEffect(e.target),e.target){case this.addBtn:this.saveGoldHs.value++;break;case this.subBtn:this.saveGoldHs.value--;break;case this.withdrawAddBtn:this.withdrawGoldHs.value++;break;case this.withdrawSubBtn:this.withdrawGoldHs.value--}this.saveGoldHs.value>this.saveGoldHs.maximum?this.saveGoldHs.value=this.saveGoldHs.maximum:this.withdrawGoldHs.value>this.withdrawGoldHs.maximum?this.withdrawGoldHs.value=this.withdrawGoldHs.maximum:this.saveGoldHs.value<0?this.saveGoldHs.value=0:this.withdrawGoldHs.value<0&&(this.withdrawGoldHs.value=0),this.importGoldHs(),this.exportGoldHs()},t.prototype.modifyPwdHandle=function(){var e=this.oldPwdCom.getPwd(),t=this.newPwdCom.getPwd(),n=this.againPwdCom.getPwd();UserUtil.checkPwd(e,6,6,this.tipPwd)&&UserUtil.checkTwoPwd(t,n,6,6,this.tipPwd)&&SafeBoxManager.reqModifyPwd(t,e)},t.prototype.setTips=function(e){this.tipPwd.text=e},t.prototype.onCloseBtnClickHandler=function(t){UIManager.closePanel(UIModuleName.KeyBoardPanel),e.prototype.onCloseBtnClickHandler.call(this,t)},t}(BasePanel);__reflect(SafeBoxPanel.prototype,"SafeBoxPanel");var SafeBoxRetrievePwdPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.SafeBoxRetrievePwdPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),this.newSafePwd.init({isNotMaskKeyPanel:!0}),this.confirmSafePwd.init({isNotMaskKeyPanel:!0})},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onConfirmClick,this),this.newSafePwd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeY,this),this.confirmSafePwd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeY,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),UIManager.onPanelCloseEvent.addListener(this.restoreY,this),this.newSafePwd.pwdInput.addListener(this.pwdInput,this),this.confirmSafePwd.pwdInput.addListener(this.pwdInput,this),SafeBoxManager.onGetCodeEvent.addListener(this.sendCodeSuccess,this),SafeBoxManager.onRetrievePwdEvent.addListener(this.findPwdSuccess,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.confirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onConfirmClick,this),this.newSafePwd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeY,this),this.confirmSafePwd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeY,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),UIManager.onPanelCloseEvent.removeListener(this.restoreY,this),this.newSafePwd.pwdInput.removeListener(this.pwdInput,this),this.confirmSafePwd.pwdInput.removeListener(this.pwdInput,this),SafeBoxManager.onGetCodeEvent.removeListener(this.sendCodeSuccess,this),SafeBoxManager.onRetrievePwdEvent.removeListener(this.findPwdSuccess,this),this.restoreY()},t.prototype.pwdInput=function(){var e=this.newSafePwd.getPwd(),t=this.confirmSafePwd.getPwd();if(e.length>0&&t.length>0){var n=Math.min(e.length,t.length);e.substring(0,n)!=t.substring(0,n)?this.pwdErrorLabel.text="*新密码两次不一致":this.pwdErrorLabel.text=""}},t.prototype.restoreY=function(){this.verticalCenter=0,this.enableLabelClick()},t.prototype.changeY=function(){this.verticalCenter=-220,this.disableLabelClick()},t.prototype.disableLabelClick=function(){this.telephoneLabel.touchEnabled=!1,this.verificationCodeLabel.touchEnabled=!1},t.prototype.enableLabelClick=function(){this.telephoneLabel.touchEnabled=!0,this.verificationCodeLabel.touchEnabled=!0},t.prototype.sendCodeRes=function(){SafeBoxManager.reqGetCode(this.telephoneLabel.text.trim())},t.prototype.onConfirmClick=function(t){e.prototype.onConfirmClick.call(this,t);var n=this.newSafePwd.getPwd(),i=this.confirmSafePwd.getPwd();UserUtil.phoneNumIsValidate(this.telephoneLabel.text)&&this.codeValidate(!1)&&UserUtil.checkTwoPwd(n,i,6,6,this.pwdErrorLabel)&&SafeBoxManager.reqRetrievePwd(n,this.verificationCodeLabel.text.trim())},t.prototype.findPwdSuccess=function(){e.prototype.onCloseBtnClickHandler.call(this,null)},t.prototype.onButtonClick=function(e){e.target!=this.newSafePwd&&e.target!=this.confirmSafePwd&&(this.restoreY(),UIManager.closePanel(UIModuleName.KeyBoardPanel))},t}(BaseRetrievePwdPanel);__reflect(SafeBoxRetrievePwdPanel.prototype,"SafeBoxRetrievePwdPanel");var SafeCreatePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.SafeCreatePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.setTips(""),this.pwdFrist=new PwdComponent(UIComponentSkinName.PwdComponent),this.pwdGroup.addChild(this.pwdFrist),this.pwdSecond=new PwdComponent(UIComponentSkinName.PwdComponent),this.pwdGroup.addChild(this.pwdSecond),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.pwdFrist.init({isNotMaskKeyPanel:!0,isSelect:!0}),this.pwdSecond.init({isNotMaskKeyPanel:!0})},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickPanel,this),this.createPwdBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.createPwdHandle,this),this.pwdFrist.pwdInput.addListener(this.pwdInput,this),this.pwdSecond.pwdInput.addListener(this.pwdInput,this),SafeBoxManager.pwdSuccessEvent.addListener(this.pwdSuccessEvent,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickPanel,this),this.createPwdBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.createPwdHandle,this),this.pwdFrist.pwdInput.removeListener(this.pwdInput,this),this.pwdSecond.pwdInput.removeListener(this.pwdInput,this),SafeBoxManager.pwdSuccessEvent.removeListener(this.pwdSuccessEvent,this),UIManager.closePanel(UIModuleName.KeyBoardPanel)},t.prototype.onClickPanel=function(e){this.pwdFrist.isTarget(e.target)||this.pwdSecond.isTarget(e.target)||UIManager.closePanel(UIModuleName.KeyBoardPanel)},t.prototype.pwdSuccessEvent=function(){UserManager.userInfo.isSafePwd&&(JumpUtil.JumpToSafeBox(),this.onCloseBtnClickHandler(null))},t.prototype.pwdInput=function(){var e=this.pwdFrist.getPwd(),t=this.pwdSecond.getPwd();if(e.length>0&&t.length>0){var n=Math.min(e.length,t.length);e.substring(0,n)!=t.substring(0,n)?this.setTips("*两次密码不一致"):this.setTips("")}},t.prototype.createPwdHandle=function(){var e=this.pwdFrist.getPwd(),t=this.pwdSecond.getPwd();0==e.length||0==t.length?this.setTips("*密码不能为空"):e.length<6?this.setTips("*密码长度为6位"):e==t?SafeBoxManager.reqCreatePwd(e):this.setTips("*两次密码不一致")},t.prototype.setTips=function(e){this.tipPwd.text=e},t.prototype.onCloseBtnClickHandler=function(t){UIManager.closePanel(UIModuleName.KeyBoardPanel),e.prototype.onCloseBtnClickHandler.call(this,t)},t}(BasePanel);__reflect(SafeCreatePanel.prototype,"SafeCreatePanel");var SecondRemindPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.SecondRemindPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t),t&&(this.countDownNum=t.countDownNum,this.recordId=t.recordId,this.desLabel.text="您报名的比赛将于"+qin.DateTimeUtil.countDownFormat(this.countDownNum,!1)+"秒后开始，是否立即进入比赛？",qin.Tick.AddSecondsInvoke(this.countDown,this))},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterMatch,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.enterBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterMatch,this),qin.Tick.RemoveSecondsInvoke(this.countDown,this)},t.prototype.onCloseBtnClickHandler=function(t){ChampionshipManager.mttRemindStartHandler.remindWaitMTT(),e.prototype.onCloseBtnClickHandler.call(this,t)},t.prototype.enterMatch=function(e){SoundManager.playButtonEffect(e.target);var t=ChampionshipManager.getMathInfoByRecordId(this.recordId);t&&ChampionshipManager.enterMttHandler.enterMatch(t,UIModuleName.SecondRemindPanel)},t.prototype.countDown=function(){this.countDownNum--,this.desLabel.text="您报名的比赛将于"+qin.DateTimeUtil.countDownFormat(this.countDownNum,!1)+"秒后开始，是否立即进入比赛？",this.countDownNum<=0&&(this.desLabel.text="比赛即将开始",qin.Tick.RemoveSecondsInvoke(this.countDown,this),this.onCloseBtnClickHandler(null))},t}(BasePanel);__reflect(SecondRemindPanel.prototype,"SecondRemindPanel");var SetPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.SetPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,qin.System.isPackage||qin.System.isWebVibrate?(this.shockGroup.visible=!0,this.verticalGroup.addChildAt(this.shockGroup,5)):(this.shockGroup.visible=!1,this.addChildAt(this.shockGroup,0)),this.resizeScroller.viewport=this.verticalGroup,UIManager.pushResizeScroller(this.resizeScroller,1130),UIManager.pushResizeGroup(this.resizeGroup)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.bgSoundTog.selected=SoundManager.bgEnabled,this.soundEffectTog.selected=SoundManager.effectEnabled,this.shakeTog.selected=GameSetting.shakeEnabled,this.autoVocieTog.selected=GameSetting.autoVoiceEnabled;var n;n=TextDefined.GetInstance().getDefinition(TextFixedId.Forum),n&&(this.forum.text=n.text,this.forumTitle.text=n.title),n=TextDefined.GetInstance().getDefinition(TextFixedId.QQ),n&&(this.QQ.text=n.text,this.QQTitle.text=n.title),n=TextDefined.GetInstance().getDefinition(TextFixedId.CustomerService),n&&(this.customerService.text=n.text,this.customerServiceTitle.text=n.title),UserManager.userInfo&&(this.userNameLabel.text=UserManager.userInfo.name),this.aboutLabel.text=VersionManager.getVersionStr()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.bgSoundTog.addEventListener(egret.Event.CHANGE,this.closeBgSoundHandler,this),this.soundEffectTog.addEventListener(egret.Event.CHANGE,this.closeSoundEffectHandler,this),this.reLoginLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reLoginClickHandler,this),this.shakeTog.addEventListener(egret.Event.CHANGE,this.changeShake,this),this.autoVocieTog.addEventListener(egret.Event.CHANGE,this.changeAutoVoice,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.bgSoundTog.removeEventListener(egret.Event.CHANGE,this.closeBgSoundHandler,this),this.soundEffectTog.removeEventListener(egret.Event.CHANGE,this.closeSoundEffectHandler,this),this.reLoginLabel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.reLoginClickHandler,this),this.shakeTog.removeEventListener(egret.Event.CHANGE,this.changeShake,this),this.autoVocieTog.removeEventListener(egret.Event.CHANGE,this.changeAutoVoice,this)},t.prototype.closeBgSoundHandler=function(e){SoundManager.playEffect(MusicAction.buttonClick),SoundManager.bgEnabled=this.bgSoundTog.selected},t.prototype.closeSoundEffectHandler=function(e){SoundManager.playEffect(MusicAction.buttonClick),SoundManager.effectEnabled=this.soundEffectTog.selected},t.prototype.reLoginClickHandler=function(e){SoundManager.playEffect(MusicAction.buttonClick),ChannelManager.logout()},t.prototype.changeShake=function(e){SoundManager.playEffect(MusicAction.buttonClick),GameSetting.shakeEnabled=this.shakeTog.selected},t.prototype.changeAutoVoice=function(e){SoundManager.playEffect(MusicAction.buttonClick),GameSetting.autoVoiceEnabled=this.autoVocieTog.selected},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BasePanel);__reflect(SetPanel.prototype,"SetPanel");var ShareGamePromptPanel=function(e){function t(){var t=e.call(this)||this;return t.isTween=!1,t.setSkinName(UIModuleName.ShareGamePromptPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=.7,this.isMaskClickClose=!0},t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t)},t}(BasePanel);__reflect(ShareGamePromptPanel.prototype,"ShareGamePromptPanel");var ShimTaeYoonHelpPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.ShimTaeYoonHelpPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),UIUtil.listRenderer(this.list,this.scroller,ShimTaeYoonHelpItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.AUTO,null,!0),this.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,this._coefficientList=new Array,this._shimTaeYoonHelpInfotList=new Array},t.prototype.init=function(t){e.prototype.init.call(this,t),qin.ArrayUtil.Clear(this._coefficientList),qin.ArrayUtil.Clear(this._shimTaeYoonHelpInfotList),t&&(this._coefficientList=t.coefficientList.concat(),this._bottom=t.bottom),this.setShimTaeYoonHelpListInfo(),this.setPanelInfo()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t)},t.prototype.setShimTaeYoonHelpListInfo=function(){for(var e,t=0;t<this._coefficientList.length-1;t++){if(e=new ShimTaeYoonHelpInfo,3>t?e.coefficientDes="奖池"+100*this._coefficientList[t]+"%":e.coefficientDes=(this._bottom*this._coefficientList[t]).toString(),7>t){var n=void 0;n=ResPrefixName.LaBaResult+t+ResSuffixName.PNG,e.img1=e.img2=e.img3=n}else 7==t?(e.img1=e.img2=ResPrefixName.LaBaResult+6+ResSuffixName.PNG,e.img3=ResPrefixName.LaBaResult+t+ResSuffixName.PNG):8==t&&(e.img1=ResPrefixName.LaBaResult+6+ResSuffixName.PNG,e.img3=e.img2=ResPrefixName.LaBaResult+7+ResSuffixName.PNG);this._shimTaeYoonHelpInfotList.push(e)}},t.prototype.setPanelInfo=function(){UIUtil.writeListInfo(this.list,this._shimTaeYoonHelpInfotList)},t}(BasePanel);__reflect(ShimTaeYoonHelpPanel.prototype,"ShimTaeYoonHelpPanel");var ShimTaeYoonHelpInfo=function(){function e(){}return e}();__reflect(ShimTaeYoonHelpInfo.prototype,"ShimTaeYoonHelpInfo");var ShimTaeYoonPanel=function(e){function t(){var t=e.call(this)||this;return t._onceHeight=150,t._listOneY=-1003.5,t._listTwoY=46.5,t._listHeight=1050,t._autoReqPoolTime=30,t.setSkinName(UIModuleName.ShimTaeYoonPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,this._sourceList=new Array,this._bottomList=new Array,this._offsetScrollV=new Array,this._startImgIndexList=new Array,this._resultImgIndexList=new Array,this._coefficientList=new Array,this.shimTaeYoonInfo=new ShimTaeYoonInfo;for(var n=0;3>n;n++)UIUtil.bindRender(this["list"+n],ShimTaeYoonItemRenderer,null),UIUtil.bindRender(this["list"+n+n],ShimTaeYoonItemRenderer,null),this["list"+n].useVirtualLayout=!1,this["list"+n+n].useVirtualLayout=!1,this["scroller"+n].viewport=this["group"+n],this["scroller"+n].scrollPolicyH=eui.ScrollPolicy.OFF,this["scroller"+n].scrollPolicyV=eui.ScrollPolicy.OFF;for(var n=0;7>n;n++)this._sourceList.push(n);UIManager.pushResizeScroller(this.groupScroller,1205),this.groupScroller.viewport=this.mainGroup,this.groupScroller.scrollPolicyV=eui.ScrollPolicy.AUTO,this.groupScroller.scrollPolicyH=eui.ScrollPolicy.OFF},t.prototype.init=function(t){e.prototype.init.call(this,t),this.group0.visible=this.group1.visible=this.group2.visible=!1,qin.Tick.AddTimeoutInvoke(this.setGroupvisble,300,this),this.setScrollerImg(),this._activityInfo=new ActivityInfo,t&&(this._activityInfo=t.info),this.shimTaeYoonInfo.id=this._activityInfo.id,this.reset()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),ActivityManager.onJoinActivityEvent.addListener(this.setActivityInfo,this),UIManager.onPanelCloseEvent.addListener(this.resetPanel,this),ActivityManager.onReqPubJsonEvent.addListener(this.setPoolInfo,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),ActivityManager.onJoinActivityEvent.removeListener(this.setActivityInfo,this),UIManager.onPanelCloseEvent.removeListener(this.resetPanel,this),ActivityManager.onReqPubJsonEvent.removeListener(this.setPoolInfo,this),qin.Tick.RemoveTimeoutInvoke(this.showResultPanel,this),qin.Tick.RemoveSecondsInvoke(this.countDown,this),qin.Tick.RemoveTimeoutInvoke(this.setGroupvisble,this);for(var n=0;3>n;n++)qin.Tick.RemoveTimeoutInvoke(this["scrollAnim"+n],this),egret.Tween.removeTweens(this["scroller"+n].viewport)
},t.prototype.setGroupvisble=function(){this.group0.visible=this.group1.visible=this.group2.visible=!0},t.prototype.reset=function(){if(qin.ArrayUtil.Clear(this._bottomList),this.setOffsetScrollV([0,0,0]),this.setStartImgIndex([0,0,0]),this.setResultImgIndex([0,0,0]),this._bottomList=LaBaDefined.GetInstance().getBottomList(this._activityInfo.id),this._minBottom=this._bottomList[0],this._MaxBottom=this._bottomList[this._bottomList.length-1],this._bottomList){var e=this._bottomList.shift();this.forbidPrevBetBtn(),this.openStartBtn(),this.openNextBetBtn(),this.openAutoStartBtn(),this.autoStartBtn.btnImg.source=SheetSubName.LaBa_AutoStartOpen,this.betLabel.text=e.toString(),this._bottomList.push(e),this.reqPubInfo(),qin.ArrayUtil.Clear(this._coefficientList),this._coefficientList=LaBaDefined.GetInstance().getCoefficientListByBottom(this._activityInfo.id,e)}this._isAutoStart=!1,this.setSelfGold();for(var t=0;3>t;t++)this["scroller"+t].viewport.scrollV=0,this["group"+t].getChildAt(0).y=this._listOneY,this["group"+t].getChildAt(1).y=this._listTwoY;this._isNext=!0,this._countDownTime=this._autoReqPoolTime,this._isUnderway=!1,qin.Tick.AddSecondsInvoke(this.countDown,this)},t.prototype.countDown=function(){this._countDownTime--,this._countDownTime<=0&&this.reqPubInfo()},t.prototype.setPoolInfo=function(e){if(e&&e.Array&&e.Array[0].Id==this._activityInfo.id){var t=parseInt(this.betLabel.text);switch(t){case 200:this.poolLabel.text=qin.MathUtil.numAddSpace(e.Array[0].Step1);break;case 2e3:this.poolLabel.text=qin.MathUtil.numAddSpace(e.Array[0].Step2);break;case 2e4:this.poolLabel.text=qin.MathUtil.numAddSpace(e.Array[0].Step3);break;case 2e5:this.poolLabel.text=qin.MathUtil.numAddSpace(e.Array[0].Step4)}this._countDownTime=this._autoReqPoolTime}},t.prototype.setStartImgIndex=function(e){for(var t=0;3>t;t++)this._startImgIndexList[t]=e[t]},t.prototype.setResultImgIndex=function(e){for(var t=0;3>t;t++)this._resultImgIndexList[t]=e[t]},t.prototype.setOffsetScrollV=function(e){for(var t=0;3>t;t++)this._offsetScrollV[t]=e[t]},t.prototype.setSelfGold=function(){this.selfGoldLabel.text=qin.MathUtil.numAddSpace(UserManager.userInfo.gold),this._selfGold=UserManager.userInfo.gold},t.prototype.forbidStartBtn=function(){this.startBtn.enabled=!1},t.prototype.openStartBtn=function(){this.startBtn.enabled=!0},t.prototype.forbidNextBetBtn=function(){this.nextBetBtn.enabled=!1},t.prototype.openNextBetBtn=function(){this.nextBetBtn.enabled=!0},t.prototype.forbidPrevBetBtn=function(){this.prevBetBtn.enabled=!1},t.prototype.openPrevBetBtn=function(){this.prevBetBtn.enabled=!0},t.prototype.forbidAutoStartBtn=function(){this.autoStartBtn.touchEnabled=!1},t.prototype.openAutoStartBtn=function(){this.autoStartBtn.touchEnabled=!0},t.prototype.setScrollerImg=function(){UIUtil.writeListInfo(this.list0,this._sourceList,null),UIUtil.writeListInfo(this.list00,this._sourceList,null),UIUtil.writeListInfo(this.list1,this._sourceList,null),UIUtil.writeListInfo(this.list11,this._sourceList,null),UIUtil.writeListInfo(this.list2,this._sourceList,null),UIUtil.writeListInfo(this.list22,this._sourceList,null)},t.prototype.onStartBtnClick=function(){this.reqStart()},t.prototype.onAutoStartBtnClick=function(){this._isAutoStart?(this._isAutoStart=!1,this.autoStartBtn.btnImg.source=SheetSubName.LaBa_AutoStartOpen):(this._isAutoStart=!0,this.autoStartBtn.btnImg.source=SheetSubName.LaBa_AutoStartClose,this._isUnderway||(this.forbidStartBtn(),this.reqStart()))},t.prototype.getFirstBottom=function(){var e;return this._bottomList&&(e=this._bottomList.shift(),this._bottomList.push(e)),e},t.prototype.getLastBottom=function(){var e;return this._bottomList&&(e=this._bottomList.pop(),this._bottomList.unshift(e)),e},t.prototype.onNextBetBtnClick=function(){if(this._bottomList){var e=void 0;this._isNext?e=this.getFirstBottom():(e=this.getFirstBottom(),e=this.getFirstBottom(),this._isNext=!0),e==this._MaxBottom&&this.forbidNextBetBtn(),0==this.prevBetBtn.enabled&&this.openPrevBetBtn(),this.betLabel.text=e.toString(),this.reqPubInfo(),qin.ArrayUtil.Clear(this._coefficientList),this._coefficientList=LaBaDefined.GetInstance().getCoefficientListByBottom(this._activityInfo.id,e)}},t.prototype.onPrevBetBtnClick=function(){if(this._bottomList){var e=void 0;this._isNext?(e=this.getLastBottom(),e=this.getLastBottom(),this._isNext=!1):e=this.getLastBottom(),e==this._minBottom&&this.forbidPrevBetBtn(),0==this.nextBetBtn.enabled&&this.openNextBetBtn(),this.betLabel.text=e.toString(),this.reqPubInfo(),qin.ArrayUtil.Clear(this._coefficientList),this._coefficientList=LaBaDefined.GetInstance().getCoefficientListByBottom(this._activityInfo.id,e)}},t.prototype.reqPubInfo=function(){ActivityManager.reqPubJson(this._activityInfo.id)},t.prototype.setActivityInfo=function(e){if(e){if(e.ResultList){var t=LaBaDefined.GetInstance().getSubDefinition(this._activityInfo.id,e.ResultList[0].SubId);t&&(this._type=t.type)}e.AwardList&&(this.shimTaeYoonInfo.gold=e.AwardList[0].Count),this.startScroll(),this.selfGoldLabel.text=qin.MathUtil.numAddSpace(this._selfGold-parseInt(this.betLabel.text)),this._isUnderway=!0}},t.prototype.startScroll=function(){this.setScrollerResult(),this.forbidStartBtn(),this.forbidNextBetBtn(),this.forbidPrevBetBtn(),this._isAutoStart||(this.forbidAutoStartBtn(),this.autoStartBtn.btnImg.source=SheetSubName.LaBa_AutoStartClose);for(var e=this.getRandomRound(4,6),t=0;3>t;t++)this["_flag"+t]=!1,this["_index"+t]=1,this["_changeYFlag"+t]=!1,this["_isFirstChangeY"+t]=!0;if(e){this.scrollAnim0(e);for(var t=1;3>t;t++)qin.Tick.AddTimeoutInvoke(this["scrollAnim"+t],500*t,this,e)}},t.prototype.scrollAnim0=function(e){this.group0.getChildAt(0).y=this._listOneY,this.group0.getChildAt(1).y=this._listTwoY;var t=this._startImgIndexList[0]*this._onceHeight,n=this._offsetScrollV[0],i=7*this._onceHeight*e+t+n;egret.Tween.get(this.scroller0.viewport,{onChange:this.onScroll0,onChangeObj:this}).set({scrollV:t}).to({scrollV:i},4e3,egret.Ease.quadInOut).call(this.scrollEnd,this,[0])},t.prototype.scrollAnim1=function(e){this.group1.getChildAt(0).y=this._listOneY,this.group1.getChildAt(1).y=this._listTwoY;var t=this._startImgIndexList[1]*this._onceHeight,n=this._offsetScrollV[1],i=7*this._onceHeight*e+t+n;egret.Tween.get(this.scroller1.viewport,{onChange:this.onScroll1,onChangeObj:this}).set({scrollV:t}).to({scrollV:i},4e3,egret.Ease.quadInOut).call(this.scrollEnd,this,[1])},t.prototype.scrollAnim2=function(e){this.group2.getChildAt(0).y=this._listOneY,this.group2.getChildAt(1).y=this._listTwoY;var t=this._startImgIndexList[2]*this._onceHeight,n=this._offsetScrollV[2],i=7*this._onceHeight*e+t+n;egret.Tween.get(this.scroller2.viewport,{onChange:this.onScroll2,onChangeObj:this}).set({scrollV:t}).to({scrollV:i},4e3,egret.Ease.quadInOut).call(this.scrollEnd,this,[2])},t.prototype.setScrollerResult=function(){if(this._type){var e=void 0,t=void 0,n=void 0;switch(this._type){case ShimTaeYoonResultType.ThreeSev:case ShimTaeYoonResultType.ThreeBAR:case ShimTaeYoonResultType.ThreeApple:case ShimTaeYoonResultType.ThreeBell:case ShimTaeYoonResultType.ThreeGrape:case ShimTaeYoonResultType.ThreePersimmon:case ShimTaeYoonResultType.ThreeCherry:this.setResultImgIndex([this._type-1,this._type-1,this._type-1]),e=this._resultImgIndexList[0]-this._startImgIndexList[0],t=this._resultImgIndexList[1]-this._startImgIndexList[1],n=this._resultImgIndexList[2]-this._startImgIndexList[2],this.setOffsetScrollV([this._onceHeight*e,this._onceHeight*t,this._onceHeight*n]);break;case ShimTaeYoonResultType.TwoCherry:var i=this.getResultImgTwoCherry(ShimTaeYoonResultType.TwoCherry,ShimTaeYoonImgIndex.Cherry);this.setOffsetScrollV(i);break;case ShimTaeYoonResultType.OneCherry:var a=this.getResultImgOneCherry(ShimTaeYoonResultType.OneCherry,ShimTaeYoonImgIndex.Cherry);this.setOffsetScrollV(a);break;case ShimTaeYoonResultType.NoAward:var o=this.getResultImgNoAward();this.setOffsetScrollV(o)}}},t.prototype.getResultImgNoAward=function(){var e,t=new Array(0,1,2),n=new Array,i=this.getRandomRound(0,5),a=this.getRandomRound(0,5),o=this.getRandomRound(0,5);if(i==a&&i==o)for(e=this.getRandomRound(0,2),i=this.getRandomRound(0,5);i==a;)i=this.getRandomRound(0,5);else e=1;for(var r=0;r<t.length;r++)if(t[r]==e){t.splice(r,1),n[r]=i;break}return n[t[0]]=a,n[t[1]]=o,this.setResultImgIndex(n),this.getScrollVList()},t.prototype.getResultImgOneCherry=function(e,t){for(var n=new Array(0,1,2),i=new Array,a=this.getRandomRound(0,2),o=this.getRandomRound(0,6),r=this.getRandomRound(0,6),s=0;s<n.length;s++)if(n[s]==a){n.splice(s,1),i[s]=t;break}for(;o==t;)o=this.getRandomRound(0,6);for(;r==t;)r=this.getRandomRound(0,6);return i[n[0]]=o,i[n[1]]=r,this.setResultImgIndex(i),this.getScrollVList()},t.prototype.getResultImgTwoCherry=function(e,t){for(var n=this.getRandomRound(0,2),i=this.getRandomRound(0,6);i==t;)i=this.getRandomRound(0,6);for(var a=new Array,o=0;3>o;o++)o==n?a[o]=i:a[o]=t;return this.setResultImgIndex(a),this.getScrollVList()},t.prototype.getScrollVList=function(){var e,t,n,i=new Array;return e=this._resultImgIndexList[0]-this._startImgIndexList[0],t=this._resultImgIndexList[1]-this._startImgIndexList[1],n=this._resultImgIndexList[2]-this._startImgIndexList[2],i[0]=this._onceHeight*e,i[1]=this._onceHeight*t,i[2]=this._onceHeight*n,i},t.prototype.setImgPos=function(e){var t;t=this["_isFirstChangeY"+e]?this["scroller"+e].viewport.scrollV/853.5:(this["scroller"+e].viewport.scrollV-853.5)/this._listHeight+1,t>=this["_index"+e]&&(this["_preIndex"+e]=Math.floor(t),this["_preIndex"+e]==this["_index"+e]&&(this["_flag"+e]=!0)),1==this["_flag"+e]&&(this["_flag"+e]=!1,this["_changeYFlag"+e]?this["group"+e].getChildAt(1).y=this._listHeight*this["_index"+e]+Math.abs(this._listTwoY):(this["group"+e].getChildAt(0).y=this._listHeight*this["_index"+e]+Math.abs(this._listTwoY),this["_isFirstChangeY"+e]=!1),this["_index"+e]++,this["_changeYFlag"+e]=!this["_changeYFlag"+e])},t.prototype.onScroll0=function(){this.setImgPos(0)},t.prototype.onScroll1=function(){this.setImgPos(1)},t.prototype.onScroll2=function(){this.setImgPos(2)},t.prototype.scrollEnd=function(e){2==e&&qin.Tick.AddTimeoutInvoke(this.showResultPanel,500,this)},t.prototype.resetPanel=function(e){e==UIModuleName.ShimTaeYoonResultPanel&&(this._isUnderway=!1,this.reqPubInfo(),this.openAutoStartBtn(),this.autoStartBtn.btnImg.source=SheetSubName.LaBa_AutoStartOpen,this.setStartImgIndex(this._resultImgIndexList),this._isAutoStart?this.reqStart():this.resetBtnState()),e==UIModuleName.ShoppingPanel&&this.setSelfGold()},t.prototype.resetBtnState=function(){var e=parseInt(this.betLabel.text);e!=this._minBottom&&this.openPrevBetBtn(),e!=this._MaxBottom&&this.openNextBetBtn(),this.openStartBtn()},t.prototype.showResultPanel=function(){this.setSelfGold(),UIManager.showPanel(UIModuleName.ShimTaeYoonResultPanel,{gold:this.shimTaeYoonInfo.gold,type:this._type})},t.prototype.reqStart=function(){var e=parseInt(this.betLabel.text);if(this._isAutoStart&&(this.autoStartBtn.btnImg.source=SheetSubName.LaBa_AutoStartClose),UserManager.userInfo.gold<e)return this._isAutoStart&&(this._isAutoStart=!1,this.autoStartBtn.btnImg.source=SheetSubName.LaBa_AutoStartOpen,this.resetBtnState()),void AlertManager.showConfirm("您的金币不足，快去商城补充点金币吧！",this.goShoppingPanel,null,null,null,null,"前往商城");var t,n,i=LaBaDefined.GetInstance().getDefByBottom(this._activityInfo.id,parseInt(this.betLabel.text));i&&(t=i.id,n=i.subId,ActivityManager.reqJoinActivity(t,n))},t.prototype.goShoppingPanel=function(e){UIManager.showPanel(UIModuleName.ShoppingPanel,{prevPanelName:UIModuleName.ShimTaeYoonPanel})},t.prototype.getRandomRound=function(e,t){return Math.floor(1e9*Math.random())%(t-e+1)+e},t.prototype.clickHandler=function(e){switch(SoundManager.playEffect(MusicAction.buttonClick),e.target){case this.helpBtn:UIManager.showPanel(UIModuleName.ShimTaeYoonHelpPanel,{coefficientList:this._coefficientList,bottom:parseInt(this.betLabel.text)});break;case this.rankBtn:UIManager.showPanel(UIModuleName.ShimTaeYoonRankPanel,this._activityInfo);break;case this.nextBetBtn:this.onNextBetBtnClick();break;case this.prevBetBtn:this.onPrevBetBtnClick();break;case this.startBtn:this.onStartBtnClick();break;case this.autoStartBtn:this.onAutoStartBtnClick()}},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BaseActivityPanel);__reflect(ShimTaeYoonPanel.prototype,"ShimTaeYoonPanel");var ShimTaeYoonRankPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.ShimTaeYoonRankPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.rankTypeTab.build(TabComponent.CreatData(["今天","昨天"],[this.rankGroup,this.rankGroup],TabButtonType.LaBa2)),this.rankTypeTab.isTween=!1,this.listTypeTab.isTween=!1,UIUtil.listRenderer(this.rankList,this.rankScroller,ShimTaeYoonRankItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0)},t.prototype.init=function(t){if(e.prototype.init.call(this,t),!this._bottomList){this._bottomList=new Array,t&&(this._bottomList=LaBaDefined.GetInstance().getBottomList(t.id));for(var n=new Array,i=new Array,a=this._bottomList.length-1;a>=0;a--)i.push(this.rankGroup),n.push(qin.MathUtil.formatNum(this._bottomList[a]));this.listTypeTab.build(TabComponent.CreatData(n,i,TabButtonType.SubOf4))}this.rankTypeTab.init(0),this.listTypeTab.init(0),this.currentRankType=ShimTaeYoonRankType.Today,this.currentListNum=this._bottomList[this._bottomList.length-1],this.reqGetRankList(),this._countDownTime=300,qin.Tick.AddSecondsInvoke(this.countDown,this)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.rankTypeTab.tabChangeEvent.addListener(this.onRankTypeTabTap,this),this.listTypeTab.tabChangeEvent.addListener(this.onListTypeTabTap,this),RankManager.getRankListEvent.addListener(this.getRankList,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.rankTypeTab.tabChangeEvent.removeListener(this.onRankTypeTabTap,this),this.listTypeTab.tabChangeEvent.removeListener(this.onListTypeTabTap,this),RankManager.getRankListEvent.removeListener(this.getRankList,this),qin.Tick.RemoveSecondsInvoke(this.countDown,this),this.rankScroller.stopAnimation()},t.prototype.countDown=function(){this._countDownTime--,this._countDownTime<=0&&(this.reqGetRankList(),qin.Console.log("拉取排行榜信息"))},t.prototype.getRankList=function(e){if(this._currentRankListInfo){var t=RankManager.getRankInfoByRoleId(this._currentRankListInfo.list,UserManager.userInfo.roleId);t?(this.selfRankGroup.visible=!0,this.noRankLabel.visible=!1,this.myNameLabel.text=UserManager.userInfo.name,this.myRankLabel.text=t.rank.toString(),this.awardLabel.text=qin.MathUtil.formatNum(t.score)):(this.selfRankGroup.visible=!1,this.noRankLabel.visible=!0),this.refreshUI(),this._countDownTime=300}},t.prototype.refreshUI=function(){UIUtil.writeListInfo(this.rankList,this._currentRankListInfo.list,"roleId",!0)},t.prototype.onRankTypeTabTap=function(e){this.currentRankType=e,0==e?this.currentRankType=ShimTaeYoonRankType.Today:this.currentRankType=ShimTaeYoonRankType.Yesterday,this.currentListNum=this._bottomList[this._bottomList.length-1],this.listTypeTab.setSelectIndex(0),this.reqGetRankList(),this.rankScroller.stopAnimation()},t.prototype.onListTypeTabTap=function(e){this.currentListNum=this._bottomList[this._bottomList.length-1-e],this.reqGetRankList(),this.rankScroller.stopAnimation()},t.prototype.reqGetRankList=function(){this._currentRankListInfo=RankManager.getRankListInfo(RankType.Activity,this.panelData.id,this.currentRankType,this.currentListNum),RankManager.isRefreshRank(this._currentRankListInfo)?RankManager.reqRankList(RankType.Activity,1,this.panelData.id,this.currentRankType,this.currentListNum):this.refreshUI()},t}(BasePanel);__reflect(ShimTaeYoonRankPanel.prototype,"ShimTaeYoonRankPanel");var ShimTaeYoonResultPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.ShimTaeYoonResultPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.setGrayMask(!1),this.tweenGroup.verticalCenter=-300,this._count=0},t.prototype.init=function(t){e.prototype.init.call(this,t),t.gold>0?(this._count++,this._count>=3?(this._count=0,this.desImg.source=SheetSubName.LaBa_WinningStreak,this.numGroup.bottom=35,this.desImg.top=30,this.bgImage.width=416,this.bgImage.height=280,this.specialPanel()):(this.numLabel.textColor=this.charLabel.textColor=ColorEnum.LaBa_Win_Com,this.desImg.source=SheetSubName.LaBa_Win,this.numGroup.bottom=50,this.desImg.top=36,this.bgImage.width=338,this.bgImage.height=208),(t.type==ShimTaeYoonResultType.ThreeSev||t.type==ShimTaeYoonResultType.ThreeBAR||t.type==ShimTaeYoonResultType.ThreeApple)&&(this.desImg.source=SheetSubName.LaBa_TopPrize,this.numGroup.bottom=40,this.desImg.top=40,this.bgImage.width=500,this.bgImage.height=234,this.specialPanel()),this.numLabel.text=t.gold.toString(),this.charLabel.visible=!0):(this._count=0,this.desImg.source=SheetSubName.LaBa_Lost,this.desImg.top=45,this.bgImage.width=327,this.bgImage.height=161,this.numLabel.text="",this.charLabel.visible=!1),this.removeTweenEvents(),this.createTween()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t)},t.prototype.specialPanel=function(){this.numLabel.textColor=this.charLabel.textColor=ColorEnum.LaBa_Win_Golden,this.showPoolDes()},t.prototype.showPoolDes=function(){var e=this;egret.Tween.get(this.tweenGroup).set({scaleX:0,scaleY:0}).to({scaleX:1,scaleY:1},400,egret.Ease.backOut),AnimationFactory.getParticleEffect(AnimationType.HundredWarPoolDes,this.tweenGroup,function(t){e._poolDesEffect=t})},t.prototype.createTween=function(){this.removeTweenEvents(),this.alpha=1,egret.Tween.get(this).wait(2e3).to({alpha:0},500,egret.Ease.quadOut).call(this.onPlayOver,this)},t.prototype.onPlayOver=function(e){this.onCloseBtnClickHandler(null)},t.prototype.removeTweenEvents=function(){egret.Tween.removeTweens(this)},t}(BasePanel);__reflect(ShimTaeYoonResultPanel.prototype,"ShimTaeYoonResultPanel");var ShoppingPanel=function(e){function t(){var t=e.call(this)||this;return t._vipId=[101,102,103],t.setSkinName(UIModuleName.ShoppingPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,this.goldList.dataProvider=new eui.ArrayCollection(ShopManager.goldListRender),this.diamondList.dataProvider=new eui.ArrayCollection(ShopManager.diamondListRender),this.vipList.dataProvider=new eui.ArrayCollection(ShopManager.vipList),this.propList.dataProvider=new eui.ArrayCollection(ShopManager.propList),UIUtil.listRenderer(this.goldList,this.gold_scroller,ShopGoldItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.diamondList,this.diamond_scroller,ShopDiamondItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.vipList,this.vip_scroller,VipListItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),UIUtil.listRenderer(this.propList,this.prop_scroller,VipListItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.diamondNumLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.diamond),this.goldNumLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold),VersionManager.isSafe?this.shoppingTab.build(TabComponent.CreatData(["饮料","钻石","道具"],[this.goldGroup,this.diamondGroup,this.propGroup],TabButtonType.BigOf3)):this.shoppingTab.build(TabComponent.CreatData(["饮料","钻石","道具","VIP"],[this.goldGroup,this.diamondGroup,this.propGroup,this.vipGroup],TabButtonType.BigOf4)),UIManager.pushResizeGroup(this.resizeGroup),UIManager.pushResizeScroller(this.gold_scroller,900),UIManager.pushResizeScroller(this.diamond_scroller,900),UIManager.pushResizeScroller(this.vip_scroller,950),UIManager.pushResizeScroller(this.prop_scroller,950)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.onTabTap(0),t&&null!=t.tab?this.shoppingTab.init(t.tab):this.shoppingTab.init(0),ChannelManager.checkUnFinishedPayList(),this.refreshUI()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable(),this.vipList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.payClickHandler,this),this.propList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.payClickHandler,this),this.goldList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.payClickHandler,this,!1,100),this.diamondList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.payClickHandler,this,!1,100),this.shoppingTab.tabChangeEvent.addListener(this.onTabTap,this),AwardManager.OnExchanged.addListener(this.onExchangedHandler,this),AwardManager.OnAwardValueChanged.addListener(this.onRefreshProperty,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable(),this.vipList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.payClickHandler,this),this.propList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.payClickHandler,this),this.goldList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.payClickHandler,this),this.diamondList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.payClickHandler,this),this.shoppingTab.tabChangeEvent.removeListener(this.onTabTap,this),AwardManager.OnExchanged.removeListener(this.onExchangedHandler,this),AwardManager.OnAwardValueChanged.removeListener(this.onRefreshProperty,this),PropertyManager.Clear()},t.prototype.refreshUI=function(){this.diamondNumLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.diamond),this.goldNumLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold)},t.prototype.onExchangedHandler=function(e){if(-1!=this._vipId.indexOf(e)){var t=AwardDefined.GetInstance().getDefinition(e);if(t){for(var n=new Array,i=0,a=t.rewardList;i<a.length;i++){var o=a[i],r=new ItemGetInfo;r.id=o.id,r.count=o.count,r.type=o.type,n.push(r),r.id==PropertyId.vipExp&&(UserManager.userInfo.vipExp+=r.count)}UIManager.showPanel(UIModuleName.GetItemTipsPanel,n)}}},t.prototype.onRefreshProperty=function(e){var t=ShopDefined.GetInstance().getDefinitionByAwardId(e);t&&(this.diamondNumLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.diamond),this.goldNumLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold),PropertyManager.ShowItemList())},t.prototype.payClickHandler=function(e){switch(SoundManager.playEffect(MusicAction.buttonClick),e.currentTarget){case this.vipList:this.payByDiamond(this.vipList.selectedItem);break;case this.propList:this.payByDiamond(this.propList.selectedItem);break;case this.goldList:case this.diamondList:PropertyManager.OpenGet()}},t.prototype.payByDiamond=function(e){var t=AwardDefined.GetInstance().getDefinition(e.definition.awardId);if(t){var n=t.costType.indexOf(CostType.Diamond);UserManager.userInfo.diamond>=t.costNum[n]?AlertManager.showConfirm(qin.StringUtil.format("是否花费{0}钻石，购买{1}？",t.costNum[n],t.name),this.tryPay,null,e):CostManager.showBuyDiamond(this.goDiamondGp.bind(this))}},t.prototype.showPrePanelName=function(){this.prevPanelName==UIModuleName.GamblingPanel?UIManager.showPanel(this.prevPanelName,this.panelData.toRight):UIManager.showPanel(this.prevPanelName)},t.prototype.goDiamondGp=function(){this.shoppingTab.setSelectIndex(ShopGroupIndex.Diamond)},t.prototype.tryPay=function(e){e&&ChannelManager.PaySend(e.id,!0)},t.prototype.onTabTap=function(e){switch(e){case ShopGroupIndex.Gold:this.goldList.scrollV=0;break;case ShopGroupIndex.Diamond:this.diamondList.scrollV=0;break;case ShopGroupIndex.Prop:this.propList.scrollV=0;break;case ShopGroupIndex.Vip:this.vipList.scrollV=0}},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BasePanel);__reflect(ShoppingPanel.prototype,"ShoppingPanel");var SignInPanel=function(e){function t(){var t=e.call(this)||this;return t._processUnit=82,t._processOffset=19,t.setSkinName(UIModuleName.SignInPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0,this.processScroller.viewport=this.processGroup},t.prototype.init=function(t){e.prototype.init.call(this,t),UIUtil.listRenderer(this.signInList,this.signIn_scroller,SignInGoldItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!1)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.setDaysPrize(SignInDay.SignInThree,this.threeDayLabel,this.signImg3),this.setDaysPrize(SignInDay.SignInFive,this.fiveDayLabel,this.signImg5),this.setDaysPrize(SignInDay.SignInSeven,this.sevenDayLabel,this.signImg7),this.refreshUI()},t.prototype.setDaysPrize=function(e,t,n){var i=SignInDefined.GetInstance().getDefinitionbySubId(e);if(i){var a=AwardDefined.GetInstance().getDefinition(i.pilePrize);if(a){t.text=ActivityManager.signInHandler.getAwardDes(a);var o=ItemDefined.GetInstance().getDefinition(a.rewardList[0].id);o&&(n.source=o.icon+ResSuffixName.PNG)}}},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.signInBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),ActivityManager.signInHandler.signInCompleteEvent.addListener(this.onSignInResult,this),UIUtil.hideScrollerBar(this.signIn_scroller)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.signInBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),ActivityManager.signInHandler.signInCompleteEvent.removeListener(this.onSignInResult,this),qin.Tick.RemoveSecondsInvoke(this.closeThisPanel,this)},t.prototype.onClickHandler=function(){SoundManager.playEffect(MusicAction.buttonClick),ActivityManager.signInHandler.reqSignIn(this.activityInfo.id,this.activityInfo.step)},t.prototype.onSignInResult=function(){this.refreshUI(),qin.Tick.AddSecondsInvoke(this.closeThisPanel,this)},t.prototype.closeThisPanel=function(){qin.Tick.RemoveSecondsInvoke(this.closeThisPanel,this),this.onCloseBtnClickHandler(null)},t.prototype.onCloseBtnClickHandler=function(t){e.prototype.onCloseBtnClickHandler.call(this,t),ActivityManager.payPrizeHandler.getIsShow(ActivityId.FirstPay)&&this.panelData.isShowfirstPay&&JumpUtil.JumpToFirstPayPanel()},t.prototype.refreshUI=function(){ActivityManager.signInHandler.isSignToday(this.activityInfo.id)?(this.signInBtn.visible=!1,this.haveSignedImg.visible=!0):(this.signInBtn.visible=!0,this.haveSignedImg.visible=!1),0==this.activityInfo.step?this.processScroller.width=0:this.processScroller.width=this._processUnit*(this.activityInfo.step-1)+this._processOffset,UIUtil.writeListInfo(this.signInList,this.activityInfo.subList,"subId")},t}(BaseActivityPanel);__reflect(SignInPanel.prototype,"SignInPanel");var SimplePicturePanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.SimplePicturePanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this._anime=new PanelAnime(this),this.maskAlpha=0,this.isCloseButtonTween=!0,this.activityScroller.viewport=this.imgGroup},t.prototype.init=function(t){e.prototype.init.call(this,t),this.activityScroller.viewport.scrollV=0,InfoUtil.checkAvailable(this.activityInfo)&&(this.activityImg.source=this.activityInfo.definition.icon,this.titleLabel.text=this.activityInfo.definition.name)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._anime.onEnable()},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this._anime.onDisable()},t.prototype.onCloseBtnClickHandler=function(e){this._anime.onCloseBtnClickHandler(e)},t}(BaseActivityPanel);__reflect(SimplePicturePanel.prototype,"SimplePicturePanel");var TestPanel=function(e){function t(){var t=e.call(this)||this;return t._payIndex=0,t.gamblingPanelIndex=0,t.roomId=1,t.x=150,t.y=0,t.creatComponent(),t}return __extends(t,e),t.prototype.creatComponent=function(){this._testBtn||(this._testBtn=new eui.Button,this._testBtn.label="测试",this._testBtn.horizontalCenter=0,this._testBtn.verticalCenter=0,this._testBtn.skinName="gambling_chat_btn",this._testBtn.alpha=.3,this.addChild(this._testBtn)),this.addEvents()},t.prototype.addEvents=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this,!0)},t.prototype.clickHandler=function(e){var t=e.target;switch(t){case this._testBtn:var n=/\#/g,i="###aaaa##aaa";i=i.replace(n,qin.StringConstants.Empty),console.log(i)}},t.prototype.testTime=function(){var e=qin.DateTimeUtil.formatTimestamp(TimeManager.GetServerUtcTimestamp());e=e.substring(5)},t.prototype.testPayMaskPanel=function(){this._payIndex%2==0?UIManager.showPanel(UIModuleName.PayMaskPanel):UIManager.closePanel(UIModuleName.PayMaskPanel),this._payIndex++},t.prototype.testI=function(){for(var e=function(e){setTimeout(function(){console.log(e)},100*e)},t=0;5>t;t++)e(t);for(var n=0;10>n;n++)setTimeout(function(){console.log(n)},100*n)},t.prototype.testGamblingPanel=function(){this.gamblingPanelIndex%2==0?UIManager.showPanel(UIModuleName.GamblingPanel):UIManager.closePanel(UIModuleName.GamblingPanel),this.gamblingPanelIndex++},t.prototype.testGuideChoosePanel=function(){UIManager.showPanel(UIModuleName.GuideChoosePanel,{type:2})},t.prototype.testQuestionPanel=function(){var e={question:2,self:23,gap:-10,scale:1,cardList1:[2,1,2,11,3,1,2,5,1,11,2,10,2,9],cardList2:[2,1,2,11,2,10,2,9,2,5,3,1,1,11],mask2:[3,1,1,11]};UIManager.showPanel(UIModuleName.GuideQuestionPanel,e)},t.prototype.testAnswerPanel=function(){var e={cardList1:[3,1,5,2,1,11,2,1,2,11],cardList2:[3,1,2,1,1,11,2,11,2,5]};UIManager.showPanel(UIModuleName.GuideAnswerErrorPanel,e)},t.prototype.testGuideaward=function(){UIManager.showPanel(UIModuleName.GuideBringGoldPanel,{self:34})},t.prototype.testGuide=function(){var e=GuideDefined.GetInstance().getDefinition(0);GuideManager.reqSetGuideStep(e)},t.prototype.testJing=function(){var e="333#1#333#2###1#111111222",t=e.replace(/#[12]{1}#/g,qin.StringConstants.Empty);console.log(t)},t.prototype.testDelete=function(){this.callBack=qin.Delegate.getOut(this.testDelete1,this),qin.Delegate.putIn(this.callBack),this.callBack=null,this.callBack=qin.Delegate.getOut(this.testDelete1,this)},t.prototype.testDelete1=function(){console.log("testdelte1")},t.prototype.testProperty=function(){},t.prototype.testReg=function(){var e="a",t=new RegExp(e,"g"),n="sasdfadfasdf";n=n.replace(t,"喔"),console.log(n)},t.prototype.testDragonBones=function(){var e=this;RES.getResAsync("test01_ske_dbmv",function(){RES.getResAsync("test01_tex_png",function(){dragonBones.addMovieGroup(RES.getRes("test01_ske_dbmv"),RES.getRes("test01_tex_png"));var e=dragonBones.buildMovie("Sprite");e.play(),e.x=GameManager.stage.stageWidth*Math.random(),e.y=GameManager.stage.stageHeight*Math.random(),e.timeScale=Math.random(),GameManager.stage.addChild(e)},e)},this)},t.prototype.stacktrace=function(){function e(t){if(t&&t.caller&&t.arguments){for(var n=qin.StringConstants.Empty,i=0;i<t.arguments.length;i++)n+=i==t.arguments.lenght-1?t.arguments[i].toString():t.arguments[i]+",";return e(t.caller).concat([t.toString().split("(")[0].substring(9)+"("+n+")"])}return[]}return e(arguments.callee.caller)},t.prototype.testConsole=function(){qin.Console.logError("sss")},t.prototype.testEnterRoom=function(){GamblingManager.OnGetRoomInfoEvent.addListener(function(){var e=UIManager.getPanel(UIModuleName.GamblingPanel);e.switchToGameSceneInRoom()},this),this.roomId=500001,GamblingManager.reqEnterRoom(this.roomId)},t.prototype.test0undefined=function(){qin.Console.log(!1)},t.prototype.testPringUnicode=function(){var e=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=("00"+e.charCodeAt(n).toString(16)).slice(-4);return"\\u"+t.join("\\u")},t=e("decToHex unicode 编码转换");alert("编码后："+t)},t.prototype.testldhexchange=function(){var e=qin.Crypt.ldhexchange("<¢`û");qin.Console.log(e);for(var t=[],n=0;4>n;n++)t[n]=e.charCodeAt(n);
var i=array2arraybuffer(t);e=egret.Base64Util.encode(i),qin.Console.log(e)},t.prototype.testCharCode=function(){for(var e=[],t=0;300>t;t++)""==String.fromCharCode(t)&&e.push(t),qin.Console.log(String.fromCharCode(t)+t);qin.Console.log(e)},t.prototype.testOs=function(){AlertManager.showAlert(egret.Capabilities.os)},t.prototype.testChat=function(){ChatManager.SendChatMessage("http://wx.qlogo.cn/mmopen/SR2sN954tXxHE6ICV3n09ibMEtSPtrrgT8NO7Zqrmbj0HKeI9ZsLKRlVd8mMwnz7NdIQgNwmiaPFE9MiaFXwkCOMXtPEYBzatQW/0",ChatMessageType.InRoom)},t.prototype.testPanelName=function(){qin.Console.log(egret.getQualifiedClassName(this))},t.prototype.testWaitNextPanel=function(){},t.prototype.testInviteFriends=function(){FriendManager.reqInviteFriend(1,[1,2,3,4])},t.prototype.testBrightCard=function(){for(var e=UIManager.getPanel(UIModuleName.GamblingPanel),t=0,n=e.pitList;t<n.length;t++){var i=n[t];if(i.headComponent.bindData)break}},t.prototype.testArray=function(){qin.Console.log((Array(5).join("0")+"1").slice(-5))},t.prototype.testCardType=function(){var e=new Array,t=new CardInfo([1,14]);e.push(t),t=new CardInfo([2,14]),e.push(t),t=new CardInfo([3,14]),e.push(t),t=new CardInfo([1,3]),e.push(t),t=new CardInfo([2,3]),e.push(t),t=new CardInfo([3,3]),e.push(t),t=new CardInfo([1,6]),e.push(t),GamblingManager.roomInfo=new RoomInfo,CardTypeMatchUtil.matchCardInRoom(e),qin.Console.log(CardTypeMatchUtil.getCardDes(CardTypeMatchUtil.cardType))},t}(eui.Component);__reflect(TestPanel.prototype,"TestPanel");var ShimTaeYoonInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.trySetDefinition=function(){e.prototype.trySetDefinition.call(this),this._definition=LaBaDefined.GetInstance().getSubDefinition(this._id,this._subId)},t}(BaseActivitySubInfo);__reflect(ShimTaeYoonInfo.prototype,"ShimTaeYoonInfo");var TextTipsPanel=function(e){function t(){var t=e.call(this)||this;return t.layer=UILayerType.Tips,t.setSkinName(UIModuleName.TextTipsPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.setTouchChildren(!1),this.setTouchEnable(!1)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.panelData&&(this.label.text=this.panelData,this.bgImage.width=this.label.width+60,this.bgImage.height=this.label.height+30,this.removeTweenEvents(),this.createTween())},t.prototype.createTween=function(){this.removeTweenEvents(),this.alpha=1,egret.Tween.get(this).wait(1500).to({alpha:0},500,egret.Ease.quadOut).call(this.onPlayOver,this)},t.prototype.onPlayOver=function(e){this.onCloseBtnClickHandler(null)},t.prototype.removeTweenEvents=function(){egret.Tween.removeTweens(this)},t}(BasePanel);__reflect(TextTipsPanel.prototype,"TextTipsPanel");var ThreeMinRemindPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.ThreeMinRemindPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0},t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),ChampionshipManager.mttRemindStartHandler.ResetThreeMinFlagEvent.addListener(this.resetThreeMinFlag,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),ChampionshipManager.mttRemindStartHandler.ResetThreeMinFlagEvent.removeListener(this.resetThreeMinFlag,this)},t.prototype.resetThreeMinFlag=function(){ChampionshipManager.mttRemindStartHandler.resetThreeMinFlag()},t}(BaseBannerRemindPanel);__reflect(ThreeMinRemindPanel.prototype,"ThreeMinRemindPanel");var TimeAwardPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.TimeAwardPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=.5,UIUtil.listRenderer(this.awardList,this.awardScroller,TimeAwardItemRenderer,ScrollViewDirection.Horizontal_L_R),this.awardScroller.scrollPolicyV=eui.ScrollPolicy.OFF,this.isMaskClickClose=!0,this.maskAlpha=.5,UIManager.pushResizeGroup(this.anmGroup)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.pattern=t},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.setTimeAwardInfo(),GamblingManager.timeAwardHandler.getTimeAward(this.pattern)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),GamblingManager.timeAwardHandler.GetTimeAwardInfoEvent.addListener(this.setTimeAwardInfo,this),GamblingManager.timeAwardHandler.getTimeAwardEvent.addListener(this.setTimeAward,this),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getTimeAward,this),GamblingManager.timeAwardHandler.BringTimeAwardEvent.addListener(this.setTimeAwardCanBring,this),GamblingManager.timeAwardHandler.TimeAwardCountDownEvent.addListener(this.refreshTime,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),GamblingManager.timeAwardHandler.GetTimeAwardInfoEvent.removeListener(this.setTimeAwardInfo,this),GamblingManager.timeAwardHandler.getTimeAwardEvent.removeListener(this.setTimeAward,this),this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getTimeAward,this),GamblingManager.timeAwardHandler.BringTimeAwardEvent.removeListener(this.setTimeAwardCanBring,this),GamblingManager.timeAwardHandler.TimeAwardCountDownEvent.removeListener(this.refreshTime,this)},t.prototype.setTimeAwardInfo=function(){if(GamblingManager.timeAwardHandler.round!=TimeAwardDefined.GetInstance().dataList.length){GamblingManager.timeAwardHandler.time?(this.getBtn.enabled=!1,this.timeLabel.text="距离下次领奖时间"+qin.DateTimeUtil.countDownFormat(GamblingManager.timeAwardHandler.time,!1)):(this.getBtn.enabled=!0,this.timeLabel.text="距离下次领奖时间00:00");var e=GamblingManager.getPlayerInfo(UserManager.userInfo.roleId);if(e){var t=e.bankRoll;this.goldLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold+t)}else this.goldLabel.text=qin.MathUtil.formatNum(UserManager.userInfo.gold);if(void 0!=GamblingManager.timeAwardHandler.round){for(var n=void 0,i=0;i<this.awardList.numChildren;i++)i<GamblingManager.timeAwardHandler.round&&(n=this.awardList.getChildAt(i),n.flagImg.visible=!0,n.numLabel.textColor=16435794);var a=PlayingFieldManager.getPatternName(this.pattern);if(a){var o=GamblingManager.timeAwardHandler.round+1;this.desLabel.text="您正在进行"+a+"第"+o+"轮"}}}else{this.getBtn.enabled=!1,this.timeLabel.text="距离下次领奖时间00:00";var r=PlayingFieldManager.getPatternName(this.pattern);r&&(this.desLabel.text="您已领取"+r+"全部计时奖励");for(var n=void 0,i=0;i<this.awardList.numChildren;i++)i<GamblingManager.timeAwardHandler.round&&(n=this.awardList.getChildAt(i),n.flagImg.visible=!0,n.numLabel.textColor=16435794)}},t.prototype.setTimeAward=function(){this.awardList.dataProvider=new eui.ArrayCollection(GamblingManager.timeAwardHandler.timeAwardList)},t.prototype.getTimeAward=function(e){SoundManager.playButtonEffect(e.target),PropertyManager.OpenGet(),GamblingManager.timeAwardHandler.reqGetTimeAward(this.pattern)},t.prototype.setTimeAwardCanBring=function(){this.getBtn.enabled=!0},t.prototype.refreshTime=function(){this.timeLabel.text="距离下次领奖时间"+qin.DateTimeUtil.countDownFormat(GamblingManager.timeAwardHandler.time,!1)},t}(BasePanel);__reflect(TimeAwardPanel.prototype,"TimeAwardPanel");var UserAngreementPanel=function(e){function t(){var t=e.call(this)||this;return t._showIndex=0,t._speed=50,t.setSkinName(UIModuleName.UserAngreementPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.isMaskClickClose=!0,this.maskAlpha=.5,this._txtScroller=new eui.Scroller,this._txtScroller.width=600,this._txtScroller.height=600,this._txtScroller.viewport=this.txtGroup,this._txtScroller.x=34,this._txtScroller.y=130,this.tweenGroup.addChild(this._txtScroller)},t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this._txtScroller.stopAnimation(),this.agreeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.agreeBtnClickHandler,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),0==this.isOver&&(this.infoTxt.text=qin.StringConstants.Empty,this._showIndex=0),egret.clearInterval(this._timeId),this.agreeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.agreeBtnClickHandler,this)},t.prototype.tryClearInterval=function(){this._angreeText&&this.isOver&&egret.clearInterval(this._timeId)},Object.defineProperty(t.prototype,"isOver",{get:function(){var e;return this._angreeText&&(e=this._angreeText.length),this._showIndex*this._speed+this._speed>=e},enumerable:!0,configurable:!0}),t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),UIUtil.hideScrollerBar(this._txtScroller),this._txtScroller.viewport.scrollV=0,UIUtil.hideScrollerBar(this._txtScroller,!0),(!this._angreeText||this._angreeText&&0==this.isOver)&&(UIManager.showPanel(UIModuleName.LoadingPanel),RES.getResByUrl(ProjectDefined.GetInstance().userAgreementUrl+"?"+Date.now().toString()+Math.random().toString(),this.setUserAgreeInfo,this,RES.ResourceItem.TYPE_TEXT))},t.prototype.setUserAgreeInfo=function(e){var t=this;if(UIManager.closePanel(UIModuleName.LoadingPanel),e){var n=/\\n/g;this._angreeText=e.replace(n,"\n"),this._angreeText&&0==this.isOver&&(this._timeId=egret.setInterval(function(){t.infoTxt.text+=t._angreeText.substr(t._showIndex*t._speed,t._speed),t.tryClearInterval(),t._showIndex++},this,500))}},t.prototype.agreeBtnClickHandler=function(t){GameSetting.IsAgreeUserAgreement=!0,UIManager.dispatchEvent(UIModuleName.UserAngreementPanel,UIModuleEvent.CHANGE),e.prototype.onCloseBtnClickHandler.call(this,t)},t}(BasePanel);__reflect(UserAngreementPanel.prototype,"UserAngreementPanel");var UserInfoPanel=function(e){function t(){var t=e.call(this)||this;return t._maxchar=35,t.situationIndex=1,t.achieveIndex=2,t.setSkinName(UIModuleName.UserInfoPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0;var n=new Array;n.push(this.dataGroup),n.push(this.situationGroup),n.push(this.achievementGroup),this.userInfoTab.build(TabComponent.CreatData(["资料","概况","成就"],n,TabButtonType.SmallOf3)),UIUtil.listRenderer(this.achieveList,this.achieveScroller,AchievementItemRenderer,ScrollViewDirection.Vertical_T_D,eui.ScrollPolicy.ON,null,!0),this.userInfoTab.isTween=!1,VersionManager.setComponentVisibleBySafe(this.myVipBtn,this.vipGroup,this.myPrizeBtn)},t.prototype.init=function(t){e.prototype.init.call(this,t),this.userInfoTab.init(0),t?this.friendInfoType=t.type:this.friendInfoType=void 0},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t);var n=UserManager.otherUserInfo;if(null==n||n.roleId==UserManager.userInfo.roleId)null==n?this.userinfo=UserManager.userInfo:this.userinfo=UserManager.otherUserInfo,this.showFriendUI(this.myInfoBtnGroup),this.setInfo(this.userinfo),this.changeNameBtn.visible=!0,this.userHeadComp.touchEnabled=!0,this.userDesLabel.touchEnabled=!0,this.changeInfoBg.visible=!0,this.changeInfoLabel.visible=!0;else{if(this.friendInfoType)switch(this.friendInfoType){case FriendInfoType.Receive:this.showFriendUI(this.receiveOtherBtnGroup);break;case FriendInfoType.Send:this.showFriendUI(this.sendOtherInfoBtnGroup)}else this.showFriendUI(this.friendInfoBtnGroup);this.userinfo=UserManager.otherUserInfo,this.setInfo(this.userinfo),this.changeNameBtn.visible=!1,this.userHeadComp.touchEnabled=!1,this.userDesLabel.touchEnabled=!1,this.changeInfoBg.visible=!1,this.changeInfoLabel.visible=!1}},t.prototype.setInfo=function(e){this.diamondNumLabel.text=qin.MathUtil.numAddSpace(e.diamond),this.goldNumLabel.text=qin.MathUtil.numAddSpace(e.gold),this.refreshUserInfo(e),this.refreshOtherVipInfo(e),this.userIdLabel.text=e.roleId.toString(),this.levelLabel.text=e.level.toString(),this.titleLabel.text=UserUtil.getTitle(e.level),this.levelProgressImg.width=340,this.levelProgressImg.width*=qin.MathUtil.clamp(UserUtil.getPercentage(e.level,e.exp),0,1),this.setStateLabel(e)},t.prototype.setStateLabel=function(e){switch(e.userState){case UserState.Offline:this.stateLabel.text="当前玩家不在线";break;case UserState.InGamehall:this.stateLabel.text="正在游戏大厅";break;case UserState.InGame:var t=RoomDefined.GetInstance().getDefinition(e.stateRoomId);if(t){var n=PlayingFieldManager.getPatternName(t.type);this.stateLabel.text=qin.StringUtil.format("在{0}：{1}，{2}买入",n,PlayingFieldManager.roomIdAddZero(e.stateId),qin.MathUtil.formatNum(t.sBuyin))}break;case UserState.InMatch:var i=ChampionshipDefined.GetInstance().getDefinition(e.stateMatchId);i&&(this.stateLabel.text=qin.StringUtil.format("{0}中",i.name))}},t.prototype.setSituation=function(e){if(this.joinTimeLabel.text=qin.DateTimeUtil.formatDate(new Date(1e3*e.createdTime),qin.DateTimeUtil.Format_Standard_Date),this.maxGoldLabel.text=qin.MathUtil.numAddSpace(e.maxGold),this.maxGoldOnetimeLabel.text=qin.MathUtil.numAddSpace(e.maxGoldOnetimes),this.frindNumLabel.text=e.friendNum.toString(),this.winTimeLabel.text=e.winTimes.toString()+"/"+e.gameTimes.toString(),this.winProbabilityLabel.text=Math.round(0==e.gameTimes?0:e.winTimes/e.gameTimes*100).toString()+"%",this.maxHandLabel.text=e.maxHandName,this.championTimesLabel.text=e.championTimes.toString(),!this.maxHandList){this.maxHandList=new Array;for(var t=0;t<this.maxHandGroup.numChildren;t++){var n=this.maxHandGroup.getChildAt(t);this.maxHandList.push(n)}this.maxHandList.reverse()}for(var i=0,a=this.maxHandList;i<a.length;i++){var o=a[i];o.visible=!1}var r=e.maxHandList;if(r)for(var t=0;t<r.length;t++)if(t<this.maxHandList.length){var n=this.maxHandList[t];n.visible=!0,n.init(r[t]),n.initElementsShow2()}},t.prototype.refreshUserInfo=function(e){switch(this.userNameLabel.text=e.name,this.userHeadComp.init(e,120),e.sex){case Sex.Female:this.sexImg.source=SheetSubName.FemaleImg;break;case Sex.Male:this.sexImg.source=SheetSubName.MaleImg;break;case Sex.Unknown:this.sexImg.source=SheetSubName.SecretImg}this.ageLabel.text=e.age.toString(),this.userDesLabel.text=e.sign},t.prototype.refreshMyInfo=function(){this.refreshUserInfo(UserManager.userInfo)},t.prototype.refreshVipInfo=function(){this.refreshOtherVipInfo(UserManager.userInfo)},t.prototype.refreshOtherVipInfo=function(e){VipManager.isVip(e)?(this.vipGroup.visible=!0,this.vipLevelLabel.text="VIP "+e.vipLevel):this.vipGroup.visible=!1},t.prototype.refreshAchieveInfo=function(e){UIUtil.writeListInfo(this.achieveList,AchievementManager.getAchieveListByTag(this.userinfo,AchieveTag.Achievement),"id")},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),VipManager.vipUpgradeEvent.addListener(this.refreshVipInfo,this),UserManager.onSetUserInfoComplete.addListener(this.refreshMyInfo,this),UserManager.onCreateRoleEvent.addListener(this.refreshMyInfo,this),UserManager.headImageUpdateEvent.addListener(this.refreshMyInfo,this),this.userInfoTab.tabChangeEvent.addListener(this.onBarItemTap,this),this.userDesLabel.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onChangeSign,this),this.requestBtn.enabled=!0},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),VipManager.vipUpgradeEvent.removeListener(this.refreshVipInfo,this),UserManager.onSetUserInfoComplete.removeListener(this.refreshMyInfo,this),UserManager.onCreateRoleEvent.removeListener(this.refreshMyInfo,this),UserManager.headImageUpdateEvent.removeListener(this.refreshMyInfo,this),this.userInfoTab.tabChangeEvent.removeListener(this.onBarItemTap,this),this.userDesLabel.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onChangeSign,this),UserManager.otherUserInfo=null},t.prototype.clickHandler=function(e){switch(e.target){case this.changeNameBtn:SoundManager.playButtonEffect(e.target),UIManager.showPanel(UIModuleName.ChangeUserNamePanel);break;case this.myPrizeBtn:SoundManager.playButtonEffect(e.target),UIManager.showPanel(UIModuleName.PrizePanel);break;case this.myVipBtn:SoundManager.playButtonEffect(e.target),UIManager.showPanel(UIModuleName.VipPanel);break;case this.userHeadComp:SoundManager.playButtonEffect(e.target),UIManager.showPanel(UIModuleName.EditUserInfoPanel);break;case this.deleteFriendBtn:SoundManager.playButtonEffect(e.target),AlertManager.showConfirm("确定删除此好友？",this.sendDelFriendRequest);break;case this.requestBtn:SoundManager.playButtonEffect(e.target),UserManager.otherUserInfo&&FriendManager.reqAddPlayer(UserManager.otherUserInfo.roleId),this.requestBtn.enabled=!1;break;case this.refuseBtn:SoundManager.playButtonEffect(e.target),UserManager.otherUserInfo&&FriendManager.reqReceiveFriendRequest(UserManager.otherUserInfo.roleId,ReceiveType.NotREceive);break;case this.acceptBtn:SoundManager.playButtonEffect(e.target),UserManager.otherUserInfo&&FriendManager.reqReceiveFriendRequest(UserManager.otherUserInfo.roleId,ReceiveType.Receive);break;case this.closeButton:SoundManager.playButtonEffect(e.target),this.userinfo.roleId==UserManager.userInfo.roleId&&this.reqSaveSign()}},t.prototype.sendDelFriendRequest=function(){UserManager.otherUserInfo&&FriendManager.reqRemovePlayer(UserManager.otherUserInfo.roleId)},t.prototype.onChangeSign=function(e){this.userDesLabel.text&&(this.userDesLabel.text=UserUtil.replaceForbidden(this.userDesLabel.text))},t.prototype.reqSaveSign=function(){var e;this.userDesLabel.text!=UserManager.userInfo.sign&&(e=this.userDesLabel.text),UserManager.reqSetUserInfo(e,null,null)},t.prototype.showFriendUI=function(e){this.myInfoBtnGroup.visible=!1,this.friendInfoBtnGroup.visible=!1,this.receiveOtherBtnGroup.visible=!1,this.sendOtherInfoBtnGroup.visible=!1,e.visible=!0},t.prototype.onBarItemTap=function(e){switch(e){case this.achieveIndex:this.refreshAchieveInfo(this.userinfo);break;case this.situationIndex:this.setSituation(this.userinfo)}},t}(BasePanel);__reflect(UserInfoPanel.prototype,"UserInfoPanel");var VipPanel=function(e){function t(){var t=e.call(this)||this;return t.setSkinName(UIModuleName.VipPanel),t}return __extends(t,e),t.prototype.onAwake=function(t){e.prototype.onAwake.call(this,t),this.maskAlpha=0;var n=new Array(this.myVipGroup,this.vipIntroduceGroup);this.tab.build(TabComponent.CreatData(["我的VIP","VIP介绍"],n,TabButtonType.SmallOf2)),this.tab.isTween=!1,this.vipIntroduceScroller.viewport=this.imgGroup},t.prototype.init=function(t){e.prototype.init.call(this,t),this.tab.init(0)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.userHeadComp.init(UserManager.userInfo),this.userNameLabel.text=UserManager.userInfo.name,this.refreshVipInfo()},t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),this.tab.tabChangeEvent.addListener(this.onBarItemTap,this),VipManager.vipUpgradeEvent.addListener(this.refreshVipInfo,this)},t.prototype.onDisable=function(t){e.prototype.onDisable.call(this,t),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),this.tab.tabChangeEvent.removeListener(this.onBarItemTap,this),VipManager.vipUpgradeEvent.removeListener(this.refreshVipInfo,this)},t.prototype.refreshVipInfo=function(){switch(this.vipLevelLabel.text="VIP"+UserManager.userInfo.vipLevel.toString(),UserManager.userInfo.vipType){case VipType.NoVip:this.yearVipImg.visible=!1,this.buyYearVip.visible=!0,this.buyVipButton.label="开通会员",this.vipTimeLabel.visible=!1;break;case VipType.Vip:this.yearVipImg.visible=!1,this.buyYearVip.visible=!0,this.buyVipButton.label="续费会员",this.vipTimeLabel.visible=!0,this.vipTimeLabel.text=qin.DateTimeUtil.formatDate(new Date(1e3*VipManager.GetVipTime()),qin.DateTimeUtil.Format_Standard_Date);break;case VipType.YearVip:this.yearVipImg.visible=!0,this.buyYearVip.visible=!1,this.buyVipButton.label="续费会员",this.vipTimeLabel.visible=!0,this.vipTimeLabel.text=qin.DateTimeUtil.formatDate(new Date(1e3*VipManager.GetVipTime()),qin.DateTimeUtil.Format_Standard_Date)}this.vipProgressImg.width=560,this.vipProgressImg.width*=qin.MathUtil.clamp(parseFloat((UserManager.userInfo.vipExp/6e3).toFixed(2)),0,1),this.vipProgressLabel.text=UserManager.userInfo.vipExp.toString(),this.vipProgressLabel.x=this.vipProgressImg.width,this.processBg.x=this.vipProgressImg.width,this.vipExpLabel.text=UserManager.userInfo.vipExp.toString()+"点",this.currentVipLevel.text=UserManager.userInfo.vipLevel.toString(),this.vipSpeedLabel.text=UserManager.userInfo.vipSpeed+"点"},t.prototype.clickHandler=function(e){switch(SoundManager.playButtonEffect(e.target),e.target){case this.buyVipButton:case this.buyYearVip:JumpUtil.JumpToShopping(ShopGroupIndex.Vip,UIModuleName.VipPanel)}},t.prototype.onBarItemTap=function(e){1==e&&(this.vipBg.texture||UIUtil.loadBg(ResFixedFileName.vipBg,this.vipBg),this.vipIntroduceScroller.stopAnimation(),this.vipIntroduceScroller.viewport.scrollV=0)},t}(BasePanel);__reflect(VipPanel.prototype,"VipPanel");var SignInInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.trySetDefinition=function(){e.prototype.trySetDefinition.call(this),this._definition=SignInDefined.GetInstance().getSubDefinition(this._id,this._subId)},t}(BaseActivitySubInfo);__reflect(SignInInfo.prototype,"SignInInfo");var AudioRecordButton=function(){function e(e,t){this._recordButton=e,this._moveArea=t}return e.prototype.OnEnable=function(){this._recordButton.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRecordBtnBegin,this),this._recordButton.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndRecording,this),this._recordButton.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndRecording,this),this._moveArea.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this._recordButton.addEventListener(egret.TouchEvent.LEAVE_STAGE,this.onCancelRecording,this),GameManager.stage.addEventListener(egret.Event.DEACTIVATE,this.onCancelRecording,this),ChannelManager.OnApplicationFocus.addListener(this.OnApplicationFocus,this)},e.prototype.OnDisable=function(){this._recordButton.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRecordBtnBegin,this),this._recordButton.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndRecording,this),this._recordButton.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndRecording,this),this._recordButton.removeEventListener(egret.TouchEvent.LEAVE_STAGE,this.onCancelRecording,this),GameManager.stage.removeEventListener(egret.Event.DEACTIVATE,this.onCancelRecording,this),this._moveArea.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),ChannelManager.OnApplicationFocus.removeListener(this.OnApplicationFocus,this),RecordAudioManager.RestoreMusicSetting()},e.prototype.OnApplicationFocus=function(e){0==e&&this.cancelOrStopRecording(!0)},e.prototype.setRecordBtnShow=function(e){this._recordButton.visible=e},e.prototype.onMove=function(e){this._isRecordAudio&&e.stageY<this._recordButton.localToGlobal().y&&!this._isCancel&&(this._isCancel=!0,UIManager.dispatchEvent(UIModuleName.AudioRecordingPanel,UIModuleEvent.CHANGE))},e.prototype.onRecordBtnBegin=function(e){return RecordAudioManager.IsStillHandling()?void UIManager.showFloatTips("上一条音频数据上传中"):void(this._moveArea.moveTouchEnd(e)||(GamblingManager.isInSeat?(SoundManager.playEffect(MusicAction.buttonClick),this._isCancel=!1,this._isRecordAudio=!0,ChannelManager.recordAudio(AudioRecordActions.StartRecord),this.StopRecordLater(),UIManager.showPanel(UIModuleName.AudioRecordingPanel)):(AlertManager.showAlert("只有入座后才可发送语音!"),this._isCancel=!1,this._isRecordAudio=!1)))},e.prototype.StopRecordLater=function(){egret.clearTimeout(this._recordTimer),this._recordTimer=egret.setTimeout(this.cancelOrStopRecording,this,ProjectDefined.GetInstance().getValue(ProjectDefined.chatMaxRecordTime),!1)},e.prototype.onEndRecording=function(e){this.cancelOrStopRecording(this._isCancel)},e.prototype.onCancelRecording=function(e){this.cancelOrStopRecording(!0)},e.prototype.cancelOrStopRecording=function(e){egret.clearTimeout(this._recordTimer),this._isRecordAudio&&(this._isRecordAudio=!1,UIManager.closePanel(UIModuleName.AudioRecordingPanel),e?(ChannelManager.recordAudio(AudioRecordActions.CancelRecord),qin.Console.log("取消录音")):(SoundManager.playEffect(MusicAction.buttonClick),ChannelManager.recordAudio(AudioRecordActions.StopRecord),qin.Console.log("停止录音")))},e.prototype.SetGray=function(e){this._recordButton.touchEnabled=!e},e}();__reflect(AudioRecordButton.prototype,"AudioRecordButton");var FlushProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfCardType(this,CardType.Flush)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(FlushProcess.prototype,"FlushProcess");var ChampionshipNewsLogic=function(){function e(e){this._blindAddVc=void 0,this._alertTop=void 0,this._target=e}return e.prototype.initialize=function(){this._isShow=void 0;var e=this._target.panelState,t=e.getCompoent(GamblingChampionshipBlindComponent);e.getCompoent(GamblingChampionshipComponent);void 0==this._blindAddVc&&(this._blindAddVc=t.blindAddAlertGroup.verticalCenter),egret.Tween.removeTweens(t.championshipAlertGroup),egret.Tween.removeTweens(t.blindAddAlertGroup),t.blindAddAlertGroup.parent&&t.blindAddAlertGroup.parent.removeChild(t.blindAddAlertGroup),t.championshipAlertGroup.touchEnabled=!1,t.championshipAlertGroup.touchChildren=!1,t.championshipAlertGroup.visible=!1,this.clearAllAlert()},e.prototype.showTween=function(e){var t=this._target.panelState,n=(t.getCompoent(GamblingChampionshipComponent),t.getCompoent(GamblingChampionshipBlindComponent));egret.Tween.removeTweens(n.championshipAlertGroup),n.championshipAlertGroup.visible=!1,this._isShow=!0,n.championshipAlertLabel.text=e,n.championshipAlertGroup.visible=!0,void 0==this._alertTop&&(this._alertTop=n.championshipAlertGroup.top);var i=this._alertTop-n.championshipAlertGroup.height;n.championshipAlertGroup.top=i,egret.Tween.removeTweens(n.championshipAlertGroup);var a=egret.Tween.get(n.championshipAlertGroup);a.to({top:this._alertTop},400).wait(4e3).to({top:i},400).call(this.onMyTweenOver,this),a.play()},e.prototype.onDisable=function(){var e=this._target.panelState,t=e.getCompoent(GamblingChampionshipBlindComponent);e.getCompoent(GamblingChampionshipComponent);egret.Tween.removeTweens(t.championshipAlertGroup),egret.Tween.removeTweens(t.blindAddAlertGroup),this.clearAllAlert()},e.prototype.onMyTweenOver=function(){this._isShow=!1;var e=this.checkShow();if(e)this.showTween(e);else{var t=this._target.panelState,n=t.getCompoent(GamblingChampionshipBlindComponent);n.championshipAlertGroup.visible=!1}},e.prototype.clearAllAlert=function(e){if(void 0===e&&(e=!0),qin.ArrayUtil.Clear(this._alertList),e){var t=this._target.panelState,n=t.getCompoent(GamblingChampionshipBlindComponent);t.getCompoent(GamblingChampionshipComponent);n.championshipAlertGroup.visible=!1,egret.Tween.removeTweens(n.championshipAlertGroup),egret.Tween.removeTweens(n.blindAddAlertGroup)}},e.prototype.showAlert=function(e,t){if(void 0===t&&(t=void 0),e)if(this._isShow)this._alertList||(this._alertList=new Array),this._alertList.push(e),this._alertList.sort(this.sortAlert);else{var n=this.getNewsText(e);if(!n)return;this.showTween(n)}},e.prototype.checkShow=function(){if(this._alertList)for(var e=this._alertList.length,t=0;e>t;t++){if(this._alertList.length<=0)return null;var n=this._alertList[0];this._alertList.splice(0,1);var i=this.getNewsText(n);if(i)return i}return null},e.prototype.getNewsText=function(e){switch(e){case ChampionshipRoomUIAlertType.InAward:return"恭喜您进入奖励圈";case ChampionshipRoomUIAlertType.InFinals:return"恭喜您进入比赛最终桌,继续加油哦";case ChampionshipRoomUIAlertType.NumTimeing:if(GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.leftJoin){var t=Math.round((TimeManager.GetServerUtcTimestamp()-GamblingManager.matchRoomInfo.startTime)/60);return qin.StringUtil.format("比赛进行{0}分钟,剩余比赛人数:{1}",t,GamblingManager.matchRoomInfo.leftJoin)}case ChampionshipRoomUIAlertType.ChangeRoom:return"为了公平起见,已为您重新配桌"}return null},e.prototype.sortAlert=function(e,t){return e>t?1:t>e?-1:0},e.prototype.showAddBlind=function(e){var t=this._target.panelState,n=t.getCompoent(GamblingChampionshipBlindComponent);n.blindAddLabel.text=e,egret.Tween.removeTweens(n.blindAddAlertGroup);var i=egret.Tween.get(n.blindAddAlertGroup);n.blindAddAlertGroup.verticalCenter=this._blindAddVc,n.blindAddAlertGroup.alpha=1,n.blindAddAlertImage.width=n.blindAddLabel.width+30,n.addChild(n.blindAddAlertGroup),i.wait(1700).to({verticalCenter:this._blindAddVc-70,alpha:0},1300).call(function(){n.blindAddAlertGroup.parent&&n.blindAddAlertGroup.parent.removeChild(n.blindAddAlertGroup)})},e}();__reflect(ChampionshipNewsLogic.prototype,"ChampionshipNewsLogic");var ChampionshipSupport=function(e){function t(t){var n=e.call(this,t)||this;return n._newsLogic=new ChampionshipNewsLogic(t),n}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this._newsLogic.initialize(),this._roundOverData=void 0;var t=this.target.panelState,n=t.getCompoent(GamblingChampionshipComponent);if(n.addonButton.visible=!1,n.rebuyButton.visible=!1,this._intervalMinTime=ProjectDefined.GetInstance().mTTIntervalTime/2,this._numTime=void 0,this._endTime=void 0,qin.Tick.RemoveTimeoutInvoke(this.delaySignOver,this),GamblingManager.matchRoomInfo&&(GamblingManager.roomInfo&&(this.showAddTime(),this.onRebuyORAddonEvent(),this.showInfo(),this.showBlind()),GamblingManager.matchRoomInfo.definition)){var i=GamblingManager.matchRoomInfo.startTime+GamblingManager.matchRoomInfo.definition.delaySign-TimeManager.GetServerUtcTimestamp();i>0&&qin.Tick.AddTimeoutInvoke(this.delaySignOver,1e3*i,this),n.mttNameLabel.text=GamblingManager.matchRoomInfo.definition.name}this.checkFixedTimeAlert()},t.prototype.checkFixedTimeAlert=function(){if(qin.Tick.RemoveTimeoutInvoke(this.fixedTimeAlert,this),GamblingManager.matchRoomInfo){var e=TimeManager.GetServerUtcTimestamp()-GamblingManager.matchRoomInfo.startTime;if(e>=0){var t=ProjectDefined.GetInstance().mTTIntervalTime-e%ProjectDefined.GetInstance().mTTIntervalTime;1>t&&(t=1),qin.Tick.AddTimeoutInvoke(this.fixedTimeAlert,1e3*t,this)}}},t.prototype.fixedTimeAlert=function(){GamblingManager.matchRoomInfo&&(this.checkFixedTimeAlert(),GamblingManager.matchRoomInfo.leftJoin&&(!this._numTime||TimeManager.GetServerUtcTimestamp()-this._numTime>this._intervalMinTime)&&(this._numTime=TimeManager.GetServerUtcTimestamp(),this._newsLogic.showAlert(ChampionshipRoomUIAlertType.NumTimeing)))},t.prototype.showInfo=function(){var e=this.target.panelState,t=e.getCompoent(GamblingChampionshipComponent);GamblingManager.matchRoomInfo.rank&&GamblingManager.matchRoomInfo.leftJoin?t.rankLabel.text=GamblingManager.matchRoomInfo.rank.toString()+"/"+GamblingManager.matchRoomInfo.leftJoin.toString():t.rankLabel.text="--/--",GamblingManager.matchRoomInfo.avgChips?t.avgChipsLabel.text="均码:"+qin.MathUtil.formatNum(GamblingManager.matchRoomInfo.avgChips):t.avgChipsLabel.text="均码:---"},t.prototype.showBlind=function(){if(qin.Tick.RemoveSecondsInvoke(this.refreshTime,this),-1!=GamblingManager.roomInfo.blindTime){var e=GamblingManager.roomInfo.blindTime-TimeManager.GetServerUtcTimestamp();e>0&&qin.Tick.AddSecondsInvoke(this.refreshTime,this)}},t.prototype.showAddTime=function(){if(GamblingManager.roomInfo){var e=this.target.panelState,t=e.getCompoent(GamblingChampionshipComponent);if(-1==GamblingManager.roomInfo.blindTime)t.blindAddNameLabel.text="已达到最大盲注",t.blindAddTimeLabel.text="";else{var n=GamblingManager.roomInfo.blindTime-TimeManager.GetServerUtcTimestamp();0>n&&(n=0),t.blindAddNameLabel.text="下次涨盲:",t.blindAddTimeLabel.text=qin.DateTimeUtil.countDownFormat(Math.floor(n),!1)}}},t.prototype.refreshTime=function(){this.showAddTime()
},t.prototype.onRoundOverEvent=function(e){this._roundOverData=e,GamblingUtil.isMtt&&(this._endTime=GamblingManager.roomInfo.endTime)},t.prototype.checkRebuyAddon=function(){if(GamblingUtil.isMtt){var e=GamblingManager.getPlayerInfo(UserManager.userInfo.roleId);e&&this._roundOverData&&this._roundOverData.initbankRoll&&(e.bankRoll<=0||!e.bankRoll)&&(!GamblingManager.roomInfo.addbuy||GamblingManager.roomInfo.addbuy<=0)&&this.checkRoundOver()}},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),GamblingManager.BlindChangeEvent.addListener(this.blindChangeEvent,this),GamblingManager.ChipsChangeEvent.addListener(this.onChipsChangeEvent,this),GamblingManager.RebuyORAddonEvent.addListener(this.onRebuyORAddonEvent,this),GamblingManager.RoundOverEvent.addListener(this.onRoundOverEvent,this),ChampionshipManager.OnMTTRankPushEvent.addListener(this.onMTTRankPushEvent,this),ChampionshipManager.OnMTTOverPushEvent.addListener(this.onMTTOverPushEvent,this);var t=this.target.panelState,n=t.getCompoent(GamblingChampionshipComponent);n.rebuyButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRebuyChips,this),n.addonButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddonChips,this),n.championshipInfoBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChampionshipInfo,this)},t.prototype.onChampionshipInfo=function(){SoundManager.playEffect(MusicAction.buttonClick),GamblingManager.matchRoomInfo&&UIManager.showPanel(UIModuleName.ChampionshipInfoPanel,{championshipInfo:GamblingManager.matchRoomInfo,isInRoom:!0})},t.prototype.onMTTOverPushEvent=function(e){if(GamblingManager.matchRoomInfo&&e.recordId==GamblingManager.matchRoomInfo.recordId){UIManager.closePanel(UIModuleName.ChampionshipBuyChipsPanel),UIManager.closePanel(UIModuleName.ChatPanel);var t=this.target.panelState,n=t.getCompoent(GamblingChampionshipComponent);n.rebuyButton.visible=!1,n.addonButton.visible=!1,this._newsLogic.clearAllAlert(!1),this.onDisable()}},t.prototype.onGetRoomInfoHandler=function(){if(GamblingManager.OnGetRoomInfoEvent.removeListener(this.onGetRoomInfoHandler,this),this.target.switchToGameSceneInRoom(),InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.leftJoin<=GamblingManager.roomInfo.definition.seat&&GamblingManager.matchRoomInfo.definition){var e=GamblingManager.matchRoomInfo.startTime+GamblingManager.matchRoomInfo.definition.delaySign-TimeManager.GetServerUtcTimestamp();if(0>=e)return}this._newsLogic.showAlert(ChampionshipRoomUIAlertType.ChangeRoom)},t.prototype.onRebuyORAddonEvent=function(){var e=this.target.panelState,t=e.getCompoent(GamblingChampionshipComponent);t.addonButton.visible=!1,t.rebuyButton.visible=!1,GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Rebuy,!1)?t.rebuyButton.visible=!0:GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Addon,!1)&&(t.addonButton.visible=!0)},t.prototype.checkRoundOver=function(){if(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.gamblingType==GamblingType.Championship){var e=GamblingManager.getPlayerInfo(UserManager.userInfo.roleId);e&&(e.bankRoll<=0||!e.bankRoll)&&(!GamblingManager.roomInfo.addbuy||GamblingManager.roomInfo.addbuy<=0)&&(GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Rebuy,!1)?UIManager.showPanel(UIModuleName.ChampionshipBuyChipsPanel,{isRebuy:!0,isOver:!0,endTime:this._endTime}):GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Addon,!1)&&UIManager.showPanel(UIModuleName.ChampionshipBuyChipsPanel,{isRebuy:!1,isOver:!0,endTime:this._endTime}))}},t.prototype.onChipsChangeEvent=function(e){InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.gamblingType==GamblingType.Championship&&e&&e.roleId==UserManager.userInfo.roleId&&this.onRebuyORAddonEvent()},t.prototype.onRebuyChips=function(e){SoundManager.playEffect(MusicAction.buttonClick),GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Rebuy,!0)&&UIManager.showPanel(UIModuleName.ChampionshipBuyChipsPanel,{isRebuy:!0})},t.prototype.onAddonChips=function(e){SoundManager.playEffect(MusicAction.buttonClick),GamblingManager.championshipHandler.isCanAddChips(ChampionshipBuyType.Addon,!0)&&UIManager.showPanel(UIModuleName.ChampionshipBuyChipsPanel,{isRebuy:!1})},t.prototype.onMTTRankPushEvent=function(e){if(GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.recordId==e.recordId&&GamblingManager.matchRoomInfo.definition){this.showInfo();var t=GamblingManager.matchRoomInfo.startTime+GamblingManager.matchRoomInfo.definition.delaySign-TimeManager.GetServerUtcTimestamp();0>=t&&(GamblingManager.matchRoomInfo.leftJoin<=GamblingManager.matchRoomInfo.maxAwardRank&&e.leftJoin>GamblingManager.matchRoomInfo.maxAwardRank&&(this._newsLogic.showAlert(ChampionshipRoomUIAlertType.InAward),qin.Tick.RemoveTimeoutInvoke(this.delaySignOver,this)),InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.matchRoomInfo.leftJoin<=GamblingManager.roomInfo.definition.seat&&e.leftJoin>GamblingManager.roomInfo.definition.seat&&(this._newsLogic.showAlert(ChampionshipRoomUIAlertType.InFinals),qin.Tick.RemoveTimeoutInvoke(this.delaySignOver,this)))}},t.prototype.delaySignOver=function(){if(qin.Tick.RemoveTimeoutInvoke(this.delaySignOver,this),GamblingManager.matchRoomInfo&&GamblingManager.matchRoomInfo.definition){var e=GamblingManager.matchRoomInfo.startTime+GamblingManager.matchRoomInfo.definition.delaySign-TimeManager.GetServerUtcTimestamp();0>=e?(GamblingManager.matchRoomInfo.leftJoin<=GamblingManager.matchRoomInfo.maxAwardRank&&this._newsLogic.showAlert(ChampionshipRoomUIAlertType.InAward),InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.matchRoomInfo.leftJoin<=GamblingManager.roomInfo.definition.seat&&this._newsLogic.showAlert(ChampionshipRoomUIAlertType.InFinals)):(.1>e&&(e=.1),qin.Tick.AddTimeoutInvoke(this.delaySignOver,1e3*e,this))}},t.prototype.blindChangeEvent=function(e){if(e&&e.isAddLevel&&GamblingManager.matchRoomInfo&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.gamblingType==GamblingType.Championship){if(this.onRebuyORAddonEvent(),GamblingManager.matchRoomInfo.definition){var t=ChampionshipBlindDefined.GetInstance().getBlindInfoByLevel(GamblingManager.roomInfo.blindLevel,GamblingManager.matchRoomInfo.definition.blindType);if(t){var n="下局盲注将增长至:"+qin.MathUtil.formatNum(t.sBlind)+"/"+qin.MathUtil.formatNum(t.bBlind);t.preBet&&(n+=",前注:"+qin.MathUtil.formatNum(t.preBet)),this._newsLogic.showAddBlind(n)}}this.showBlind()}},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),GamblingManager.BlindChangeEvent.removeListener(this.blindChangeEvent,this),GamblingManager.ChipsChangeEvent.removeListener(this.onChipsChangeEvent,this),GamblingManager.RebuyORAddonEvent.removeListener(this.onRebuyORAddonEvent,this),GamblingManager.RoundOverEvent.removeListener(this.onRoundOverEvent,this),GamblingManager.OnGetRoomInfoEvent.removeListener(this.onGetRoomInfoHandler,this),ChampionshipManager.OnMTTRankPushEvent.removeListener(this.onMTTRankPushEvent,this),ChampionshipManager.OnMTTOverPushEvent.removeListener(this.onMTTOverPushEvent,this),qin.Tick.RemoveSecondsInvoke(this.refreshTime,this),qin.Tick.RemoveTimeoutInvoke(this.delaySignOver,this);var t=this.target.panelState,n=t.getCompoent(GamblingChampionshipComponent);n.rebuyButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRebuyChips,this),n.addonButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddonChips,this),n.championshipInfoBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChampionshipInfo,this),this._newsLogic.onDisable()},t}(BaseGamblingPanelSupport);__reflect(ChampionshipSupport.prototype,"ChampionshipSupport");var ChampionshipWaitSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this._info=void 0},t.prototype.setWaitInfo=function(e){this._info=e;var t=this.target.panelState,n=t.getCompoent(GamblingChampionshipWaitComponent);n.waitNameLabel.text=UserManager.userInfo.name,n.waitHeadIcon.init(UserManager.userInfo,90),qin.Tick.RemoveSecondsInvoke(this.refreshTime,this),this._info&&(ChampionshipManager.OnCancelMTTPushEvent.removeListener(this.onCancelMTTPushEvent,this),ChampionshipManager.OnCancelMTTPushEvent.addListener(this.onCancelMTTPushEvent,this),this._info.definition&&(n.waitChipsLabel.text=this._info.definition.initialChips.toString()),qin.Tick.AddSecondsInvoke(this.refreshTime,this),this.refreshTime(),ChampionshipManager.getMathInfoByRecordId(this._info.recordId)||this.onCancelMTTPushEvent(this._info),e.definition&&(n.mttNameLabel.text=e.definition.name))},t.prototype.refreshTime=function(){if(this._info){var e=this.target.panelState,t=e.getCompoent(GamblingChampionshipWaitComponent),n=this._info.startTime-TimeManager.GetServerUtcTimestamp();n>0?t.championshipWaitLabel.text=qin.DateTimeUtil.countDownFormat(Math.floor(n),!1):(t.championshipWaitLabel.text="00:00",this._info.roomId>0&&(qin.Tick.RemoveSecondsInvoke(this.refreshTime,this),this._timeId=egret.setTimeout(this.delayEnterRoom,this,600)))}},t.prototype.delayEnterRoom=function(){egret.clearTimeout(this._timeId),ChampionshipManager.enterMttHandler.enterMatch(this._info,qin.StringConstants.Empty),qin.Console.log("锦标赛开始进入房间refreshTime"+this._info.roomId)},t.prototype.onCancelMTTPushEvent=function(e){this._info&&e&&e.recordId==this._info.recordId&&(this.onDisable(),e.definition?AlertManager.showAlert("您报名的"+e.definition.name+"因为报名人数不足已经取消，您的所有报名费用/门票已经返还给您！",this.backHall):AlertManager.showAlert("您报名的比赛因为报名人数不足已经取消，您的所有报名费用/门票已经返还给您！",this.backHall))},t.prototype.backHall=function(){GamblingManager.reset(),SceneManager.switcScene(SceneType.Hall,{action:SceneSwitchAction.RepleacePanel,panel:UIModuleName.ChampionshipPanel})},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),ChampionshipManager.OnCancelMTTPushEvent.removeListener(this.onCancelMTTPushEvent,this),ChampionshipManager.OnCancelMTTPushEvent.addListener(this.onCancelMTTPushEvent,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),qin.Tick.RemoveSecondsInvoke(this.refreshTime,this),ChampionshipManager.OnCancelMTTPushEvent.removeListener(this.onCancelMTTPushEvent,this),egret.clearTimeout(this._timeId)},t}(BaseGamblingPanelSupport);__reflect(ChampionshipWaitSupport.prototype,"ChampionshipWaitSupport");var GamblingPanelActionSupport=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._excludePanel=[UIModuleName.GamblingPanel,UIModuleName.MarqueePanel,UIModuleName.AlertInfoPanel,UIModuleName.ChatPanel,UIModuleName.GuideChoosePanel,UIModuleName.GuideAnswerErrorPanel,UIModuleName.GuideQuestionPanel],t}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this._isBoardCardOver=!0,this._isTimeOut=!1,this.target.cancelTrusteeshipButton0.visible=this.target.cancelTrusteeshipButton.visible=!1,this.clearPanelState(),this.target.waitNextImg.visible=!1,GamblingManager.self&&(this.target.actionGroup.brightCardBtn.visible=!1,GamblingManager.self.state==PlayerState.WaitNext&&(this.target.waitNextImg.visible=!0),this.changeState(GamblingManager.self.state,!1),this.tryShowPreActionGroup(!1)),this.refreshStiDownState(),this.actionPosChangeHandler(),this._numContentInfo||(this._numContentInfo=new NumContentInfo),this._numContentInfo.gap=0,this._numContentInfo.limtiWidth=80,this._numContentInfo.setImgWidHei(10,15,5,13),this._numContentInfo.preFix=ResPrefixName.CountDown_Num;var t=GamblingManager.timeAwardHandler.time;void 0==t&&(t=0),this._numContentInfo.content=qin.DateTimeUtil.countDownFormat(t,!1),this.target.onlineAwardBtn.numComponent.init(this._numContentInfo)},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),GamblingManager.SitOrStandEvent.addListener(this.sitOrStandHandler,this),GamblingManager.PlayerStateChangeEvent.addListener(this.playerStateChangeHandler,this),GamblingManager.ActionPosChangeEvent.addListener(this.actionPosChangeHandler,this),GamblingManager.OneLoopOverEvent.addListener(this.boardCardChangeHandler,this),GamblingManager.RoundOverEvent.addListener(this.roundOverHandler,this),GamblingManager.timeAwardHandler.TimeAwardCountDownEvent.addListener(this.refreshTimeAwardTime,this),GamblingManager.timeAwardHandler.GetTimeAwardInfoEvent.addListener(this.setNextTimeAwardInfo,this),GamblingManager.InTrusteeshipEvent.addListener(this.onInTrusteeshipEvent,this),GamblingManager.ActionOverEvent.addListener(this.onActionOverEvent,this),GamblingManager.TimeOutEvent.addListener(this.actionTimeOut,this),GamblingManager.FlopCardOverEvent.addListener(this.flopCardOverHandler,this),UIManager.onPanelCloseEvent.addListener(this.onPanelCloseHandler,this),UIManager.onPanelOpenEvent.addListener(this.onPanelOpenHandler,this),this.target.cancelTrusteeshipButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelTrusteeship,this),GamblingManager.timeAwardHandler.TimeAwardInfoEvent.addListener(this.setTimeAwardTime,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),GamblingManager.SitOrStandEvent.removeListener(this.sitOrStandHandler,this),GamblingManager.PlayerStateChangeEvent.removeListener(this.playerStateChangeHandler,this),GamblingManager.ActionPosChangeEvent.removeListener(this.actionPosChangeHandler,this),GamblingManager.OneLoopOverEvent.removeListener(this.boardCardChangeHandler,this),GamblingManager.RoundOverEvent.removeListener(this.roundOverHandler,this),GamblingManager.timeAwardHandler.TimeAwardCountDownEvent.removeListener(this.refreshTimeAwardTime,this),GamblingManager.timeAwardHandler.GetTimeAwardInfoEvent.removeListener(this.setNextTimeAwardInfo,this),GamblingManager.InTrusteeshipEvent.removeListener(this.onInTrusteeshipEvent,this),GamblingManager.ActionOverEvent.removeListener(this.onActionOverEvent,this),GamblingManager.TimeOutEvent.removeListener(this.actionTimeOut,this),GamblingManager.FlopCardOverEvent.addListener(this.flopCardOverHandler,this),UIManager.onPanelCloseEvent.removeListener(this.onPanelCloseHandler,this),UIManager.onPanelOpenEvent.removeListener(this.onPanelOpenHandler,this),this.target.cancelTrusteeshipButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelTrusteeship,this),GamblingManager.timeAwardHandler.TimeAwardInfoEvent.removeListener(this.setTimeAwardTime,this)},t.prototype.setTimeAwardTime=function(){this._numContentInfo.content=qin.DateTimeUtil.countDownFormat(GamblingManager.timeAwardHandler.time,!1),this.target.onlineAwardBtn.numComponent.init(this._numContentInfo)},t.prototype.onCancelTrusteeship=function(e){GamblingManager.cancelTrusteeship()},t.prototype.onActionOverEvent=function(e){this.target.cancelTrusteeshipButton0.visible=this.target.cancelTrusteeshipButton.visible=!1,e==PlayerState.Trusteeship&&(this.tryShowAction(),this.tryShowFoldGroup())},t.prototype.onInTrusteeshipEvent=function(){InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.isTrusteeship&&(this.target.actionGroup.showActionGroup(!1),this.target.cancelTrusteeshipButton0.visible=this.target.cancelTrusteeshipButton.visible=!0)},t.prototype.playerStateChangeHandler=function(e){var t=GamblingManager.getPlayerInfo(e.roleId);if(t){var n=this.target.getHeadComponent(t.pos);if(n){(t.state==PlayerState.Blind||t.state==PlayerState.Call||t.state==PlayerState.Raise||t.state==PlayerState.AllIn)&&(t.state==PlayerState.AllIn?SoundManager.playEffect(MusicAction.bet_allin):t.state==PlayerState.Blind?SoundManager.playEffect(MusicAction.blind):SoundManager.playEffect(MusicAction.bet_no_allin)),t.state!=PlayerState.Fold&&t.state!=PlayerState.WaitNext&&t.state!=PlayerState.Check&&(t.state==PlayerState.WaitAction?GamblingManager.roomInfo.ante>0&&n.showChipsComponent(t.num,!0):n.showChipsComponent(t.num,!0)),n.changeState();var i=Sex.Unknown;t.userInfo&&(i=t.userInfo.sex),t.state==PlayerState.Fold?(GamblingPanelSetting.FoldPosPoint.x=this.target.foldPointImg.x,GamblingPanelSetting.FoldPosPoint.y=this.target.foldPointImg.y,n.runFoldAnim(GamblingPanelSetting.FoldPosPoint),SoundManager.playEffect(MusicAction.fold,i),SoundManager.playEffect(MusicAction.foldpai)):t.state==PlayerState.AllIn?SoundManager.playEffect(MusicAction.allin,i):t.state==PlayerState.Call?SoundManager.playEffect(MusicAction.call,i):t.state==PlayerState.Check?SoundManager.playEffect(MusicAction.check,i):t.state==PlayerState.Raise&&SoundManager.playEffect(MusicAction.raise,i)}}e.roleId==UserManager.userInfo.roleId&&(e.state==PlayerState.WaitNext?this.target.waitNextImg.visible=!0:this.target.waitNextImg.visible=!1,e.state==PlayerState.AllIn&&this.target.allinAnime.playAllinAnime(),this.changeState(GamblingManager.getPlayerStateByRoleId(e.roleId)))},t.prototype.setBoardCardOverFlag=function(e){this._isBoardCardOver=e.isBoardOver,this._isBoardCardOver&&!e.isRoundOver&&this.actionPosChangeHandler()},t.prototype.actionPosChangeHandler=function(){if(this._isBoardCardOver&&GamblingManager.roomInfo&&GamblingManager.roomInfo.isFlopCardOver){this.showPanelState();var e=this.target.getHeadComponent(GamblingManager.roomInfo.pos);e&&e.changeState(GamblingHeadStateType.OnAction,!0),GamblingManager.self&&GamblingManager.roomInfo.pos==GamblingManager.self.pos?(this._isTimeOut=!1,SoundManager.playEffect(MusicAction.on_turn),this.target.actionGroup.showPreActionGroup(!1),GamblingManager.isCheckOrFold?GamblingUtil.isCanCheck?GamblingManager.reqAction(PlayerState.Check):GamblingManager.reqAction(PlayerState.Fold):GamblingManager.isCallAny?GamblingManager.doDefaultAction():(GamblingManager.roomInfo.definition.pattern!=GamblingPattern.AllIn?(this.target.actionGroup.showActionGroup(!0),this.target.actionGroup.showRaiseGroup(!0)):(this.target.actionGroup.showActionGroup(!0),this.target.actionGroup.raiseBtn.visible=!1),this.showCallCheckBtn())):(this.timeOutCloseAddchipsPanel(),this.tryShowPreActionGroup(!0))}},t.prototype.showCallCheckBtn=function(){this.target.actionGroup.checkBtn.visible=!1,this.target.actionGroup.callBtn.visible=!1,GamblingUtil.isCanCheck?this.target.actionGroup.checkBtn.visible=!0:GamblingUtil.isNeedAllIn?(this.target.actionGroup.callBtn.visible=!0,this.target.actionGroup.raiseGroup.visible=!1,this.target.actionGroup.raiseBtn.visible=!1,this.target.actionGroup.callBtn.label=qin.MathUtil.formatNum(GamblingManager.self.bankRoll)):GamblingUtil.callNum>0&&(this.target.actionGroup.callBtn.visible=!0,this.target.actionGroup.callBtn.label=qin.MathUtil.formatNum(GamblingUtil.callNum))},t.prototype.sitOrStandHandler=function(e){this.target.hideDownEffect();var t=e.pInfo;if(t.roleId==UserManager.userInfo.roleId)if(e.state==BuyInGameState.Stand){this.target.actionGroup.showBrightButton(!1),this.target.actionGroup.hideAll(!0),this.target.actionGroup.hidePreActionGroup(!0),this.target.cardTypeGroup.visible=!1;for(var n=0,i=this.target.pitList;n<i.length;n++){var a=i[n];a.index=a.headComponent.posIndex}this.target.setPit(),this.target.waitNextRoundComponent.show(!1),this.target.waitNextImg.visible=!1}else this.target.initActionGroup(),t.state==PlayerState.WaitNext&&(this.target.waitNextImg.visible=!0);var o=this.target.getHeadComponent(t.pos);o&&(e.state==BuyInGameState.Sit?(o.sitDownInit(t),o.changeState(GamblingHeadStateType.SitDown),SoundManager.playEffect(MusicAction.sit)):e.state==BuyInGameState.Stand&&(o.init(null),o.changeState(GamblingHeadStateType.Empty),SoundManager.playEffect(MusicAction.sit_out))),this.refreshStiDownState()},t.prototype.refreshStiDownState=function(){for(var e=0,t=this.target.pitList;e<t.length;e++){var n=t[e];n.headComponent.canSitDownLabel.visible=!1,n.headComponent.inviteImg.visible=!1,GamblingManager.self?n.headComponent.inviteImg.visible=!0:n.headComponent.canSitDownLabel.visible=!0}},t.prototype.roundOverHandler=function(){for(var e,t=0,n=this.target.cardList;t<n.length;t++)e=n[t],e.showMaxFlag(!1);for(var i=0,a=this.target.pitList;i<a.length;i++){var o=a[i];o.headComponent.hideCdComponent()}this.timeOutCloseAddchipsPanel(),GamblingManager.self&&(this.target.actionGroup.showBrightButton(!1),this.target.actionGroup.hideAll(!0),this.target.actionGroup.hidePreActionGroup(!0)),this.clearPanelState()},t.prototype.boardCardChangeHandler=function(){this.timeOutCloseAddchipsPanel()},t.prototype.changeState=function(e,t){switch(void 0===t&&(t=!0),e){case PlayerState.Blind:break;case PlayerState.Empty:case PlayerState.WaitNext:case PlayerState.Check:case PlayerState.Raise:case PlayerState.AllIn:case PlayerState.Call:case PlayerState.WaitAction:this.target.actionGroupHideAll(t);break;case PlayerState.Fold:this.tryShowFoldGroup()}},t.prototype.showPanelState=function(){var e=!1;if(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.isTrusteeship&&(e=!0),GamblingUtil.getIsOnAction(GamblingManager.self)&&!e){for(var t=UIManager.panelDict.getKeys(),n=void 0,i=0,a=t;i<a.length;i++){var o=a[i];n=UIManager.isShowPanel(o),-1==this._excludePanel.indexOf(o)&&n&&UIManager.closePanel(o)}this._toNum=this.target.gameGroup.x,this._toNum>0&&this.target.gameGroupMove()}else this.clearPanelState()},t.prototype.clearPanelState=function(){this._toNum>0&&this.target.gameGroupMove()},t.prototype.tryShowPreActionGroup=function(e){if(GamblingManager.self&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.pos>0&&GamblingManager.self.pos!=GamblingManager.roomInfo.pos){var t=!1;switch(GamblingManager.self.state){case PlayerState.WaitAction:t=!GamblingManager.roomInfo.publicCard||GamblingManager.roomInfo.pos!=GamblingUtil.earliestActionPos;break;case PlayerState.Blind:t=!0;break;case PlayerState.Call:case PlayerState.Check:case PlayerState.Raise:t=GamblingManager.self.num<GamblingManager.roomInfo.maxAnte}t&&this.target.actionGroup.showPreActionGroup(!0)}},t.prototype.tryShowFoldGroup=function(){GamblingManager.self&&GamblingManager.self.state==PlayerState.Fold&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.pos>0&&(this.target.actionGroup.hideAll(!0),this.target.cardTypeGroup.visible=!1,this.target.actionGroup.showBrightButton(!0))},t.prototype.setNextTimeAwardInfo=function(){GamblingManager.timeAwardHandler.round<TimeAwardDefined.GetInstance().dataList.length&&(this._numContentInfo.content=qin.DateTimeUtil.countDownFormat(GamblingManager.timeAwardHandler.time,!1),this.target.onlineAwardBtn.numComponent.init(this._numContentInfo),GamblingManager.timeAwardHandler.startTimeFlag=!0,GamblingManager.timeAwardHandler.isGetTimeAward=!1,GamblingManager.self&&GamblingManager.timeAwardHandler.isEffectTime&&GamblingManager.timeAwardHandler.startCountDown())},t.prototype.refreshTimeAwardTime=function(){this._numContentInfo.content=qin.DateTimeUtil.countDownFormat(GamblingManager.timeAwardHandler.time,!1),this.target.onlineAwardBtn.numComponent.init(this._numContentInfo)},t.prototype.onPanelCloseHandler=function(e){e==UIModuleName.AddChipsPanel&&this.tryShowAction()},t.prototype.tryShowAction=function(){InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.self&&GamblingManager.roomInfo.pos==GamblingManager.self.pos&&0==this._isTimeOut&&(this.target.actionGroup.showRaiseGroup(!0),this.target.actionGroup.showActionGroup(!0),this.showCallCheckBtn())},t.prototype.onPanelOpenHandler=function(e){e==UIModuleName.AddChipsPanel&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.self&&GamblingManager.roomInfo.pos==GamblingManager.self.pos&&(this.target.actionGroup.showActionGroup(!1),this.target.actionGroup.showRaiseGroup(!1))},t.prototype.timeOutCloseAddchipsPanel=function(){UIManager.isShowPanel(UIModuleName.AddChipsPanel)&&(this._isTimeOut=!0,UIManager.closePanel(UIModuleName.AddChipsPanel))},t.prototype.actionTimeOut=function(){InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.self&&GamblingManager.roomInfo.pos==GamblingManager.self.pos},t.prototype.flopCardOverHandler=function(){this.actionPosChangeHandler()},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelActionSupport.prototype,"GamblingPanelActionSupport");var GamblingPanelAllinAnime=function(){function e(e){this._ceilTime=40,this.panel=e}return e.prototype.playAllinAnime=function(){this.removeAllinAnime(this.panel.allInAnimeGroup),this.panel.currencyGroup.addChild(this.panel.allInAnimeGroup),this.setAllinAnime(this.panel.img0,0,1,this.setAllinEffect0,this),this.setAllinAnime(this.panel.img1,4,.85),this.setAllinAnime(this.panel.img2,8,.7),this.setAllinAnime(this.panel.img3,12,.55,this.setAllinEffect1,this),this.setAllinAnime(this.panel.img4,16,.4,this.onEffectOver,this,1e3)},e.prototype.setAllinAnime=function(e,t,n,i,a,o){void 0===o&&(o=0);var r=egret.Tween.get(e);r.set({scaleX:0,scaleY:0,alpha:0}).wait(t*this._ceilTime).to({scaleX:.7,scaleY:.7,alpha:.33},n*this._ceilTime).to({scaleX:1,scaleY:1,alpha:1},2*n*this._ceilTime).to({scaleX:1.1,scaleY:1.1,alpha:1},3*n*this._ceilTime).to({scaleX:1.2,scaleY:1.2,alpha:1},n*this._ceilTime).to({scaleX:1,scaleY:1,alpha:1},2*n*this._ceilTime).wait(o).call(function(){i&&qin.FuncUtil.invoke(i,a)})},e.prototype.removeAllinAnime=function(e){for(var t=0;t<e.numChildren;t++)e.getChildAt(t)&&egret.Tween.removeTweens(e.getChildAt(t))},e.prototype.setAllinEffect0=function(){this.setAllinEffect(this._allinEffect0,AnimationType.Allin0,this.panel.allInAnimeGroup)},e.prototype.setAllinEffect1=function(){this.setAllinEffect(this._allinEffect1,AnimationType.Allin1,this.panel.allInAnimeGroup)},e.prototype.onEffectOver=function(){this.hideWinEffect(this._allinEffect0),this.hideWinEffect(this._allinEffect1),this.panel.allInAnimeGroup.parent&&this.panel.allInAnimeGroup.parent.removeChild(this.panel.allInAnimeGroup)},e.prototype.setAllinEffect=function(e,t,n){AnimationFactory.getParticleEffect(t,n,function(t){e=t})},e.prototype.hideWinEffect=function(e){e&&e.parent&&(e.stop(),e.parent.removeChild(e))},e}();__reflect(GamblingPanelAllinAnime.prototype,"GamblingPanelAllinAnime");var GamblingPanelButtonPosSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this._moveAnim||(this._moveAnim=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.CommonMoveToPointByNowPos),this._moveAnim.setTarget(this.target.buttonPosFlagImg));this.showPitInfo(!1),this.target.buttonPosFlagImg.visible=!0},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),GamblingManager.NextRoundStartEvent.addListener(this.onNextRoundStart,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),GamblingManager.NextRoundStartEvent.removeListener(this.onNextRoundStart,this),qin.Tick.RemoveTimeoutInvoke(this.delayMove,this)},t.prototype.onNextRoundStart=function(){this.showPitInfo(!0)},t.prototype.clearReleativePos=function(e){e.top=void 0,e.bottom=void 0,e.horizontalCenter=void 0,e.verticalCenter=void 0},t.prototype.showPitInfo=function(e){if(GamblingManager.roomInfo){var t=GamblingManager.roomInfo.buttonPos>0?GamblingManager.roomInfo.buttonPos:1,n=this.target.getPitInfo(t);if(n){var i=new egret.Point,a=(n.headComponent.maxWidth,n.headComponent.maxHeight);this.clearReleativePos(this.target.buttonPosFlagImg),this.clearReleativePos(this.target.buttonPosFlagImgSpt),void 0!=n.headComponent.horizontalCenter&&0==isNaN(n.headComponent.horizontalCenter)&&(1==n.index?i.x=n.headComponent.horizontalCenter-n.headComponent.maxWidth/2-30:i.x=n.headComponent.horizontalCenter,this.target.buttonPosFlagImgSpt.horizontalCenter=i.x),void 0!=n.headComponent.top&&0==isNaN(n.headComponent.top)?(i.y=n.headComponent.top+a+10,this.target.buttonPosFlagImgSpt.top=i.y):void 0!=n.headComponent.bottom&&0==isNaN(n.headComponent.bottom)?(1==n.index?i.y=n.headComponent.bottom+20:i.y=n.headComponent.bottom-40,this.target.buttonPosFlagImgSpt.bottom=i.y):void 0!=n.headComponent.verticalCenter&&0==isNaN(n.headComponent.verticalCenter)?(n.headComponent.verticalCenter>0?i.y=n.headComponent.verticalCenter+a+10:i.y=n.headComponent.verticalCenter+a+10,this.target.buttonPosFlagImgSpt.verticalCenter=i.y):1==n.index?this.target.buttonPosFlagImgSpt.y=n.headComponent.y+n.headComponent.emptyGroup.height-20:this.target.buttonPosFlagImgSpt.y=n.headComponent.y+n.headComponent.emptyGroup.height+67,e?qin.Tick.AddTimeoutInvoke(this.delayMove,GameManager.stage.frameRate,this):this.moveFinish()}else qin.Console.logError("显示按钮位信息失败！按钮位："+t)}},t.prototype.delayMove=function(){this._moveAnim.run(this.target.buttonPosFlagImgSpt.x,this.target.buttonPosFlagImgSpt.y,this.moveFinish,this)},t.prototype.moveFinish=function(){this.target.buttonPosFlagImg.horizontalCenter=this.target.buttonPosFlagImgSpt.horizontalCenter,this.target.buttonPosFlagImg.verticalCenter=this.target.buttonPosFlagImgSpt.verticalCenter,this.target.buttonPosFlagImg.top=this.target.buttonPosFlagImgSpt.top,this.target.buttonPosFlagImg.bottom=this.target.buttonPosFlagImgSpt.bottom,this.target.buttonPosFlagImg.y=this.target.buttonPosFlagImgSpt.y},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelButtonPosSupport.prototype,"GamblingPanelButtonPosSupport");var GamblingPanelFlopCardSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.target.flopCardImg1.visible=!1,this.target.flopCardImg2.visible=!1,this._animation1||(this._animation1=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.FlopCard),this._animation1.setTarget(this.target.flopCardImg1),this._animation2=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.FlopCard),this._animation2.setTarget(this.target.flopCardImg2),this.target.flopCardImg1.scaleX=this.target.flopCardImg1.scaleY=.2,this.target.flopCardImg2.scaleX=this.target.flopCardImg2.scaleY=.2),this._flopPosList||(this._flopPosList=new Array),this._flopPosList.length=0,this._isNextRoundStart=!1},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),GamblingManager.NextRoundStartEvent.addListener(this.nextRoundStartHandler,this),GamblingManager.ActionPosChangeEvent.addListener(this.actionPosChangeHandler,this),GamblingManager.RoundOverEvent.addListener(this.roundOverHandler,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),GamblingManager.NextRoundStartEvent.removeListener(this.nextRoundStartHandler,this),GamblingManager.ActionPosChangeEvent.removeListener(this.actionPosChangeHandler,this),GamblingManager.RoundOverEvent.removeListener(this.roundOverHandler,this),this._cardList=void 0},t.prototype.nextRoundStartHandler=function(){this._isNextRoundStart=!0},t.prototype.roundOverHandler=function(e){GamblingManager.roomInfo&&this.actionPosChangeHandler(e.handCard)},t.prototype.actionPosChangeHandler=function(e){if(this._isNextRoundStart&&(this._isNextRoundStart=!1,e||qin.Console.log("手牌推送过来是空！"),!this.isDisabled)){this._cardList=e,this.target.flopCardImg1.visible=!1,this.target.flopCardImg2.visible=!1,this._flopRound=0,this._runPos=0,this._runIndex=0,this._animationIndex=0;for(var t=0,n=this.target.pitList;t<n.length;t++){var i=n[t];i.headComponent.flopIndex=0}if(this._flopPosList.length=0,InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.playerList){for(var a=GamblingUtil.sBlindPos,o=void 0,r=0;r<GamblingManager.roomInfo.playerList.length;r++)o=GamblingManager.getPlayerInfoByPos(a),o&&o.state!=PlayerState.WaitNext&&this._flopPosList.push(a),o=this.target.getNextPlayerInfo(a),o&&(a=o.pos);qin.Console.log("开始发牌,玩家总数: "+this._flopPosList.length),this.runNext()}else qin.Console.log("发牌时房间信息是空")}},t.prototype.runNext=function(){if(this.isDisabled)return void qin.Console.log("发牌runNext：isDisabled"+this._flopRound);if(GamblingManager.roomInfo){var e=void 0,t=void 0;this._runIndex==this._flopPosList.length&&(qin.Console.log("发了一圈牌_flopRound: "+this._flopRound),this._flopRound++,this._runIndex=0),this._flopRound<2?(this._runPos=this._flopPosList[this._runIndex],e=this.target.getHeadComponent(this._runPos),this._runIndex++,this._animationIndex++,e?(SoundManager.playEffect(MusicAction.fapai),t=this.getAnimation(),t.run(new egret.Point(e.x+e.width/2,e.y+e.height/2),this.runOver,this,e)):(AlertManager.showAlert("发牌出现异常!"),qin.Console.log("发牌异常！未找到发牌的头像组件 _runIndex： "+this._runIndex+" _animationIndex: "+this._animationIndex+" _runPos: "+this._runPos+" _flopPosList "+this._flopPosList),this.flopOver()),qin.Console.log(" 给玩家发牌玩家位置: "+this._runPos)):this.flopOver()
}},t.prototype.flopOver=function(){qin.Console.log("发牌结束"),GamblingManager.roomInfo&&(GamblingManager.roomInfo.isFlopCardOver=!0),this.showSelfCard(),GamblingManager.FlopCardOverEvent.dispatch()},t.prototype.showSelfCard=function(){if(GamblingManager.self){var e=this.target.getHeadComponent(GamblingManager.self.pos);e&&e.bindData.roleId==UserManager.userInfo.roleId&&this._cardList&&this._cardList.length>1&&(e.showHaveCardImg(!1),e.cardFace1.init(this._cardList[0]),e.cardFace2.init(this._cardList[1]),e.cardFace1.initElementsShow2(),e.cardFace2.initElementsShow2(),e.cardAnimationSpt.runSelfCard(this.showCardType,this))}},t.prototype.runOver=function(e){if(this.isDisabled)return void qin.Console.log("发牌Disabled");var t=qin.StringConstants.Empty,n=-1;e.bindData&&e.bindData.userInfo&&(t=e.bindData.userInfo.name,n=e.bindData.pos),qin.Console.log("发了一张牌玩家："+t+" posIndex: "+e.posIndex+" pos: "+n),e.flopIndex++,this.runNext()},t.prototype.showCardType=function(){},t.prototype.getAnimation=function(){return this._animationIndex%2==1?(this.target.flopCardImg1.visible=!0,this._animation1):(this.target.flopCardImg2.visible=!0,this._animation2)},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelFlopCardSupport.prototype,"GamblingPanelFlopCardSupport");var GamblingPanelFuncSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this);var t=GamblingType.Common;GamblingManager.roomInfo&&(t=GamblingManager.roomInfo.gamblingType),GamblingManager.self&&t!=GamblingType.Championship?this.target.funcGroup.addChildAt(this.target.standUpBtn,1):this.target.standUpBtn.parent&&this.target.funcGroup.removeChild(this.target.standUpBtn),GamblingManager.self&&this.target.actionGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.actionGroupClickHandler,this),this.refreshSelectStateBtn(),this.target.recordBtn.setRecordBtnShow(GamblingManager.isInSeat)},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.target.addEventListener(egret.TouchEvent.TOUCH_TAP,this.funcGroupClickHandler,this),GamblingManager.LeaveRoomEvent.addListener(this.backToHallFromServer,this),GamblingManager.LeaveRoomErrorEvent.addListener(this.backToHallFromServer,this),GamblingManager.SitOrStandEvent.addListener(this.sitOrStandHandler,this),GamblingManager.BrightCardFlagEvent.addListener(this.brightCardHandler,this),GamblingManager.NextRoundStartEvent.addListener(this.nextRoundStartHandler,this),GamblingManager.OneLoopOverEvent.addListener(this.boardCardChangeHandler,this),this.target.recordBtn.OnEnable()},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),this.target.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.funcGroupClickHandler,this),GamblingManager.LeaveRoomEvent.removeListener(this.backToHallFromServer,this),GamblingManager.LeaveRoomErrorEvent.removeListener(this.backToHallFromServer,this),GamblingManager.SitOrStandEvent.removeListener(this.sitOrStandHandler,this),GamblingManager.BrightCardFlagEvent.removeListener(this.brightCardHandler,this),GamblingManager.NextRoundStartEvent.removeListener(this.nextRoundStartHandler,this),GamblingManager.OneLoopOverEvent.removeListener(this.boardCardChangeHandler,this),this.target.recordBtn.OnDisable()},t.prototype.funcGroupClickHandler=function(e){switch(e.target){case this.target.chargeBtn:SoundManager.playEffect(MusicAction.buttonClick),UIManager.showPanel(UIModuleName.ShoppingPanel,{prevPanelName:UIModuleName.GamblingPanel,toRight:!0});break;case this.target.standUpBtn:SoundManager.playEffect(MusicAction.buttonClick),GamblingManager.reqStandUp();break;case this.target.safeBtn:SoundManager.playEffect(MusicAction.buttonClick),JumpUtil.JumpToSafeBox();break;case this.target.mailBtn:SoundManager.playEffect(MusicAction.buttonClick),JumpUtil.JumpToMail();break;case this.target.luckyBoxBtn:break;case this.target.activityBtn:SoundManager.playEffect(MusicAction.buttonClick),JumpUtil.JumpToActivity(UIModuleName.GamblingPanel);break;case this.target.helpBtn:SoundManager.playEffect(MusicAction.buttonClick),JumpUtil.JumpToGameRule(UIModuleName.GamblingPanel);break;case this.target.backToHallBtn:SoundManager.playEffect(MusicAction.buttonClick),this.backToHallBtnClickHandler(e);break;case this.target.achieveBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;JumpUtil.JumpToAchievementInGame(AchievementManager.playingFieldTypeToAchieveShowPattern(GamblingManager.roomInfo.definition.type));break;case this.target.guessCardBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;UIManager.showPanel(UIModuleName.GuessPanel);break;case this.target.chatBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;JumpUtil.JumpToChatPanel();break;case this.target.onlineAwardBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;UIManager.showPanel(UIModuleName.TimeAwardPanel,GamblingManager.roomInfo.definition.type);break;case this.target.reviewBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;UIManager.showPanel(UIModuleName.GamblingReviewPanel,GamblingManager.roomInfo.id)}},t.prototype.backToHallFromServer=function(e){e&&e.isInMtt||(e.type==GamblingType.Championship?SceneManager.switcScene(SceneType.Hall,{action:SceneSwitchAction.RepleacePanel,panel:UIModuleName.ChampionshipPanel}):SceneManager.switcScene(SceneType.Hall,{action:SceneSwitchAction.RepleacePanel,panel:UIModuleName.PlayingFieldPanel}))},t.prototype.sitOrStandHandler=function(e){e.pInfo.roleId==UserManager.userInfo.roleId&&(e.state==BuyInGameState.Sit?(this.target.funcGroup.addChildAt(this.target.standUpBtn,1),this.target.actionGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.actionGroupClickHandler,this),this.target.recordBtn.setRecordBtnShow(!0)):e.state==BuyInGameState.Stand&&(this.target.standUpBtn.parent&&this.target.funcGroup.removeChild(this.target.standUpBtn),this.target.recordBtn.setRecordBtnShow(!1),this.target.actionGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.actionGroupClickHandler,this)))},t.prototype.removeActionGroupClickEvent=function(){this.target.actionGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.actionGroupClickHandler,this)},t.prototype.backToHallBtnClickHandler=function(e){if(GamblingManager.roomInfo)switch(GamblingManager.roomInfo.gamblingType){case GamblingType.Common:this.leaveRoom();break;case GamblingType.Championship:AlertManager.showConfirm("比赛中途离开，系统将会帮您托管，您可在“我的比赛”重新进入比赛,是否确认离开？",this.leaveRoom);break;case GamblingType.Personal:GamblingManager.isMaster?AlertManager.showConfirm("你是该房间的房主，你退出房间后该房间在所有玩家都离开后将被收回，您是否确定退出？",this.leaveRoom):this.leaveRoom()}else this.backToHallFromServer({type:GamblingType.Championship})},t.prototype.leaveRoom=function(){GamblingManager.reqLeaveRoom()},t.prototype.actionGroupClickHandler=function(e){switch(e.target){case this.target.actionGroup.brightCardBtn:SoundManager.playEffect(MusicAction.buttonClick),GamblingManager.reqBrightCard();break;case this.target.actionGroup.checkOrDropBtn:GamblingManager.isCheckOrFold=!GamblingManager.isCheckOrFold,this.refreshCheckOrDrop(),GamblingManager.isCallAny=!1,this.refreshCallAny(),SoundManager.playEffect(MusicAction.buttonClick);break;case this.target.actionGroup.callAnyBtn:GamblingManager.isCallAny=!GamblingManager.isCallAny,this.refreshCallAny(),GamblingManager.isCheckOrFold=!1,this.refreshCheckOrDrop(),SoundManager.playEffect(MusicAction.buttonClick);break;case this.target.actionGroup.oneOfThreeBtn:this.oneKeyRaise(t._quicklyPhase1),SoundManager.playEffect(MusicAction.buttonClick);break;case this.target.actionGroup.oneOfTwoBtn:this.oneKeyRaise(t._quicklyPhase2),SoundManager.playEffect(MusicAction.buttonClick);break;case this.target.actionGroup.twoOfThreeBtn:this.oneKeyRaise(t._quicklyPhase3),SoundManager.playEffect(MusicAction.buttonClick);break;case this.target.actionGroup.oneBtn:this.oneKeyRaise(t._quicklyPhase4),SoundManager.playEffect(MusicAction.buttonClick);break;case this.target.actionGroup.raiseBtn:if(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.self){var n={value:GamblingManager.self.num,minChips:GamblingManager.roomInfo.minRaiseNum,maxChips:GamblingUtil.maxRaiseChips,bBlind:GamblingManager.roomInfo.bBlind};UIManager.showPanel(UIModuleName.AddChipsPanel,n)}SoundManager.playEffect(MusicAction.buttonClick);break;case this.target.actionGroup.foldBtn:GamblingManager.reqAction(PlayerState.Fold),SoundManager.playEffect(MusicAction.buttonClick);break;case this.target.actionGroup.callBtn:case this.target.actionGroup.checkBtn:GamblingManager.doDefaultAction(),SoundManager.playEffect(MusicAction.buttonClick)}},t.prototype.oneKeyRaise=function(e){if(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.self){var t=Math.floor(GamblingManager.totalPotChips*e);t=Math.max(GamblingManager.roomInfo.minRaiseNum,t),t>=GamblingManager.self.bankRoll?GamblingManager.reqAction(PlayerState.AllIn,GamblingManager.self.bankRoll):GamblingManager.reqAction(PlayerState.Raise,t)}},t.prototype.nextRoundStartHandler=function(){this.refreshSelectStateBtn()},t.prototype.boardCardChangeHandler=function(){this.refreshSelectStateBtn()},t.prototype.refreshSelectStateBtn=function(){GamblingManager.self&&(this.refreshCallAny(),this.refreshCheckOrDrop(),this.brightCardHandler())},t.prototype.refreshCallAny=function(){this.target.actionGroup.callAnyBtn.selected=GamblingManager.isCallAny},t.prototype.refreshCheckOrDrop=function(){this.target.actionGroup.checkOrDropBtn.selected=GamblingManager.isCheckOrFold},t.prototype.brightCardHandler=function(){GamblingManager.roomInfo&&(this.target.actionGroup.brightCardBtn.selected=GamblingManager.roomInfo.isShowCard)},t.prototype.clear=function(){e.prototype.clear.call(this)},t._quicklyPhase1=1/3,t._quicklyPhase2=.5,t._quicklyPhase3=2/3,t._quicklyPhase4=1,t._quicklyPhase5=2,t}(BaseGamblingPanelSupport);__reflect(GamblingPanelFuncSupport.prototype,"GamblingPanelFuncSupport");var GamblingPanelGuidePlayWaySupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this);var t=this.target.panelState,n=t.getCompoent(GamblingGuidePlayWayComponent);n.guidePlayWayGroup.visible=!1},t.prototype.run=function(){var e=this,t=this.target.panelState,n=t.getCompoent(GamblingGuidePlayWayComponent);n.guidePlayWayGroup.visible=!0,this._boardCardParent=this.target.cardList[0].parent,this._childIndexList=new Array;for(var i=0;i<this.target.cardList.length;i++){var a=this.target.cardList[i];this._childIndexList.push(this._boardCardParent.getChildIndex(a)),n.guidePlayWayGroup.addChild(a)}var o=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.Alpha);o.target=n.guidePlayWayBg,o.run(0,.5,0,500);var r=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.Alpha);r.target=n.guidePlayWayFlopGroup,r.run(0,1,500);var s=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.Alpha);s.target=n.guidePlayTurnLabel,s.run(0,1,2e3);var l=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.Alpha);l.target=n.guidePlayRiverLabel,l.run(0,1,3500,1e3,function(){o.run(.5,0,2e3),r.run(1,0,2e3),s.run(1,0,2e3),l.run(1,0,2e3,1e3,e.onDisable,e)},this)},t.prototype.onEnable=function(){e.prototype.onEnable.call(this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this);var t=this.target.panelState,n=t.getCompoent(GamblingGuidePlayWayComponent);if(n.guidePlayWayGroup.visible=!1,this._childIndexList&&this._boardCardParent)for(var i=0;i<this.target.cardList.length;i++){var a=this.target.cardList[i];this._boardCardParent.addChildAt(a,this._childIndexList[i])}else qin.Console.logError("引导玩法执行异常！")},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelGuidePlayWaySupport.prototype,"GamblingPanelGuidePlayWaySupport");var GamblingPanelGuideSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this._animation=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.Alpha);var t=this.target.panelState,n=t.getCompoent(GamblingGuideComponent);this._animation.target=n.guideTipsBar,this._animation.run(0,1,500,1e3,this.disapear,this)},t.prototype.disapear=function(){this._animation.run(1,0,2e3,1e3,this.disapearOver,this)},t.prototype.disapearOver=function(){this.clear()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),this.clear()},t.prototype.clear=function(){e.prototype.clear.call(this),this._animation.clear(),this._animation.target=null,this._animation=null},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelGuideSupport.prototype,"GamblingPanelGuideSupport");var GamblingPanelInfoRefreshSupport=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._gap1=50,t._gap2=80,t}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),GamblingManager.roomInfo&&this.refresh()},t.prototype.refresh=function(){switch(this.target.roomIdLabel.text=PlayingFieldManager.roomIdAddZero(GamblingManager.roomInfo.id),this.target.guessCorrectlyGroup.visible=!1,GamblingManager.roomInfo.gamblingType){case GamblingType.Common:break;case GamblingType.Championship:break;case GamblingType.Personal:}this.refreshBlindLabel(),this.refreshPotLabel()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),GamblingManager.PlayerStateChangeEvent.addListener(this.playerStateChangeHandler,this),GamblingManager.BlindChangeEvent.addListener(this.blindChangeHandler,this),GamblingManager.NextRoundStartEvent.addListener(this.onNextRoundStartEvent,this),GamblingManager.OnGetRoomUserInfoEvent.addListener(this.getRoomUserInfoHandler,this),GamblingManager.guessHandler.onGuessCorrectlyEvent.addListener(this.showGuessCorrectlyRemind,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),GamblingManager.PlayerStateChangeEvent.removeListener(this.playerStateChangeHandler,this),GamblingManager.BlindChangeEvent.removeListener(this.blindChangeHandler,this),GamblingManager.NextRoundStartEvent.removeListener(this.onNextRoundStartEvent,this),GamblingManager.OnGetRoomUserInfoEvent.removeListener(this.getRoomUserInfoHandler,this),GamblingManager.guessHandler.onGuessCorrectlyEvent.removeListener(this.showGuessCorrectlyRemind,this),qin.Tick.RemoveTimeoutInvoke(this.closeGuessCorrectlyRemind,this)},t.prototype.playerStateChangeHandler=function(){this.refreshPotLabel()},t.prototype.blindChangeHandler=function(){this.refreshBlindLabel()},t.prototype.onNextRoundStartEvent=function(){this.refreshBlindLabel()},t.prototype.getRoomUserInfoHandler=function(e){var t=this.target.getHeadComponentByRole(e);t?t.showHead():qin.Console.log("该玩家的头像组件未找到！"+e)},t.prototype.refreshPotLabel=function(){this.target.potLabel.text=qin.MathUtil.formatNum(GamblingManager.showPotChips),egret.callLater(this.refreshPotGroupPos,this)},t.prototype.refreshPotGroupPos=function(){this.target.potGroup.x=(this.target.potGroup.parent.width-this.target.potGroup.width)/2},t.prototype.refreshBlindLabel=function(){this.target.usualblindLabel.text=qin.MathUtil.formatNum(GamblingManager.roomInfo.sBlind)+"/"+qin.MathUtil.formatNum(GamblingManager.roomInfo.bBlind),this.target.anteLabel.text=qin.MathUtil.formatNum(GamblingManager.roomInfo.ante),GamblingManager.roomInfo.ante>0?(this.target.anteGroup.visible=!0,egret.callLater(this.refreshPos,this,!0)):(egret.callLater(this.refreshPos,this,!1),this.target.anteGroup.visible=!1)},t.prototype.refreshPos=function(e){if(this.target.roomIdGroup.visible=!0,InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.gamblingType==GamblingType.Championship)if(this.target.roomIdGroup.visible=!1,e){var t=this.target.usualBlindGroup.width+this.target.anteGroup.width+this._gap2,n=(this.target.gameGroup.width-t)/2;this.target.usualBlindGroup.x=n,this.target.anteGroup.x=n+this.target.usualBlindGroup.width+this._gap2}else{var n=(this.target.gameGroup.width-this.target.usualBlindGroup.width)/2;this.target.usualBlindGroup.x=n}else if(e){var t=this.target.roomIdGroup.width+this.target.usualBlindGroup.width+this.target.anteGroup.width+2*this._gap1,n=(this.target.gameGroup.width-t)/2;this.target.roomIdGroup.x=n,this.target.usualBlindGroup.x=n+this.target.roomIdGroup.width+this._gap1,this.target.anteGroup.x=this.target.usualBlindGroup.x+this.target.usualBlindGroup.width+this._gap1}else{var t=this.target.roomIdGroup.width+this.target.usualBlindGroup.width+this._gap2,n=(this.target.gameGroup.width-t)/2;this.target.roomIdGroup.x=n,this.target.usualBlindGroup.x=n+this.target.roomIdGroup.width+this._gap2}},t.prototype.showGuessCorrectlyRemind=function(){this.target.guessCorrectlyGroup.visible=!0,qin.Tick.AddTimeoutInvoke(this.closeGuessCorrectlyRemind,1500,this)},t.prototype.closeGuessCorrectlyRemind=function(){qin.Tick.RemoveTimeoutInvoke(this.closeGuessCorrectlyRemind,this),this.target.guessCorrectlyGroup.visible=!1},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelInfoRefreshSupport.prototype,"GamblingPanelInfoRefreshSupport");var GamblingPanelMoveSupport=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toNum=265,t._isMove=!1,t}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this._isMove=!1,this._initMatrix||(this._initMatrix=this.target.gameGroup.matrix),this._moveHandler||(this._moveHandler=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.GamblingGameGroupMove),this._moveHandler.setTarget(this.target.gameGroup)),this._marqueePanel||this.getMarqueePanel(),this._lastStageX=-1,this._initMatrix.tx=0,this.target.gameGroup.matrix=this._initMatrix},t.prototype.move=function(){this._lastStageX=-1,this.target.gameGroup.x>0?this.toLeft():this.toRight()},t.prototype.onEnable=function(){this.target.optionsBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.optionsTapHandler,this),this.target.dragGroup.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.target.dragGroup.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.target.dragGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.target.dragGroup.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outSideRelease,this),this._ignoreList||(this._ignoreList=new Array,this._ignoreList.push(this.target.audioRecordBtn));for(var e=0,t=this._ignoreList;e<t.length;e++){var n=t[e];n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.ignoreListBegin,this),n.addEventListener(egret.TouchEvent.TOUCH_END,this.ignoreListEnd,this)}UIManager.onPanelOpenEvent.addListener(this.onMarqueePanelOpen,this)},t.prototype.onDisable=function(){this.target.optionsBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.optionsTapHandler,this),this.target.dragGroup.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.target.dragGroup.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.target.dragGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.target.dragGroup.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outSideRelease,this);for(var e=0,t=this._ignoreList;e<t.length;e++){var n=t[e];n.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.ignoreListBegin,this),n.removeEventListener(egret.TouchEvent.TOUCH_END,this.ignoreListEnd,this)}UIManager.onPanelOpenEvent.removeListener(this.onMarqueePanelOpen,this)},t.prototype.onMarqueePanelOpen=function(e){e!=UIModuleName.MarqueePanel||this._marqueePanel||this.getMarqueePanel()},t.prototype.getMarqueePanel=function(){this._marqueePanel=UIManager.panelDict.getValue(UIModuleName.MarqueePanel)},t.prototype.onTouchEnd=function(e,t){this._stopMove=!1,(t||e.target==this.target.dragGroup)&&(this._lastBeginStageX==e.stageX?this.toLeft():this.stop())},t.prototype.onTouchMove=function(e){if(!this._stopMove&&e.target==this.target.dragGroup){var t=0;-1!=this._lastStageX?(t=e.stageX-this._lastStageX,this._lastStageX=e.stageX):this._lastStageX=e.stageX,this._initMatrix.tx+=t,this._initMatrix.tx>this.toNum&&(this._initMatrix.tx=this.toNum),this._initMatrix.tx<0&&(this._initMatrix.tx=0),this.target.gameGroup.matrix=this._initMatrix,this._isMove=!0,this._marqueePanel&&this._marqueePanel.onMoveing(this._initMatrix.tx)}},t.prototype.stop=function(){this._isMove&&(this._isMove=!1,this.target.gameGroup.x>this.toNum/2?this.toRight():this.toLeft())},t.prototype.toRight=function(e){void 0===e&&(e=!0),this._initMatrix.tx=this.toNum,e?this._moveHandler.run(this.toNum,null,null):this.target.gameGroup.x=this.toNum,this._marqueePanel&&this._marqueePanel.onMoveEnd({num:this.toNum,showAnimate:e}),this.clearPosFlag()},t.prototype.toLeft=function(){this._initMatrix.tx=0,this._marqueePanel&&this._marqueePanel.onMoveEnd({num:0,showAnimate:!0}),this._moveHandler.run(0,this.moveFinish,this),this.clearPosFlag()},t.prototype.moveFinish=function(){},t.prototype.optionsTapHandler=function(e){this.move()},t.prototype.onTouchBegin=function(e){this.target.gameGroup.x>0&&(this._lastBeginStageX=e.stageX)},t.prototype.outSideRelease=function(e){this.stop()},t.prototype.clearPosFlag=function(){this._lastBeginStageX=-1,this._lastStageX=-1},t.prototype.ignoreListBegin=function(e){this._stopMove=!0},t.prototype.ignoreListEnd=function(e){this._stopMove=!1},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelMoveSupport.prototype,"GamblingPanelMoveSupport");var GamblingPanelOneLoopOverSupport=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastCardType=CardType.None,t}return __extends(t,e),t.prototype.initialize=function(){if(e.prototype.initialize.call(this),this.clear(),GamblingUtil.isOnProcess(GamblingManager.self)&&InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.publicCard&&GamblingManager.roomInfo.publicCard.length>0?this.target.cardTypeGroup.visible=!0:this.target.cardTypeGroup.visible=!1,GamblingManager.roomInfo){if(GamblingManager.roomInfo.publicCard){this._lastCardLen=GamblingManager.roomInfo.publicCard.length;for(var t=void 0,n=void 0,i=GamblingPanelSetting.boardCardMatrix.clone(),a=0;a<this._lastCardLen;a++)t=this.target.cardList[a],t.visible=!0,t.init(GamblingManager.roomInfo.publicCard[a]),t.initElementsShow2(),n=GamblingPanelSetting.boardPosList[a],t.horizontalCenter=n.x,t.verticalCenter=n.y,t.alpha=1,i.tx=t.x,i.ty=t.y,t.matrix=i}else this._lastCardLen=0;GamblingManager.roomInfo.handCard&&(this._cardList=GamblingManager.roomInfo.handCard.concat()),GamblingManager.roomInfo.publicCard&&(this._publicCardList=GamblingManager.roomInfo.publicCard.concat()),this.runBoardCardOVerHandler(),this.setPotChips(),this.showPotChips(this._potList)}},t.prototype.setPotChips=function(){GamblingManager.roomInfo.potChips?this._potList=GamblingManager.roomInfo.potChips.concat():this._potList=void 0},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),GamblingManager.OneLoopOverEvent.addListener(this.oneLoopOverHandler,this),GamblingManager.RoundOverEvent.addListener(this.roundOverHandler,this),GamblingManager.NextRoundStartEvent.addListener(this.nextRoundStartHandler,this),GamblingManager.PlayerStateChangeEvent.addListener(this.playerStateChange,this),GamblingManager.SitOrStandEvent.addListener(this.sitOrStandHandler,this),qin.Tick.addFrameInvoke(this.tryStartNext,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),GamblingManager.OneLoopOverEvent.removeListener(this.oneLoopOverHandler,this),GamblingManager.RoundOverEvent.removeListener(this.roundOverHandler,this),GamblingManager.NextRoundStartEvent.removeListener(this.nextRoundStartHandler,this),GamblingManager.PlayerStateChangeEvent.removeListener(this.playerStateChange,this),GamblingManager.SitOrStandEvent.removeListener(this.sitOrStandHandler,this),qin.Tick.removeFrameInvoke(this.tryStartNext,this),qin.Tick.RemoveTimeoutInvoke(this.showOneLoop,this),qin.Tick.RemoveTimeoutInvoke(this.showRoundOver,this),this._cardList=void 0,this._publicCardList=void 0},t.prototype.oneLoopOverHandler=function(e){this._cardList=e[0],this._publicCardList=e[1],this._isOneLoopShowChips=!0,this._isBoardCardAnimOver=!1,this._isPotChipsAnimOver=!1,this.onBoardCardApearComplete&&this.onBoardCardApearComplete.invoke({isBoardOver:!1,isRoundOver:this._isOnRoundOVer}),this.setPotChips(),this.target.hideSateGroup(!0),qin.Tick.AddTimeoutInvoke(this.showOneLoop,450,this)},t.prototype.showOneLoop=function(){if(!this.isDisabled){for(var e,t=0,n=this.target.cardList;t<n.length;t++)e=n[t],e.showMaxFlag(!1);if(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&this._publicCardList){GamblingManager.self&&(this.target.actionGroup.raiseGroup.visible=!1,this.target.actionGroup.actionGroup.visible=!1);var i=this._publicCardList.length,a=i-this._lastCardLen;if(a>1)for(var o=this._lastCardLen;i>o;o++)e=this.target.cardList[o],e.visible=!0,e.init(this._publicCardList[o]),o==i-1?this.runBoardAppearAnim(e,GamblingPanelSetting.boardPosList[o],350*o,this.onRunBoardCardOver,this):this.runBoardAppearAnim(e,GamblingPanelSetting.boardPosList[o],350*o,null,null);else 4==i?(e=this.target.cardList[3],e.visible=!0,e.init(this._publicCardList[3]),this.runBoardAppearAnim(e,GamblingPanelSetting.boardPosList[3],0,this.onRunBoardCardOver,this)):5==i&&(e=this.target.cardList[4],e.visible=!0,e.init(this._publicCardList[4]),e.initElementsShow2(),this.runBoardAppearAnim(e,GamblingPanelSetting.boardPosList[4],0,this.onRunBoardCardOver,this));this._lastCardLen=i,this.showPotChips(this._potList);for(var r=0,s=this.target.pitList;r<s.length;r++){var l=s[r];l.headComponent.showChipsComponent()}}}},t.prototype.roundOverHandler=function(){if(this.target.hideSateGroup(),InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roundOverInfo&&GamblingManager.roundOverInfo.potList){var e=!0,t=new Array,n=void 0;if(GamblingManager.roomInfo.potChips)for(var i=0;i<GamblingManager.roundOverInfo.potList.length;i++)n=GamblingManager.roundOverInfo.potList[i],t.push(n.num),GamblingManager.roomInfo.potChips&&GamblingManager.roomInfo.potChips[i]!=n.num&&(e=!1);else{e=!1;for(var i=0;i<GamblingManager.roundOverInfo.potList.length;i++)n=GamblingManager.roundOverInfo.potList[i],t.push(n.num)}e||(this._isPotChipsAnimOver=!1,0==t.length?(qin.Console.log("兼容异常情况_isOnRoundOVer"),this._isOnRoundOVer=!0):this.showPotChips(t)),0==this._isOneLoopShowChips&&1==this._isPotChipsAnimOver?qin.Tick.AddTimeoutInvoke(this.showRoundOver,300,this):this._isOnRoundOVer=!0}else GamblingManager.roundOverInfo||qin.Console.log("结算异常，结算信息为空！"),GamblingManager.roundOverInfo&&!GamblingManager.roundOverInfo.potList&&qin.Console.log("结算异常，结算底池列表为空"),this._isOnRoundOVer=!0;for(var a=0,o=this.target.pitList;a<o.length;a++){var r=o[a];r.headComponent.roundOverHandler()}this._lastCardType=CardType.None},t.prototype.showRoundOver=function(){if(!this.isDisabled&&(this._isOnRoundOVer=!0,GamblingManager.roundOverInfo&&GamblingManager.roundOverInfo.potList))for(var e=0,t=this.target.pitList;e<t.length;e++){var n=t[e];n.headComponent.showChipsComponent()}},t.prototype.showPotChips=function(e){this._dataList||(this._dataList=new Array,this.target.potChipsGroup.dataList=this._dataList);var t;if(e){this.target.potChipsGroup.visible=!0;var n=this._lastChips?this._lastChips.length:0,i=e.length,a=void 0,o=void 0,r=void 0,s=void 0;if(i>n&&this.target.chipsBgGroup.numChildren>0)for(var l=void 0,h=0;i>h;h++)if(t=h==i-1?this.runChipsBetAnimOver:void 0,h<this._dataList.length){if(r=this._dataList[h],r.callback=t,r.thisObject=this,r.isTween=!1,r.num!=e[h]){var d=this.target.chipsNumGroup.numChildren-h-1;0>d&&(d=0),o=this.target.chipsNumGroup.getChildAt(d),a=this.target.chipsBgGroup.getChildAt(d),r.isTween=!0,r.num=e[h],this.showImgChips(r,o,a)}}else l=h%2==0?ChipsPosType.Left:ChipsPosType.Right,r={num:e[h],type:l,isTween:!0,isFixedWidth:!0,callback:t,thisObject:this},this._dataList.push(r);else for(var l=void 0,c=void 0,h=0;h<e.length;h++)l=h%2==0?ChipsPosType.Left:ChipsPosType.Right,c=e[h],a=null,o=null,h<this.target.chipsBgGroup.numChildren&&(a=this.target.chipsBgGroup.getChildAt(this.target.chipsBgGroup.numChildren-h-1),o=this.target.chipsNumGroup.getChildAt(this.target.chipsNumGroup.numChildren-h-1)),a?a.bindData&&(a.bindData.num!=c?(a.bindData.num=c,a.bindData.isTween=!0,o.bindData.num=c,o.bindData.isTween=!0):(a.bindData.isTween=!1,o.bindData.isTween=!1),h==e.length-1&&(a.bindData.isTween?(o.bindData.thisObject=this,a.bindData.thisObject=this):s=!0)):(t=h==e.length-1?this.runChipsBetAnimOver:void 0,this._dataList.push({num:c,type:l,isTween:!0,isFixedWidth:!0,callback:t,thisObject:this}));qin.Console.log("底池数量_dataList："+this._dataList.length);for(var p=void 0,u=void 0,h=0;h<this._dataList.length;h++)h<this.target.chipsBgGroup.numChildren?(u=this.target.chipsNumGroup.getChildAt(h),u.init(u.bindData),p=this.target.chipsBgGroup.getChildAt(h),p.init(p.bindData)):this.showImgChips(this._dataList[h]);this._lastChips=e.concat()}else this.target.clearPotChips()},t.prototype.runChipsBetAnimOver=function(e){this.isDisabled||(this._isPotChipsAnimOver=!0,this._isOnRoundOVer&&this._isBoardCardAnimOver&&qin.Tick.AddTimeoutInvoke(this.showRoundOver,300,this))},t.prototype.showImgChips=function(e,t,n){t||(t=ChipsPot.popComponent()),e.isChip=!1,e.isNum=!0,t.init(e),this.target.chipsNumGroup.addChildAt(t,0),n||(n=ChipsPot.popComponent());var i=n.bindData;i||(i={}),i.isChip=!0,i.isNum=!1,i.num=e.num,i.type=e.type,i.isTween=e.isTween,i.isFixedWidth=e.isFixedWidth,n.init(i),this.target.chipsBgGroup.addChildAt(n,0)},t.prototype.runBoardAppearAnim=function(e,t,n,i,a){if(void 0===n&&(n=0),!this.isDisabled){this._actionList1||(this._actionList1=new qin.Dictionary,this._actionList2=new qin.Dictionary);var o=this._actionList1.getValue(e),r=this._actionList2.getValue(e);o||(o=AnimationFactory.getCardFaceAnimation(AnimationType.CardFaceBoardAppear),o.setTarget(e),this._actionList1.add(e,o)),r||(r=AnimationFactory.getCardFaceAnimation(AnimationType.CardFaceTurnToFace),r.setTarget(e),r.scale=1.23,r.time=80,r.isSound=!0,this._actionList2.add(e,r)),o.nextAnimation=r,o.nextAnimation.callback=new qin.Delegate(i,a),o.run(t,n)}},t.prototype.onRunBoardCardOver=function(){this.isDisabled||(this.runBoardCardOVerHandler(),this._isBoardCardAnimOver=!0,this._isOnRoundOVer&&this._isPotChipsAnimOver&&qin.Tick.AddTimeoutInvoke(this.showRoundOver,300,this))},t.prototype.runBoardCardOVerHandler=function(){if(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&this._cardList&&this._cardList.length>0&&this._publicCardList&&this._publicCardList.length>0){this.target.cardTypeGroup.visible=!0;var e=CardTypeMatchUtil.matchCardInRoom(this._cardList);if(e&&CardTypeMatchUtil.resultList&&CardTypeMatchUtil.resultList.length>0){this.target.cardDeslabel.text=CardTypeMatchUtil.getCardDes(CardTypeMatchUtil.cardType),this._lastCardType!=CardTypeMatchUtil.cardType&&SoundManager.playCardTypeSoundEffect(CardTypeMatchUtil.cardType),this._lastCardType=CardTypeMatchUtil.cardType;for(var t=this.target.cardList.length,n=void 0,i=0;t>i;i++)if(n=this.target.cardList[i],n.visible&&n.bindData)for(var a=0,o=CardTypeMatchUtil.resultList;a<o.length;a++){var r=o[a];if(1==r.card[3]&&r.card[0]==n.bindData.card[0]&&r.card[1]==n.bindData.card[1]){n.showMaxFlag(!0);break}}}}this.onBoardCardApearComplete&&this.onBoardCardApearComplete.invoke({isBoardOver:!0,isRoundOver:this._isOnRoundOVer})},t.prototype.nextRoundStartHandler=function(){this.clear()},t.prototype.handCardComHandler=function(){},t.prototype.playerStateChange=function(){this._isOneLoopShowChips=!1},t.prototype.sitOrStandHandler=function(e){},t.prototype.tryStartNext=function(){this._isBoardCardAnimOver&&this._isPotChipsAnimOver&&this.onLoopOverCallback&&this._isOnRoundOVer&&(void 0==this._lastTime&&(this._lastTime=egret.getTimer()),egret.getTimer()-this._lastTime>=700&&(this._lastTime=void 0,this._isOnRoundOVer=!1,this.onLoopOverCallback.invoke()))
},t.prototype.clear=function(){e.prototype.clear.call(this),this._isPotChipsAnimOver=!0,this._isBoardCardAnimOver=!0,this._isOnRoundOVer=!1,this._isOneLoopShowChips=!1,this._lastCardLen=0,this.target.hideCard(),this._lastChips&&(this._lastChips.length=0),this.target.clearPotChips(),this.target.chipsBgGroup.removeChildren(),this.target.chipsNumGroup.removeChildren(),this._lastCardType=CardType.None,this._cardList=void 0,this._publicCardList=void 0},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelOneLoopOverSupport.prototype,"GamblingPanelOneLoopOverSupport");var GamblingPanelPitDataSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this)},t.prototype.onEnable=function(){e.prototype.onEnable.call(this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this)},t.prototype.getPlayerPos=function(e){if(e.headComponent.bindData)return e.headComponent.bindData.pos;var t=this.getNextPlayerPitInfo(e);if(t){var n=GamblingPanelSetting.getPreIndex(t.headComponent.bindData.pos,t.index-e.index);return n}return e.index},t.prototype.getPitInfo=function(e){for(var t,n=GamblingPanelSetting.MinPitIndex;n<=GamblingManager.maxSeats;n++)if(t=this.target.pitList[n-1],t.headComponent.bindData&&t.headComponent.bindData.pos==e)return t;var i=this.getNextPlayerInfo(e);if(i){var a=this.getPitInfoByPlayerInfo(i);if(a){var o=GamblingPanelSetting.getPreIndex(a.index,i.pos-e);return this.getPitInfoByIndex(o)}}return this.getPitInfoByIndex(e)},t.prototype.getPitInfoByIndex=function(e){for(var t=0,n=this.target.pitList;t<n.length;t++){var i=n[t];if(i.index==e)return i}return null},t.prototype.getHeadComponent=function(e){var t=this.getPitInfo(e);return t?t.headComponent:null},t.prototype.getNextPlayerPitInfo=function(e){for(var t=GamblingPanelSetting.getNextIndex(e.index),n=GamblingPanelSetting.MinPitIndex;n<=GamblingManager.maxSeats;n++){var i=this.target.pitList[t-1];if(i.headComponent.bindData)return i;t=GamblingPanelSetting.getNextIndex(t)}return null},t.prototype.getNextPlayerInfo=function(e){for(var t=GamblingPanelSetting.getNextIndex(e),n=GamblingPanelSetting.MinPitIndex;n<GamblingManager.maxSeats;n++){var i=GamblingManager.getPlayerInfoByPos(t);if(i)return i;t=GamblingPanelSetting.getNextIndex(t)}return null},t.prototype.getPitInfoByPlayerInfo=function(e){for(var t,n=GamblingPanelSetting.MinPitIndex;n<=GamblingManager.maxSeats;n++)if(t=this.target.pitList[n-1],t.headComponent.bindData&&t.headComponent.bindData.roleId==e.roleId)return t;return null},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelPitDataSupport.prototype,"GamblingPanelPitDataSupport");var GamblingPanelPitTurnSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){if(e.prototype.initialize.call(this),!this._absolutePosList){this._absolutePosList=new Array;for(var t=0;10>t;t++)this._absolutePosList.push(new egret.Point)}for(var n,i,t=GamblingPanelSetting.MinPitIndex;t<=GamblingManager.maxSeats;t++)n=GamblingManager.getPlayerInfoByPos(t),i=this.target.getPitInfoByIndex(t),i.headComponent.init(n),i.headComponent.visible=!0;if(i=null,GamblingManager.self){var a=void 0;i=this.target.getPitInfo(GamblingManager.self.pos),this._isClockwise=i.index>GamblingPanelSetting.centerNum,this._isClockwise?this._offset=Math.abs(GamblingManager.maxSeats-i.index)+1:this._offset=Math.abs(GamblingPanelSetting.MinPitIndex-i.index);for(var o=GamblingPanelSetting.getHeadPosList(),t=GamblingPanelSetting.MinPitIndex;t<=GamblingManager.maxSeats;t++)i=this.target.pitList[t-1],a=this._isClockwise?GamblingPanelSetting.getNextIndex(i.index,this._offset):GamblingPanelSetting.getPreIndex(i.index,this._offset),i.index=a,i.headComponent.refreshChipsShow(i.index,GamblingManager.maxSeats),i.headComponent.posIndex=a,i.headComponent.showGroupAuto(!0),this.setPos(i)}else{var o=GamblingPanelSetting.getHeadPosList();if(o)for(var t=GamblingPanelSetting.MinPitIndex;t<=GamblingManager.maxSeats;t++)i=this.target.getPitInfo(t),this.setPos(i),i.headComponent.refreshChipsShow(t,GamblingManager.maxSeats)}},t.prototype.setPos=function(e){this.clearHeadCptReleative(e.headComponent);var t=GamblingPanelSetting.getHeadPosList(),n=t[e.index];if(1==e.index)e.headComponent.horizontalCenter=n.x,e.headComponent.bottom=n.y;else switch(e.headComponent.horizontalCenter=n.x,GamblingManager.maxSeats){case SeatMode.Three:this.adaptivePit(e.headComponent,1);break;case SeatMode.Five:3==e.index||4==e.index?this.adaptivePit(e.headComponent,0):this.adaptivePit(e.headComponent,2);break;case SeatMode.Six:4==e.index&&(e.headComponent.top=n.y),3==e.index||5==e.index?this.adaptivePit(e.headComponent,0):this.adaptivePit(e.headComponent,2);break;case SeatMode.Nine:5==e.index||6==e.index?e.headComponent.top=n.y:4==e.index||7==e.index?this.adaptivePit(e.headComponent,0):3==e.index||8==e.index?this.adaptivePit(e.headComponent,1):(2==e.index||9==e.index)&&this.adaptivePit(e.headComponent,2)}},t.prototype.adaptivePit=function(e,t){var n=GamblingPanelSetting.headTopBottomReleativePoint.x,i=GamblingPanelSetting.headTopBottomReleativePoint.y,a=GameManager.stage.stageHeight,o=a-n-i;a=.9*o;var r=Math.floor(a/3);1==t?e.y=n+.11*o+.7*r:e.y=n+.11*o+r*t},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),GamblingManager.SitOrStandEvent.addListener(this.onSitOrStand,this),GameManager.stage.addEventListener(egret.Event.RESIZE,this.resizeHandler,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),GamblingManager.SitOrStandEvent.removeListener(this.onSitOrStand,this),GameManager.stage.removeEventListener(egret.Event.RESIZE,this.resizeHandler,this)},t.prototype.onSitOrStand=function(e){if(this.isDisabled)return void qin.Console.log("异步不显示自己的手牌");var t=this.target.getPitInfo(e.pInfo.pos);if(e.state==BuyInGameState.Sit&&e.pInfo.roleId==UserManager.userInfo.roleId)if(this._isClockwise=t.index>GamblingPanelSetting.centerNum,this._isClockwise?this._offset=Math.abs(GamblingManager.maxSeats-t.index)+1:this._offset=Math.abs(GamblingPanelSetting.MinPitIndex-t.index),this._nowRunIndex=0,this._offset>0){this.target.buttonPosFlagImg.visible=!1;for(var n=0,i=this.target.pitList;n<i.length;n++){var a=i[n];a.headComponent.showStateGroup(!1)}for(var o=void 0,r=1;r<=GamblingManager.maxSeats;r++)o=this._absolutePosList[r],t=this.target.getPitInfoByIndex(r),o.x=t.headComponent.x,o.y=t.headComponent.y;this.runNext()}else{var s=this.target.getHeadComponentByRole(UserManager.userInfo.roleId);s&&this.target.showDownEffect(s.playerGroup)}},t.prototype.resizeHandler=function(e){for(var t,n=GamblingPanelSetting.MinPitIndex;n<=GamblingManager.maxSeats;n++)t=this.target.pitList[n-1],this.setPos(t);this.target.refreshButtonPos()},t.prototype.runNext=function(){if(!this.isDisabled){var e,t,n;this._nowRunIndex++;for(var i=GamblingPanelSetting.MinPitIndex;i<=GamblingManager.maxSeats;i++)n=this.target.pitList[i-1],t=this._isClockwise?GamblingPanelSetting.getNextIndex(n.index,this._nowRunIndex):GamblingPanelSetting.getPreIndex(n.index,this._nowRunIndex),e=this._absolutePosList[t],this.clearHeadCptReleative(n.headComponent),i==GamblingManager.maxSeats?n.headComponent.turnAnim.run(e.x,e.y,this.tryRunNext,this):n.headComponent.turnAnim.run(e.x,e.y,null,null),n.headComponent.posIndex=t}},t.prototype.tryRunNext=function(){if(!this.isDisabled)if(this._nowRunIndex>=this._offset){for(var e=void 0,t=GamblingPanelSetting.MinPitIndex;t<=GamblingManager.maxSeats;t++)e=this.target.pitList[t-1],this._isClockwise?e.index=GamblingPanelSetting.getNextIndex(e.index,this._offset):e.index=GamblingPanelSetting.getPreIndex(e.index,this._offset),e.headComponent.refreshChipsShow(e.index,GamblingManager.maxSeats),e.headComponent.turnAnim.callBack=null;this.target.setPit();for(var t=GamblingPanelSetting.MinPitIndex;t<=GamblingManager.maxSeats;t++)e=this.target.pitList[t-1],this.setPos(e);var n=this.target.getHeadComponentByRole(UserManager.userInfo.roleId);n&&this.target.showDownEffect(n.playerGroup);for(var i=0,a=this.target.pitList;i<a.length;i++){var o=a[i];o.headComponent.showGroupAuto(!1)}this.target.refreshButtonPos()}else this.runNext()},t.prototype.clearHeadCptReleative=function(e){e.top=e.bottom=e.horizontalCenter=e.verticalCenter=void 0},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelPitTurnSupport.prototype,"GamblingPanelPitTurnSupport");var GamblingPanelRoundOverSupport=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._runIndex=0,t._isNextRoundStart=!1,t._isClientOver=!1,t._rebuyAddonTimeGap=4e3,t._isChecedkRebuyAddon=!1,t}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this._isNextRoundStart=!1,this._isClientOver=!1,this._isChecedkRebuyAddon=!1},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),GamblingManager.NextRoundStartEvent.addListener(this.nextRoundStartHandler,this),GamblingManager.RoundOverEvent.addListener(this.roundOverHandler,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),qin.Tick.RemoveTimeoutInvoke(this.reqNextRoundStart,this),qin.Tick.RemoveTimeoutInvoke(this.delayRunNext,this),qin.Tick.RemoveTimeoutInvoke(this.delayRoundOver,this),qin.Tick.RemoveTimeoutInvoke(this.checkRebuyAddon,this),GamblingManager.NextRoundStartEvent.removeListener(this.nextRoundStartHandler,this),GamblingManager.RoundOverEvent.removeListener(this.roundOverHandler,this)},t.prototype.roundOverHandler=function(){qin.Tick.AddTimeoutInvoke(this.checkRebuyAddon,this._rebuyAddonTimeGap,this),this._isClientOver=!1,this._isNextRoundStart=!1},t.prototype.checkRebuyAddon=function(){GamblingUtil.isMtt&&0==this._isChecedkRebuyAddon&&(qin.Console.log("超时检查重构增购"),this._isChecedkRebuyAddon=!0,this.target.checkRebuyAddon())},t.prototype.nextRoundStartHandler=function(e){this._isNextRoundStart=!0,0==this._isClientOver&&(qin.Console.log("服务器推送下一局开始，执行清理!"),this.readyStart(),this._isClientOver=!0),this._isChecedkRebuyAddon=!1,this.target.waitNextRoundComponent.show(!1)},t.prototype.startRunRoundOverOper=function(){this.isDisabled||(qin.Console.log("开始跑结算筹码动画"),GamblingManager.roundOverInfo&&GamblingManager.roundOverInfo.potList&&(this.showAllCardType(),this._runIndex=0,this.runNext()))},t.prototype.runNext=function(){if(!this.isDisabled){if(!GamblingManager.roundOverInfo||!GamblingManager.roundOverInfo.potList)return GamblingManager.roundOverInfo||qin.Console.log("结算异常：结算信息空"),void(GamblingManager.roundOverInfo&&!GamblingManager.roundOverInfo.potList&&qin.Console.log("结算异常：结算底池空"));var e,t,n=new Array,i=GamblingManager.roundOverInfo.potList[this._runIndex];if(i&&i.roleId)for(var a=0,o=i.roleId;a<o.length;a++){var r=o[a];t=GamblingManager.getPlayerInfo(r),t&&(e=this.target.getHeadComponent(t.pos)),e||(e=this.target.getHeadComponentByLastRoleId(r)),e&&(InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.publicCard&&GamblingManager.roomInfo.publicCard.length>=GamblingManager.MaxBoardNum?this.showCardMaskImg(r,e):GamblingUtil.isWin(r)&&(r==UserManager.userInfo.roleId&&SoundManager.playEffect(MusicAction.win),e.chipsLabel.text="赢",e.showCardTypeBgFilter(2),e.showWinEffect()),n.push(new egret.Point(e.x+e.headIcon.maxWidth/2-15,e.y+e.playerGroup.y+e.headIcon.maxHeight/2-15)))}var s=this.target.potChipsGroup.dataList;if(s&&s.length>0&&n.length>0){var l=void 0,h=void 0,d=this.target.chipsBgGroup.numChildren-1-this._runIndex;0>d&&(d=0),l=this.target.chipsBgGroup.getChildAt(d),h=this.target.chipsNumGroup.getChildAt(d);for(var c=0,p=n;c<p.length;c++){var u=p[c];u.x-=this.target.potChipsGroup.x+l.x,u.y-=this.target.potChipsGroup.y+l.y}l.winChipsTween(n,this.runOver,this),h.winChipsTween(n,void 0,void 0)}else this.runOver()}},t.prototype.runOver=function(){if(!this.isDisabled){if(GamblingManager.roundOverInfo){var e=GamblingManager.roundOverInfo.potList[this._runIndex];if(e){var t=e.roleId;t||(t=[-1]);for(var n=Math.floor(e.num/t.length),i=void 0,a=void 0,o=0;o<t.length;o++)a=t[o],i=-1==a?this.target.getHeadComponent(1):this.target.getHeadComponentByRole(t[o]),i||(i=this.target.getHeadComponentByLastRoleId(t[o])),i&&(i.runWinChipsAnim(n),i.bindData&&i.bindData.bankRoll>0&&qin.Console.log("结算结束显示筹码"+i.bindData.bankRoll+i.bindData.userInfo.name))}}qin.Tick.AddTimeoutInvoke(this.delayRunNext,1500,this)}},t.prototype.delayRunNext=function(){GamblingManager.roundOverInfo&&(this._runIndex++,this._runIndex<GamblingManager.roundOverInfo.potList.length?this.runNext():(this.target.waitNextRoundComponent.show(!0),qin.Tick.AddTimeoutInvoke(this.delayRoundOver,1200,this)))},t.prototype.delayRoundOver=function(e){0==this._isNextRoundStart&&(qin.Console.log("客户端请求下一局!执行清理"),this._isClientOver=!0,this.readyStart(),qin.Tick.AddTimeoutInvoke(this.reqNextRoundStart,1e3,this))},t.prototype.readyStart=function(){this.nextStartClear();for(var e=0,t=this.target.pitList;e<t.length;e++){var n=t[e];n.headComponent.showCardFace(!1),n.headComponent.showBankRoll(),n.headComponent.showHaveCardImg(!1),n.headComponent.bindData&&n.headComponent.bindData.state==PlayerState.WaitNext&&GamblingUtil.isMtt?n.headComponent.changeState(GamblingHeadStateType.WaitNext):n.headComponent.changeState(GamblingHeadStateType.RoundStart)}GamblingUtil.isMtt?0==this._isChecedkRebuyAddon&&(this._isChecedkRebuyAddon=!0,this.target.checkRebuyAddon()):GamblingManager.checkBust()},t.prototype.reqNextRoundStart=function(){this.isDisabled||GamblingManager.reqNextRoundStart()},t.prototype.nextStartClear=function(){this.target.clearPotChips();for(var e=this.target.cardList.length,t=0;e>t;t++)this.target.cardList[t].visible=!1;this.target.cardTypeGroup.visible=!1,this.target.potLabel.text=qin.MathUtil.formatNum(0)},t.prototype.showCardMaskImg=function(e,t){var n;if(GamblingManager.roundOverInfo.handCardList)for(var i=0,a=GamblingManager.roundOverInfo.handCardList;i<a.length;i++){var o=a[i];if(o.roleId==e){qin.Console.log("显示牌型!"),n=CardTypeMatchUtil.matchCardInRoom(o.cardList),GamblingUtil.isWin(o.roleId)&&t.showWinEffect();break}}if(!n)return void(GamblingUtil.isWin(UserManager.userInfo.roleId)&&(SoundManager.playEffect(MusicAction.win),t.showWinEffect()));GamblingUtil.isWin(UserManager.userInfo.roleId)&&SoundManager.playWinSoundEffect(CardTypeMatchUtil.cardType);var r,s=this.target.cardList.length;t.cardFace1.showMask(!0),t.cardFace2.showMask(!0);for(var l=0;s>l;l++)r=this.target.cardList[l],r.visible&&(r.showMask(!0),r.showMaxFlag(!1));for(var h=0,d=CardTypeMatchUtil.resultList;h<d.length;h++){for(var c=d[h],l=0;s>l;l++)if(r=this.target.cardList[l],r.visible&&r.bindData&&1==c.card[2]&&c.card[0]==r.bindData.card[0]&&c.card[1]==r.bindData.card[1]){r.showMask(!1);break}1==c.card[2]&&t.cardFace1.bindData&&c.card[0]==t.cardFace1.bindData.card[0]&&c.card[1]==t.cardFace1.bindData.card[1]&&t.cardFace1.showMask(!1),1==c.card[2]&&t.cardFace2.bindData&&c.card[0]==t.cardFace2.bindData.card[0]&&c.card[1]==t.cardFace2.bindData.card[1]&&t.cardFace2.showMask(!1)}},t.prototype.showAllCardType=function(){if(GamblingManager.roundOverInfo.handCardList)for(var e=void 0,t=0,n=GamblingManager.roundOverInfo.handCardList;t<n.length;t++){var i=n[t];CardTypeMatchUtil.matchCardInRoom(i.cardList),e=this.target.getHeadComponentByRole(i.roleId),e?GamblingUtil.isWin(i.roleId)?(e.showCardTypeBgFilter(2),e.chipsLabel.text=CardTypeMatchUtil.getCardDes(CardTypeMatchUtil.cardType)):e.bindData&&e.bindData.state!=PlayerState.Fold&&(e.showCardTypeBgFilter(1),e.chipsLabel.text=CardTypeMatchUtil.getCardDes(CardTypeMatchUtil.cardType)):qin.Console.log("显示牌型失败！未找到roleid：",i.roleId,"的头像组件！")}},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelRoundOverSupport.prototype,"GamblingPanelRoundOverSupport");var GamblingPanelSetting=function(){function e(){}return e.getNextIndex=function(e,t){return void 0===t&&(t=1),e+=t,e>GamblingManager.maxSeats&&(e-=GamblingManager.maxSeats),e},e.getPreIndex=function(t,n){return void 0===n&&(n=1),t<GamblingManager.maxSeats?t-=n:t=0-n,0>=t&&(t+=GamblingManager.maxSeats),t<e.MinPitIndex&&(t=e.MinPitIndex),t>GamblingManager.maxSeats?t-GamblingManager.maxSeats:t},e.getOffset=function(e,t){var n=t-e;return 0>n?n+GamblingManager.maxSeats:n},Object.defineProperty(e,"centerNum",{get:function(){return InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.definition?Math.floor(GamblingManager.roomInfo.definition.seat/2)+1:0},enumerable:!0,configurable:!0}),e.getHeadPosList=function(){if(GamblingManager.roomInfo)switch(GamblingManager.maxSeats){case SeatMode.Three:return e.headPosList3;case SeatMode.Five:return e.headPosList5;case SeatMode.Six:return e.headPosList6;case SeatMode.Nine:return e.headPosList9}return null},Object.defineProperty(e,"buttonPosList",{get:function(){if(GamblingManager.roomInfo)switch(GamblingManager.maxSeats){case SeatMode.Five:return e.buttonPosList5;case SeatMode.Six:return e.buttonPosList6;case SeatMode.Nine:return e.buttonPosList9}return null},enumerable:!0,configurable:!0}),e.MinPitIndex=1,e.MaxPitIndex=9,e.handCardMatrix1=new egret.Matrix(1.502,-.285,.285,1.502,55,245),e.handCardMatrix2=new egret.Matrix(1.507,.259,-.259,1.507,98,260),e.boardCardMatrix=new egret.Matrix(1.23,0,0,1.23),e.FoldPosPoint=new egret.Point(360.5,601.5),e.FlopCardVerticalCenter=-57.5,e.BoardCardPoint=new egret.Point(-20,-183.5),e.buttonPosList9=[new egret.Point(0,0),new egret.Point(256,955),new egret.Point(139,740),new egret.Point(139,412),new egret.Point(139,208),new egret.Point(291,281),new egret.Point(400,281),new egret.Point(552,208),new egret.Point(552,412),new egret.Point(552,740)],e.buttonPosList6=[new egret.Point(0,0),new egret.Point(256,955),new egret.Point(139,742),new egret.Point(139,388),new egret.Point(256,281),new egret.Point(552,388),new egret.Point(552,742)],e.buttonPosList5=[new egret.Point(0,0),new egret.Point(256,955),new egret.Point(139,412),new egret.Point(291,281),new egret.Point(400,281),new egret.Point(552,412)],e.headTopBottomReleativePoint=new egret.Point(53,137),e.headPosList9=[new egret.Point(0,0),new egret.Point(0,137),new egret.Point(-303.5,179.5),new egret.Point(-303.5,-26.5),new egret.Point(-303.5,-304.5),new egret.Point(-126.5,53),new egret.Point(125.5,53),new egret.Point(302.5,-304.5),new egret.Point(302.5,-26.5),new egret.Point(302.5,179.5)],e.headPosList6=[new egret.Point(0,0),new egret.Point(0,137),new egret.Point(-303.5,394),new egret.Point(-303.5,-303.5),new egret.Point(0,53),new egret.Point(302.5,-303.5),new egret.Point(302.5,394)],e.headPosList5=[new egret.Point(0,0),new egret.Point(0,137),new egret.Point(-303.5,394),new egret.Point(-303.5,-303.5),new egret.Point(302.5,-303.5),new egret.Point(302.5,394)],e.headPosList3=[new egret.Point(0,0),new egret.Point(0,137),new egret.Point(-303.5,700),new egret.Point(302.5,700)],e.boardPosList=[new egret.Point(-179,0),new egret.Point(-78,0),new egret.Point(23,0),new egret.Point(124,0),new egret.Point(225,0)],e}();__reflect(GamblingPanelSetting.prototype,"GamblingPanelSetting");var GamblingPanelSitDownAndAddCoinSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this)},t.prototype.onEnable=function(){e.prototype.onEnable.call(this);for(var t=0,n=this.target.pitList;t<n.length;t++){var i=n[t];i.headComponent.headIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pitTouchHandler,this),i.headComponent.emptyGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pitTouchHandler,this)}this.target.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyTapHandler,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this);for(var t=0,n=this.target.pitList;t<n.length;t++){var i=n[t];i.headComponent.headIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.pitTouchHandler,this),i.headComponent.emptyGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.pitTouchHandler,this)}this.target.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buyTapHandler,this)},t.prototype.pitTouchHandler=function(e){if(!this.target.moveTouchEnd(e)){SoundManager.playEffect(MusicAction.buttonClick);var t;e.currentTarget.parent instanceof GamblingHeadComponent?t=e.currentTarget.parent:e.currentTarget.parent.parent instanceof GamblingHeadComponent&&(t=e.currentTarget.parent.parent);for(var n=0,i=this.target.pitList;n<i.length;n++){var a=i[n];if(a.headComponent==t&&GamblingManager.roomInfo){if(null==t.bindData)if(GamblingManager.self)GamblingManager.roomInfo.gamblingType!=GamblingType.Championship&&UIManager.showPanel(UIModuleName.InviteFriendPanel);else{var o=this.target.getPlayerPos(a),r=0;r=void 0==GamblingManager.roomInfo.definition.bBuyin?Number.MAX_VALUE:GamblingManager.roomInfo.definition.bBuyin;var s=Math.min(r,UserManager.userInfo.gold),l=GamblingManager.roomInfo.definition.sBuyin,h=GamblingManager.roomInfo.bBlind;s=Math.max(s,l);var d=UserManager.userInfo.gold<l;UIManager.showPanel(UIModuleName.BuyAccessGamePanel,{isGoldInsufficient:d,bbBuyIn:r,isAddCoin:!1,maxNum:s,minNum:l,bBlind:h,pos:o})}else t.bindData.roleId!=UserManager.userInfo.roleId?UserManager.reqShowOtherUserInfoPanel(t.bindData.roleId):UIManager.showPanel(UIModuleName.UserInfoPanel);break}}}},t.prototype.buyTapHandler=function(e){var t=GamblingType.Common;if(GamblingManager.roomInfo&&(t=GamblingManager.roomInfo.gamblingType),GamblingManager.self&&t!=GamblingType.Championship){var n=GamblingManager.self.bankRoll+UserManager.userInfo.gold;n=Math.min(GamblingManager.roomInfo.definition.bBuyin,n);var i=GamblingManager.self.bankRoll,a=GamblingManager.roomInfo.bBlind;0==n&&(n=GamblingManager.roomInfo.definition.bBuyin),0==i&&(i=GamblingManager.roomInfo.definition.sBuyin),i>=n&&(i=n),UIManager.showPanel(UIModuleName.BuyAccessGamePanel,{isAddCoin:!0,bbBuyIn:GamblingManager.roomInfo.definition.bBuyin,maxNum:n,minNum:i,bBlind:a})}else UIManager.showPanel(UIModuleName.ShoppingPanel,{prevPanelName:UIModuleName.GamblingPanel})},t.prototype.clear=function(){e.prototype.clear.call(this)},t}(BaseGamblingPanelSupport);__reflect(GamblingPanelSitDownAndAddCoinSupport.prototype,"GamblingPanelSitDownAndAddCoinSupport");var GamblingPitInfo=function(){function e(){}return e}();__reflect(GamblingPitInfo.prototype,"GamblingPitInfo");var GamblingSupportCreater=function(){function e(e){this._context=e}return Object.defineProperty(e.prototype,"pitDataSupport",{get:function(){return this._pitDataSupport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moveSpt",{get:function(){return this._moveSpt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonPosSpt",{get:function(){return this._buttonPosSpt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionSpt",{get:function(){return this._actionSpt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flopCardSpt",{get:function(){return this._flopCardSpt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"infoRefreshSpt",{get:function(){return this._infoRefreshSpt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oneLoopOverSpt",{get:function(){return this._oneLoopOverSpt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pitTurnSpt",{get:function(){return this._pitTurnSpt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sitDownAndAddCoin",{get:function(){return this._sitDownAndAddCoin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"funcSupport",{get:function(){return this._funcSupport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roundOverSpt",{get:function(){return this._roundOverSpt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"championshipWaitSpt",{get:function(){return this._championshipWaitSpt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"championshipSupport",{get:function(){return this._championshipSupport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guidePlayWaySupport",{get:function(){return this._guidePlayWaySupport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guideSpt",{get:function(){return this._guideSpt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportNormalList",{get:function(){return this._supportNomalList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportGuideList",{get:function(){return this._supportGuideList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportGuidePlayWayList",{get:function(){return this._supportGuidePlayWayList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportMttWaitList",{get:function(){return this._supportMttWaitList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportMttList",{get:function(){return this._supportMttList},enumerable:!0,configurable:!0}),e.prototype.createNormal=function(){this._supportNomalList||(this.createMoveFunc(),this._pitDataSupport=new GamblingPanelPitDataSupport(this._context),this._buttonPosSpt=new GamblingPanelButtonPosSupport(this._context),this._actionSpt=new GamblingPanelActionSupport(this._context),this._flopCardSpt=new GamblingPanelFlopCardSupport(this._context),this._infoRefreshSpt=new GamblingPanelInfoRefreshSupport(this._context),this._oneLoopOverSpt=new GamblingPanelOneLoopOverSupport(this._context),this._pitTurnSpt=new GamblingPanelPitTurnSupport(this._context),this._sitDownAndAddCoin=new GamblingPanelSitDownAndAddCoinSupport(this._context),this._roundOverSpt=new GamblingPanelRoundOverSupport(this._context),this._oneLoopOverSpt.onLoopOverCallback=qin.Delegate.getOut(this._roundOverSpt.startRunRoundOverOper,this._roundOverSpt),this._oneLoopOverSpt.onBoardCardApearComplete=qin.Delegate.getOut(this._actionSpt.setBoardCardOverFlag,this._actionSpt),this._supportNomalList=new Array,this._supportNomalList.push(this._actionSpt,this._flopCardSpt,this._infoRefreshSpt,this._moveSpt,this._oneLoopOverSpt,this._pitTurnSpt,this._pitDataSupport,this._sitDownAndAddCoin,this._funcSupport,this._buttonPosSpt,this._roundOverSpt))},e.prototype.createMttWait=function(){this._supportMttWaitList||(this._supportMttWaitList=new Array,this.createMoveFunc(),this._championshipWaitSpt=new ChampionshipWaitSupport(this._context),this._supportMttWaitList.push(this._moveSpt,this._funcSupport,this._championshipWaitSpt))},e.prototype.createMoveFunc=function(){this._moveSpt||(this._moveSpt=new GamblingPanelMoveSupport(this._context),this._funcSupport=new GamblingPanelFuncSupport(this._context))},e.prototype.createMtt=function(){this._supportMttList||(this.createNormal(),this._supportMttList=this._supportNomalList.concat(),this._championshipSupport=new ChampionshipSupport(this._context),this._supportMttList.push(this._championshipSupport))},e.prototype.createGuide=function(){this._supportGuideList||(this._supportGuideList=new Array,this.createNormal(),this._guideSpt=new GamblingPanelGuideSupport(this._context),this._supportGuideList.push(this._actionSpt,this._flopCardSpt,this._infoRefreshSpt,this._oneLoopOverSpt,this._pitTurnSpt,this._pitDataSupport,this._buttonPosSpt,this._roundOverSpt,this._guideSpt))},e.prototype.createGuidePlayWay=function(){this._supportGuidePlayWayList||(this._supportGuidePlayWayList=new Array,this.createNormal(),this._guidePlayWaySupport=new GamblingPanelGuidePlayWaySupport(this._context),this._supportGuidePlayWayList.push(this._actionSpt,this._flopCardSpt,this._infoRefreshSpt,this._oneLoopOverSpt,this._pitTurnSpt,this._pitDataSupport,this._buttonPosSpt,this._guidePlayWaySupport))},e}();__reflect(GamblingSupportCreater.prototype,"GamblingSupportCreater");var GameEffectLogic=function(){function e(){}return e}();__reflect(GameEffectLogic.prototype,"GameEffectLogic");var ActionInfo=function(){function e(){}return e}();__reflect(ActionInfo.prototype,"ActionInfo");var TimeShowLogic=function(){function e(e){this.timeLabel=e,this.timeLabel.text=qin.StringConstants.Empty}return Object.defineProperty(e.prototype,"waitTime",{get:function(){return this._waitTime},set:function(e){this._waitTime=e,void 0==e?this._waitTimeGroup.visible=!1:this.refreshTime()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nowTotal",{get:function(){return this._nowTotal},set:function(e){this._nowTotal=e,this.refreshTime()},enumerable:!0,configurable:!0}),e.prototype.setWaitTimeGroup=function(e){this._waitTimeGroup=e},e.prototype.onEnable=function(){qin.Tick.AddSecondsInvoke(this.refreshTime,this)},e.prototype.onDisable=function(){qin.Tick.RemoveSecondsInvoke(this.refreshTime,this)},e.prototype.refreshTime=function(){void 0!=this.nowTotal?(this._offsetTime=Math.round(this.nowTotal-TimeManager.GetServerUtcTimestamp()),this._offsetTime>=0&&(this.timeLabel.text=qin.DateTimeUtil.formatCountdown(this._offsetTime))):this.timeLabel.text=qin.StringConstants.Empty,void 0!=this.waitTime&&0/0!=this.waitTime?(this._offsetTime=Math.round(this.waitTime-TimeManager.GetServerUtcTimestamp()),this._offsetTime>=0?this._waitTimeGroup.visible=!0:this._waitTimeGroup.visible=!1):this._waitTimeGroup.visible=!1},e}();__reflect(TimeShowLogic.prototype,"TimeShowLogic");var FourOfAKindProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfCardType(this,CardType.FourOfAKind)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(FourOfAKindProcess.prototype,"FourOfAKindProcess");var GamblingPanelGuidePlayWayState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this.createComponent(GamblingGuidePlayWayComponent,UIComponentSkinName.GamblingGuidePlayWayComponent,SlotLayerType.Up)},t.prototype.run=function(){e.prototype.run.call(this),this.context.anteGroup.verticalCenter=86,this.context.usualBlindGroup.verticalCenter=86,this.context.potChipsGroup.verticalCenter=-350,this.addChild(this.context.guessCardBtn),this.addChild(this.context.guessCorrectlyGroup),this.addChild(this.context.achieveBtn),this.addChild(this.context.onlineAwardBtn),this.addChild(this.context.logoBg),this.addChild(this.context.chatBtn),this.addChild(this.context.buyBtn),this.addChild(this.context.currencyGroup),this.addChild(this.context.ordinaryRoomGroup),this.addChild(this.context.reviewBtn),this.removeChild(this.context.cardTypeGroup),this.removeChild(this.context.waitNextImg),this.removeChild(this.context.actionGroup)},t.prototype.showElements=function(){e.prototype.showElements.call(this),this.context.slotContainerDown.horizontalCenter=this.context.slotContainerDown.verticalCenter=0,this.context.slotContainerUp.horizontalCenter=this.context.slotContainerUp.verticalCenter=0},t}(BaseGamblingPanelState);__reflect(GamblingPanelGuidePlayWayState.prototype,"GamblingPanelGuidePlayWayState");var GamblingPanelGuideState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this.createComponent(GamblingGuideComponent,UIComponentSkinName.GamblingGuideComponent,SlotLayerType.Up)},t.prototype.run=function(){e.prototype.run.call(this),this.context.anteGroup.verticalCenter=86,this.context.usualBlindGroup.verticalCenter=86,this.context.potChipsGroup.verticalCenter=-290,this.addChild(this.context.logoBg),this.addChild(this.context.currencyGroup),this.addChild(this.context.ordinaryRoomGroup),this.addChild(this.context.actionGroup),this.context.tryAddChildActionGroup(),this.removeChild(this.context.guessCardBtn),this.removeChild(this.context.guessCorrectlyGroup),this.removeChild(this.context.achieveBtn),this.removeChild(this.context.onlineAwardBtn),this.removeChild(this.context.chatBtn),this.removeChild(this.context.buyBtn),this.removeChild(this.context.reviewBtn),this.removeChild(this.context.cardTypeGroup),this.removeChild(this.context.waitNextImg),this.removeChild(this.context.actionGroup.preActionGroup)
},t.prototype.showElements=function(){e.prototype.showElements.call(this),this.context.slotContainerDown.horizontalCenter=0,this.context.slotContainerDown.top=0,this.context.slotContainerUp.horizontalCenter=0,this.context.slotContainerUp.top=0},t}(BaseGamblingPanelState);__reflect(GamblingPanelGuideState.prototype,"GamblingPanelGuideState");var GamblingPanelMttState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this.createComponent(GamblingChampionshipComponent,UIComponentSkinName.GamblingChampionshipComponent,SlotLayerType.Down),this.createComponent(GamblingChampionshipBlindComponent,UIComponentSkinName.GamblingChampionshipBlindComponent,SlotLayerType.Up)},t.prototype.run=function(){e.prototype.run.call(this),this.context.anteGroup.verticalCenter=110,this.context.usualBlindGroup.verticalCenter=110,this.context.potChipsGroup.verticalCenter=-290,this.addChild(this.context.chatBtn),this.addChild(this.context.buyBtn),this.addChild(this.context.currencyGroup),this.addChild(this.context.reviewBtn),this.addChild(this.context.cardTypeGroup),this.addChild(this.context.waitNextImg),this.context.tryAddChildActionGroup(),this.removeChild(this.context.logoBg),this.removeChild(this.context.guessCardBtn),this.removeChild(this.context.guessCorrectlyGroup),this.removeChild(this.context.achieveBtn),this.removeChild(this.context.onlineAwardBtn)},t.prototype.showElements=function(){e.prototype.showElements.call(this),this.context.slotContainerUp.horizontalCenter=this.context.slotContainerUp.verticalCenter=0,this.context.slotContainerDown.horizontalCenter=this.context.slotContainerDown.verticalCenter=0},t}(BaseGamblingPanelState);__reflect(GamblingPanelMttState.prototype,"GamblingPanelMttState");var GamblingPanelMttWaitState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAwake=function(){e.prototype.onAwake.call(this),this.createComponent(GamblingChampionshipWaitComponent,UIComponentSkinName.GamblingChampionshipWaitComponent,SlotLayerType.Down)},t.prototype.run=function(){e.prototype.run.call(this),this.context.anteGroup.verticalCenter=110,this.context.usualBlindGroup.verticalCenter=110,this.context.potChipsGroup.verticalCenter=-290,this.context.sptCreater.championshipWaitSpt.setWaitInfo(GamblingManager.matchRoomInfo),this.removeChild(this.context.cardTypeGroup),this.removeChild(this.context.waitNextImg),this.removeChild(this.context.chatBtn),this.removeChild(this.context.buyBtn),this.removeChild(this.context.currencyGroup),this.removeChild(this.context.logoBg),this.removeChild(this.context.guessCardBtn),this.removeChild(this.context.guessCorrectlyGroup),this.removeChild(this.context.achieveBtn),this.removeChild(this.context.onlineAwardBtn),this.removeChild(this.context.reviewBtn)},t.prototype.showElements=function(){e.prototype.showElements.call(this),this.context.slotContainerUp.horizontalCenter=this.context.slotContainerUp.verticalCenter=0,this.context.slotContainerDown.horizontalCenter=this.context.slotContainerDown.verticalCenter=0},t}(BaseGamblingPanelState);__reflect(GamblingPanelMttWaitState.prototype,"GamblingPanelMttWaitState");var GamblingPanelNormalState=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){for(var e,t=this.supportList.length,n=0;t>n;n++)e=this.supportList[n],e.initialize(),this.context.panelData&&e instanceof GamblingPanelMoveSupport&&e.toRight(!1)},t.prototype.run=function(){e.prototype.run.call(this),this.context.anteGroup.verticalCenter=86,this.context.usualBlindGroup.verticalCenter=86,this.context.potChipsGroup.verticalCenter=-290,this.addChild(this.context.guessCardBtn),this.addChild(this.context.guessCorrectlyGroup),InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.definition.type==PlayingFieldType.Personal?(this.removeChild(this.context.guessCardBtn),this.removeChild(this.context.guessCorrectlyGroup),this.removeChild(this.context.achieveBtn),this.removeChild(this.context.onlineAwardBtn)):(this.addChild(this.context.guessCardBtn),this.addChild(this.context.guessCorrectlyGroup),this.addChild(this.context.achieveBtn),this.addChild(this.context.onlineAwardBtn)),InfoUtil.checkAvailable(GamblingManager.roomInfo)&&GamblingManager.roomInfo.definition.type==PlayingFieldType.Primary&&(this.removeChild(this.context.guessCardBtn),this.removeChild(this.context.guessCorrectlyGroup)),this.addChild(this.context.logoBg),this.addChild(this.context.chatBtn),this.addChild(this.context.reviewBtn),this.addChild(this.context.buyBtn),this.addChild(this.context.currencyGroup),this.addChild(this.context.ordinaryRoomGroup),this.addChild(this.context.cardTypeGroup),this.addChild(this.context.waitNextImg),this.context.tryAddChildActionGroup()},t}(BaseGamblingPanelState);__reflect(GamblingPanelNormalState.prototype,"GamblingPanelNormalState");var FriendProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),AchieveProcessManager.addProcessListener(this.type,this.onProcessUpdate,this)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),FriendManager.friendList&&FriendManager.friendList.length>this.process&&e.prototype.init.call(this,UserManager.userInfo.friendNum)},t.prototype.destroy=function(){AchieveProcessManager.removeProcessListener(this.type,this.onProcessUpdate,this),e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(FriendProcess.prototype,"FriendProcess");var GameHallButtonAnime=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._time=0,t._timeSpan=3,t}return __extends(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.setButtonAnime(this.target.pokerBtn),this.setButtonAnime(this.target.matchBtn),this.setButtonAnime(this.target.hundredBattle),this.setLiuGuang(this.target.addGoldGroup)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),qin.Tick.RemoveSecondsInvoke(this.playLiuguang,this),UIUtil.stopBoneAnime(BoneAnimeName.HallLiuGuang)},t.prototype.setLiuGuang=function(e){this._time=0,qin.Tick.AddSecondsInvoke(this.playLiuguang,this)},t.prototype.playLiuguang=function(){return this._time>this._timeSpan?(UIUtil.playBoneAnime(BoneAnimeName.HallLiuGuang,this.target.addGoldGroup,1,.66),void(this._time=0)):void this._time++},t.prototype.setButtonAnime=function(e){switch(this.removeButtonAnime(e),e){case this.target.pokerBtn:this.setStarAnime(e.star0,0),this.setStarAnime(e.star1,5e3),this.setHighlightAnime(e.highLight,4e3),this.setButtonImgAnime(e.animeImg,3e3);break;case this.target.hundredBattle:this.setStarAnime(e.star0,2e3),this.setStarAnime(e.star1,7e3),this.setHighlightAnime(e.highLight,8e3),this.setButtonImgAnime(e.animeImg,6e3);break;case this.target.matchBtn:this.setStarAnime(e.star0,4e3),this.setStarAnime(e.star1,1e3),this.setHighlightAnime(e.highLight,0),this.setButtonImgAnime(e.animeImg,9e3)}},t.prototype.setStarAnime=function(e,t){egret.Tween.get(e,{loop:!0}).set({scaleX:.5,scaleY:.5,rotation:0}).wait(t).to({scaleX:1.5,scaleY:1.5,rotation:180},2e3).to({scaleX:.5,scaleY:.5,rotation:360},2e3).wait(8e3-t)},t.prototype.setHighlightAnime=function(e,t){egret.Tween.get(e,{loop:!0}).set({alpha:0,rotation:30}).wait(t).to({alpha:1,rotation:90},500).to({alpha:0,rotation:180},500).wait(12e3-t)},t.prototype.setButtonImgAnime=function(e,t){egret.Tween.get(e,{loop:!0}).set({alpha:0,scaleX:1,scaleY:1}).wait(t).to({alpha:1,scaleX:1,scaleY:1},200).to({alpha:0,scaleX:1.1,scaleY:1.1},1e3).wait(1e4-t)},t.prototype.removeButtonAnime=function(e){for(var t=0;4>t;t++)e["star"+t]&&egret.Tween.removeTweens(e["star"+t]);egret.Tween.removeTweens(e.highLight),egret.Tween.removeTweens(e.animeImg)},t}(BaseGameHallAnime);__reflect(GameHallButtonAnime.prototype,"GameHallButtonAnime");var GameHallPanelAnime=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isShow=!1,t}return __extends(t,e),t.prototype.onEnable=function(){this.setEnterAnime()},t.prototype.onDisable=function(){this.setOutAnime()},t.prototype.setEnterAnime=function(){this.removeEnterAnime(),this.target.userinfoGroup.top=-100,egret.Tween.get(this.target.userinfoGroup).to({top:0},600,egret.Ease.backOut),this.target.rightMenu.right=-113,egret.Tween.get(this.target.rightMenu).to({right:0},600,egret.Ease.backOut),this.target.ranking.left=-86,egret.Tween.get(this.target.ranking).to({left:0},600,egret.Ease.backOut),this.target.gameButton.bottom=-250,egret.Tween.get(this.target.gameButton).to({bottom:210-(1295-this.target.panelBottom.height)/1280*210},800,egret.Ease.backOut),this.target.bottomButton.bottom=-150,egret.Tween.get(this.target.bottomButton).to({bottom:0},600,egret.Ease.backOut),this.target.kanbanImg.alpha=0,egret.Tween.get(this.target.kanbanImg).to({alpha:1},300).call(this.onEnterAnmComplete,this)},t.prototype.setOutAnime=function(){this.removeEnterAnime(),this.target.userinfoGroup.top=0,egret.Tween.get(this.target.userinfoGroup).to({top:-100},600),this.target.rightMenu.right=0,egret.Tween.get(this.target.rightMenu).to({right:-113},600),this.target.ranking.left=0,egret.Tween.get(this.target.ranking).to({left:-86},600),this.target.gameButton.bottom=210,egret.Tween.get(this.target.gameButton).to({bottom:-250},800),this.target.bottomButton.bottom=0,egret.Tween.get(this.target.bottomButton).to({bottom:-150},600),this.target.kanbanImg.alpha=1,egret.Tween.get(this.target.kanbanImg).to({alpha:0},300).call(this.onCloseAnmComplete,this)},t.prototype.removeEnterAnime=function(){egret.Tween.removeTweens(this.target.userinfoGroup),egret.Tween.removeTweens(this.target.rightMenu),egret.Tween.removeTweens(this.target.ranking),egret.Tween.removeTweens(this.target.gameButton),egret.Tween.removeTweens(this.target.bottomButton),egret.Tween.removeTweens(this.target.kanbanImg)},t.prototype.onEnterAnmComplete=function(){if(!GuideExecutor.isOnGuide){var e=ActivityManager.getShowNoticeList();UserManager.isFirstLoginToday&&!this.isShow&&(this.isShow=!0,0==e.length?ActivityManager.signInHandler.isSignToday()||JumpUtil.JumpToSignIn(!0):JumpUtil.JumpToNoticePanel(e))}},t.prototype.onCloseAnmComplete=function(){UIManager.closePanel(this.target)},t.prototype.setMoreEnterAnime=function(){this.removeMoreAnime(),this.target.moreGroup.visible=!0,this.target.moreGroup.alpha=0,this.target.moreGroup.bottom=0,egret.Tween.get(this.target.moreGroup).to({alpha:1,bottom:72},200,egret.Ease.cubicOut)},t.prototype.setMoreOutAnime=function(){var e=this;this.removeMoreAnime(),this.target.moreGroup.alpha=1,this.target.moreGroup.bottom=72,egret.Tween.get(this.target.moreGroup).to({alpha:0,bottom:0},200,egret.Ease.cubicOut).call(function(){e.target.moreGroup.visible=!1})},t.prototype.removeMoreAnime=function(){egret.Tween.removeTweens(this.target.moreGroup)},t.prototype.setRankEnterAnime=function(e){e==UIModuleName.RankPanel&&(this.removeRankAnime(),this.target.ranking.left=-86,egret.Tween.get(this.target.ranking).to({left:0},300,egret.Ease.backOut))},t.prototype.setRankOutAnime=function(){this.removeRankAnime(),this.target.ranking.left=0,egret.Tween.get(this.target.ranking).to({left:-86},300,egret.Ease.backOut)},t.prototype.removeRankAnime=function(){egret.Tween.removeTweens(this.target.ranking)},t}(BaseGameHallAnime);__reflect(GameHallPanelAnime.prototype,"GameHallPanelAnime");var FullhouseProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),AchieveProcessManager.onWinOfCardType(this,CardType.Fullhouse)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(FullhouseProcess.prototype,"FullhouseProcess");var HundredWarCardsAnimationSupport=function(){function e(e){this.context=e}return e.prototype.clear=function(){this._actionList&&this._actionList.foreach(this.clearAnimation,this)},e.prototype.clearAnimation=function(e,t){t.clear()},e.prototype.runThanTheCardAnim=function(e){for(var t=0;t<e.length;t++)this.startRunThanTheCardAnim(e[t],this.context["card"+t],t+1)},e.prototype.startRunThanTheCardAnim=function(e,t,n){var i=this.getAnimation(AnimationType.CardFaceMoveToPoint,t,n);i.nextAnimation=this.getAnimation(AnimationType.CardFaceTurnToFace,t,n),i.nextAnimation.scale=.7;var a=0;a=1==n?e.x+15:e.x-15,i.run(e,a)},e.prototype.getAnimation=function(e,t,n){this._actionList||(this._actionList=new qin.Dictionary);var i=e.toString()+"_"+n.toString();if(!this._actionList.containsKey(i)){var a=AnimationFactory.getCardFaceAnimation(e);return a.setTarget(t),this._actionList.add(i,a),a}return this._actionList.getValue(i)},e}();__reflect(HundredWarCardsAnimationSupport.prototype,"HundredWarCardsAnimationSupport");var HundredWarCardsInfo=function(){function e(){}return e}();__reflect(HundredWarCardsInfo.prototype,"HundredWarCardsInfo");var HundredWarPoolInfo=function(){function e(){}return e}();__reflect(HundredWarPoolInfo.prototype,"HundredWarPoolInfo");var HWFuncSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.setStandUpBtn()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.target.addEventListener(egret.TouchEvent.TOUCH_TAP,this.funcGroupClickHandler,this),HundredWarManager.onLeaveEvent.addListener(this.backToHallFromServer,this),HundredWarManager.onOutRoomEvent.addListener(this.outRoom,this),HundredWarManager.onPosChangeEvent.addListener(this.setStandUpBtn,this),HundredWarManager.onShowCardsAnimOverEvent.addListener(this.reqStandUp,this),HundredWarManager.onStandUpEvent.addListener(this.onStandUp,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),this.target.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.funcGroupClickHandler,this),HundredWarManager.onLeaveEvent.removeListener(this.backToHallFromServer,this),HundredWarManager.onOutRoomEvent.removeListener(this.outRoom,this),HundredWarManager.onPosChangeEvent.removeListener(this.setStandUpBtn,this),HundredWarManager.onShowCardsAnimOverEvent.removeListener(this.reqStandUp,this),HundredWarManager.onStandUpEvent.removeListener(this.onStandUp,this),qin.Tick.RemoveTimeoutInvoke(this.leaveRoom,this)},t.prototype.onStandUp=function(){this.isRoundOverStandUp&&(this.isRoundOverStandUp=!1)},t.prototype.setStandUpBtn=function(){HundredWarManager.self&&0!=HundredWarManager.self.pos?(this.target.funcGroup.addChildAt(this.target.standUpBtn,2),this.target.standUpBtn.visible=!0):this.target.standUpBtn.parent&&(this.target.addChildAt(this.target.standUpBtn,0),this.target.standUpBtn.visible=!1)},t.prototype.reqStandUp=function(){this.isRoundOverStandUp&&HundredWarManager.reqStandUp()},t.prototype.funcGroupClickHandler=function(e){switch(e.target){case this.target.chargeBtn:SoundManager.playEffect(MusicAction.buttonClick),UIManager.showPanel(UIModuleName.ShoppingPanel,{prevPanelName:UIModuleName.HundredWarRoomPanel,toRight:!0});break;case this.target.backToHallBtn:SoundManager.playEffect(MusicAction.buttonClick),this.backToHallBtnClickHandler(e);break;case this.target.standUpBtn:HundredWarManager.roomInfo.state==HWState.Bet&&HundredWarManager.getThisBetGold()?(AlertManager.showAlert("游戏正在进行中，本局结束后将自动站起！"),this.isRoundOverStandUp=!0):HundredWarManager.reqStandUp();break;case this.target.chatBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;JumpUtil.JumpToChatPanel();break;case this.target.achieveBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;JumpUtil.JumpToAchievementInHundredWar(AchieveShowPattern.HundredWarAll);break;case this.target.buyBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;UIManager.showPanel(UIModuleName.ShoppingPanel,{prevPanelName:UIModuleName.HundredWarRoomPanel,toRight:!1});break;case this.target.playersBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;JumpUtil.JumpToHundredWarNoSeatPlayer();break;case this.target.trendBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;JumpUtil.JumpToHundredWarTrend();break;case this.target.helpBtn:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;JumpUtil.JumpToHundredWarHelp();break;case this.target.potGroup:if(SoundManager.playEffect(MusicAction.buttonClick),this.target.moveTouchEnd(e))return;JumpUtil.JumpToHundredWarPoolInfo()}},t.prototype.backToHallFromServer=function(){this.isRoundOverStandUp=!1,this.target.leaveClear(),SceneManager.switcScene(SceneType.Hall,{action:SceneSwitchAction.RepleacePanel,panel:UIModuleName.HundredWarPanel})},t.prototype.backToHallBtnClickHandler=function(e){HundredWarManager.roomInfo?this.leaveRoom():this.backToHallFromServer()},t.prototype.outRoom=function(){this.backToHallFromServer()},t.prototype.leaveRoom=function(){HundredWarManager.reqLeave()},t.prototype.clear=function(){e.prototype.clear.call(this)},t}(BaseHWPanelSupport);__reflect(HWFuncSupport.prototype,"HWFuncSupport");var HWPanelActionSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.initBankerBtn(),HundredWarManager.panelHandler.reqHundredWarBankerList()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.target.goBankerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGoBankerClick,this),this.target.outBankerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOutBankerClick,this),HundredWarManager.onPosChangeEvent.addListener(this.setBankerBth,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),this.target.goBankerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGoBankerClick,this),this.target.outBankerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOutBankerClick,this),HundredWarManager.onPosChangeEvent.removeListener(this.setBankerBth,this)},t.prototype.setBankerBth=function(e){e.roleId&&0==e.pos&&(e.roleId==UserManager.userInfo.roleId?(this.target.outBankerBtn.visible=!0,this.target.goBankerBtn.visible=!1):(this.target.goBankerBtn.visible=!0,this.target.outBankerBtn.visible=!1))},t.prototype.initBankerBtn=function(){HundredWarManager.isBanker(UserManager.userInfo.roleId)?(this.target.outBankerBtn.visible=!0,this.target.goBankerBtn.visible=!1):(this.target.goBankerBtn.visible=!0,this.target.outBankerBtn.visible=!1)},t.prototype.onGoBankerClick=function(e){SoundManager.playEffect(MusicAction.buttonClick),JumpUtil.JumpToHundredWarBanker()},t.prototype.onOutBankerClick=function(e){SoundManager.playEffect(MusicAction.buttonClick),JumpUtil.JumpToHundredWarBanker()},t.prototype.showShopping=function(){JumpUtil.JumpToShopping(ShopGroupIndex.Gold,UIModuleName.HundredWarRoomPanel)},t}(BaseHWPanelSupport);__reflect(HWPanelActionSupport.prototype,"HWPanelActionSupport");var HWPanelBetPotSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),HundredWarManager.roomInfo&&HundredWarManager.roomInfo.state==HWState.Bet&&this.setBetPotInfo()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this);for(var t=0,n=this.target.betPotList;t<n.length;t++){var i=n[t];i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betPotHandler,this)}HundredWarManager.OnGetRoomInfoEvent.addListener(this.setBetPotInfo,this),HundredWarManager.onBetEvent.addListener(this.refreshBetPotInfo,this),HundredWarManager.onBetChangeEvent.addListener(this.showBetCoinAnim,this),HundredWarManager.onHideCardsEvent.addListener(this.resetPreRoundInfo,this),this.target.cardsComponentGroup.addEventListener(egret.Event.RESIZE,this.onResize,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this);for(var t=0,n=this.target.betPotList;t<n.length;t++){var i=n[t];i.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betPotHandler,this)}HundredWarManager.OnGetRoomInfoEvent.removeListener(this.setBetPotInfo,this),HundredWarManager.onBetEvent.removeListener(this.refreshBetPotInfo,this),HundredWarManager.onBetChangeEvent.removeListener(this.showBetCoinAnim,this),HundredWarManager.onHideCardsEvent.removeListener(this.resetPreRoundInfo,this),this.target.cardsComponentGroup.removeEventListener(egret.Event.RESIZE,this.onResize,this)},t.prototype.onResize=function(){this.target.hwAnim.refreshPos(this.target.betPotList,0,38),this.target.cardsAnim.refreshPos(this.target.cardsComponentList,48,58)},t.prototype.resetPreRoundInfo=function(){HundredWarManager.roundOverClear(),this.clearBetPot(),qin.ArrayUtil.Clear(this.posBetList)},t.prototype.leaveClear=function(){this.clearBetPot(),qin.ArrayUtil.Clear(this.posBetList)},t.prototype.clearBetPot=function(){for(var e=0,t=this.target.betPotList;e<t.length;e++){var n=t[e];n.reset()}},t.prototype.setBetPotInfo=function(){if(HundredWarManager.roomInfo&&HundredWarManager.roomInfo.betList&&HundredWarManager.roomInfo.betList.length>0)for(var e=0,t=HundredWarManager.roomInfo.betList;e<t.length;e++){var n=t[e],i=n.pos-1;n.bet&&(this.target.betPotList[i].allChipsLabel.text=qin.MathUtil.formatNum(n.bet)),n.myBet&&(this.target.betPotList[i].myChipsLabel.text=qin.MathUtil.formatNum(n.myBet),this.target.betPotList[i].myChipsImg.visible=!0)}},t.prototype.setPosBetInfo=function(e){this.posBetList||(this.posBetList=new Array);for(var t=!0,n=0;n<this.posBetList.length;n++)if(this.posBetList[n].pos==e.pos){for(var i=0;i<e.bet.length;i++)e.bet[i]>0&&(this.posBetList[n].bet[i]+=e.bet[i]);t=!1;break}t&&this.posBetList.push(e)},t.prototype.showBetCoinAnim=function(e){var t=e.bet;if(t&&t.length>0&&(this.target.hwAnim.setCoinToBets(this.target.playersBtn,t,-20,-5),this.setBetPotInfo()),e.posBetList&&e.posBetList.length>0)for(var n=void 0,i=void 0,a=new Array,o=0;o<e.posBetList.length;o++)if(i=e.posBetList[o],this.setPosBetInfo(i),HundredWarManager.self&&HundredWarManager.self.pos!=i.pos||!HundredWarManager.self){if(n=this.target.getPitInfoByIndex(i.pos),i.bet&&i.bet.length>0)for(var r=0;r<i.bet.length;r++)i.bet[r]>0&&a.push(r+1);this.target.hwAnim.setCoinToBets(n.headComponent,a,-25,-35)}},t.prototype.showSelfBetCoinAnim=function(e){e>=0&&this.target.hwAnim.setCoinToBets(this.target.selfGroup,[e])},t.prototype.refreshBetPotInfo=function(e){if(e){this.showSelfBetCoinAnim(e.pos);var t=void 0;t=this.target.getPoolInfoByIndex(e.pos),t&&(t.betPotComponent.myChipsLabel.text=qin.MathUtil.formatNum(HundredWarManager.getSelfPoolGoldByPos(e.pos)),t.betPotComponent.myChipsImg.visible=!0)}},t.prototype.betPotHandler=function(e){if(HundredWarManager.roomInfo&&this.target.stateSupport.isOnBet&&HundredWarManager.roomInfo.state==HWState.Bet&&!HundredWarManager.isBanker(UserManager.userInfo.roleId)){if(!this.target.sitDownAndAddCoin.isBetByOneFifth())return;if(this.isGtBankerOneFifth())return;var t=void 0;e.currentTarget instanceof HWBetPotComponent&&(t=e.currentTarget);for(var n=0,i=this.target.poolList;n<i.length;n++){var a=i[n];if(a.betPotComponent==t&&HundredWarManager.roomInfo){HundredWarManager.reqBet(a.pos,HundredWarManager.oneBetGold);break}}}},t.prototype.isGtBankerOneFifth=function(){for(var e=!1,t=0,n=0,i=HundredWarManager.roomInfo.playerList;n<i.length;n++){var a=i[n];if(0==a.pos&&!HundredWarManager.isSysBanker(a.roleId)&&(t=a.gold/5,HundredWarManager.getPlayerBetTotalNum()+HundredWarManager.oneBetGold>a.gold/5)){e=!0,UIManager.showFloatTips("当前下注金币数已达庄家金币上限");break}}return e},t}(BaseHWPanelSupport);__reflect(HWPanelBetPotSupport.prototype,"HWPanelBetPotSupport");var PosBetInfo=function(){function e(){}return e}();__reflect(PosBetInfo.prototype,"PosBetInfo");var HWPanelMoveSupport=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toNum=265,t._isMove=!1,t}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.target.dragGroup.touchEnabled=!0,this._isMove=!1,this._initMatrix||(this._initMatrix=this.target.gameGroup.matrix),this._moveHandler||(this._moveHandler=AnimationFactory.getDisplayObjectContainerAnimation(AnimationType.GamblingGameGroupMove),this._moveHandler.setTarget(this.target.gameGroup)),this._marqueePanel||this.getMarqueePanel(),this._lastStageX=-1,this._initMatrix.tx=0,this.target.gameGroup.matrix=this._initMatrix},t.prototype.move=function(){this._lastStageX=-1,this.target.gameGroup.x>0?this.toLeft():this.toRight()},t.prototype.onEnable=function(){this.target.optionsBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.optionsTapHandler,this),this.target.dragGroup.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.target.dragGroup.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.target.dragGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.target.dragGroup.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outSideRelease,this),UIManager.onPanelOpenEvent.addListener(this.onMarqueePanelOpen,this)},t.prototype.onDisable=function(){this.target.optionsBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.optionsTapHandler,this),this.target.dragGroup.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.target.dragGroup.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.target.dragGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.target.dragGroup.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outSideRelease,this),UIManager.onPanelOpenEvent.removeListener(this.onMarqueePanelOpen,this)},t.prototype.onMarqueePanelOpen=function(e){e!=UIModuleName.MarqueePanel||this._marqueePanel||this.getMarqueePanel()},t.prototype.getMarqueePanel=function(){this._marqueePanel=UIManager.panelDict.getValue(UIModuleName.MarqueePanel)},t.prototype.onTouchEnd=function(e,t){(t||e.target==this.target.dragGroup)&&(this._lastBeginStageX==e.stageX?this.toLeft():this.stop())},t.prototype.onTouchMove=function(e){if(e.target==this.target.dragGroup){var t=0;-1!=this._lastStageX?(t=e.stageX-this._lastStageX,this._lastStageX=e.stageX):this._lastStageX=e.stageX,this._initMatrix.tx+=t,this._initMatrix.tx>this.toNum&&(this._initMatrix.tx=this.toNum),this._initMatrix.tx<0&&(this._initMatrix.tx=0),this.target.gameGroup.matrix=this._initMatrix,this._isMove=!0,this._marqueePanel&&this._marqueePanel.onMoveing(this._initMatrix.tx)}},t.prototype.stop=function(){this._isMove&&(this._isMove=!1,this.target.gameGroup.x>this.toNum/2?this.toRight():this.toLeft())},t.prototype.toRight=function(e){void 0===e&&(e=!0),this._initMatrix.tx=this.toNum,e?this._moveHandler.run(this.toNum,null,null):this.target.gameGroup.x=this.toNum,this._marqueePanel&&this._marqueePanel.onMoveEnd({num:this.toNum,showAnimate:e}),this.clearPosFlag()},t.prototype.toLeft=function(){this._initMatrix.tx=0,this._marqueePanel&&this._marqueePanel.onMoveEnd({num:0,showAnimate:!0}),this._moveHandler.run(0,this.moveFinish,this),this.clearPosFlag()},t.prototype.moveFinish=function(){},t.prototype.optionsTapHandler=function(e){this.move()},t.prototype.onTouchBegin=function(e){this.target.gameGroup.x>0&&(this._lastBeginStageX=e.stageX)},t.prototype.outSideRelease=function(e){this.stop()},t.prototype.clearPosFlag=function(){this._lastBeginStageX=-1,this._lastStageX=-1},t}(BaseHWPanelSupport);__reflect(HWPanelMoveSupport.prototype,"HWPanelMoveSupport");var HWPanelPitDataSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this)},t.prototype.onEnable=function(){e.prototype.onEnable.call(this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this)},t.prototype.getPitInfo=function(e){for(var t,n=HWPanelSetting.MinPitIndex;n<HWPanelSetting.MaxPitNum;n++)if(t=this.target.pitList[n],t.headComponent.bindData&&t.headComponent.bindData.pos==e)return t;var i=this.getNextPlayerInfo(e);if(i){var a=this.getPitInfoByPlayerInfo(i);if(a){var o=GamblingPanelSetting.getPreIndex(a.pos,i.pos-e);return this.getPitInfoByIndex(o)}}return this.getPitInfoByIndex(e)},t.prototype.getPitInfoByIndex=function(e){for(var t=0,n=this.target.pitList;t<n.length;t++){var i=n[t];if(i.pos==e)return i}return null},t.prototype.getHeadComponent=function(e){var t=this.getPitInfo(e);return t?t.headComponent:null},t.prototype.getNextPlayerPitInfo=function(e){for(var t=GamblingPanelSetting.getNextIndex(e.pos),n=HWPanelSetting.MinPitIndex;n<HWPanelSetting.MaxPitNum;n++){var i=this.target.pitList[t-1];if(i.headComponent.bindData)return i;t=GamblingPanelSetting.getNextIndex(t)}return null},t.prototype.getNextPlayerInfo=function(e){for(var t=GamblingPanelSetting.getNextIndex(e),n=HWPanelSetting.MinPitIndex;n<HWPanelSetting.MaxPitNum;n++){var i=GamblingManager.getPlayerInfoByPos(t);if(i)return i;t=GamblingPanelSetting.getNextIndex(t)}return null},t.prototype.getPitInfoByPlayerInfo=function(e){for(var t,n=HWPanelSetting.MinPitIndex;n<HWPanelSetting.MaxPitNum;n++)if(t=this.target.pitList[n],t.headComponent.bindData&&t.headComponent.bindData.roleId==e.roleId)return t;return null},t}(BaseHWPanelSupport);__reflect(HWPanelPitDataSupport.prototype,"HWPanelPitDataSupport");var HWPanelPitSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.setPitInfo()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),HundredWarManager.onCardPushEvent.addListener(this.getUserInfo,this),UserManager.OnGetSimpleUserInfoEvent.addListener(this.refreshPitInfoByRoleId,this),HundredWarManager.onPosChangeEvent.addListener(this.playerLeave,this),HundredWarManager.OnGetPlayerInfoEvent.addListener(this.setPitInfo,this),HundredWarManager.onBetEvent.addListener(this.refreshSelfPitInfo,this),HundredWarManager.onShowCardsAnimOverEvent.addListener(this.refreshPitInfo,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),HundredWarManager.onCardPushEvent.removeListener(this.getUserInfo,this),UserManager.OnGetSimpleUserInfoEvent.removeListener(this.refreshPitInfoByRoleId,this),HundredWarManager.onPosChangeEvent.removeListener(this.playerLeave,this),HundredWarManager.OnGetPlayerInfoEvent.removeListener(this.setPitInfo,this),HundredWarManager.onBetEvent.removeListener(this.refreshSelfPitInfo,this),HundredWarManager.onShowCardsAnimOverEvent.removeListener(this.refreshPitInfo,this)},t.prototype.getUserInfo=function(){HundredWarManager.roomInfo.playerList&&HundredWarManager.roomInfo.playerList.length>0&&(this._isRefreshPlayerInfo=!0,HundredWarManager.startReqPlayerInfo(HundredWarManager.roomInfo.playerList))},t.prototype.refreshSelfPitInfo=function(){if(HundredWarManager.self&&0!=HundredWarManager.self.pos){HundredWarManager.self.gold=UserManager.userInfo.gold;var e=this.target.getPitInfoByIndex(HundredWarManager.self.pos);e.headComponent.init(HundredWarManager.self)}},t.prototype.refreshPitInfo=function(){if(HundredWarManager.roomInfo&&HundredWarManager.roomInfo.playerList)for(var e=void 0,t=0,n=HundredWarManager.roomInfo.playerList;t<n.length;t++){var i=n[t];i.roleId!=HundredWarManager.sysBanker.roleId||i.gold||i.copyValueFrom(HundredWarManager.sysBanker),e=this.target.getPitInfoByIndex(i.pos),e.headComponent.init(i)}this._isRefreshPlayerInfo=!1},t.prototype.setPitInfo=function(){for(var e,t,n=HWPanelSetting.MinPitIndex;n<HWPanelSetting.MaxPitNum;n++)e=HundredWarManager.getPlayerInfoByPos(n),t=this.target.getPitInfoByIndex(n),e&&0==e.pos&&(HundredWarManager.isSysBanker(e.roleId)&&(e.name=HundredWarManager.sysBanker.name,e.sex=HundredWarManager.sysBanker.sex,e.gold=HundredWarManager.sysBanker.gold,e.head=HundredWarManager.sysBanker.head),this.target.bankerNameLabel.text=e.name),t.headComponent.init(e),t.headComponent.visible=!0
},t.prototype.refreshPitInfoByRoleId=function(e){if(e)if(HundredWarManager.getPlayerInfoSuccess(e),this._isRefreshPlayerInfo)HundredWarManager.reqPlayerInfoListClone&&0==HundredWarManager.reqPlayerInfoListClone.length&&(this._isRefreshPlayerInfo=!1),HundredWarManager.nextReq();else{if(HundredWarManager.isBanker(e.roleId)&&!HundredWarManager.isSysBanker(e.roleId)){var t=HundredWarManager.getPlayerInfoByPos(0);t.gold=HundredWarManager.roomInfo.bankerGold}if(HundredWarManager.roomInfo&&HundredWarManager.roomInfo.playerList)for(var n=void 0,i=0,a=HundredWarManager.roomInfo.playerList;i<a.length;i++){var o=a[i];o.roleId==e.roleId&&(n=this.target.getPitInfoByIndex(o.pos),n.headComponent.init(o),o&&0==o.pos&&(this.target.bankerNameLabel.text=o.name))}}},t.prototype.playerLeave=function(e){if(0!=e.pos&&!e.roleId){var t=void 0;t=this.target.getPitInfoByIndex(e.pos),t.headComponent.init(null)}if(0==e.pos&&HundredWarManager.isSysBanker(e.roleId)){var t=void 0;t=this.target.getPitInfoByIndex(e.pos),t.headComponent.init(HundredWarManager.sysBanker),this.target.bankerNameLabel.text=HundredWarManager.sysBanker.name}},t}(BaseHWPanelSupport);__reflect(HWPanelPitSupport.prototype,"HWPanelPitSupport");var HWPanelRoundOverSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.hwResultsCardInfo=new Array,this.target.poolDesGroup.visible=!1,this.target.poolDesGroup.scaleX=this.target.poolDesGroup.scaleY=0,this.setPoolInfo()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),HundredWarManager.onCardPushEvent.addListener(this.setHundredWarOverInfo,this),HundredWarManager.onShowCardsEvent.addListener(this.showCardsInfo,this),HundredWarManager.OnGetRoomInfoEvent.addListener(this.setPoolInfo,this),HundredWarManager.onShowCardsAnimOverEvent.addListener(this.refreshInfo,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),HundredWarManager.onCardPushEvent.removeListener(this.setHundredWarOverInfo,this),HundredWarManager.onShowCardsEvent.removeListener(this.showCardsInfo,this),HundredWarManager.OnGetRoomInfoEvent.removeListener(this.setPoolInfo,this),HundredWarManager.onShowCardsAnimOverEvent.removeListener(this.refreshInfo,this),qin.Tick.RemoveTimeoutInvoke(this.hidePoolDes,this),qin.Tick.RemoveTimeoutInvoke(this.showBankerLoseAccountAnim,this),qin.Tick.RemoveTimeoutInvoke(this.showPlayerAccounfAnim,this),qin.Tick.RemoveTimeoutInvoke(this.onShowCardsOver,this),qin.Tick.RemoveTimeoutInvoke(this.hideCards,this)},t.prototype.setHundredWarOverInfo=function(){if(HundredWarManager.hundredWarOverInfo){qin.ArrayUtil.Clear(this.hwResultsCardInfo);for(var e=void 0,t=void 0,n=void 0,i="",a=0;a<HundredWarManager.hundredWarOverInfo.betList.length;a++){var o=HundredWarManager.hundredWarOverInfo.betList[a];if(t=this.target.getCardsInfoByIndex(o.pos)){e=t.cardsComponent,n=new HWResultCardsInfo,n.cardList=o.cards,CardTypeMatchUtil.matchCardType(o.cards),n.cardTypeDes=this.getCardImgTypeByType(CardTypeMatchUtil.cardType,o.pos),n.cardType=CardTypeMatchUtil.cardType,n.pos=o.pos;var r=HundredWarCardTypeDefined.GetInstance().getOddsByType(CardTypeMatchUtil.cardType);HundredWarManager.getSelfPoolGoldByPos(o.pos)?r&&(i="X "+r+"  ",o.win==HundredWarResultType.Win?i=i+"+"+qin.MathUtil.formatNum(HundredWarManager.getSelfPoolGoldByPos(o.pos)):o.win==HundredWarResultType.Lose?i=i+"-"+qin.MathUtil.formatNum(HundredWarManager.getSelfPoolGoldByPos(o.pos)):o.win==HundredWarResultType.Dogfall&&(i="",i+="X 0  平局")):i=0==o.pos?"X "+r:"没有下注",n.resultDes=i,this.hwResultsCardInfo.push(n),a==HundredWarManager.hundredWarOverInfo.betList.length-1?this.target.cardsAnim.createCardGroup(n.cardList,this.target.dealGroup,a,500*a,!0,45):this.target.cardsAnim.createCardGroup(n.cardList,this.target.dealGroup,a,500*a,!1,45)}}if(this.target.cardsComponentList)for(var a=0;a<this.target.cardsComponentList.length;a++)this.target.cardsGroup.setChildIndex(this.target["cardsComponent"+a],this.target.cardsGroup.numChildren);HundredWarManager.roomInfo.pool=HundredWarManager.hundredWarOverInfo.pool,this.target.refreshPreBetList()}},t.prototype.refreshInfo=function(){this.setPoolInfo(),this.target.goldChange()},t.prototype.setPoolInfo=function(){this.target.potLabel.text=qin.MathUtil.formatNum(HundredWarManager.roomInfo.pool)},t.prototype.changeCardsAndCoinsIndex=function(){this.target.cardsComponentGroup.swapChildren(this.target.cardsGroup,this.target.coinsGroup)},t.prototype.showCardsInfo=function(e){if(this.changeCardsAndCoinsIndex(),this.target.cardsComponentList&&this.hwResultsCardInfo){for(var t=0;t<this.target.cardsComponentList.length;t++)if(t==e){this.target.cardsComponentList[t].showFront(this.hwResultsCardInfo[t],t);break}4==e&&(this.isShowPoolAnim()?this.showPoolDes():this.showBankerWinAccountCoinAnim())}},t.prototype.showPoolAnim=function(){if(this.hwResultsCardInfo)for(var e=0,t=this.hwResultsCardInfo;e<t.length;e++){var n=t[e];(n.cardType==CardType.FourOfAKind||n.cardType==CardType.RoyalFlush||n.cardType==CardType.StraightFlush)&&(0!=n.pos&&HundredWarManager.getIsHasBetByPos(n.pos)?this.target.hwAnim.setCoinToBet(this.target.potGroup,n.pos,20,100,10):0==n.pos&&this.target.hwAnim.setCoinFromToByNum(this.target.potGroup,this.target.pit0,10,500,10,100,10,-25,-35))}},t.prototype.hideWinEffect=function(){this._poolDesEffect&&this._poolDesEffect.parent&&(this._poolDesEffect.stop(),this._poolDesEffect.parent.removeChild(this._poolDesEffect))},t.prototype.showPoolDes=function(){var e=this;this.target.poolDesGroup.visible=!0,egret.Tween.get(this.target.poolDesGroup).set({scaleX:0,scaleY:0}).to({scaleX:1,scaleY:1},400,egret.Ease.backOut),AnimationFactory.getParticleEffect(AnimationType.HundredWarPoolDes,this.target.poolDesGroup,function(t){e._poolDesEffect=t}),this.showPoolAnim(),qin.Tick.AddTimeoutInvoke(this.hidePoolDes,2e3,this)},t.prototype.hidePoolDes=function(){var e=this;egret.Tween.get(this.target.poolDesGroup).set({scaleX:1,scaleY:1}).to({scaleX:0,scaleY:0},200).call(function(){e.target.poolDesGroup.visible=!1}),this.hideWinEffect(),this.showBankerWinAccountCoinAnim()},t.prototype.isShowPoolAnim=function(){if(this.hwResultsCardInfo&&this.hwResultsCardInfo.length>0)for(var e=0,t=this.hwResultsCardInfo;e<t.length;e++){var n=t[e];if(n.cardType==CardType.FourOfAKind||n.cardType==CardType.RoyalFlush||n.cardType==CardType.StraightFlush){if(0!=n.pos&&HundredWarManager.getIsHasBetByPos(n.pos))return!0;if(0==n.pos)return!0}}return!1},t.prototype.showBankerWinAccountCoinAnim=function(){if(HundredWarManager.hundredWarOverInfo&&HundredWarManager.hundredWarOverInfo.betList){for(var e=!0,t=0,n=HundredWarManager.hundredWarOverInfo.betList;t<n.length;t++)for(var i=n[t],a=0,o=HundredWarManager.roomInfo.betList;a<o.length;a++){var r=o[a];i.pos==r.pos&&r.bet>0&&(i.win!=HundredWarResultType.Lose&&i.win!=HundredWarResultType.Dogfall||0==i.pos?e&&(e=!1):this.target.hwAnim.setCoinBackByBet(i.pos,this.target.pit0,-25,-35))}e?this.showBankerLoseAccountAnim(e):qin.Tick.AddTimeoutInvoke(this.showBankerLoseAccountAnim,2e3,this,e)}},t.prototype.showBankerLoseAccountAnim=function(e){if(e)this.showPlayerAccounfAnim(e);else{if(HundredWarManager.hundredWarOverInfo&&HundredWarManager.hundredWarOverInfo.betList)for(var t=0,n=HundredWarManager.hundredWarOverInfo.betList;t<n.length;t++){var i=n[t];if((i.win==HundredWarResultType.Win||i.win==HundredWarResultType.Dogfall)&&0!=i.pos&&HundredWarManager.roomInfo&&HundredWarManager.roomInfo.betList)for(var a=0,o=HundredWarManager.roomInfo.betList;a<o.length;a++){var r=o[a];r.pos==i.pos&&r.bet>0&&(this.target.hwAnim.setCoinToBet(this.target.pit0,i.pos,20,-25,-35),this.bankerEffect())}}qin.Tick.AddTimeoutInvoke(this.showPlayerAccounfAnim,1e3,this,e)}},t.prototype.clearEffect=function(){this._poolEffect&&this._poolEffect.parent&&(this._poolEffect.stop(),this._poolEffect.parent.removeChild(this._poolEffect)),this._playerEffect&&this._playerEffect.parent&&(this._playerEffect.stop(),this._playerEffect.parent.removeChild(this._playerEffect)),this._bankerEffect&&this._bankerEffect.parent&&(this._bankerEffect.stop(),this._bankerEffect.parent.removeChild(this._bankerEffect))},t.prototype.poolEffect=function(){var e=this;egret.Tween.get(this.target.potBg).set({alpha:0}).to({alpha:1},1e3).wait(500).to({alpha:0},500),AnimationFactory.getParticleEffect(AnimationType.HundredWarPool,this.target.potGroup,function(t){e._poolEffect=t})},t.prototype.playerEffect=function(){var e=this;egret.Tween.get(this.target.playersBtnBg).set({alpha:0}).to({alpha:1},1e3).wait(500).to({alpha:0},500),AnimationFactory.getParticleEffect(AnimationType.HundredWarPlayer,this.target.playersBtn,function(t){e._playerEffect=t})},t.prototype.bankerEffect=function(){var e=this;egret.Tween.get(this.target.bankerBg).set({alpha:0}).to({alpha:1},300).wait(300).to({alpha:0},300),AnimationFactory.getParticleEffect(AnimationType.HundredWarBanker,this.target.pit0,function(t){e._bankerEffect=t})},t.prototype.showPlayerAccounfAnim=function(e){e?(qin.Tick.AddTimeoutInvoke(this.hideCards,3e3,this),qin.Tick.AddTimeoutInvoke(this.onShowCardsOver,2e3,this)):(this.target.hwAnim.setAllCoinBack(this.target.playersBtn,-20,-5),this.playerEffect(),this.showTaxAndSelfWinAnim())},t.prototype.showTaxAndSelfWinAnim=function(){if(HundredWarManager.hundredWarOverInfo&&HundredWarManager.hundredWarOverInfo.betList&&HundredWarManager.hundredWarOverInfo.betList.length>0)for(var e=0,t=HundredWarManager.hundredWarOverInfo.betList;e<t.length;e++){var n=t[e];if(HundredWarManager.roomInfo&&HundredWarManager.roomInfo.betList&&HundredWarManager.roomInfo.betList.length>0)for(var i=0,a=HundredWarManager.roomInfo.betList;i<a.length;i++){var o=a[i];n.pos==o.pos&&o.bet>0&&(n.win==HundredWarResultType.Win||n.win==HundredWarResultType.Dogfall)&&(this.showTaxAnim(n),this.showSitDownPlayerWinAnim(o)),this.showSelfWinAnim(n,o)}}qin.Tick.AddTimeoutInvoke(this.onShowCardsOver,2e3,this),qin.Tick.AddTimeoutInvoke(this.hideCards,3e3,this)},t.prototype.showSelfWinAnim=function(e,t){if(e.pos==t.pos&&t.myBet>0&&(e.win==HundredWarResultType.Win||e.win==HundredWarResultType.Dogfall)){var n=Math.floor(1e9*Math.random())%4+3;this.target.hwAnim.setCoinFromToByNum(this.target.betPotList[e.pos-1],this.target.selfGroup,n,1e3,0,0,100,-15)}},t.prototype.showTaxAnim=function(e){var t=Math.floor(1e9*Math.random())%3+2;this.target.hwAnim.setCoinFromToByNum(this.target.betPotList[e.pos-1],this.target.potGroup,t,1500,100,0,0,120,15),this.poolEffect()},t.prototype.showSitDownPlayerWinAnim=function(e){if(this.target.betPotSupport.posBetList&&this.target.betPotSupport.posBetList.length>0)for(var t=void 0,n=0,i=this.target.betPotSupport.posBetList;n<i.length;n++){var a=i[n];if((HundredWarManager.self&&HundredWarManager.self.pos!=a.pos||!HundredWarManager.self)&&(t=this.target.getPitInfoByIndex(a.pos),a.bet[e.pos-1]>0)){var o=Math.floor(1e9*Math.random())%3+2;this.target.hwAnim.setCoinFromToByNum(this.target.betPotList[e.pos-1],t.headComponent,o,1e3,100,0,0,-25,-35)}}},t.prototype.onShowCardsOver=function(){this.changeCardsAndCoinsIndex(),HundredWarManager.onShowCardsAnimOverEvent.dispatch()},t.prototype.hideCards=function(){this.target.cardsAnim.hideAllCards(),this.clearCardsInfo(),HundredWarManager.onHideCardsEvent.dispatch()},t.prototype.getCardImgTypeByType=function(e,t){var n;if(0==t)switch(e){case CardType.HighCard:n=HWPanelSetting.HighCard_banker;break;case CardType.OnePair:n=HWPanelSetting.OnePair_banker;break;case CardType.TwoPairs:n=HWPanelSetting.TwoPairs_banker;break;case CardType.ThreeOfAKind:n=HWPanelSetting.ThreeOfAKind_banker;break;case CardType.Flush:n=HWPanelSetting.Flush_banker;break;case CardType.Fullhouse:n=HWPanelSetting.Fullhouse_banker;break;case CardType.FourOfAKind:n=HWPanelSetting.FourOfAKind_banker;break;case CardType.Straight:n=HWPanelSetting.Straight_banker;break;case CardType.StraightFlush:n=HWPanelSetting.StraightFlush_banker;break;case CardType.RoyalFlush:n=HWPanelSetting.RoyalFlush}else if(HundredWarManager.getBetPotResultByPos(t))switch(e){case CardType.HighCard:n=HWPanelSetting.HighCard_Win;break;case CardType.OnePair:n=HWPanelSetting.OnePair_Win;break;case CardType.TwoPairs:n=HWPanelSetting.TwoPairs_Win;break;case CardType.ThreeOfAKind:n=HWPanelSetting.ThreeOfAKind_Win;break;case CardType.Flush:n=HWPanelSetting.Flush_Win;break;case CardType.Fullhouse:n=HWPanelSetting.Fullhouse_Win;break;case CardType.FourOfAKind:n=HWPanelSetting.FourOfAKind_Win;break;case CardType.Straight:n=HWPanelSetting.Straight_Win;break;case CardType.StraightFlush:n=HWPanelSetting.StraightFlush_Win;break;case CardType.RoyalFlush:n=HWPanelSetting.RoyalFlush}else switch(e){case CardType.HighCard:n=HWPanelSetting.HighCard;break;case CardType.OnePair:n=HWPanelSetting.OnePair;break;case CardType.TwoPairs:n=HWPanelSetting.TwoPairs;break;case CardType.ThreeOfAKind:n=HWPanelSetting.ThreeOfAKind;break;case CardType.Flush:n=HWPanelSetting.Flush;break;case CardType.Fullhouse:n=HWPanelSetting.Fullhouse;break;case CardType.FourOfAKind:n=HWPanelSetting.FourOfAKind;break;case CardType.Straight:n=HWPanelSetting.Straight;break;case CardType.StraightFlush:n=HWPanelSetting.StraightFlush;break;case CardType.RoyalFlush:n=HWPanelSetting.RoyalFlush}return n},t.prototype.clearCardsInfo=function(){for(var e=0,t=this.target.cardsComponentList;e<t.length;e++){var n=t[e];n.reset()}},t.prototype.leaveClear=function(){this.target.cardsAnim.clear(),this.target.hwAnim.clear(),this.clearCardsInfo(),this.clearEffect()},t}(BaseHWPanelSupport);__reflect(HWPanelRoundOverSupport.prototype,"HWPanelRoundOverSupport");var HWPanelSetting=function(){function e(){}return e.MinPitIndex=0,e.MaxPitNum=9,e.Chip_100="br_button_3_png",e.Chip_1000="br_button_4_png",e.Chip_1w="br_button_5_png",e.Chip_10w="br_button_6_png",e.Chip_100w="br_button_7_png",e.Chip_1000w="br_button_12_png",e.Chip_rep="br_button_8_png",e.Chip_db="br_button_11_png",e.BetPot1="br_fk_png",e.BetPot2="br_mh_png",e.BetPot3="br_ht_png",e.BetPot4="br_hx_png",e.HighCard_banker="br_px_18_png",e.OnePair_banker="br_px_16_png",e.TwoPairs_banker="br_px_14_png",e.ThreeOfAKind_banker="br_px_12_png",e.Straight_banker="br_px_10_png",e.Flush_banker="br_px_8_png",e.Fullhouse_banker="br_px_6_png",e.FourOfAKind_banker="br_px_4_png",e.StraightFlush_banker="br_px_2_png",e.HighCard="br_px_19_png",e.OnePair="br_px_17_png",e.TwoPairs="br_px_15_png",e.ThreeOfAKind="br_px_13_png",e.Straight="br_px_11_png",e.Flush="br_px_9_png",e.Fullhouse="br_px_7_png",e.FourOfAKind="br_px_5_png",e.StraightFlush="br_px_3_png",e.RoyalFlush="br_px_1_png",e.HighCard_Win="br_px_28_png",e.OnePair_Win="br_px_27_png",e.TwoPairs_Win="br_px_26_png",e.ThreeOfAKind_Win="br_px_25_png",e.Straight_Win="br_px_24_png",e.Flush_Win="br_px_23_png",e.Fullhouse_Win="br_px_22_png",e.FourOfAKind_Win="br_px_21_png",e.StraightFlush_Win="br_px_20_png",e}();__reflect(HWPanelSetting.prototype,"HWPanelSetting");var HWPanelSitDownAndChooseCoinSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.target.doubleBtn.lightImg.visible=!1,this.target.doubleBtn.bgImg.source=HWPanelSetting.Chip_db,this.target.repetBtn.lightImg.visible=!1,this.target.repetBtn.bgImg.source=HWPanelSetting.Chip_rep,this.resetDbAndRepetBtn()},t.prototype.onEnable=function(){e.prototype.onEnable.call(this);for(var t=0,n=this.target.pitList;t<n.length;t++){var i=n[t];i.headComponent.headIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pitTouchHandler,this),i.headComponent.emptyGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pitTouchHandler,this)}this.target.betList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBetListClick,this),this.target.repetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRepetBtnClick,this),this.target.doubleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDoubleBtnClick,this),HundredWarManager.onSeatEvent.addListener(this.onSeatSuccess,this),HundredWarManager.onBetEvent.addListener(this.refreshBetMask,this),HundredWarManager.onRoomStateChangeEvent.addListener(this.resetDbAndRepetBtn,this),HundredWarManager.OnGetRoomInfoEvent.addListener(this.resetDbAndRepetBtn,this),HundredWarManager.panelHandler.onUpDownBankerEvent.addListener(this.resetDbAndRepetBtn,this),HundredWarManager.onPosChangeEvent.addListener(this.onPosChange,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this);for(var t=0,n=this.target.pitList;t<n.length;t++){var i=n[t];i.headComponent.headIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.pitTouchHandler,this),i.headComponent.emptyGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.pitTouchHandler,this)}this.target.betList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBetListClick,this),this.target.repetBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRepetBtnClick,this),this.target.doubleBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDoubleBtnClick,this),HundredWarManager.onSeatEvent.removeListener(this.onSeatSuccess,this),HundredWarManager.onBetEvent.removeListener(this.refreshBetMask,this),HundredWarManager.onRoomStateChangeEvent.removeListener(this.resetDbAndRepetBtn,this),HundredWarManager.OnGetRoomInfoEvent.removeListener(this.resetDbAndRepetBtn,this),HundredWarManager.panelHandler.onUpDownBankerEvent.removeListener(this.resetDbAndRepetBtn,this),HundredWarManager.onPosChangeEvent.removeListener(this.onPosChange,this)},t.prototype.forbidRepBtn=function(){this.target.repetBtn.maskImg.visible=!0,this.target.repetBtn.touchEnabled=!1},t.prototype.openRepBtn=function(){this.target.repetBtn.maskImg.visible=!1,this.target.repetBtn.touchEnabled=!0},t.prototype.forbidDbBtn=function(){this.target.doubleBtn.maskImg.visible=!0,this.target.doubleBtn.touchEnabled=!1},t.prototype.openDbBtn=function(){this.target.doubleBtn.maskImg.visible=!1,this.target.doubleBtn.touchEnabled=!0},t.prototype.resetRepetBtn=function(){this.target.repetBtn.visible=!0,this.repIsUseable()?this.openRepBtn():this.forbidRepBtn()},t.prototype.resetDbBtn=function(){this.target.doubleBtn.visible=!1,this.openDbBtn()},t.prototype.resetDbAndRepetBtn=function(){HundredWarManager.roomInfo&&(HundredWarManager.roomInfo.state!=HWState.Bet||HundredWarManager.isBanker(UserManager.userInfo.roleId)?HundredWarManager.roomInfo.state==HWState.WaitNext&&(this.forbidBet(),this.forbidBetChoose()):(this.resetRepetBtn(),this.resetDbBtn(),this.reSetBetMask()))},t.prototype.forbidBet=function(){this.forbidRepBtn(),this.forbidDbBtn()},t.prototype.isOverBankerMost=function(){for(var e=0,t=HundredWarManager.roomInfo.playerList;e<t.length;e++){var n=t[e];if(0==n.pos&&!HundredWarManager.isSysBanker(n.roleId)&&HundredWarManager.getPlayerBetTotalNum()+this.target.getPreBetGold()>n.gold/5)return UIManager.showFloatTips("当前下注金币数已达庄家金币上限"),!0}return!1},t.prototype.onRepetBtnClick=function(e){if(this.repIsUseable()&&!this.isOverBankerMost()&&this.target.stateSupport.isOnBet){SoundManager.playButtonEffect(e.target),this.target.repetBtn.visible=!1,this.target.doubleBtn.visible=!0,this.dbIsUseable(!0)?this.target.doubleBtn.maskImg.visible=!1:this.target.doubleBtn.maskImg.visible=!0;for(var t=0,n=this.target.preBetList;t<n.length;t++){var i=n[t];i.myBet>0&&HundredWarManager.reqBet(i.pos,i.myBet)}}},t.prototype.onPosChange=function(e){e.roleId&&e.roleId==UserManager.userInfo.roleId&&(HundredWarManager.isBanker(e.roleId)?(this.forbidBet(),this.forbidBetChoose()):(1==this.target.repetBtn.visible&&this.resetRepetBtn(),this.reSetBetMask()))},t.prototype.onDoubleBtnClick=function(e){if(this.dbIsUseable()&&!this.isOverBankerMost()&&this.target.stateSupport.isOnBet){SoundManager.playButtonEffect(e.target),this.forbidDbBtn();for(var t=0,n=this.target.preBetList;t<n.length;t++){var i=n[t];i.myBet>0&&HundredWarManager.reqBet(i.pos,i.myBet)}}},t.prototype.repIsUseable=function(){if(HundredWarManager.roomInfo.state==HWState.Bet){var e=this.target.getPreBetGold()+HundredWarManager.getThisBetGold();if(this.target.getPreBetGold()&&(UserManager.userInfo.gold+HundredWarManager.getThisBetGold())/5>=e)return!0}return!1},t.prototype.dbIsUseable=function(e){if(void 0===e&&(e=!1),HundredWarManager.roomInfo.state==HWState.Bet){var t=void 0;if(t=e?2*this.target.getPreBetGold()+HundredWarManager.getThisBetGold():this.target.getPreBetGold()+HundredWarManager.getThisBetGold(),(UserManager.userInfo.gold+HundredWarManager.getThisBetGold())/5>=t)return!0}return!1},t.prototype.onBetListClick=function(e){this.target.betList.selectedItem&&this.target.betList.selectedItem.isBet&&(SoundManager.playEffect(MusicAction.buttonClick),this.refreshBetColor(this.target.betList.selectedItem.id),HundredWarManager.oneBetGold=this.target.betList.selectedItem.bet)},t.prototype.refreshBetColor=function(e){for(var t=this.target.betList.dataProvider,n=0;n<this.target.betList.numChildren;n++)if(t.source[n].id==e){var i=this.target.betList.getChildAt(e);i&&i.setActive()}else{var i=this.target.betList.getChildAt(t.source[n].id);i&&i.setNotActive()}},t.prototype.reSetBetMask=function(){this.setBetMask()},t.prototype.refreshBetMask=function(){this.setBetMask(),1==this.target.repetBtn.visible&&(this.repIsUseable()?this.openRepBtn():this.forbidRepBtn()),0==this.target.doubleBtn.maskImg.visible&&(this.dbIsUseable()?this.openDbBtn():this.forbidDbBtn())},t.prototype.setBetMask=function(){for(var e=this.target.betList.dataProvider,t=!0,n=0;n<this.target.betList.numChildren;n++){var i=this.target.betList.getChildAt(e.source[n].id);if(HundredWarManager.roomInfo.state==HWState.Bet){var a=void 0;if(a=e.source[n].bet+HundredWarManager.getThisBetGold(),(UserManager.userInfo.gold+HundredWarManager.getThisBetGold())/5>=a)i.bet.maskImg.visible=!1,e.source[n].isBet=!0;else{if(t){var o=void 0;o=n>0?e.source[n-1].bet+HundredWarManager.getThisBetGold():e.source[0].bet+HundredWarManager.getThisBetGold(),e.source[n].bet<=HundredWarManager.oneBetGold&&(UserManager.userInfo.gold+HundredWarManager.getThisBetGold())/5>=o&&(n>0?(this.refreshBetColor(e.source[n-1].id),HundredWarManager.oneBetGold=e.source[n-1].bet):0==n&&(this.refreshBetColor(e.source[n].id),HundredWarManager.oneBetGold=e.source[n].bet),t=!1)}i.bet.maskImg.visible=!0,e.source[n].isBet=!1}}else i.bet.maskImg.visible=!0,e.source[n].isBet=!1}},t.prototype.isBetByOneFifth=function(){for(var e=!1,t=this.target.betList.dataProvider,n=0;n<this.target.betList.numChildren;n++)if(1==t.source[n].isBet){e=!0;break}return e},t.prototype.forbidBetChoose=function(){for(var e=this.target.betList.dataProvider,t=0;t<this.target.betList.numChildren;t++){var n=this.target.betList.getChildAt(e.source[t].id);n.bet.maskImg.visible=!0,e.source[t].isBet=!1}},t.prototype.showShopping=function(){UIManager.showPanel(UIModuleName.ShoppingPanel,{prevPanelName:UIModuleName.HundredWarRoomPanel})},t.prototype.pitTouchHandler=function(e){if(!this.target.moveTouchEnd(e)){var t;if(e.currentTarget.parent instanceof HWHeadComponent?t=e.currentTarget.parent:e.currentTarget.parent.parent instanceof HWHeadComponent&&(t=e.currentTarget.parent.parent),null==t.bindData&&InfoUtil.checkAvailable(HundredWarManager.roomInfo)&&UserManager.userInfo.gold<HundredWarManager.roomInfo.definition.seatGold)return SoundManager.playEffect(MusicAction.buttonClick),void AlertManager.showConfirm("坐下需要金币大于"+qin.MathUtil.formatNum(HundredWarManager.roomInfo.definition.seatGold)+"，您的余额不足！",null,this.showShopping,null,null,null,null,"充值");for(var n=0,i=this.target.pitList;n<i.length;n++){var a=i[n];if(a.headComponent==t&&HundredWarManager.roomInfo){if(null==t.bindData){var o=void 0;if(o=HundredWarManager.getPlayerInfo(UserManager.userInfo.roleId),o&&void 0!=o.pos)return;SoundManager.playEffect(MusicAction.buttonClick),HundredWarManager.reqSeat(a.pos)}else HundredWarManager.isSysBanker(t.bindData.roleId)||(SoundManager.playEffect(MusicAction.buttonClick),UserManager.reqShowOtherUserInfoPanel(t.bindData.roleId));break}}}},t.prototype.onSeatSuccess=function(e){var t;if(t=this.target.getHeadComponent(e)){var n=new HWHundredWarRoomPlayerInfo;n.copyValueFromThis(UserManager.userInfo),t.sitDownInit(n)}},t.prototype.onSitOrStand=function(){if(this.isDisabled)return void qin.Console.log("异步不显示自己的手牌");var e=this.target.getHeadComponentByRole(UserManager.userInfo.roleId);e&&this.target.showDownEffect(e.playerGroup)},t.prototype.clear=function(){e.prototype.clear.call(this)},t}(BaseHWPanelSupport);__reflect(HWPanelSitDownAndChooseCoinSupport.prototype,"HWPanelSitDownAndChooseCoinSupport");var HWPitInfo=function(){function e(){}return e}();__reflect(HWPitInfo.prototype,"HWPitInfo");var HWStateSupport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.target.alertLabel.visible=!1,HundredWarManager.panelHandler.reqHundredWarNoSeatInfo(0,12),HundredWarManager.roomInfo&&void 0!=HundredWarManager.roomInfo.state&&HundredWarManager.roomInfo.state==HWState.Bet&&(this.isOnBet=!0,this.setCountDownTime(),this.stateHandler(HundredWarManager.roomInfo.state))},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),HundredWarManager.onRoomStateChangeEvent.addListener(this.onStateChange,this),HundredWarManager.onHideCardsEvent.addListener(this.showRestCountDown,this),HundredWarManager.panelHandler.OnGetHundredWarNoSeatInfoEvent.addListener(this.reqStartImm,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),HundredWarManager.onRoomStateChangeEvent.removeListener(this.onStateChange,this),HundredWarManager.onHideCardsEvent.removeListener(this.showRestCountDown,this),qin.Tick.RemoveSecondsInvoke(this.betCountDown,this),qin.Tick.RemoveSecondsInvoke(this.restCountDown,this),qin.Tick.RemoveTimeoutInvoke(this.reqNextRoundStart,this)},t.prototype.reqStartImm=function(e){HundredWarManager.panelHandler.OnGetHundredWarNoSeatInfoEvent.removeListener(this.reqStartImm,this),e.playerNum||(e.playerNum=0),HundredWarManager.roomInfo.state==HWState.WaitNext&&(1==e.playerNum&&HundredWarManager.isBanker(HundredWarManager.sysBanker.roleId)&&1==HundredWarManager.roomInfo.playerList.length||0==e.playerNum&&HundredWarManager.isBanker(UserManager.userInfo.roleId)&&1==HundredWarManager.roomInfo.playerList.length?HundredWarManager.reqNextRoundStart():(this.target.alertLabel.visible=!0,this.target.alertLabel.text="请稍等"))},t.prototype.onStateChange=function(){this.setCountDownTime(),this.stateHandler(HundredWarManager.roomInfo.state)},t.prototype.stateHandler=function(e){switch(e){case HWState.Bet:this.target.alertLabel.visible=!0,this.showBetCountDown();break;case HWState.WaitNext:}},t.prototype.setCountDownTime=function(){HundredWarManager.roomInfo.definition&&(HundredWarManager.roomInfo.state==HWState.Bet?HundredWarManager.roomInfo.stateTime?this._betCountDownTime=HundredWarManager.roomInfo.definition.betTime-Math.ceil(TimeManager.GetServerUtcTimestamp()-HundredWarManager.roomInfo.stateTime):this._betCountDownTime=HundredWarManager.roomInfo.definition.betTime:HundredWarManager.roomInfo.stateTime?this._restCountDownTime=HundredWarManager.roomInfo.definition.waitTime-Math.ceil(TimeManager.GetServerUtcTimestamp()-HundredWarManager.roomInfo.stateTime):this._restCountDownTime=HundredWarManager.roomInfo.definition.waitTime)},t.prototype.showBetCountDown=function(){qin.Tick.RemoveSecondsInvoke(this.restCountDown,this),this.betCountDown(),this.isOnBet=!0,qin.Tick.AddSecondsInvoke(this.betCountDown,this)},t.prototype.betCountDown=function(){if(this._betCountDownTime>=0){var e=this.target.getHeadComponent(0);e&&e.bindData&&e.bindData.roleId==UserManager.userInfo.roleId?this.target.alertLabel.text="等待其他玩家下注..."+this._betCountDownTime:this.target.alertLabel.text="开始下注..."+this._betCountDownTime}this._betCountDownTime--,this._betCountDownTime<0&&(this.target.alertLabel.visible=!1,this.isOnBet=!1,qin.Tick.RemoveSecondsInvoke(this.betCountDown,this))},t.prototype.proceedRestCountDown=function(){qin.Tick.RemoveSecondsInvoke(this.betCountDown,this),this.restCountDown(),qin.Tick.AddSecondsInvoke(this.restCountDown,this)},t.prototype.showRestCountDown=function(){this.target.alertLabel.visible=!0,this.proceedRestCountDown()},t.prototype.restCountDown=function(){this._restCountDownTime>=0&&(this.target.alertLabel.text="等候中..."+this._restCountDownTime),this._restCountDownTime--,this._restCountDownTime<0&&(this.target.alertLabel.visible=!1,qin.Tick.AddTimeoutInvoke(this.reqNextRoundStart,1e3,this),qin.Tick.RemoveSecondsInvoke(this.restCountDown,this))},t.prototype.reqNextRoundStart=function(){HundredWarManager.reqNextRoundStart()},t}(BaseHWPanelSupport);__reflect(HWStateSupport.prototype,"HWStateSupport");var AchieveInGameItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.AchieveInGameItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),InfoUtil.checkAvailable(this.bindData)){this.commonItem.init(this.bindData.definition.icon+ResSuffixName.PNG,77),this.desLabel.text=this.bindData.definition.name,this.rewardLabel.text=this.bindData.definition.rewardNum.toString();var t=ItemDefined.GetInstance().getDefinition(this.bindData.definition.rewardId);t&&(this.rewardImg.source=t.icon+ResSuffixName.PNG),this.refreshiUI(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}},t.prototype.refreshiUI=function(){var e=AchieveProcessManager.getAchieveProcessInfoByGroup(this.bindData.definition.group);this.bindData.isComplete?(this.takeBtn.enabled=!0,this.takeBtn.label="领取"):(this.takeBtn.enabled=!1,this.takeBtn.label=e.process+"/"+this.bindData.definition.para1)},t.prototype.onClick=function(e){switch(e.target){case this.takeBtn:SoundManager.playButtonEffect(e.target),AchievementManager.reqTakeAchievePrize([this.bindData.id])}},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t}(BaseItemRenderer);__reflect(AchieveInGameItemRenderer.prototype,"AchieveInGameItemRenderer");var AchieveInHundredWarItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.AchieveInHundredWarItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),InfoUtil.checkAvailable(this.bindData)){this.desLabel.text=this.bindData.definition.name,this.rewardLabel.text=this.bindData.definition.rewardNum.toString();var t=ItemDefined.GetInstance().getDefinition(this.bindData.definition.rewardId);t&&(this.rewardImg.source=t.icon+ResSuffixName.PNG),this.refreshiUI(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}},t.prototype.refreshiUI=function(){var e=AchieveProcessManager.getAchieveProcessInfoByGroup(this.bindData.definition.group);this.bindData.isComplete?(this.takeBtn.visible=!0,this.progresGroup.visible=!1):(this.takeBtn.visible=!1,this.progresGroup.visible=!0,this.achieveProgresLabel.text=e.process+" / "+this.bindData.definition.para1,this.achieveProgressImg.width=150,this.achieveProgressImg.width*=e.process/this.bindData.definition.para1)},t.prototype.onClick=function(e){switch(e.target){case this.takeBtn:SoundManager.playEffect(MusicAction.buttonClick),AchievementManager.reqTakeAchievePrize([this.bindData.id])}},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t}(BaseItemRenderer);__reflect(AchieveInHundredWarItemRenderer.prototype,"AchieveInHundredWarItemRenderer");var AchievementItemRenderer=function(e){function t(){var t=e.call(this)||this;return t._width=90,t._numContentInfo=new NumContentInfo,t._numContentInfo.gap=-8,t._numContentInfo.setImgWidHei(37,47,49,47),t._numContentInfo.limtiWidth=150,t._numContentInfo.preFix=ResPrefixName.Achieve_Num,t.skinName=UIRendererSkinName.AchievementItemRenderer,t
}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.scaleX=this.scaleY=this._width/this.width,InfoUtil.checkAvailable(this.bindData)&&(this.itemImg.source=this.bindData.definition.icon+ResSuffixName.PNG,this._numContentInfo.content=qin.MathUtil.formatNum(this.bindData.definition.para1),this.numImg.init(this._numContentInfo),this.refreshiUI(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this))},t.prototype.refreshiUI=function(){var e;e=null==UserManager.otherUserInfo||UserManager.otherUserInfo.roleId==UserManager.userInfo.roleId?UserManager.userInfo:UserManager.otherUserInfo,this.achieveGroup.visible=!0,this.touchEnabled=!0,this.touchChildren=!0,this.bindData.isComplete?this.achieveMask.visible=!1:0==this.bindData.definition.preId?this.achieveMask.visible=!0:AchievementManager.getAchieveInfoById(e.allAchieveList,this.bindData.definition.preId).isComplete?this.achieveMask.visible=!0:(this.achieveGroup.visible=!1,this.touchEnabled=!1,this.touchChildren=!1)},t.prototype.init=function(e,t){this.info=e,this.itemImg.source=e.definition.icon+ResSuffixName.PNG,this._numContentInfo.content=qin.MathUtil.formatNum(e.definition.para1),this.numImg.init(this._numContentInfo),this.achieveGroup.visible=!0,this.achieveMask.visible=!1,this.bg.visible=!1,this.scaleX=this.scaleY=t/this.width},t.prototype.onClick=function(e){SoundManager.playEffect(MusicAction.buttonClick),UIManager.showPanel(UIModuleName.AchievementItemPanel,this.bindData)},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t}(BaseItemRenderer);__reflect(AchievementItemRenderer.prototype,"AchievementItemRenderer");var ActivityAwardItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.ActivityAwardItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.refresh()},t.prototype.refresh=function(){this.bindData},t.prototype.onClick=function(){ActivityManager.showPanelInActivityCenter(this.bindData)},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t}(BaseItemRenderer);__reflect(ActivityAwardItemRenderer.prototype,"ActivityAwardItemRenderer");var ActivityItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.ActivityItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.refresh()},t.prototype.refresh=function(){InfoUtil.checkAvailable(this.bindData)&&(this.itemTitleLabel.text=this.bindData.definition.name,this.itemDesLabel.text=this.bindData.definition.des,this.activityIcon.source=this.bindData.definition.icon+ResSuffixName.PNG)},t.prototype.onClick=function(){SoundManager.playEffect(MusicAction.buttonClick),ActivityPanelJumpManager.JumpToPanel(this.bindData)},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t}(BaseItemRenderer);__reflect(ActivityItemRenderer.prototype,"ActivityItemRenderer");var AddFriendItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.AddFriendItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.userHeadCom.init(this.bindData,110),this.nameLabel.text=this.bindData.name,this.idLabel.text=this.bindData.roleId.toString(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddBtnClick,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),FriendManager.onAddPlayerEvent.addListener(this.setGrayBtn,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddBtnClick,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),FriendManager.onAddPlayerEvent.removeListener(this.setGrayBtn,this)},t.prototype.onAddBtnClick=function(e){SoundManager.playButtonEffect(e.target),FriendManager.reqAddPlayer(this.bindData.roleId)},t.prototype.setGrayBtn=function(e){this.bindData.roleId==e&&(this.addBtn.enabled=!1)},t.prototype.cancelBubble=function(e){e.stopImmediatePropagation()},t}(BaseItemRenderer);__reflect(AddFriendItemRenderer.prototype,"AddFriendItemRenderer");var AssignmentItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.AssignmentItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),InfoUtil.checkAvailable(this.bindData)){this.itemComp.init(this.bindData.definition.icon+ResSuffixName.PNG,100),this.desLabel.text=this.bindData.definition.name,this.rewardLabel.text=this.bindData.definition.rewardNum.toString();var t=ItemDefined.GetInstance().getDefinition(this.bindData.definition.rewardId);t&&(this.rewardImg.source=t.icon+ResSuffixName.PNG),this.refreshiUI(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}},t.prototype.refreshiUI=function(){var e=AchieveProcessManager.getAchieveProcessInfoByGroup(this.bindData.definition.group);this.bindData.isComplete?(this.processImg.width=246,this.processLabel.text=this.bindData.definition.para1+"/"+this.bindData.definition.para1,this.gotoBtn.visible=!1,this.takePrizeBtn.visible=!0):(this.processImg.width=246,this.processImg.width*=e.process/this.bindData.definition.para1,this.processLabel.text=e.process+"/"+this.bindData.definition.para1,this.gotoBtn.visible=!0,this.takePrizeBtn.visible=!1)},t.prototype.onClick=function(e){switch(SoundManager.playButtonEffect(e.target),e.target){case this.takePrizeBtn:AchievementManager.reqTakeAchievePrize([this.bindData.id]);break;case this.gotoBtn:JumpUtil.JumpByPlayField(this.bindData.definition.tran,UIModuleName.AssignmentPanel)}},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t}(BaseItemRenderer);__reflect(AssignmentItemRenderer.prototype,"AssignmentItemRenderer");var AwardItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.AwardItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.rankLabel.text=this.bindData.rank.toString(),this.awardDesLabel.text=this.bindData.des)},t}(BaseItemRenderer);__reflect(AwardItemRenderer.prototype,"AwardItemRenderer");var ActionButtonAppear=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isRunOver=!0,t}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.target.scaleX=this.target.scaleY=.1,this.target.rotation=-90,this.target.alpha=0,this.target.visible=!0},t.prototype.run=function(t,n){if(this.isRunOver){e.prototype.run.call(this,t,n);var i=egret.Tween.get(this.target);this.target.x=t.x,this.target.y=t.y,this.target.touchEnabled=!1,this.isRunOver=!1,i.to({alpha:.9,rotation:10,x:n.x,y:n.y,scaleX:1.05,scaleY:1.05},200).to({rotation:0,alpha:1,scaleX:1,scaleY:1},50).call(this.runOver,this)}},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.target.touchEnabled=!0,this.isRunOver=!0},t.prototype.clear=function(){e.prototype.clear.call(this)},t}(BaseAnimation);__reflect(ActionButtonAppear.prototype,"ActionButtonAppear");var BlindItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.BlindItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.rebuyImg.visible=this.addonImg.visible=!1,this.rankLabel.text=this.bindData.level.toString(),this.blindLabel.text=qin.MathUtil.formatNum(this.bindData.sBlind)+"/"+qin.MathUtil.formatNum(this.bindData.bBlind),ChampionshipManager.nowBlindRank&&this.bindData.level==ChampionshipManager.nowBlindRank?(this.rankLabel.textColor=ColorEnum.Golden,this.blindLabel.textColor=ColorEnum.Golden,this.anteLabel.textColor=ColorEnum.Golden,this.timeLabel.textColor=ColorEnum.Golden,ChampionshipManager.nowBlindItem=this):(this.rankLabel.textColor=ColorEnum.White,this.blindLabel.textColor=ColorEnum.White,this.anteLabel.textColor=ColorEnum.White,this.timeLabel.textColor=ColorEnum.White),this.bindData.preBet?this.anteLabel.text=qin.MathUtil.formatNum(this.bindData.preBet):this.anteLabel.text="0",this.timeLabel.text=this.bindData.upTime+"秒",this.bindData.addon&&(this.addonImg.visible=!0),this.bindData.rebuy&&(this.rebuyImg.visible=!0))},t}(BaseItemRenderer);__reflect(BlindItemRenderer.prototype,"BlindItemRenderer");var ChampionshipItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.ChampionshipItemRenderer,t}return __extends(t,e),t.prototype.updateData=function(){this.dataChanged()},t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),InfoUtil.checkAvailable(this.bindData)){if(this.rebuyImg.visible=!1,this.addonImg.visible=!1,this.goldImg.visible=!1,this.ticketImg.visible=!1,this.notStartGroup.visible=!1,this.underwayLabel.visible=!1,this.enterBtn.visible=!1,this.applyBtn.visible=!1,this.waitLabel.visible=!1,this.outDesLabel.visible=!1,this.startJoinGroup.visible=this.waitJoinGroup.visible=!1,qin.Tick.RemoveSecondsInvoke(this.countDown,this),qin.Tick.RemoveSecondsInvoke(this.delayTimeCountDown,this),this.itemComp.init(this.bindData.definition.icon+ResSuffixName.PNG,100),this.nameLabel.text=this.bindData.definition.name,this.bindData.outTime)this.numLabel.text=this.bindData.join.toString(),this.startJoinGroup.visible=!0,this.waitJoinGroup.visible=!1,this.outDesLabel.visible=!0,this.applyBtn.visible=this.enterBtn.visible=this.waitLabel.visible=!1,this.outGroup.visible=!0,this.notOutGroup.visible=!1,this.underwayLabel.visible=!1,this.notStartGroup.visible=!0,this.getTimeDesAndTime(),this.bindData.endTime?this.outDesLabel.text="第"+this.bindData.rank+"名":this.outDesLabel.text="进行中",1==this.bindData.rank&&(this.outGroup.visible=!1,this.notOutGroup.visible=!1);else{if(this.numLabel.text=this.bindData.join+"/"+this.bindData.definition.bNum,this.notOutGroup.visible=!0,this.outGroup.visible=!1,this.bindData.joinWay)this.startJoin(),this.waitLabel.visible=!0,1==this.bindData.joinWay?this.priceByGoldShow():2==this.bindData.joinWay&&this.priceByTicketShow();else{if(1==this.bindData.isStartJoin)this.startJoin();else if(0==this.bindData.isStartJoin){this.startJoinGroup.visible=!1,this.waitJoinGroup.visible=!0;var t=new Date(1e3*TimeManager.GetServerUtcTimestamp()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59).getTime(),i=new Date(1e3*(this.bindData.startTime-this.bindData.definition.signTime));this.bindData.startTime-this.bindData.definition.signTime>Math.floor(n/1e3)?this.startJoinTimeLabel.text=i.getMonth()+1+"-"+i.getDate()+"  "+qin.DateTimeUtil.formatDate(i,qin.DateTimeUtil.Format_Standard_NoSecond).split(qin.StringConstants.Blank)[1]:this.startJoinTimeLabel.text="今日  "+qin.DateTimeUtil.formatDate(i,qin.DateTimeUtil.Format_Standard_NoSecond).split(qin.StringConstants.Blank)[1]}this.applyBtn.visible=!0,this.isHaveThisMTTTicket()?this.priceByTicketShow():this.priceByGoldShow()}this.bindData.definition.addon&&(this.addonImg.visible=!0),this.bindData.definition.rebuy&&(this.rebuyImg.visible=!0),TimeManager.GetServerUtcTimestamp()>=this.bindData.startTime?TimeManager.GetServerUtcTimestamp()<=this.bindData.startTime+this.bindData.definition.delaySign?this.countDownOver():this.showUnderway():this.bindData.startTime-TimeManager.GetServerUtcTimestamp()<=300?(this.fiveMinStart(),this.countDown(),qin.Tick.AddSecondsInvoke(this.countDown,this),this.bindData.startTime-TimeManager.GetServerUtcTimestamp()<60&&this.oneMinStart()):(this.beyondFiveMinStart(),this.countDown(),qin.Tick.AddSecondsInvoke(this.countDown,this))}this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.applyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onaApplyBtnClick,this),this.applyBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterBtnClick,this),this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),ChampionshipManager.onRequestJoinEvent.addListener(this.requestJoinSuccess,this)}},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.applyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onaApplyBtnClick,this),this.applyBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),this.enterBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterBtnClick,this),this.enterBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),ChampionshipManager.onRequestJoinEvent.removeListener(this.requestJoinSuccess,this),qin.Tick.RemoveSecondsInvoke(this.countDown,this),qin.Tick.RemoveSecondsInvoke(this.delayTimeCountDown,this)},t.prototype.startJoin=function(){this.startJoinGroup.visible=!0,this.waitJoinGroup.visible=!1},t.prototype.isHaveThisMTTTicket=function(){var e=!1;if(ItemManager.itemList&&ItemManager.itemList.length>0)for(var t=0,n=ItemManager.itemList;t<n.length;t++){var i=n[t];if(this.bindData.definition.ticketId==i.id){e=!0;break}}return e},t.prototype.beyondFiveMinStart=function(){this.notStartGroup.visible=!0,this.getTimeDesAndTime(),this.countDownNum=Math.floor(this.bindData.startTime-TimeManager.GetServerUtcTimestamp())},t.prototype.getTimeDesAndTime=function(){var e=new Date(1e3*this.bindData.startTime),t=new Date(1e3*TimeManager.GetServerUtcTimestamp()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59).getTime();this.bindData.startTime>Math.floor(n/1e3)||this.bindData.startTime<Math.floor(n/1e3)-86400?this.timeDesLabel.text=e.getMonth()+1+"-"+e.getDate():this.timeDesLabel.text="今日",this.timeLabel.text=qin.DateTimeUtil.formatDate(e,qin.DateTimeUtil.Format_Standard_NoSecond).split(qin.StringConstants.Blank)[1]},t.prototype.fiveMinStart=function(){this.notStartGroup.visible=!0,this.timeDesLabel.text="即将开始",this.countDownNum=Math.floor(this.bindData.startTime-TimeManager.GetServerUtcTimestamp())},t.prototype.oneMinStart=function(){this.bindData.joinWay&&(this.waitLabel.visible=!1,this.enterBtn.visible=!0)},t.prototype.priceByTicketShow=function(){this.priceLabel.text="X1",this.goldImg.visible=!1,this.ticketImg.visible=!0},t.prototype.priceByGoldShow=function(){this.goldImg.visible=!0,this.ticketImg.visible=!1,0==this.bindData.definition.signCost||void 0==this.bindData.definition.signCost?this.priceLabel.text="免费+"+qin.MathUtil.formatNum(this.bindData.definition.serveCost):this.priceLabel.text=qin.MathUtil.formatNum(this.bindData.definition.signCost)+"+"+qin.MathUtil.formatNum(this.bindData.definition.serveCost)},t.prototype.showUnderway=function(){this.bindData.outTime||this.bindData.endTime||(this.underwayLabel.visible=!0,this.notStartGroup.visible=!1,this.enterBtn.visible=!0,this.applyBtn.visible=!1,this.waitLabel.visible=!1,TimeManager.GetServerUtcTimestamp()>this.bindData.startTime+3?this.underwayLabel.text="托管中":this.underwayLabel.text="")},t.prototype.delFromMTTList=function(){ChampionshipManager.refreshMTTMatchInfo(this.bindData.recordId)},t.prototype.requestJoinSuccess=function(e){if(e.recordId==this.bindData.recordId){this.applyBtn.visible=!1,this.bindData.joinWay=e.flag,this.numLabel.text=this.bindData.join+"/"+this.bindData.definition.bNum;var t=this.bindData.startTime-TimeManager.GetServerUtcTimestamp();60>=t?0>t?ChampionshipManager.enterMttHandler.enterMatch(this.bindData,qin.StringConstants.Empty):this.enterBtn.visible=!0:this.waitLabel.visible=!0}},t.prototype.onaApplyBtnClick=function(e){SoundManager.playButtonEffect(e.target);var t=ItemManager.isHaveTicket(this.bindData.definition.ticketId);t?ChampionshipManager.reqRequestJoin(this.bindData.recordId,JoinChampionshipWay.Ticket,this.bindData.startTime):CostManager.verifyGold(this.bindData.definition.signCost+this.bindData.definition.serveCost,!0)&&ChampionshipManager.reqRequestJoin(this.bindData.recordId,JoinChampionshipWay.Gold,this.bindData.startTime)},t.prototype.onEnterBtnClick=function(e){SoundManager.playButtonEffect(e.target),ChampionshipManager.enterMttHandler.enterMatch(this.bindData,qin.StringConstants.Empty)},t.prototype.cancelBubble=function(e){e.stopImmediatePropagation()},t.prototype.countDown=function(){this.countDownNum--,this.countDownNum<=300&&(this.timeLabel.text=qin.DateTimeUtil.countDownFormat(this.countDownNum,!1),this.countDownNum<60&&this.oneMinStart(),this.countDownNum<=0&&(qin.Tick.RemoveSecondsInvoke(this.countDown,this),this.countDownOver())),300==this.countDownNum&&this.fiveMinStart(),0==this.bindData.isStartJoin&&this.countDownNum==this.bindData.definition.signTime&&this.startJoin()},t.prototype.delayTimeCountDown=function(){this.countDownNum--,this.countDownNum>=0?this.timeLabel.text=qin.DateTimeUtil.countDownFormat(this.countDownNum,!1):(qin.Tick.RemoveSecondsInvoke(this.delayTimeCountDown,this),this.delFromMTTList())},t.prototype.countDownOver=function(){this.bindData.definition.delaySign?TimeManager.GetServerUtcTimestamp()>=this.bindData.startTime+this.bindData.definition.delaySign?this.delFromMTTList():(this.notStartGroup.visible=!0,this.timeDesLabel.text="延迟报名",this.bindData.joinWay&&(this.waitLabel.visible=!1,this.enterBtn.visible=!0),this.countDownNum=Math.floor(this.bindData.startTime+this.bindData.definition.delaySign-TimeManager.GetServerUtcTimestamp()),this.delayTimeCountDown(),qin.Tick.AddSecondsInvoke(this.delayTimeCountDown,this)):this.delFromMTTList()},t}(BaseItemRenderer);__reflect(ChampionshipItemRenderer.prototype,"ChampionshipItemRenderer");var ChampionshipRankItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.ChampionshipRankItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.rankLabel.text=this.bindData.rank.toString(),this.bindData.rank<=3?(this.rankBgImg.visible=!0,this.rankBgImg.source=ResPrefixName.MTTRankImage+this.bindData.rank+ResSuffixName.PNG):this.rankBgImg.visible=!1,this.headComponent.init(this.bindData,50),this.nameLabel.text=this.bindData.name,this.numLabel.text=qin.MathUtil.formatNum(this.bindData.chips),this.bindData.roleId==UserManager.userInfo.roleId?(this.bindData.rank>3&&(this.rankLabel.textColor=ColorEnum.Golden),this.nameLabel.textColor=this.numLabel.textColor=ColorEnum.Golden):this.rankLabel.textColor=this.nameLabel.textColor=this.numLabel.textColor=ColorEnum.White)},t}(BaseItemRenderer);__reflect(ChampionshipRankItemRenderer.prototype,"ChampionshipRankItemRenderer");var ChatItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.ChatItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.voiceImgGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playVoice,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.bindData)switch(this.bindData.subType){case ChatSubType.AudioRecordMessage:this.nameLabel.text=this.bindData.name+"：",this.setShow(this.voiceGroup),this.voiceTimeLabel.text=Math.ceil(parseFloat(this.bindData.param[0]))+'"';break;case ChatSubType.Horn:this.setShow(this.textGroup),this.textLabel.text=this.bindData.name+"："+this.bindData.message,this.textLabel.textColor=ColorEnum.Golden;break;default:this.setShow(this.textGroup),this.textLabel.text=this.bindData.name+"："+this.bindData.message,this.textLabel.textColor=ColorEnum.White}},t.prototype.setShow=function(e){this.voiceGroup.visible=!1,this.textGroup.visible=!1,e.visible=!0},t.prototype.playVoice=function(e){this.bindData.subType==ChatSubType.AudioRecordMessage&&(ChatManager.ClearAudioAutoPlayList(),ChatManager.CheckAndPlay(this.bindData))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.voiceImgGroup&&this.voiceImgGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playVoice,this)},t}(BaseItemRenderer);__reflect(ChatItemRenderer.prototype,"ChatItemRenderer");var CreateRoomPanelItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.CreateRoomPanelRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data&&(this.radioBtn1.label=this.data.des,this.radioBtn1.groupName=this.data.groupName,this.costImg.visible=this.costLabel.visible=this.data.isRound,this.costLabel.visible)){this.costLabel.text="房卡(     x"+(this.data.num/8).toString()+")";this.radioBtn1.labelDisplay}},t}(BaseItemRenderer);__reflect(CreateRoomPanelItemRenderer.prototype,"CreateRoomPanelItemRenderer");var DiamondItemComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this)},t.prototype.onDisable=function(t){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),e.prototype.onDisable.call(this,t)},t.prototype.init=function(e){if(InfoUtil.checkAvailable(e)&&(this._info=e,this._awardDef=AwardDefined.GetInstance().getDefinition(e.definition.awardId),this._awardDef)){this.diamondImg.source=e.definition.iconName+ResSuffixName.PNG,this.diamondNum.text=this._awardDef.name;for(var t=0,n=this._awardDef.costList;t<n.length;t++){var i=n[t];if(i.type==CostType.RMB){this.diamondBtn.label=i.count/100+"元";break}}}},t.prototype.buy=function(){ChannelManager.PaySend(this._info.id)},t}(BaseComponent);__reflect(DiamondItemComponent.prototype,"DiamondItemComponent");var FaceItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.FaceItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&RES.getResAsync(ResPrefixPathName.Emoji+this.bindData.source,this.onLoadComplete,this)},t.prototype.onLoadComplete=function(e,t){this.faceImg.texture=e},t}(BaseItemRenderer);__reflect(FaceItemRenderer.prototype,"FaceItemRenderer");var FastChatItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.FastChatItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.desLabel.text=this.bindData.des)},t}(BaseItemRenderer);__reflect(FastChatItemRenderer.prototype,"FastChatItemRenderer");var FriendItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.FriendItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.isOnlinetoggleBtn.touchEnabled=!1,this.userHeadCom.init(this.bindData,110),this.nameLabel.text=this.bindData.name,this.goldNumLabel.text=qin.MathUtil.formatNum(this.bindData.gold),this.bindData.offlineTime?(this.isOnlinetoggleBtn.selected=!1,this.isOnlinetoggleBtn.desLabel.text="离线",this.isOnlinetoggleBtn.desLabel.textColor=ColorEnum.OutlineGray):(this.isOnlinetoggleBtn.selected=!0,this.isOnlinetoggleBtn.desLabel.text="在线",this.isOnlinetoggleBtn.desLabel.textColor=ColorEnum.OnlineGreen),1==this.bindData.giveGold?this.giveBtn.enabled=!1:this.giveBtn.enabled=!0,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.giveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ongiveBtnClick,this),this.giveBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),FriendManager.onGiveFriendGoldEvent.addListener(this.changeGiveButtonState,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.giveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ongiveBtnClick,this),this.giveBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),FriendManager.onGiveFriendGoldEvent.removeListener(this.changeGiveButtonState,this)},t.prototype.ongiveBtnClick=function(e){SoundManager.playButtonEffect(e.target),FriendManager.reqGiveFriendGold(this.bindData.roleId)},t.prototype.changeGiveButtonState=function(e){this.bindData.roleId==e&&(this.giveBtn.enabled=!1,UIManager.showFloatTips("您已成功赠送给此好友"+ProjectDefined.giveOnceGoldNum+"金币！"))},t.prototype.cancelBubble=function(e){e.stopImmediatePropagation()},t}(BaseItemRenderer);__reflect(FriendItemRenderer.prototype,"FriendItemRenderer");var FriendRequestItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.FriendRequestItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.userHeadCom.init(this.bindData,110),this.nameLabel.text=this.bindData.name,this.idLabel.text=this.bindData.roleId.toString(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.receiveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onreceiveBtnClick,this),this.receiveBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),this.refuseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onrefuseBtnClick,this),this.refuseBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.receiveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onreceiveBtnClick,this),this.receiveBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),this.refuseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onrefuseBtnClick,this),this.refuseBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this)},t.prototype.onreceiveBtnClick=function(e){SoundManager.playButtonEffect(e.target),FriendManager.reqReceiveFriendRequest(this.bindData.roleId,ReceiveType.Receive)},t.prototype.onrefuseBtnClick=function(e){SoundManager.playButtonEffect(e.target),FriendManager.reqReceiveFriendRequest(this.bindData.roleId,ReceiveType.NotREceive)},t.prototype.cancelBubble=function(e){e.stopImmediatePropagation()},t}(BaseItemRenderer);__reflect(FriendRequestItemRenderer.prototype,"FriendRequestItemRenderer");var GamblingReviewItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.GamblingReviewItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.bindData){switch(this._isSetAllIn=!1,GamblingManager.gamblingReviewHandler.pubCardList.length){case 0:this.pubGroup0.visible=this.pubGroup1.visible=this.pubGroup2.visible=!1;break;case 3:this.pubGroup0.visible=!0,this.pubGroup1.visible=this.pubGroup2.visible=!1;break;case 4:this.pubGroup0.visible=this.pubGroup1.visible=!0,this.pubGroup2.visible=!1;break;case 5:this.pubGroup0.visible=this.pubGroup1.visible=this.pubGroup2.visible=!0}for(var t=0;4>t;t++)this["operation"+t].text="",this["num"+t].text="";this.headCom.init(this.bindData,76),this.nameLabel.text=this.bindData.name,this.bindData.posType?(this.posDesGroup.visible=!0,this.bindData.posType==PlayerPosType.Banker?(this.posDesLabel.text="",this.posImg.source=SheetSubName.Review_Banker):(this.posImg.source=SheetSubName.Review_Blind,this.bindData.posType==PlayerPosType.Bblind?this.posDesLabel.text="大盲":this.bindData.posType==PlayerPosType.Sblind&&(this.posDesLabel.text="小盲"))):this.posDesGroup.visible=!1,this.card0.init(this.bindData.cardList[0]),this.card1.init(this.bindData.cardList[1]);for(var n=void 0,i=0,a=this.bindData.selfActionRecord;i<a.length;i++){var o=a[i];if(o.action==PlayerState.Fold||o.action==PlayerState.StandUp){n=o.step;break}}GamblingManager.gamblingReviewHandler.isCompare()&&!n||this.bindData.isShowCard||this.bindData.roleId==UserManager.userInfo.roleId?(this.card0.initElementsShow2(),this.card1.initElementsShow2()):(this.card0.initElementsShow(),this.card1.initElementsShow());var r=GamblingManager.gamblingReviewHandler.dealActionRecord.length;if(n){if(this.cardTypeLabel.text="",r>=1){var s=GamblingManager.gamblingReviewHandler.dealActionRecord[0],l=this.getLTAndNearestStepAction(s.step);if(this.setLastActionDesBeforeDeal(0,l),n>s.step){this.pubGroup0.visible=!0;for(var t=0;3>t;t++){var h=t+2;this["card"+h].init(GamblingManager.gamblingReviewHandler.pubCardList[t]),this["card"+h].initElementsShow2()}1==r&&this.setLastActionDesAfterDeal(r,l)}else this.pubGroup0.visible=this.pubGroup1.visible=this.pubGroup2.visible=!1}else this.setLastActionDesAfterDeal(0),this.pubGroup0.visible=this.pubGroup1.visible=this.pubGroup2.visible=!1;if(r>=2){var s=GamblingManager.gamblingReviewHandler.dealActionRecord[1],l=this.getLTAndNearestStepAction(s.step);this.setLastActionDesBeforeDeal(1,l),n>s.step?(this.pubGroup1.visible=!0,this.card5.init(GamblingManager.gamblingReviewHandler.pubCardList[3]),this.card5.initElementsShow2(),2==r&&this.setLastActionDesAfterDeal(r,l)):this.pubGroup1.visible=this.pubGroup2.visible=!1}}else{for(var t=0;t<GamblingManager.gamblingReviewHandler.pubCardList.length;t++){var h=t+2;this["card"+h].init(GamblingManager.gamblingReviewHandler.pubCardList[t]),this["card"+h].initElementsShow2()}this.cardTypeLabel.text=this.bindData.cardTypeDes,r>=1?this.setActionDes(r,1):this.setLastActionDesAfterDeal(0),r>=2&&this.setActionDes(r,2)}if(r>=3){if(n){var s=GamblingManager.gamblingReviewHandler.dealActionRecord[2];n>s.step?(this.pubGroup2.visible=!0,this.card6.init(GamblingManager.gamblingReviewHandler.pubCardList[4]),this.card6.initElementsShow2()):this.pubGroup2.visible=!1}this.setActionDes(r,3)}this.bindData.isWin?(this.resultNumLabel.textColor=ColorEnum.Review_Win_Orange,this.resultNumLabel.text="+"+qin.MathUtil.formatNum(this.bindData.betNum)):(this.resultNumLabel.textColor=ColorEnum.Review_Lost_Green,0==this.bindData.betNum?this.resultNumLabel.text=this.bindData.betNum.toString():this.resultNumLabel.text="-"+qin.MathUtil.formatNum(this.bindData.betNum))}},t.prototype.setActionDes=function(e,t){var n,i=t-1,a=GamblingManager.gamblingReviewHandler.dealActionRecord[i];this._isSetAllIn||(n=this.getLTAndNearestStepAction(a.step),this.setLastActionDesBeforeDeal(i,n),e==t&&this.setLastActionDesAfterDeal(t,n))},t.prototype.setLastActionDesBeforeDeal=function(e,t){t&&t.action&&this.setActionDesInfo(e,t)},t.prototype.setLastActionDesAfterDeal=function(e,t){var n=this.getLTAndNearestStepAction(GamblingManager.gamblingReviewHandler.overActionStep),i=!1;0==e?n&&(i=!0):n&&n.action&&(i=!0),i&&(t?t!=n&&this.setActionDesInfo(e,n):this.setActionDesInfo(e,n))},t.prototype.setActionDesInfo=function(e,t){this["operation"+e].text=this.getActionNameByState(t.action);var n=GamblingManager.gamblingReviewHandler.getBlind(this.bindData.roleId),i=0;t.num1?i=t.num1:0==e&&n&&(i=n),i>0&&(this["num"+e].text=qin.MathUtil.formatNum(i))},t.prototype.getLTAndNearestStepAction=function(e){for(var t,n=0,i=this.isFold(),a=0,o=this.bindData.selfActionRecord;a<o.length;a++){var r=o[a];
r.action!=PlayerState.Trusteeship&&r.action!=PlayerState.ShowCard&&r.step<e&&r.step>n&&(i?r.action!=PlayerState.StandUp&&(n=r.step,t=r):(n=r.step,t=r))}return t},t.prototype.isFold=function(){for(var e=0,t=this.bindData.selfActionRecord;e<t.length;e++){var n=t[e];if(n.action==PlayerState.Fold)return!0}return!1},t.prototype.getActionNameByState=function(e){var t;switch(e){case PlayerState.AllIn:this._isSetAllIn=!0,t="全下";break;case PlayerState.Fold:t="弃牌";break;case PlayerState.Check:t="过牌";break;case PlayerState.Raise:t="加注";break;case PlayerState.Call:t="跟注";break;case PlayerState.StandUp:t="离开"}return t},t}(BaseItemRenderer);__reflect(GamblingReviewItemRenderer.prototype,"GamblingReviewItemRenderer");var GiftItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.GiftItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.userHeadCom.init(this.bindData,110),this.nameLabel.text=this.bindData.name,this.goldNumLabel.text="赠送给您"+ProjectDefined.giveOnceGoldNum+"好友金币",this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.receiveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onreceiveBtnClick,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.receiveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onreceiveBtnClick,this)},t.prototype.onreceiveBtnClick=function(e){SoundManager.playButtonEffect(e.target),FriendManager.reqReceiveGift(this.bindData.roleId)},t}(BaseItemRenderer);__reflect(GiftItemRenderer.prototype,"GiftItemRenderer");var GoldItemComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(t){e.prototype.onEnable.call(this,t),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this)},t.prototype.onDisable=function(t){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),e.prototype.onDisable.call(this,t)},t.prototype.init=function(e){if(InfoUtil.checkAvailable(e)&&(this._info=e,this._awardDef=AwardDefined.GetInstance().getDefinition(e.definition.awardId),this._awardDef)){this.goldImg.source=e.definition.iconName+ResSuffixName.PNG,this.goldNum.text=this._awardDef.name,this.goldCount.text=this._awardDef.des;for(var t=0,n=this._awardDef.costList;t<n.length;t++){var i=n[t];i.type==CostType.RMB&&(this.goldBtn.label=i.count/100+"元")}}},t.prototype.buy=function(){ChannelManager.PaySend(this._info.id)},t}(BaseComponent);__reflect(GoldItemComponent.prototype,"GoldItemComponent");var GuessBuyItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.GuessBuyItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),InfoUtil.checkAvailable(this.bindData)&&(this.reset(),this.typeLabel.text=this.bindData.definition.des,this.oddsLabel.text=this.bindData.definition.odds.toString(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.ante1RB.addEventListener(eui.UIEvent.CHANGE,this.anteClick,this),this.ante2RB.addEventListener(egret.Event.CHANGE,this.anteClick,this),this.ante3RB.addEventListener(egret.Event.CHANGE,this.anteClick,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.ante1RB.removeEventListener(eui.UIEvent.CHANGE,this.anteClick,this),this.ante2RB.removeEventListener(egret.Event.CHANGE,this.anteClick,this),this.ante3RB.removeEventListener(egret.Event.CHANGE,this.anteClick,this)},t.prototype.anteClick=function(e){if(GamblingManager.guessHandler.buyInning)return AlertManager.showAlert("请先取消购买再选择"),void(e.target.selected=!e.target.selected);var t=parseInt(e.target.label);if(void 0!=this.preSelectedAnte){if(this.preSelectedAnte==t)return this.preSelectedAnte=0,GamblingManager.guessHandler.totalAnte-=t,GamblingManager.guessHandler.setBuyGuessAnteInfo(this.bindData.id,0),void GamblingManager.guessHandler.onChangeTotalAnteEvent.dispatch();GamblingManager.guessHandler.totalAnte-=this.preSelectedAnte,GamblingManager.guessHandler.totalAnte+=t}else GamblingManager.guessHandler.totalAnte+=t;for(var n=0;n<this.toggleBtns.length;n++){var i=this.toggleBtns[n];i==e.target?i.selected=e.target.selected:i.selected=!1}GamblingManager.guessHandler.setBuyGuessAnteInfo(this.bindData.id,t),this.preSelectedAnte=t,GamblingManager.guessHandler.onChangeTotalAnteEvent.dispatch()},t.prototype.reset=function(){this.preSelectedAnte=void 0,this.toggleBtns=new Array;for(var e=1;3>=e;e++)this.toggleBtns.push(this["ante"+e+"RB"]);if(GamblingManager.guessHandler.buyGuessAnteInfo)for(var t=0,n=GamblingManager.guessHandler.buyGuessAnteInfo;t<n.length;t++){var i=n[t];if(this.bindData.id==i.id)for(var e=0;e<this.toggleBtns.length;e++){var a=this.toggleBtns[e];parseInt(a.label)==i.num?(a.selected=!0,this.preSelectedAnte=i.num):a.selected=!1}}},t.prototype.radioChangeHandler=function(e){var t=e.target;this.preSelectedAnte?(GamblingManager.guessHandler.totalAnte-=this.preSelectedAnte,GamblingManager.guessHandler.totalAnte+=parseInt(t.selectedValue)):GamblingManager.guessHandler.totalAnte+=parseInt(t.selectedValue),this.preSelectedAnte=parseInt(t.selectedValue),GamblingManager.guessHandler.onChangeTotalAnteEvent.dispatch()},t}(BaseItemRenderer);__reflect(GuessBuyItemRenderer.prototype,"GuessBuyItemRenderer");var GuessRecordItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.GuessRecordItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.bindData){var t=qin.DateTimeUtil.formatTimestamp(this.bindData.time,qin.DateTimeUtil.Format_Standard_NoSecond);this.timeLabel.text=t.split(" ")[1],this.recordLabel.text=this.bindData.record,this.anteLabel.text=this.bindData.ante.toString(),this.goldLabel.text=this.bindData.gold.toString(),this.card1.init(this.bindData.card1),this.card1.initElementsShow2(),this.card2.init(this.bindData.card2),this.card2.initElementsShow2()}},t}(BaseItemRenderer);__reflect(GuessRecordItemRenderer.prototype,"GuessRecordItemRenderer");var GuessResultItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.GuessResultItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.bindData){var t=qin.DateTimeUtil.formatTimestamp(this.bindData.time,qin.DateTimeUtil.Format_Standard_NoSecond);this.timeLabel.text=t.split(" ")[1],this.anteLabel.text=this.bindData.ante.toString(),this.card1.init(this.bindData.card1),this.card1.initElementsShow2(),this.card2.init(this.bindData.card2),this.card2.initElementsShow2()}},t}(BaseItemRenderer);__reflect(GuessResultItemRenderer.prototype,"GuessResultItemRenderer");var GuessWeekItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.GuessWeekItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.rankLabel.text=this.bindData.rank.toString(),this.nameLabel.text=this.bindData.name,this.anteLabel.text=this.bindData.ante.toString(),this.numLabel.text=this.bindData.gold.toString())},t}(BaseItemRenderer);__reflect(GuessWeekItemRenderer.prototype,"GuessWeekItemRenderer");var GuideAnswerErrorItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.GuideAnswerErrorItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(void 0!=this.bindData.scale&&(this.card.scaleX=this.card.scaleY=this.bindData.scale),this.card.init(this.bindData.info),this.card.initElementsShow2(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this)},t.prototype.showMask=function(){this.card&&this.card.showMask(!0)},t}(BaseItemRenderer);__reflect(GuideAnswerErrorItemRenderer.prototype,"GuideAnswerErrorItemRenderer");var GuideQueItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.GuideQuestionItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.answerRadioBtn.selected=!1,this.bindData){var t=CardTypeMatchUtil.getCardDes(this.bindData.id);t&&(this.answerRadioBtn.label=t,this.answerRadioBtn.value=this.bindData.id)}},t}(BaseItemRenderer);__reflect(GuideQueItemRenderer.prototype,"GuideQueItemRenderer");var HappyGiftItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.HappyGiftItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.getPrizeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getPrize,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.refreshUI()},t.prototype.refreshUI=function(){if(InfoUtil.checkAvailable(this.bindData)){if(this.costLabel.text=qin.MathUtil.numAddSpace(this.bindData.definition.cost)+"欢乐券",this.bindData.awardInfoDef){var e=this.bindData.awardInfoDef.rewardList;if(e.length>0){var t=ItemDefined.GetInstance().getDefinition(e[0].id);t&&(t.id==ItemFixedId.gold?this.nameLabel.text=t.name+" * "+qin.MathUtil.formatNum(e[0].count):this.nameLabel.text=t.name,this.itemComp.init(t.icon+ResSuffixName.PNG,130,null,!1,!0))}}this.bindData.definition.limit>this.bindData.buyTime?this.getPrizeBtn.visible=!0:this.getPrizeBtn.visible=!1}},t.prototype.getPrize=function(){var e=ActivityManager.getActivityInfo(this.bindData.id);e&&(e.step>this.bindData.definition.cost?ActivityManager.ReqGetActivityAward(this.bindData.id,this.bindData.subId):UIManager.showFloatTips("欢乐券不足！"))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.getPrizeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getPrize,this)},t}(BaseItemRenderer);__reflect(HappyGiftItemRenderer.prototype,"HappyGiftItemRenderer");var HappyGiftRankRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.HappyGiftRankRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.refreshUI()},t.prototype.refreshUI=function(){this.bindData&&(this.rankLabel.text=this.bindData.rank.toString(),this.head.init(this.bindData,40),this.userNameLabel.text=this.bindData.name,this.goldLabel.text=qin.MathUtil.numAddSpace(this.bindData.score),this.setColor())},t.prototype.setColor=function(){this.bindData.roleId==UserManager.userInfo.roleId?(this.rankLabel.textColor=ColorEnum.Golden,this.userNameLabel.textColor=ColorEnum.Golden,this.goldLabel.textColor=ColorEnum.Golden):(this.rankLabel.textColor=ColorEnum.White,this.userNameLabel.textColor=ColorEnum.White,this.goldLabel.textColor=ColorEnum.White)},t}(BaseItemRenderer);__reflect(HappyGiftRankRenderer.prototype,"HappyGiftRankRenderer");var HappyGiftUseRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.HappyGiftUseRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.refreshUI()},t.prototype.refreshUI=function(){if(this.bindData){var e=this.bindData.awardInfoDef;if(e){var t=ItemDefined.GetInstance().getDefinition(e.rewardList[0].id);t&&(this.nameLabel.text=t.name)}this.countLabel.text=this.bindData.buyTime.toString()}},t}(BaseItemRenderer);__reflect(HappyGiftUseRenderer.prototype,"HappyGiftUseRenderer");var HundredWarBankerItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.HundredWarBankerItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoUserInfo,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.refreshUI()},t.prototype.refreshUI=function(){this.bindData&&(this.userHeadCom.init(this.bindData,70),this.nameLabel.text=this.bindData.name,this.goldNumLabel.text="$"+qin.MathUtil.formatNum(this.bindData.gold),this.setBankerImg())},t.prototype.setBankerImg=function(){0==HundredWarManager.panelHandler.HundredWarBankerList.indexOf(this.bindData)?this.bankImg.visible=!0:this.bankImg.visible=!1},t.prototype.gotoUserInfo=function(){HundredWarManager.isSysBanker(this.bindData.roleId)||(SoundManager.playEffect(MusicAction.buttonClick),UserManager.reqShowOtherUserInfoPanel(this.bindData.roleId))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoUserInfo,this)},t}(BaseItemRenderer);__reflect(HundredWarBankerItemRenderer.prototype,"HundredWarBankerItemRenderer");var HundredWarItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.HundredWarItemRenderer,t}return __extends(t,e),t.prototype.updateData=function(){this.dataChanged()},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterRoom,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.refreshUI()},t.prototype.refreshUI=function(){InfoUtil.checkAvailable(this.bindData)&&(this.iconImg.source=this.bindData.definition.icon+ResSuffixName.PNG,this.nameLabel.text=this.bindData.definition.name,this.numLabel.text=this.bindData.join+"/"+this.bindData.definition.maxRole,this.priceLabel.text=qin.MathUtil.formatNum(this.bindData.definition.minBuyin),this.numComp.init("$"+qin.MathUtil.numAddSpace(this.bindData.pool)))},t.prototype.enterRoom=function(){SoundManager.playEffect(MusicAction.buttonClick),InfoUtil.checkAvailable(this.bindData)&&(UserManager.userInfo.gold>=this.bindData.definition.minBuyin?HundredWarManager.reqEnterRoom(this.bindData.id):AlertManager.showConfirm("您的金币不足，快去商城补充点金币吧！",JumpUtil.JumpToShopping,null,null,null,null,"前往商城"))},t.prototype.onDisable=function(e){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterRoom,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this)},t}(BaseItemRenderer);__reflect(HundredWarItemRenderer.prototype,"HundredWarItemRenderer");var HundredWarNoSeatItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.HundredWarNoSeatItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoUserInfo,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.refreshUI()},t.prototype.refreshUI=function(){this.bindData&&(this.userHeadCom.init(this.bindData,80),this.nameLabel.text=this.bindData.name,this.goldNumLabel.text="$"+qin.MathUtil.formatNum(this.bindData.gold))},t.prototype.gotoUserInfo=function(){SoundManager.playEffect(MusicAction.buttonClick),UserManager.reqShowOtherUserInfoPanel(this.bindData.roleId)},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoUserInfo,this)},t}(BaseItemRenderer);__reflect(HundredWarNoSeatItemRenderer.prototype,"HundredWarNoSeatItemRenderer");var HundredWarPoolPrizeItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.HundredWarPoolPrizeItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoUserInfo,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.refreshUI()},t.prototype.refreshUI=function(){if(this.bindData){var e=HundredWarManager.panelHandler.lastPoolInfo.prizeList.indexOf(this.bindData)+1;4>e?(this.rankBgImg.visible=!0,this.rankBgImg.source=ResPrefixName.MTTRankImage+e+ResSuffixName.PNG):this.rankBgImg.visible=!0,this.rankLabel.text=e.toString(),this.userHeadCom.init(this.bindData,60),this.nameLabel.text=this.bindData.name,this.goldNumLabel.text="$"+qin.MathUtil.formatNum(this.bindData.gold)}},t.prototype.gotoUserInfo=function(){HundredWarManager.isSysBanker(this.bindData.roleId)||UserManager.reqShowOtherUserInfoPanel(this.bindData.roleId)},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoUserInfo,this)},t}(BaseItemRenderer);__reflect(HundredWarPoolPrizeItemRenderer.prototype,"HundredWarPoolPrizeItemRenderer");var HundredWarTrendItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.HundredWarTrendItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.refreshUI()},t.prototype.refreshUI=function(){if(this.bindData){for(var e=0;e<this.bindData.length;e++)this.setState(e,this.bindData[e]);this.setNew()}},t.prototype.setNew=function(){0==HundredWarManager.panelHandler.HundredWarTrendList.indexOf(this.bindData)?this.newLabel.visible=!0:this.newLabel.visible=!1},t.prototype.setState=function(e,t){1==t&&(this["text"+e].text="胜",this["bg"+e].source=SheetSubName.HundredWarTrend_Win),0==t&&(this["text"+e].text="负",this["bg"+e].source=SheetSubName.HundredWarTrend_Lose),2==t&&(this["text"+e].text="平",this["bg"+e].source=SheetSubName.HundredWarTrend_Tie)},t}(BaseItemRenderer);__reflect(HundredWarTrendItemRenderer.prototype,"HundredWarTrendItemRenderer");var HWBetItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.HWBetItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.bet.lightImg.visible=!1,HundredWarManager.roomInfo.state==HWState.Bet&&(UserManager.userInfo.gold+HundredWarManager.getThisBetGold())/5>=this.bindData.bet+HundredWarManager.getThisBetGold()?(this.bet.maskImg.visible=!1,this.bindData.isBet=!0):(this.bet.maskImg.visible=!0,this.bindData.isBet=!1),this.setBg(this.bindData.id),0==this.bindData.id&&(this.setActive(),HundredWarManager.oneBetGold=this.bindData.bet),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this)},t.prototype.setActive=function(){this.bet.lightImg.visible=!0},t.prototype.setNotActive=function(){this.bet.lightImg.visible=!1},t.prototype.setBg=function(e){if(HundredWarManager.roomInfo&&HundredWarManager.roomInfo.definition&&HundredWarManager.roomInfo.definition.type==HundredWarType.FunPattern)switch(e){case 0:this.bet.bgImg.source=HWPanelSetting.Chip_100;break;case 1:this.bet.bgImg.source=HWPanelSetting.Chip_1000;break;case 2:this.bet.bgImg.source=HWPanelSetting.Chip_1w;break;case 3:this.bet.bgImg.source=HWPanelSetting.Chip_10w;break;case 4:this.bet.bgImg.source=HWPanelSetting.Chip_100w}else switch(e){case 0:this.bet.bgImg.source=HWPanelSetting.Chip_1000;break;case 1:this.bet.bgImg.source=HWPanelSetting.Chip_1w;break;case 2:this.bet.bgImg.source=HWPanelSetting.Chip_10w;break;case 3:this.bet.bgImg.source=HWPanelSetting.Chip_100w;break;case 4:this.bet.bgImg.source=HWPanelSetting.Chip_1000w}},t}(BaseItemRenderer);__reflect(HWBetItemRenderer.prototype,"HWBetItemRenderer");var InviteFriendListItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.InviteFriendItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&null!=this.bindData.friendInfo&&(this.isCheckedBtn.selected=this.bindData.state,this.userHeadCom.init(this.bindData.friendInfo,90),this.nameLabel.text=this.bindData.friendInfo.name,this.bindData.friendInfo.offlineTime?(this.isOnlineLabel.text="离线",this.isOnlineLabel.textColor=ColorEnum.OutlineGray):(this.isOnlineLabel.text="在线",this.isOnlineLabel.textColor=ColorEnum.InviteOnlineGreen))},t.prototype.setChecked=function(e){this.isCheckedBtn&&(this.isCheckedBtn.selected=e)},t}(BaseItemRenderer);__reflect(InviteFriendListItemRenderer.prototype,"InviteFriendListItemRenderer");var MailItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.MailItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.takePrizeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.takePrize,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.refresh()},t.prototype.refresh=function(){this.bindData&&(this.itemTitleLabel.text=this.bindData.Title,this.itemDesLabel.text=this.bindData.Content,this.dateLabel.text=qin.DateTimeUtil.formatDate(new Date(1e3*this.bindData.Date),qin.DateTimeUtil.Format_China_MonthDay),this.bindData.isHavePrize?(this.itemComp.init(this.bindData.attaList[0].id,88),this.bindData.IsGot?(this.takePrizeBtn.visible=!1,this.takeDesLabel.visible=!0):(this.takePrizeBtn.visible=!0,this.takeDesLabel.visible=!1)):(this.itemComp.init(SheetSubName.DefaultMail,88),this.takePrizeBtn.visible=!1,this.takeDesLabel.visible=!1))},t.prototype.takePrize=function(){PropertyManager.OpenGet(),SocketManager.call(Command.Mail_TakePrize_3098,{MailId:this.bindData.Id},this.onTakePrize,null,this)},t.prototype.onTakePrize=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.bindData.IsGot=!0,PropertyManager.ShowItemList(),this.refresh(),MailManager.getMailPrizeEvent.dispatch()},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.takePrizeBtn&&this.takePrizeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.takePrize,this)},t}(BaseItemRenderer);__reflect(MailItemRenderer.prototype,"MailItemRenderer");var MonthCardItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.MonthCardItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),InfoUtil.checkAvailable(this.bindData)&&(this.iconImg.source=this.bindData.definition.iconName+ResSuffixName.PNG,this._monthCardDefinition=AwardDefined.GetInstance().getDefinition(this.bindData.definition.awardId),this._monthCardDefinition&&(this._monthCardDefinition.costNum&&this._monthCardDefinition.costType&&(this.costLabel.text=this._monthCardDefinition.costNum[0]/100+this.getDesByCostType(this._monthCardDefinition.costType[0])),this._bringAwardDef=AwardDefined.GetInstance().getAwardInfoByPreId(this._monthCardDefinition.id),this._bringAwardDef&&this._bringAwardDef.rewardNum&&(this.goldNumDesLabel.text=this._bringAwardDef.rewardNum[0]+"金币",this.goldNumLabel.text=this._bringAwardDef.rewardNum[0].toString()),this.nameLabel.text=this._monthCardDefinition.name),this.setRendererInfo(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyBtnClick,this),this.bringBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBringBtnClick,this),AwardManager.OnExchanged.addListener(this.bringSuccess,this),AwardManager.OnAwardValueChanged.addListener(this.buySuccess,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyBtnClick,this),this.bringBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBringBtnClick,this),AwardManager.OnExchanged.removeListener(this.bringSuccess,this),AwardManager.OnAwardValueChanged.removeListener(this.buySuccess,this)},t.prototype.setRendererInfo=function(){var e=this.getSurplusTime();e>0?(this.openGroup.visible=!0,this.closeGroup.visible=!1,this.surplusDayLabel.text="剩余:"+qin.DateTimeUtil.GetLefttimeText(e,!1,!0),this.isBring()?this.forbidBringBtn():(this.bringBtn.enabled=!0,this.bringBtn.label="领取")):(this.openGroup.visible=!1,this.closeGroup.visible=!0,this.surplusDayLabel.text="未激活")},t.prototype.forbidBringBtn=function(){this.bringBtn.enabled=!1,this.bringBtn.label="已领取"},t.prototype.bringSuccess=function(e){this._bringAwardDef.id==e&&this.forbidBringBtn()},t.prototype.buySuccess=function(e){e==this._monthCardDefinition.id&&this.setRendererInfo()},t.prototype.onBuyBtnClick=function(e){SoundManager.playEffect(MusicAction.buttonClick),this.tryPay()},t.prototype.onBringBtnClick=function(e){SoundManager.playEffect(MusicAction.buttonClick),this._bringAwardDef&&AwardManager.Exchange(this._bringAwardDef.id)},t.prototype.getSurplusTime=function(){var e=AwardManager.GetExchangeInfo(this.bindData.definition.awardId);return e?e.lastTime-TimeManager.GetServerUtcTimestamp():0},t.prototype.isBring=function(){if(this._bringAwardDef){var e=AwardManager.GetExchangeInfo(this._bringAwardDef.id);if(e&&e.times>=this._bringAwardDef.limit)return!0}return!1},t.prototype.tryPay=function(){this.bindData&&ChannelManager.PaySend(this.bindData.id)},t.prototype.getDesByCostType=function(e){var t;switch(e){case CostType.Gold:t="金币";break;case CostType.Diamond:t="钻石";break;case CostType.RMB:t="元"}return t},t}(BaseItemRenderer);__reflect(MonthCardItemRenderer.prototype,"MonthCardItemRenderer");var MyAwardPanelItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.MyAwardPanelItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this._itemDef=ItemDefined.GetInstance().getDefinition(this.bindData.itemId),this._itemDef&&(this.bindData.effectType=this._itemDef.effectType,this.takePrizeBtn.visible=this.takeDesLabel.visible=this.itemDesLabel.visible=!1,this.comItemIcon.init(this._itemDef.icon+ResSuffixName.PNG,88),this.itemTitleLabel.text=this._itemDef.name,this.takeErrorLabel.visible=!1,1==this.bindData.isGet?(this.takePrizeBtn.visible=this.itemDesLabel.visible=!0,this.itemDesLabel.text=this._itemDef.des):2==this.bindData.isGet&&(this.takeDesLabel.visible=this.itemDesLabel.visible=!0,this.itemDesLabel.text=this._itemDef.des,this.bindData.state==PrizeState.Complete?this._itemDef.effectType==PrizeEffectType.Kind?this.takeDesLabel.text="已发货":this._itemDef.effectType==PrizeEffectType.Cost&&(this.takeDesLabel.text="已充值"):this.bindData.state==PrizeState.Underway?this._itemDef.effectType==PrizeEffectType.Kind?this.takeDesLabel.text="等待发货":this._itemDef.effectType==PrizeEffectType.Cost&&(this.takeDesLabel.text="充值中"):this.bindData.state==PrizeState.InfoError&&(this.takeDesLabel.text="信息错误",this.takeErrorLabel.visible=!0))),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.takePrizeBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),this.takePrizeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTakeAward,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.takePrizeBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancelBubble,this),this.takePrizeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTakeAward,this)},t.prototype.onTakeAward=function(){SoundManager.playEffect(MusicAction.buttonClick),UserManager.userInfo.addressName?this._itemDef.effectType==PrizeEffectType.Kind?UIManager.showPanel(UIModuleName.PrizeOrderSurePanel,{id:this.bindData.itemId,type:PrizeEffectType.Kind,awardName:this._itemDef.name}):UIManager.showPanel(UIModuleName.PrizeOrderSurePanel,{id:this.bindData.itemId,type:PrizeEffectType.Cost,awardName:this._itemDef.name}):AlertManager.showAlert("您尚未填写领奖信息，请填写后再领取奖品",this.skipToInfo)},t.prototype.skipToInfo=function(){PrizeManager.onSkipEvent.dispatch()},t.prototype.cancelBubble=function(e){e.stopImmediatePropagation()},t}(BaseItemRenderer);__reflect(MyAwardPanelItemRenderer.prototype,"MyAwardPanelItemRenderer");var MyTicketItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.MyTicketItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),InfoUtil.checkAvailable(this.bindData)&&(this.commonItem.init(this.bindData.definition.icon+ResSuffixName.PNG,100),this.nameLabel.text=this.bindData.definition.name,this.desLabel.text=this.bindData.definition.des,this.numLabel.text=this.bindData.count.toString())},t}(BaseItemRenderer);__reflect(MyTicketItemRenderer.prototype,"MyTicketItemRenderer");var OutsChildItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.OutsChildItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.rankLabel.text=RankManager.getRankDes(this.bindData.rank,!0),this.userNameLabel.text=this.bindData.name,this.awardLabel.text=this.bindData.award)},t}(BaseItemRenderer);__reflect(OutsChildItemRenderer.prototype,"OutsChildItemRenderer");var OutsItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.list=new eui.List,t.skinName=UIRendererSkinName.OutsItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.bindData){this.dirBtn.touchEnabled=!1;var t=new Date(1e3*this.bindData.time),n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()-1,23,59,59).getTime();this.bindData.time<=Math.floor(i/1e3)?this.dateLabel.text=t.getMonth()+1+"-"+t.getDate():this.dateLabel.text="今天",this.timeLabel.text=qin.DateTimeUtil.formatDate(t,qin.DateTimeUtil.Format_Standard_NoSecond).split(qin.StringConstants.Blank)[1],this.nameLabel.text=this.bindData.name,this.rankLabel.text="冠军",this.userNameLabel.text=this.bindData.rankList[0].name,this.awardLabel.text=this.bindData.rankList[0].award,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getOutsRankInfo,this)}},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getOutsRankInfo,this)},t.prototype.getOutsRankInfo=function(e){SoundManager.playEffect(MusicAction.buttonClick),ChampionshipManager.recentMTTId=this.bindData.id,this.bindData.rankList.length<2?ChampionshipManager.reqGetRankList(this.bindData.recordId):ChampionshipManager.OnGetRankListEvent.dispatch(this.bindData.recordId)},t}(BaseItemRenderer);__reflect(OutsItemRenderer.prototype,"OutsItemRenderer");var PlayingFieldItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.PlayingFieldItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);for(var t=0;9>t;t++)this["toggleBtn"+t].visible=!1,this["toggleBtn"+t].touchEnabled=!1;if(this.bindData){this.anteLabel.visible=!1,this.itemIndex==PlayingFieldManager.roomList.length-1?this.bottomLineImg.visible=!0:this.bottomLineImg.visible=!1,this.bindData.id.toString().length<5?this.roomIdLabel.text=PlayingFieldManager.roomIdAddZero(this.bindData.id):this.roomIdLabel.text=this.bindData.id.toString(),this.blindLabel.text=qin.MathUtil.formatNum(this.bindData.smallBlind)+"/"+qin.MathUtil.formatNum(this.bindData.bigBlind),this.bindData.maxBuy?this.buyLabel.text=qin.MathUtil.formatNum(this.bindData.minBuy)+"/"+qin.MathUtil.formatNum(this.bindData.maxBuy):this.buyLabel.text=qin.MathUtil.formatNum(this.bindData.minBuy),this.bindData.pattern==GamblingPattern.AllIn?this.patternImage.source=SheetSubName.AllInImg:this.bindData.pattern==GamblingPattern.Fast?this.patternImage.source=SheetSubName.FastImg:this.bindData.pattern==GamblingPattern.Ante?(this.patternImage.source=SheetSubName.AnteImg,this.anteLabel.visible=!0,this.anteLabel.text=qin.MathUtil.formatNum(this.bindData.ante)):this.bindData.pattern==GamblingPattern.NoUpperLimit?this.patternImage.source="":this.bindData.pattern==GamblingPattern.Personal?this.patternImage.source=SheetSubName.PersonalImg:this.patternImage.source="";
for(var t=0;t<this.bindData.maxPlayer;t++)this["toggleBtn"+t].visible=!0,this["toggleBtn"+t].selected=!1;for(var n=0;n<this.bindData.player;n++)this["toggleBtn"+n].selected=!0}},t}(BaseItemRenderer);__reflect(PlayingFieldItemRenderer.prototype,"PlayingFieldItemRenderer");var RankItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.RankItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoUserInfo,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.refresh()},t.prototype.refresh=function(){if(this.bindData){if(this.head.init(this.bindData,80),this.bindData.rank<=3?(this.rankImg.visible=!0,this.rankLabel.visible=!1,this.rankImg.source=ResPrefixName.RankImage+this.bindData.rank+ResSuffixName.PNG):(this.rankImg.visible=!1,this.rankLabel.visible=!0,this.rankLabel.text=RankManager.getRankDes(this.bindData.rank)),this.nameLabel.text=this.bindData.name,void 0==this.bindData.score||0==this.bindData.score)this.numLabel.visible=!1;else switch(this.numLabel.visible=!0,this.bindData.type){case RankType.Gold:case RankType.FriendGold:this.numLabel.text="$ "+qin.MathUtil.numAddSpace(this.bindData.score);break;case RankType.Level:case RankType.FriendLevel:this.numLabel.text="等级："+qin.MathUtil.formatNum(this.bindData.score);break;case RankType.Vip:this.numLabel.text="成长值："+qin.MathUtil.formatNum(this.bindData.score)}if(this.showUpOrDown(),this.bindData.change)switch(this.bindData.change){case RankChange.Up:this.showUpOrDown(this.upImage);break;case RankChange.Down:this.showUpOrDown(this.downImage);break;case RankChange.NoChange:this.showUpOrDown(this.noChangeImage)}}},t.prototype.gotoUserInfo=function(){SoundManager.playEffect(MusicAction.buttonClick),UserManager.reqShowOtherUserInfoPanel(this.bindData.roleId)},t.prototype.showUpOrDown=function(e){this.upImage.visible=!1,this.downImage.visible=!1,this.noChangeImage.visible=!1,e&&(e.visible=!0)},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoUserInfo,this)},t}(BaseItemRenderer);__reflect(RankItemRenderer.prototype,"RankItemRenderer");var ShimTaeYoonHelpItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.ShimTaeYoonHelpItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.oddLabel.text=this.bindData.coefficientDes,this.iconImg0.source=this.bindData.img1,this.iconImg1.source=this.bindData.img2,this.iconImg2.source=this.bindData.img3,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this)},t}(BaseItemRenderer);__reflect(ShimTaeYoonHelpItemRenderer.prototype,"ShimTaeYoonHelpItemRenderer");var ShimTaeYoonItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.ShimTaeYoonItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.iconImg.source=ResPrefixName.LaBaResult+this.bindData+ResSuffixName.PNG,this.bgImg.source=ResPrefixName.LaBaResultBg+this.bindData+ResSuffixName.PNG,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this)},t}(BaseItemRenderer);__reflect(ShimTaeYoonItemRenderer.prototype,"ShimTaeYoonItemRenderer");var ShimTaeYoonRankItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.ShimTaeYoonRankItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this),this.refresh()},t.prototype.refresh=function(){this.bindData&&(this.head.init(this.bindData,50),this.bindData.rank<=3?(this.rankImg.visible=!0,this.rankLabel.visible=!1,this.rankImg.source=ResPrefixName.LaBaRankImage+this.bindData.rank+ResSuffixName.PNG):(this.rankImg.visible=!1,this.rankLabel.visible=!0,this.rankLabel.text=this.bindData.rank.toString()),this.nameLabel.text=this.bindData.name,this.numLabel.text=qin.MathUtil.formatNum(this.bindData.score))},t.prototype.onDisable=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDisable,this)},t}(BaseItemRenderer);__reflect(ShimTaeYoonRankItemRenderer.prototype,"ShimTaeYoonRankItemRenderer");var ShopDiamondItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.ShopDiamondItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);for(var t=[this.item0,this.item1,this.item2],n=0,i=t;n<i.length;n++){var a=i[n];a.visible=!1}if(this.bindData)for(var o=0;o<this.bindData.length;o++)this.bindData[o]&&(t[o].visible=!0,t[o].init(this.bindData[o]))},t}(BaseItemRenderer);__reflect(ShopDiamondItemRenderer.prototype,"ShopDiamondItemRenderer");var ShopGoldItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.ShopGoldItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);for(var t=[this.item0,this.item1,this.item2],n=0,i=t;n<i.length;n++){var a=i[n];a.visible=!1}if(this.bindData)for(var o=0;o<this.bindData.length;o++)this.bindData[o]&&(t[o].visible=!0,t[o].init(this.bindData[o]))},t}(BaseItemRenderer);__reflect(ShopGoldItemRenderer.prototype,"ShopGoldItemRenderer");var SignInGoldItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.SignInGoldItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),InfoUtil.checkAvailable(this.bindData)){var t=ActivityManager.getActivityInfo(this.bindData.id);t&&t.step<this.bindData.definition.day?(this.signInCheck.visible=!1,this.signInBg.visible=!1):(this.signInCheck.visible=!0,this.signInBg.visible=!0);var n=AwardDefined.GetInstance().getDefinition(this.bindData.definition.awardId);if(n){this.signInGoldLabel.text=ActivityManager.signInHandler.getAwardDes(n);var i=ItemDefined.GetInstance().getDefinition(n.rewardList[0].id);i&&(this.prizeImg.source=i.icon+ResSuffixName.PNG)}this.signInDayLabel.text="第"+this.bindData.definition.day.toString()+"天"}},t}(BaseItemRenderer);__reflect(SignInGoldItemRenderer.prototype,"SignInGoldItemRenderer");var TextRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.TextRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&this.txtLabel&&(this.txtLabel.text=this.bindData)},t}(BaseItemRenderer);__reflect(TextRenderer.prototype,"TextRenderer");var TimeAwardItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.TimeAwardItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.bindData&&(this.flagImg.visible=!1,1==this.bindData.isBring&&(this.flagImg.visible=!0,this.numLabel.textColor=16435794),this.iconImg.source=this.bindData.icon,this.numLabel.text=qin.MathUtil.formatNum(this.bindData.num))},t}(BaseItemRenderer);__reflect(TimeAwardItemRenderer.prototype,"TimeAwardItemRenderer");var VipListItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIRendererSkinName.VipListItemRenderer,t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),InfoUtil.checkAvailable(this.bindData)&&null!=this.vipImg){var t=AwardDefined.GetInstance().getDefinition(this.bindData.definition.awardId);this.vipImg.source=this.bindData.definition.iconName+ResSuffixName.PNG,this.bindData.definition.type==ShopType.Prop?this.desVip.text=t.des:this.desVip.text=ItemDefined.GetInstance().getDefinition(t.rewardId[0]).des,this.monthVip.text=t.name;for(var n=0,i=t.costList;n<i.length;n++){var a=i[n];a.type==CostType.Diamond&&(this.vipCountBtn.label=a.count.toString())}}},t}(BaseItemRenderer);__reflect(VipListItemRenderer.prototype,"VipListItemRenderer");var UploadHeadManager=function(){function e(){}return e.initialize=function(){ChannelManager.OnImageSelect.addListener(e.onSelectHead,this),UserManager.onWxHeadLoadCompleteEvent.addListener(e.onWxHeadLoadCompleteHandler,this)},e.clearAllData=function(){e._cacheNameList.length=0,e._addNameList.length=0},e.startLoad=function(t,n,i){var a=ProjectDefined.GetInstance().getHeadUpLoadUrl(VersionManager.isServerTest);0==qin.StringUtil.isNullOrEmpty(a)&&0==qin.StringUtil.isNullOrEmpty(i)&&(UpLoader.UpLoad(a,t,i,!0,e.upLoadComplete,e.uploadError,this),e._headPath=n)},e.upLoadComplete=function(t){0==e._isWxLoadBackStage&&AlertManager.showAlert("头像上传完成，请等待审核"),UserManager.userInfo.head=UserManager.userInfo.head+GameSetting.HeadUploadVerifySign+e._headPath,e.OnUploadHeadUpdate.dispatch()},e.uploadError=function(t){0==e._isWxLoadBackStage&&AlertManager.showAlert("头像上传失败，请稍后重试！")},e.onSelectHead=function(t){var n=t.data;if(!qin.StringUtil.isNullOrEmpty(n))switch(t.type){case HeadUploadSystemType.web:n=e.removeAppendData(n),e._isWxLoadBackStage=!1,e.tryUpload(n);break;case HeadUploadSystemType["native"]:if("NoPhoto"==t.data)return void UIManager.showFloatTips("没有使用相册的权限");e._isWxLoadBackStage=!1,e.tryUpload(n)}},e.onWxHeadLoadCompleteHandler=function(t){e._isWxLoadBackStage=!0,t=e.removeAppendData(t),e.tryUpload(t)},e.removeAppendData=function(e){if(-1!=e.indexOf(qin.StringConstants.Comma)){var t=e.indexOf(qin.StringConstants.Comma),n=e.length-t;e=e.substr(t+1,n-1)}return e},e.tryUpload=function(t){try{var n=egret.BitmapData.create("base64",t);e.OnSelectHeadUpdate.dispatch(n);var i=function(t){if(qin.StringUtil.isNullOrEmpty(t))return void UIManager.showFloatTips("请先选择图片");var n=function(n){if(n.data&&null!=n.data.sign&&null!=n.data.path){var i=n.data.path;i=GameSetting.replaceHeadSign(i),e.startLoad(n.data.sign,i,t)}};SocketManager.callAsync(Command.Role_UploadHead_3683,{FileExt:e.FileExt},n,null,this)};i(t)}catch(a){UIManager.showFloatTips("选择图片失败,请尝试其他图片")}},e.getEncodeBytes=function(e){return qin.CodeUtil.base64ToArrayBuffer(e)},e.clear=function(){},e.selectHead=function(){ChannelManager.imageSelect(e.Size,e.JpgQuality)},e.isDefaultHead=function(e){return e==SheetSubName.Default_Head_Secret||e==SheetSubName.Default_Head_Male||e==SheetSubName.Default_Head_Female||e==SheetSubName.HundredWarSysBanker_Head?!0:!1},e.FileExt="jpg",e.JpgQuality=75,e.Size=128,e.MaxCache=300,e._cacheNameList=new Array,e._addNameList=new Array,e._isWxLoadBackStage=!1,e.OnSelectHeadUpdate=new qin.DelegateDispatcher,e.OnUploadHeadUpdate=new qin.DelegateDispatcher,e}();__reflect(UploadHeadManager.prototype,"UploadHeadManager");var RoundSplitInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){},t}(BaseServerValueInfo);__reflect(RoundSplitInfo.prototype,"RoundSplitInfo");var RoundInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){},t}(BaseServerValueInfo);__reflect(RoundInfo.prototype,"RoundInfo");var RoomOverType;!function(e){e[e.Usual=1]="Usual",e[e.Disband=2]="Disband"}(RoomOverType||(RoomOverType={}));var RoundDetialsInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(RoundInfo);__reflect(RoundDetialsInfo.prototype,"RoundDetialsInfo");var ActionButtonDisappear=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isRunOver=!0,t}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.target.alpha=1,this.target.rotation=0},t.prototype.run=function(t,n,i){if(1==this.isRunOver){e.prototype.run.call(this,n);var a=egret.Tween.get(this.target);this.target.x=t.x,this.target.y=t.y,this._parent=i,this.target.touchEnabled=!1,a.to({rotation:-90,alpha:0,x:n.x,y:n.y,scaleX:.1,scaleY:.1},250).call(this.runOver,this),this.isRunOver=!1}},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.target.visible=!1,this.target.touchEnabled=!0,this._parent&&(this._parent.visible=!1),this.isRunOver=!0},t.prototype.clear=function(){e.prototype.clear.call(this)},t}(BaseAnimation);__reflect(ActionButtonDisappear.prototype,"ActionButtonDisappear");var UserInfo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=100,t.height=100,t}return __extends(t,e),t.prototype.copyValueFrom=function(t){e.prototype.copyValueFrom.call(this,t),t.maxHand&&(this.maxHandList=new Array,GamblingUtil.cardArr2CardInfoList(t.maxHand,this.maxHandList),CardTypeMatchUtil.matchCardType(this.maxHandList),this.maxHandName=CardTypeMatchUtil.getCardDes(CardTypeMatchUtil.cardType))},t.prototype.reset=function(){this._diamond=0,this._gold=0,this._saveGold=0,this.timestamp=0,this.timezone=0,this.roleId=0,this.name=qin.StringConstants.Empty,this.head=null,this.sex=0,this.level=0,this.exp=0,this.ip=qin.StringConstants.Empty,this.sign=qin.StringConstants.Empty,this.age=0,this.lastGoldTime=Math.round(TimeManager.Utc1970.getTime()/1e3),this.createdTime=Math.round(TimeManager.Utc1970.getTime()/1e3),this.maxGold=0,this.maxGoldOnetimes=0,this._friendNum=0,this.gameTimes=0,this.winTimes=0,this.maxHandList=void 0,this.maxHandName=qin.StringConstants.Empty,this.championTimes=0,this.addressName=qin.StringConstants.Empty,this.phoneNum=qin.StringConstants.Empty,this.qqNum=qin.StringConstants.Empty,this.eMail=qin.StringConstants.Empty,this.address=qin.StringConstants.Empty,this.vipType=0,this.vipExp=0,this.vipSpeed=0,this.vipTime=0,this.yearVipTime=0,this.allAchieveList=null,this.isOffline=void 0,this.stateId=0,this.stateRoomId=0,this.stateMatchId=0,this._isHeadVerify=!1,this.mno=void 0,this.FuncList=void 0},Object.defineProperty(t.prototype,"diamond",{get:function(){return this._diamond},set:function(e){this._diamond=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gold",{get:function(){return this._gold},set:function(e){this._gold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"safeGold",{get:function(){return this._saveGold},set:function(e){this._saveGold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verifyHead",{get:function(){return this._verifyHead},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return qin.StringUtil.isNullOrEmpty(this._head)?SheetSubName.getdefaultHead(this.sex):this._head},set:function(e){if(this._isHeadUnPass=!1,this._isHeadVerify=!1,0==qin.StringUtil.isNullOrEmpty(e)&&(this._isHeadVerify=-1!=e.indexOf(GameSetting.HeadUploadVerifySign),this._isHeadUnPass=-1!=e.indexOf(GameSetting.HeadUploadUnPassSign),this._isHeadVerify)){var t=e.split(GameSetting.HeadUploadVerifySign);e=t[0],this._verifyHead=t[1]}this._head=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHeadVerify",{get:function(){return this._isHeadVerify},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHeadUnPass",{get:function(){return this._isHeadUnPass},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"friendNum",{get:function(){return this.roleId==UserManager.userInfo.roleId&&FriendManager.friendList?FriendManager.friendList.length:this._friendNum},set:function(e){this._friendNum=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vipLevel",{get:function(){return VipManager.isVip(this)?VipDefined.GetInstance().getVipLevel(this.vipExp):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userState",{get:function(){return UserManager.getUserState(this)},enumerable:!0,configurable:!0}),t.prototype.addGuideRecord=function(e,t){this.FuncList||(this.FuncList=new Array);var n=this.getGuideInfo(t);n||(n=new GuideInfo),n.Id=e,n.Type=t,this.FuncList.push(n)},t.prototype.getGuideInfo=function(e){var t;if(this.FuncList)for(var n=0;n<this.FuncList.length;n++)if(t=this.FuncList[n],t.Type==e)return t;return t},t}(BaseServerValueInfo);__reflect(UserInfo.prototype,"UserInfo",["IBaseHead"]);var UserManager=function(){function e(){}return e.resetByReLogin=function(){e.userInfo=null,e.otherUserInfoClear()},e.otherUserInfoClear=function(){e.otherUserInfo&&e.otherUserInfo.reset()},e.initialize=function(t,n){if(e.otherUserInfoClear(),e.userInfo=new UserInfo,e.userInfo.copyValueFrom(n),void 0==n.lastGoldTime&&n.createdTime&&(e.userInfo.lastGoldTime=n.createdTime),ChannelManager.loginType==ChannelLoginType.Weixin){var i=void 0;if(LoginManager.loginInfo.channeldata.hasOwnProperty("name")&&(i=LoginManager.loginInfo.channeldata.name),LoginManager.loginInfo.channeldata.hasOwnProperty("head")){var a=LoginManager.loginInfo.channeldata.head;!UploadHeadManager.isDefaultHead(e.userInfo.head)&&e.userInfo.head||!a||e.userInfo.isHeadVerify||e.userInfo.isHeadUnPass||(e._wxHeadHandler||(e._wxHeadHandler=new WxHeadHandler),e._wxHeadHandler.headUrl=a)}var o=void 0;LoginManager.loginInfo.channeldata.hasOwnProperty("sex")&&(o=parseInt(LoginManager.loginInfo.channeldata.sex)),void 0==o&&(o=0),(null!==i&&void 0!==i&&e.userInfo.name!=i||e.userInfo.sex!=o)&&e.reqSetUserInfo(null,o,null)}else e.playerNameOper(e.userInfo),e._wxHeadHandler&&e._wxHeadHandler.clear();SocketManager.AddCommandListener(Command.Role_Push_ExpChange_2028,e.onExpChangeResult,this),SocketManager.AddCommandListener(Command.Role_Push_PropertyChange_2000,e.onPropetyChangeHandler,this),SocketManager.AddCommandListener(Command.Role_Push_HeadReviewPass_2120,e.onHeadReviewPass,this),e.setIsFirstLoginToday()},e.onExpChangeResult=function(t){t.data&&(e.userInfo.level<ExpDefined.GetInstance().dataList[ExpDefined.GetInstance().dataList.length-1].level&&e.userInfo.level!=t.data.level&&(e.userInfo.level=t.data.level,SoundManager.playEffect(MusicAction.levelup),e.levelUpgrade.dispatch()),e.userInfo.exp=t.data.exp)},e.onPropetyChangeHandler=function(t){t.data&&e.userInfo&&(e.setNumProperty("gold",t.data),e.setNumProperty("diamond",t.data),e.setNumProperty("safeGold",t.data),e.propertyChangeEvent.dispatch())},e.onHeadReviewPass=function(t){t.data&&t.data.head&&(e.userInfo.head=t.data.head,e.headImageUpdateEvent.dispatch())},e.setNumProperty=function(t,n){n[t]?e.userInfo[t]=n[t]:e.userInfo[t]=0},e.reqGetOtherUserInfo=function(t,n){var i=function(t){e.otherUserInfo||(e.otherUserInfo=new UserInfo),t.data&&(e.playerNameOper(t.data),e.otherUserInfo.copyValueFrom(t.data),AchievementManager.reqUserAchieveList(e.otherUserInfo),n==FriendUIType.FriendList||n==FriendUIType.GiftList?FriendManager.getUserInfoResult(t,n):(e.otherUserInfo.vipType=VipManager.getVipType(e.otherUserInfo.vipTime,e.otherUserInfo.yearVipTime),e.otherUserInfo.vipSpeed=ProjectDefined.GetInstance().getVipSpeedDefinition(e.otherUserInfo.vipType).speed,e.getOtherUserInfoEa.dispatch()))};e.sendGetUserInfo(t,i)},e.reqShowOtherUserInfoPanel=function(t){var n=function(t){e.otherUserInfo=new UserInfo,t.data&&(e.playerNameOper(t.data),e.otherUserInfo.copyValueFrom(t.data),AchievementManager.reqUserAchieveList(e.otherUserInfo),e.otherUserInfo.vipType=VipManager.getVipType(e.otherUserInfo.vipTime,e.otherUserInfo.yearVipTime),e.otherUserInfo.vipSpeed=ProjectDefined.GetInstance().getVipSpeedDefinition(e.otherUserInfo.vipType).speed,e.getOtherUserInfoEa.dispatch()),FriendManager.isFriend(e.otherUserInfo.roleId)?UIManager.showPanel(UIModuleName.UserInfoPanel):UIManager.showPanel(UIModuleName.UserInfoPanel,{type:FriendInfoType.Send})};e.sendGetUserInfo(t,n)},e.sendGetUserInfo=function(e,t,n){SocketManager.call(Command.Friend_GetRoleInfo_3023,{roleId:e},t,n,this)},e.reqSimpleUserInfo=function(t){var n=function(t){e.OnGetSimpleUserInfoEvent.dispatch(t.data)};SocketManager.call(Command.SimpleUserInfo_Req_3025,{roleId:t},n,null,this)},e.reqCreateRole=function(t,n){var i=function(i){null!=t&&(e.userInfo.name=t),null!=n&&(e.userInfo.sex=n),e.onCreateRoleEvent.dispatch()},a={};null!=t&&(a.name=t),null!=n&&(a.sex=n),SocketManager.call(Command.Role_Create_3012,a,i,null,this)},e.editUserName=function(t){e.reqCreateRole(t,null)},e.reqSetUserInfo=function(t,n,i){if(null!=t||void 0!=n||void 0!=i){var a=function(t){null!=o.sign&&(e.userInfo.sign=o.sign),void 0!=o.sex&&(e.userInfo.sex=o.sex),void 0!=o.age&&(e.userInfo.age=o.age),e.playerNameOper(e.userInfo),e.onSetUserInfoComplete.dispatch()},o={};null!=t&&(o.sign=t),void 0!=n&&(o.sex=n),void 0!=i&&(o.age=i),SocketManager.call(Command.Role_SetInfo_3609,o,a,null,this)}},e.playerNameOper=function(e,t,n){if(void 0===t&&(t="name"),void 0===n&&(n="roleId"),e&&e.hasOwnProperty(n)){var i=e,a=qin.StringConstants.Empty;i[t]?i[t]=a+i[t]:i[t]=a+""}},e.getUserState=function(t){if(t===e.otherUserInfo)return void 0!=t.isOffline&&t.isOffline?UserState.Offline:0==t.stateId?UserState.InGamehall:0==t.stateMatchId?UserState.InGame:UserState.InMatch;switch(SceneManager.sceneType){case SceneType.Hall:return UserState.InGamehall;case SceneType.Game:if(InfoUtil.checkAvailable(GamblingManager.roomInfo)){if(e.userInfo.stateId=GamblingManager.roomInfo.id,e.userInfo.stateRoomId=GamblingManager.roomInfo.definition.id,GamblingManager.roomInfo.gamblingType==GamblingType.Championship){var n=ChampionshipManager.getMatchRoomInfoByRoomId(GamblingManager.roomInfo.id);return InfoUtil.checkAvailable(n)&&(e.userInfo.stateMatchId=n.definition.id),UserState.InMatch}return UserState.InGame}}},e.reqGetFreeGold=function(){PropertyManager.OpenGet(),SocketManager.call(Command.Req_GetFreeGold_3024,null,this.onGetFreeGold,null,this)},e.onGetFreeGold=function(t){t.data&&(PropertyManager.ShowItemList(),e.userInfo.lastGoldTime=t.data.lastGoldTime,e.getFreeGoldEvent.dispatch())},e.reqBindPhone=function(t){SocketManager.callAsync(Command.PhoneBind_3688,{mno:t},function(n){e.userInfo.mno=t,UIManager.showFloatTips("绑定手机成功"),e.bindPhoneEvent.dispatch()},null,this)},Object.defineProperty(e,"isBust",{get:function(){return e.userInfo.gold<=0&&e.userInfo.safeGold<=0?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isFirstLoginToday",{get:function(){return e._isFirstLoginToday},enumerable:!0,configurable:!0}),e.setIsFirstLoginToday=function(){var t=PrefsManager.getNumber(PrefsManager.User_LastLoginTime,0,!0);if(0==t)e._isFirstLoginToday=!0;else{var n=TimeManager.GetServerLocalDateTime(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(1e3*t);i>a?e._isFirstLoginToday=!0:e._isFirstLoginToday=!1}PrefsManager.setNumber(PrefsManager.User_LastLoginTime,TimeManager.GetServerUtcTimestamp(),!0)},e.tryUpLoadWxHead=function(){e._wxHeadHandler&&e._wxHeadHandler.tryUpLoadHead()},e.levelUpgrade=new qin.DelegateDispatcher,e.propertyChangeEvent=new qin.DelegateDispatcher,e.onCreateRoleEvent=new qin.DelegateDispatcher,e.getOtherUserInfoEa=new qin.DelegateDispatcher,e.onSetUserInfoComplete=new qin.DelegateDispatcher,e.getFreeGoldEvent=new qin.DelegateDispatcher,e.headImageUpdateEvent=new qin.DelegateDispatcher,e.bindPhoneEvent=new qin.DelegateDispatcher,e.OnGetSimpleUserInfoEvent=new qin.DelegateDispatcher,e.onWxHeadLoadCompleteEvent=new qin.DelegateDispatcher,e}();__reflect(UserManager.prototype,"UserManager");var UserState;!function(e){e[e.Offline=0]="Offline",e[e.InGamehall=1]="InGamehall",e[e.InGame=2]="InGame",e[e.InMatch=3]="InMatch"}(UserState||(UserState={}));var UserUtil=function(){function e(){}return e.getPercentage=function(e,t){var n;if(1==e)return Math.round(t/ExpDefined.GetInstance().dataList[1].exp*100)/100;if(e>1&&100>e){for(var i=1;e>i;i++)t-=ExpDefined.GetInstance().dataList[i].exp;return n=ExpDefined.GetInstance().dataList[i].exp,Math.round(t/n*100)/100}return 100==e?0:void 0},e.getTitle=function(e){for(var t=0;t<ExpDefined.GetInstance().dataList.length;t++)if(e==ExpDefined.GetInstance().dataList[t].level)return ExpDefined.GetInstance().dataList[t].title;return null},e.isLegalNickName=function(e){var t=e;return t?t.length>6?(AlertManager.showAlert("昵称不能大于6个字"),!1):/^[\u4e00-\u9fa5\dA-Za-z]+$/.test(t)?this.isContainForbiddenName(t)?(AlertManager.showAlert("您输入的昵称包含屏蔽词"),!1):!0:(AlertManager.showAlert("昵称只能为汉字、英文和数字"),!1):(AlertManager.showAlert("昵称不能为空"),!1)},e.isContainForbiddenName=function(e){for(var t=0;t<ForbiddenDefined.GetInstance().dataList.length;t++)if(e.indexOf(ForbiddenDefined.GetInstance().dataList[t].des)>=0)return!0;return!1},e.replaceForbidden=function(e){for(var t=0;t<ForbiddenDefined.GetInstance().dataList.length;t++)if(e.indexOf(ForbiddenDefined.GetInstance().dataList[t].des.toString())>=0){for(var n=ForbiddenDefined.GetInstance().dataList[t].des,i=qin.StringConstants.Empty,a=0;a<n.length;a++)i+=qin.StringConstants.Asterisk;e=e.replace(new RegExp(n,"g"),i)}return e},e.randomNickName=function(e){e=e<Sex.Female?Sex.Male:Sex.Female;var t=this.randomFirstName(),n=this.randomLastName(e);return t.trim()+n.trim()},e.randomFirstName=function(){var e=qin.MathUtil.getRandom(0,NameDefined.GetInstance().lastNameRange-1),t=NameDefined.GetInstance().dataList[e].name;return t},e.randomLastName=function(e){var t,n;return e==Sex.Male?(t=qin.MathUtil.getRandom(0,NameDefined.GetInstance().bboyFirstNameRange-1),n=NameDefined.GetInstance().dataList[t],n.boy):(t=qin.MathUtil.getRandom(0,NameDefined.GetInstance().dataList.length-1),n=NameDefined.GetInstance().dataList[t],n.girl)},e.phoneNumIsValidate=function(e){return e&&e.match(/^1[34578]{1}\d{9}$/)?!0:!1},e.checkPwd=function(e,t,n,i){var a=!1;return!t||0>t||!n||0>n?(qin.Console.log("长度错误"),a):(0==e.length?i.text="*密码不能为空":e.length>t||e.length<n?t==n?i.text="*密码长度为"+t+"位":i.text="*密码长度为"+n+"-"+t+"位":a=!0,a)},e.checkTwoPwd=function(t,n,i,a,o){var r=e.checkPwd(t,i,a,o),s=e.checkPwd(n,i,a,o),l=!1;return t!=n?o.text="*密码两次不一致":r&&s&&(l=!0),l},e.initCode=function(e){e.touchEnabled=!0,e.label="发送验证码"},e.forbidCode=function(e,t){e.touchEnabled=!1,e.label=qin.DateTimeUtil.formatCountdown(t)},e.addCodeCountDown=function(t){void 0==t.time&&(t.time=30),e.forbidCode(t.sendCodeBtn,t.time),t.leftTime=t.time,e.timer=function(){e.updateCodeCountDown(t)},qin.Tick.AddSecondsInvoke(e.timer,e)},e.removeCodeCountDown=function(){qin.Tick.RemoveSecondsInvoke(e.timer,e)},e.updateCodeCountDown=function(t){return 0==t.leftTime?(qin.Tick.RemoveSecondsInvoke(e.timer,e),t.leftTime=t.time,t.sendCodeBtn.touchEnabled=!0,void(t.sendCodeBtn.label="重新发送")):(t.leftTime--,void(0==t.leftTime?t.sendCodeBtn.label=t.leftTime.toString():t.sendCodeBtn.label=qin.DateTimeUtil.formatCountdown(t.leftTime)))},e}();__reflect(UserUtil.prototype,"UserUtil");var WxHeadHandler=function(){function e(){}return e.prototype.tryUpLoadHead=function(){0==qin.StringUtil.isNullOrEmpty(this.headUrl)&&this.upLoadHead()},e.prototype.upLoadHead=function(){RES.getResByUrl(this.headUrl,function(e,t){var n=e;if(n instanceof egret.Texture){var i=qin.StringConstants.Empty;try{i=n.toDataURL("image/jpeg"),qin.StringUtil.isNullOrEmpty(i)&&(i=n.toDataURL("image/png")),i||qin.Console.log("微信头像转base64失败！")}catch(a){qin.Console.log("微信头像转base64出错！")}i&&UserManager.onWxHeadLoadCompleteEvent.dispatch(i)}},this,RES.ResourceItem.TYPE_IMAGE)},e.prototype.clear=function(){this.headUrl=void 0},e}();__reflect(WxHeadHandler.prototype,"WxHeadHandler");var InfoUtil=function(){function e(){}return e.checkAvailable=function(e){return e&&e.definition?!0:!1},e}();__reflect(InfoUtil.prototype,"InfoUtil");var JumpUtil=function(){function e(){}return e.JumpToShopping=function(e,t){UIManager.showPanel(UIModuleName.ShoppingPanel,{tab:e,prevPanelName:t})},e.JumpTofriend=function(){UIManager.showPanel(UIModuleName.FriendPanel)},e.JumpToPlayingField=function(e){UIManager.showPanel(UIModuleName.PlayingFieldPanel)},e.JumpToChampionship=function(){UIManager.showPanel(UIModuleName.ChampionshipPanel)},e.JumpToActivity=function(e){UIManager.showPanel(UIModuleName.ActivityPanel,{prevPanelName:e})},e.JumpToMail=function(){UIManager.showPanel(UIModuleName.MailPanel)},e.JumpToAssignment=function(){UIManager.showPanel(UIModuleName.AssignmentPanel)},e.JumpToSafeBox=function(){VipManager.isVip()?UserManager.userInfo.mno?UserManager.userInfo.isSafePwd?UIManager.showPanel(UIModuleName.SafeBoxPanel):UIManager.showPanel(UIModuleName.SafeCreatePanel):UIManager.showPanel(UIModuleName.BindPhonePanel,{isShowCreatePwd:!0}):AlertManager.showConfirm("保险箱功能仅对VIP用户开放",function(){e.JumpToShopping(ShopGroupIndex.Vip)},null,null,null,null,"成为VIP")},e.JumpToGameRule=function(e){UIManager.showPanel(UIModuleName.GameRulePanel,{prevPanelName:e})},e.JumpToSetting=function(){UIManager.showPanel(UIModuleName.SetPanel)},e.JumpTorank=function(){UIManager.showPanel(UIModuleName.RankPanel)},e.JumpToAchievementInGame=function(e){UIManager.showPanel(UIModuleName.AchievementInGamePanel,e)},e.JumpToAchievementInHundredWar=function(e){UIManager.showPanel(UIModuleName.AchievementInHundredWarPanel,e)},e.JumpToRetrievePwd=function(e){UIManager.showPanel(UIModuleName.AccountRetrievePwdPanel,{prevPanelName:e})},e.JumpToSafeRetrievePwd=function(){UIManager.showPanel(UIModuleName.SafeBoxRetrievePwdPanel)},e.JumpToHundredWar=function(){UIManager.showPanel(UIModuleName.HundredWarPanel)},e.JumpToHundredWarHelp=function(){UIManager.showPanel(UIModuleName.HundredWarHelpPanel)},e.JumpToHundredWarPoolInfo=function(){UIManager.showPanel(UIModuleName.HundredWarPoolInfoPanel)},e.JumpToHundredWarBanker=function(){UIManager.showPanel(UIModuleName.HundredWarBankerListPanel)},e.JumpToHundredWarTrend=function(){UIManager.showPanel(UIModuleName.HundredWarTrendPanel)},e.JumpToHundredWarNoSeatPlayer=function(){UIManager.showPanel(UIModuleName.HundredWarNoSeatPlayerPanel)},e.JumpToHundredWarOver=function(){UIManager.showPanel(UIModuleName.HundredWarOverPanel)},e.JumpToHundredWarAchieve=function(e){UIManager.showPanel(UIModuleName.AchievementInHundredWarPanel,e)},e.JumpByPlayField=function(e,t){switch(e){case AchieveShowPattern.PrimaryPattern:case AchieveShowPattern.MiddlePattern:case AchieveShowPattern.HighPattern:UIManager.showPanel(UIModuleName.PlayingFieldPanel,{enterIndex:e-1,prevPanelName:t});break;case AchieveShowPattern.Race:UIManager.showPanel(UIModuleName.ChampionshipPanel,{enterIndex:0,prevPanelName:t});break;case AchieveShowPattern.HundredWarAll:case AchieveShowPattern.HundredWarFun:case AchieveShowPattern.HundredWarRich:UIManager.showPanel(UIModuleName.HundredWarPanel,{prevPanelName:t})}},e.JumpToChatPanel=function(){UIManager.showPanel(UIModuleName.ChatPanel)},e.JumpToSignIn=function(e){void 0===e&&(e=!1);var t=ActivityManager.getActivityInfoByType(ActivityType.Signin);t?UIManager.showPanel(UIModuleName.SignInPanel,{info:t,isShowfirstPay:e}):qin.Console.log("打开签到面板失败，签到活动数据异常！")},e.JumpToNoticePanel=function(e){UIManager.showPanel(UIModuleName.ImgNotifyPanel,e)},e.JumpToFirstPayPanel=function(){var e=ActivityManager.getActivityInfoByType(ActivityType.PayPrize);e?UIManager.showPanel(UIModuleName.FirstPayPanel,{info:e}):qin.Console.log("打开首充面板失败，首充数据异常！")},e.JumpToPayModePanel=function(e){UIManager.showPanel(UIModuleName.PayModePanel,e)},e}();__reflect(JumpUtil.prototype,"JumpUtil");var SortUtil=function(){function e(){}return e.sortCardById=function(e,t){return e.id>t.id?1:e.id<t.id?-1:0},e.sortY=function(e,t){return e.y>t.y?1:e.y<t.y?-1:0},e.downSort=function(e,t){return e>t?-1:t>e?1:0},e.blindUpSort=function(e,t){if(e.smallBlind>t.smallBlind)return 1;if(e.smallBlind<t.smallBlind)return-1;if(e.smallBlind==t.smallBlind){if(e.player>t.player)return 1;if(e.player<t.player)return-1;if(e.player==t.player)return e.id>t.id?1:e.id<t.id?-1:0}},e.blindDownSort=function(e,t){if(e.smallBlind>t.smallBlind)return-1;if(e.smallBlind<t.smallBlind)return 1;if(e.smallBlind==t.smallBlind){if(e.player>t.player)return-1;if(e.player<t.player)return 1;if(e.player==t.player)return e.id>t.id?-1:e.id<t.id?1:0}},e.roomIdUpSort=function(e,t){return e.id>t.id?1:e.id<t.id?-1:0
},e.roomIdDownSort=function(e,t){return e.id>t.id?-1:e.id<t.id?1:0},e.roomPlayNumUpSort=function(e,t){return e.player>t.player?1:e.player<t.player?-1:e.player==t.player?e.id>t.id?1:e.id<t.id?-1:0:void 0},e.roomPlayNumDownSort=function(e,t){return e.player>t.player?-1:e.player<t.player?1:e.player==t.player?e.id>t.id?-1:e.id<t.id?1:0:0},e.showAchieveListSort=function(e,t){if(1==e.isComplete&&0==t.isComplete)return-1;if(0==e.isComplete&&1==t.isComplete)return 1;if(e.isComplete==t.isComplete){if(e.id>t.id)return 1;if(e.id>t.id)return-1;if(e.id==t.id)return 0}},e.matchStartTimeSort=function(e,t){return e.startTime>t.startTime?1:e.startTime<t.startTime?-1:0},e.friendSort=function(e,t){return!e.offlineTime&&t.offlineTime?-1:e.offlineTime&&!t.offlineTime?1:e.offlineTime&&t.offlineTime||!e.offlineTime&&!t.offlineTime?e.vipLevel>t.vipLevel?-1:e.vipLevel<t.vipLevel?1:0:void 0},e.inviteFriendSort=function(t,n){return e.friendSort(t.friendInfo,n.friendInfo)},e.guessResultTimeSort=function(e,t){return e.time<t.time?1:e.time>t.time?-1:0},e.TicketIdSort=function(e,t){return e.id<t.id?-1:e.id>t.id?1:0},e.MailDateSort=function(e,t){return 0==e.IsGot&&1==t.IsGot?-1:1==e.IsGot&&0==t.IsGot?1:e.IsGot==t.IsGot?e.Date<t.Date?1:e.Date>t.Date?-1:0:void 0},e.MTTOutsInfoTimeSort=function(e,t){return e.time<t.time?1:e.time>t.time?-1:0},e.HundredWarNoSeatSort=function(e,t){if(e.gold<t.gold)return 1;if(e.gold>t.gold)return-1;if(e.gold==t.gold){if(e.roleId<t.roleId)return-1;if(e.roleId>t.roleId)return 1;if(e.roleId==t.roleId)return 0}},e.hundredWarRoomIdUpSort=function(e,t){return e.id>t.id?1:e.id<t.id?-1:0},e.hundredOverRankSort=function(e,t){if(e.num<t.num)return 1;if(e.num>t.num)return-1;if(e.num==t.num){if(e.roleId<t.roleId)return-1;if(e.roleId>t.roleId)return 1;if(e.roleId==t.roleId)return 0}},e.JoinedMTTListSort=function(e,t){if(e.outTime&&!t.outTime)return 1;if(!e.outTime&&t.outTime)return-1;if(e.outTime&&t.outTime){if(e.startTime>t.startTime)return-1;if(e.startTime<t.startTime)return 1;if(e.startTime==t.startTime)return 0}if(!e.outTime&&!t.outTime){if(e.startTime<TimeManager.GetServerUtcTimestamp()&&t.startTime>TimeManager.GetServerUtcTimestamp())return-1;if(e.startTime>TimeManager.GetServerUtcTimestamp()&&t.startTime<TimeManager.GetServerUtcTimestamp())return 1;if(e.startTime<TimeManager.GetServerUtcTimestamp()&&t.startTime<TimeManager.GetServerUtcTimestamp()||e.startTime>TimeManager.GetServerUtcTimestamp()&&t.startTime>TimeManager.GetServerUtcTimestamp()){if(e.startTime>t.startTime)return 1;if(e.startTime<t.startTime)return-1;if(e.startTime==t.startTime)return 0}}},e}();__reflect(SortUtil.prototype,"SortUtil");var UIUtil=function(){function e(){}return e.bindRender=function(e,t,n){if(e&&t){if(void 0!=n){var i=new eui.ArrayCollection(n);e.dataProvider=i}e.itemRenderer||(t instanceof String?e.itemRendererSkinName=t:t instanceof Function&&(e.itemRenderer=t))}},e.listRenderer=function(t,n,i,a,o,r,s){if(void 0===s&&(s=!1),!t||!n||!i)return void qin.Console.log("初始化失败！绑定的组件对象不能为空！");if(void 0!=a&&void 0!=o)switch(n.scrollPolicyH=eui.ScrollPolicy.OFF,n.scrollPolicyV=eui.ScrollPolicy.OFF,a){case ScrollViewDirection.Horizontal_L_R:n.scrollPolicyH=o;break;case ScrollViewDirection.Vertical_T_D:n.scrollPolicyV=o}else n.scrollPolicyH=eui.ScrollPolicy.AUTO,n.scrollPolicyV=eui.ScrollPolicy.AUTO;e.bindRender(t,i,r),t.useVirtualLayout=s,n.viewport=t},e.scrollToIndex=function(e,t,n){if(e&&e.viewport){var i=t*n;e.scrollPolicyH!=eui.ScrollPolicy.OFF&&(e.viewport.scrollH=i),e.scrollPolicyV!=eui.ScrollPolicy.OFF&&(e.viewport.scrollV=i)}},e.hideScrollerBar=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),t&&e&&e.horizontalScrollBar&&(e.horizontalScrollBar.autoVisibility=!1,e.horizontalScrollBar.visible=!1),n&&e&&e.verticalScrollBar&&(e.verticalScrollBar.autoVisibility=!1,e.verticalScrollBar.visible=!1)},e.getHTileLayout=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=egret.HorizontalAlign.LEFT);var i=new eui.TileLayout;return i.horizontalAlign=n,void 0!=e&&(i.horizontalGap=e),void 0!=t&&(i.requestedRowCount=t),i},e.getVTileLayout=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=egret.VerticalAlign.TOP);var i=new eui.TileLayout;return i.verticalAlign=n,void 0!=e&&(i.verticalGap=e),void 0!=t&&(i.requestedColumnCount=t),i},e.getTileLayout=function(e,t,n,i,a,o){var r=new eui.TileLayout;return void 0!=e&&(r.horizontalGap=e),void 0!=t&&(r.verticalGap=t),void 0!=n&&(r.requestedRowCount=n),void 0!=i&&(r.requestedColumnCount=i),void 0!=a&&(r.horizontalAlign=a),void 0!=o&&(r.verticalAlign=o),r},e.getSexImgSource=function(e){return e==Sex.Female?SheetSubName.FemaleImg:e==Sex.Male?SheetSubName.MaleImg:qin.StringConstants.Empty},e.refreshSortContainer=function(e,t){if(t&&e)for(var n=0;n<e.length;n++)t.addChild(e[n])},e.containerImgOper=function(t){qin.ArrayUtil.Clear(e._imgList);for(var n,i=0;i<t.numChildren;i++)n=t.getChildAt(i),n instanceof eui.Image&&(n.source="",e._imgList.push(n));t.removeChildren()},e.getExistImg=function(t,n){void 0===t&&(t=1),void 0===n&&(n=1);var i=e._imgList.pop();return i||(i=new eui.Image),i.scaleX=t,i.scaleY=n,i},e.getNumImg=function(e,t){if(void 0===t&&(t=NumResType.Red),e>=0&&9>=e)switch(t){case NumResType.Red:return ResPrefixName.NumRed+e.toString()+ResSuffixName.PNG;case NumResType.Green:return ResPrefixName.NumGreen+e.toString()+ResSuffixName.PNG;case NumResType.Yellow:return ResPrefixName.NumYellow+e.toString()+ResSuffixName.PNG}},e.ShowHead=function(e,t){e&&(t?e.source=t:e.source=SheetSubName.Default_Head_Male)},e.setGlowerFilter=function(t){if(e.colorFilterList||(e.colorFilterList=new Array),!e.colorFilter){var n=[1,0,0,0,10,0,1,0,0,10,0,0,1,0,10,0,0,0,1,0];e.colorFilter=new egret.ColorMatrixFilter(n),e.colorFilterList[0]=e.colorFilter}t&&(t.filters=e.colorFilterList)},e.clearFilters=function(t){t&&(t.filters=e.emptyFilterList)},e.addSingleNotify=function(t,n,i,a){e.addNotify(t,n,void 0,i,a)},e.addMultiNotify=function(t,n,i,a,o){e.addNotify(t,n,i,a,o)},e.addNotify=function(e,t,n,i,a){var o=new NotifyInfo;o.attachObject=e,o.top=i,o.right=a,o.type=t,o.params=n;var r=new NotifyComponent(UIComponentSkinName.NotifyComponent);r.init(o)},e.setCircleBorderButtonFilter=function(e,t){e.btnImg&&qin.FilterUtil.setColorFilters(e.btnImg,t)},e.setListDpInfo=function(e,t,n,i){if(t&&t.length>0){for(var a=0;a<e.source.length;a++){for(var o=!0,r=0;r<t.length;r++)t[r][n]==e.source[a][n]&&(e.source[a]=t[r],o=!1);o&&e.source.splice(a,1)}for(var a=0;a<t.length;a++){for(var o=!0,r=0;r<e.source.length;r++)if(e.source[r][n]==t[a][n]){o=!1;break}o&&e.source.push(t[a])}}else e.source=[];i&&e.source.sort(i),e.refresh()},e.writeListInfo=function(t,n,i,a,o){if(void 0===a&&(a=!1),t.dataProvider){var r=t.dataProvider;if(!i)return r.source=n,void r.refresh();a&&(r.source=[]),e.setListDpInfo(r,n,i,o)}else o?t.dataProvider=new eui.ArrayCollection(n.sort(o)):t.dataProvider=new eui.ArrayCollection(n)},e.playBoneAnime=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=1);var a=BoneAnimation.getFastAnimeByName(e);if(a)a.state=BonePlayState.Play,a.play(e,n,i);else{var o=function(t){t.play(e,n,i)};BoneAnimationCreater.CreateBoneAnimation(e,t,n,i,o)}},e.stopBoneAnime=function(e){var t=BoneAnimation.getFastAnimeByName(e);t&&(t.state=BonePlayState.Stop,t.stop())},e.loadBg=function(e,t){var n=this;if(!e||!t)return void qin.Console.logError("加载背景异常！url:"+e+"img:"+t);e=ResPrefixPathName.Bg+e;var i=function(e,t){RES.getResAsync(e,function(e){t.source=e},n)};i(e,t)},e.clearLayout=function(e){e.top=0/0,e.bottom=0/0,e.left=0/0,e.right=0/0,e.horizontalCenter=0/0,e.verticalCenter=0/0},e._imgList=new Array,e.emptyFilterList=[],e}();__reflect(UIUtil.prototype,"UIUtil");var VipManager=function(){function e(){}return e.getVipType=function(e,t){var n=TimeManager.GetServerUtcTimestamp();return t&&t>n?VipType.YearVip:e&&e>n?VipType.Vip:VipType.NoVip},e.initialize=function(){SocketManager.AddCommandListener(Command.Vip_GetVipTime_2001,this.onGetVipTime,this),this.refreshVipInfo()},e.isOpenEverVip=function(){return UserManager.userInfo.vipTime||UserManager.userInfo.yearVipTime?!0:!1},e.onGetVipTime=function(t){var n=e.isOpenEverVip();if(t.data.vipTime&&(UserManager.userInfo.vipTime=t.data.vipTime),t.data.yearVipTime&&(UserManager.userInfo.yearVipTime=t.data.yearVipTime),UserManager.userInfo.vipType=e.getVipType(UserManager.userInfo.vipTime,UserManager.userInfo.yearVipTime),UserManager.userInfo.vipSpeed=ProjectDefined.GetInstance().getVipSpeedDefinition(UserManager.userInfo.vipType).speed,0==n&&e.isVip()&&!UserManager.userInfo.isSafePwd){var i=function(){UIManager.showPanel(UIModuleName.BindPhonePanel,{isShowCreatePwd:!0})};AlertManager.showConfirm("您开通了VIP，保险箱已为您免费开放，请尽快设定您的保险箱密码!",i,null,null,null,null,"前往设定")}e.vipUpgradeEvent.dispatch()},e.refreshVipInfo=function(){UserManager.userInfo.vipType=e.getVipType(UserManager.userInfo.vipTime,UserManager.userInfo.yearVipTime),UserManager.userInfo.vipSpeed=ProjectDefined.GetInstance().getVipSpeedDefinition(UserManager.userInfo.vipType).speed},e.isVip=function(e){var t;return t=e?e:UserManager.userInfo,null==t.vipType||t.vipType==VipType.NoVip?!1:!0},e.GetVipTime=function(){var e=TimeManager.GetServerUtcTimestamp();switch(UserManager.userInfo.vipType){case VipType.NoVip:return 0;case VipType.YearVip:return UserManager.userInfo.vipTime>e?UserManager.userInfo.vipTime:UserManager.userInfo.yearVipTime;case VipType.Vip:return UserManager.userInfo.vipTime}},e.getActiveMonthCard=function(){for(var e,t=new Array,n=new Array,i=0;i<ShopDefined.GetInstance().dataList.length;i++)e=new ShopInfo,e.id=ShopDefined.GetInstance().dataList[i].id,e.definition&&e.definition.type==ShopType.MonthCard&&t.push(e);for(var a=0,o=t;a<o.length;a++){var r=o[a];if(r.definition){var s=AwardManager.GetExchangeInfo(r.definition.awardId);if(s){var l=s.lastTime-TimeManager.GetServerUtcTimestamp();l>0&&n.push(r)}}else qin.Console.log("月卡配置异常！")}return n},e.isActiveMonthCard=function(){var t=e.getActiveMonthCard();return t&&t.length>0?!0:!1},e.isBringMonthCardAward=function(){var t,n=e.getActiveMonthCard();if(n)for(var i=0,a=n;i<a.length;i++){var o=a[i];if(o.definition){var r=AwardManager.GetExchangeInfo(o.definition.awardId);if(r&&(t=AwardDefined.GetInstance().getAwardInfoByPreId(r.id))){var s=AwardManager.GetExchangeInfo(t.id);if(!s)return!1;if(s.times<t.limit)return!1}}else qin.Console.log("月卡配置异常！")}return!0},e.vipUpgradeEvent=new qin.DelegateDispatcher,e}();__reflect(VipManager.prototype,"VipManager");var VipType;!function(e){e[e.NoVip=0]="NoVip",e[e.Vip=1]="Vip",e[e.YearVip=2]="YearVip"}(VipType||(VipType={}));var AccountConfig=function(){function e(){}return e.InputCharMin=6,e.InputCharMax=32,e.MobileNoMin=11,e.MobileNoMax=13,e.MobileCodeTimeout=600,e}();__reflect(AccountConfig.prototype,"AccountConfig");var AccountCode=function(){function e(){}return e.GetDescription=function(t){if(qin.StringUtil.isNullOrEmpty(t))return"状态码为空";switch(t){case e.Success:return qin.StringConstants.Empty;case"-1":return"帐号系统错误";case"-2":return"服务器维护";case"1001":return"参数错误";case"1002":return"帐号不存在";case"1003":return"帐号已存在";case"1004":return"帐号信息校验失败";case"1006":return"登录失败";case"1007":return"应用不存在";case"1008":return"签名验证失败";case"1009":return"帐号或密码错误";case"1010":return"短信验证码发送失败";case"1011":return"短信验证码验证失败";case"1012":return"手机号码未绑定";case"1013":return"手机号码已绑定";case"1018":return"帐号已禁用";case"1019":return"该手机号码发送次数超过当天限制";case"1020":return"该手机号码发送次数超过每小时限制";case"1021":return"短信发送次数过于频繁，请一分钟后再试";case"1022":return"手机账号不能绑定/解绑";case"1023":return"请求过于频繁，请稍后再试";case"2001":return"token验证失败";case"2002":return"应用不存在";case"2003":return"签名校验失败";case"2004":return"应用已禁用"}return qin.StringConstants.Empty},e.Success="0",e}();__reflect(AccountCode.prototype,"AccountCode");var AccountHttpUrl=function(){function e(){}return e.API_URL="http://api.istar9.com/oauth1/",e.login=e.API_URL+"login",e.register=e.API_URL+"register",e.phone_register=e.API_URL+"phone_register2",e.phone_register_verify=e.API_URL+"phone_register_verify",e.phone_bind=e.API_URL+"phone_bind2",e.phone_bind_verify=e.API_URL+"phone_bind_verify",e.phone_unbind_verify=e.API_URL+"phone_unbind_verify",e.modify_password=e.API_URL+"modify_password",e.phone_find_password=e.API_URL+"phone_find_password2",e.phone_modify_password=e.API_URL+"phone_modify_password",e.sq_modify_password=e.API_URL+"sq_modify_password",e.sq_set=e.API_URL+"sq_set",e}();__reflect(AccountHttpUrl.prototype,"AccountHttpUrl");var AccountManager=function(){function e(){}return e.ShowUserCenter=function(){UIManager.showPanel(UIModuleName.BindAccountPanel)},e.ShowLogin=function(t,n){if(void 0===n&&(n=!1),t){var i=e.AutoLogin();0==qin.StringUtil.isNullOrEmpty(i)?UIManager.showPanel(UIModuleName.AutoLoginPanel):UIManager.showPanel(UIModuleName.LoginTelPanel)}else n||UIManager.showPanel(UIModuleName.LoginTelPanel)},e.showBind=function(){UIManager.showPanel(UIModuleName.BindAccountPanel)},Object.defineProperty(e,"account",{get:function(){return e._account},enumerable:!0,configurable:!0}),Object.defineProperty(e,"uid",{get:function(){return e._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e,"mno",{get:function(){return e._mno},enumerable:!0,configurable:!0}),Object.defineProperty(e,"formatMno",{get:function(){return qin.StringUtil.isNullOrEmpty(e._mno)?e._startStr:e._mno.length<4?e._startStr+e._mno:e._startStr+e._mno.substring(e._mno.length-4)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isBindPhone",{get:function(){return 0==qin.StringUtil.isNullOrEmpty(e._mno)},enumerable:!0,configurable:!0}),e.Logout=function(){e._account=null,e._uid=null,e._mno=null,e._token=null},Object.defineProperty(e,"isUsePhone",{get:function(){return e._usePhone},enumerable:!0,configurable:!0}),e.addField=function(e,t,n){return void 0===n&&(n="&"),n+e+"="+t},e.Initialize=function(t,n,i,a){void 0===a&&(a=!0),e._appId=t,e._channel=n,e._deviceId=i,e._usePhone=a},e.AutoLogin=function(){var t=AccountPlayerPrefs.GetAccountList();if(null!=t&&t.length>0){var n=t[0];return e.LoginCoroutine(!0,AccountHttpUrl.login,n.account,n.pw,!0),n.account}return null},e.parseData=function(t,n,i){e._account=t,e._uid=n.uid,e._mno=n.mno,e._token=n.token,AccountPlayerPrefs.InsertAccount(e._account,i)},e.getRequestData=function(t,n){var i=qin.StringConstants.Empty;return i+=e.addField("appid",e._appId,qin.StringConstants.Empty),i+=e.addField("account",t),i+=e.addField("pw",n),i+=e.addField("did",e._deviceId),i+=e.addField("channel",e._channel)},e.Login=function(t,n,i,a){void 0===a&&(a=!1),e.OnLoadingStart.dispatch(),e.LoginCoroutine(!1,AccountHttpUrl.login,t,n,i,a)},e.LoginCoroutine=function(t,n,i,a,o,r){void 0===r&&(r=!1);var s=o?a:qin.Crypt.hex_md5(a),l=e.getRequestData(i,s);URLLoader.downloadContent(n,this,function(t){e.OnLoadingFinish.dispatch();var a=AccountUtil.ResultToHashtable(t,n);if(null!=a){var o=a.code;o==AccountCode.Success?(e.parseData(i,a,s),e.OnLoginSuccess.dispatch({token:e._token,uid:e._uid})):(AccountUtil.ShowCodeFloatTips(o,a.msg),e.ShowLogin(!1,r))}else e.ShowLogin(!1,r)},function(){e.ShowLogin(!1,r)},l)},e.Register=function(t,n){e.OnLoadingStart.dispatch(),e.RegisterCoroutine(AccountHttpUrl.register,t,n)},e.RegisterCoroutine=function(t,n,i){var a=qin.Crypt.hex_md5(i),o=e.getRequestData(n,a);URLLoader.downloadContent(t,this,function(o){e.OnLoadingFinish.dispatch();var r=AccountUtil.ResultToHashtable(o,t);if(null!=r){var s=r.code;s==AccountCode.Success?(e.parseData(n,r,a),e.OnRegisterSuccess.dispatch({token:e._token,uid:e._uid,account:e._account,pw:i})):AccountUtil.ShowCodeFloatTips(s,r.msg)}},null,o)},e.PhoneRegister=function(t,n){void 0===n&&(n=!1),e.OnLoadingStart.dispatch(),e.PhoneRegisterCoroutine(t,n)},e.PhoneRegisterCoroutine=function(t,n){var i=qin.StringConstants.Empty;i+=e.addField("mno",t,qin.StringConstants.Empty),i+=e.addField("appid",e._appId);var a=AccountHttpUrl.phone_register;URLLoader.downloadContent(a,this,function(i){e.OnLoadingFinish.dispatch();var o=AccountUtil.ResultToHashtable(i,a);if(null!=o){var r=o.code;r==AccountCode.Success?n?e.OnAgainMobileCode.dispatch():e.OnPhoneRegister.dispatch(t):AccountUtil.ShowCodeFloatTips(r,o.msg)}},null,i)},e.PhoneRegisterVerify=function(t,n,i){e.OnLoadingStart.dispatch(),e.PhoneRegisterVerifyCoroutine(t,n,i)},e.PhoneRegisterVerifyCoroutine=function(t,n,i){var a=qin.Crypt.hex_md5(i),o=qin.StringConstants.Empty;o+=e.addField("appid",e._appId,qin.StringConstants.Empty),o+=e.addField("mno",t),o+=e.addField("vcode",n),o+=e.addField("pw",a),o+=e.addField("did",e._deviceId),o+=e.addField("channel",e._channel);var r=AccountHttpUrl.phone_register_verify;URLLoader.downloadContent(r,this,function(n){e.OnLoadingFinish.dispatch();var o=AccountUtil.ResultToHashtable(n,r);if(null!=o){var s=o.code;s==AccountCode.Success?(e.parseData(t,o,a),e.OnRegisterSuccess.dispatch({token:e._token,uid:e._uid,pw:i})):AccountUtil.ShowCodeFloatTips(s,o.msg)}},null,o)},e.PhoneBind=function(t,n){void 0===n&&(n=!1),e.OnLoadingStart.dispatch(),e.PhoneBindCoroutine(e._account,t,n)},e.PhoneBindCoroutine=function(t,n,i){var a=qin.StringConstants.Empty;a+=e.addField("account",t,qin.StringConstants.Empty),a+=e.addField("mno",n),a+=e.addField("appid",e._appId);var o=AccountHttpUrl.phone_bind;URLLoader.downloadContent(o,this,function(t){e.OnLoadingFinish.dispatch();var a=AccountUtil.ResultToHashtable(t,o);if(null!=a){var r=a.code;r==AccountCode.Success?i?e.OnAgainMobileCode.dispatch():e.OnPhoneBind.dispatch({mno:n,isBindPhone:0==e.isBindPhone}):AccountUtil.ShowCodeFloatTips(r,a.msg)}},null,a)},e.PhoneBindVerify=function(t,n){e.OnLoadingStart.dispatch(),e.PhoneBindVerifyCoroutine(t,e._account,n)},e.PhoneBindVerifyCoroutine=function(t,n,i){var a=qin.Crypt.hex_md5(i),o=qin.StringConstants.Empty;o+=e.addField("vcode",t,qin.StringConstants.Empty),o+=e.addField("account",n),o+=e.addField("pw",a),o+=e.addField("appid",e._appId);var r=AccountHttpUrl.phone_bind_verify;URLLoader.downloadContent(r,this,function(t){e.OnLoadingFinish.dispatch();var n=AccountUtil.ResultToHashtable(t,r);if(null!=n){var i=n.code;i==AccountCode.Success?(e._mno=n.mno,e.OnPhoneBindVerify.dispatch(!0),AccountUtil.ShowPhoneBindFloatTips(!0)):AccountUtil.ShowCodeFloatTips(i,n.msg)}},null,o)},e.PhoneUnbindVerify=function(t){e.OnLoadingStart.dispatch(),e.PhoneUnbindVerifyCoroutine(t,e._account)},e.PhoneUnbindVerifyCoroutine=function(t,n){var i=qin.StringConstants.Empty;i+=e.addField("vcode",t,qin.StringConstants.Empty),i+=e.addField("account",n),i+=e.addField("appid",e._appId);var a=AccountHttpUrl.phone_unbind_verify;URLLoader.downloadContent(a,this,function(t){e.OnLoadingFinish.dispatch();var n=AccountUtil.ResultToHashtable(t,a);if(null!=n){var i=n.code;i==AccountCode.Success?(e._mno=null,e.OnPhoneBindVerify.dispatch(),AccountUtil.ShowPhoneBindFloatTips(!1)):AccountUtil.ShowCodeFloatTips(i,n.msg)}},null,i)},e.ModifyPassword=function(t,n){e.OnLoadingStart.dispatch(),e.ModifyPasswordCoroutine(e._account,t,n)},e.ModifyPasswordCoroutine=function(t,n,i){var a=qin.Crypt.hex_md5(i),o=qin.Crypt.hex_md5(n),r=qin.StringConstants.Empty;r+=e.addField("account",t,qin.StringConstants.Empty),r+=e.addField("pw",o),r+=e.addField("pw2",a),r+=e.addField("appid",e._appId);var s=AccountHttpUrl.modify_password;URLLoader.downloadContent(s,this,function(n){e.OnLoadingFinish.dispatch();var i=AccountUtil.ResultToHashtable(n,s);if(null!=i){var o=i.code;o==AccountCode.Success?(AccountPlayerPrefs.InsertAccount(t,a),e.OnModifyPassword.dispatch(),AccountUtil.ShowModifyPwFloatTips()):AccountUtil.ShowCodeFloatTips(o,i.msg)}},null,r)},e.PhoneFindPassword=function(t,n,i){void 0===i&&(i=!1),e.OnLoadingStart.dispatch(),e.PhoneFindPasswordCoroutine(t,n,i)},e.PhoneFindPasswordCoroutine=function(t,n,i){var a=qin.StringConstants.Empty;a+=e.addField("account",t,qin.StringConstants.Empty),a+=e.addField("mno",n),a+=e.addField("appid",e._appId);var o=AccountHttpUrl.phone_find_password;URLLoader.downloadContent(o,this,function(a){e.OnLoadingFinish.dispatch();var r=AccountUtil.ResultToHashtable(a,o);if(null!=r){var s=r.code;s==AccountCode.Success?i?e.OnAgainMobileCode.dispatch():e.OnPhoneFindPassword.dispatch({account:t,mno:n}):AccountUtil.ShowCodeFloatTips(s,r.msg)}},null,a)},e.PhoneModifyPassword=function(t,n,i){e.OnLoadingStart.dispatch(),e.PhoneModifyPasswordCoroutine(t,n,i)},e.PhoneModifyPasswordCoroutine=function(t,n,i){var a=qin.Crypt.hex_md5(i),o=qin.StringConstants.Empty;o+=e.addField("vcode",t,qin.StringConstants.Empty),o+=e.addField("account",n),o+=e.addField("pw",a),o+=e.addField("appid",e._appId);var r=AccountHttpUrl.phone_modify_password;URLLoader.downloadContent(r,this,function(t){e.OnLoadingFinish.dispatch();var i=AccountUtil.ResultToHashtable(t,r);if(null!=i){var o=i.code;o==AccountCode.Success?(AccountPlayerPrefs.InsertAccount(n,a),e.OnPhoneModifyPassword.dispatch(),AccountUtil.ShowModifyPwFloatTips()):AccountUtil.ShowCodeFloatTips(o,i.msg)}},null,o)},e._startStr="*******",e.OnLoadingStart=new qin.DelegateDispatcher,e.OnLoadingFinish=new qin.DelegateDispatcher,e.OnSelectTab=new qin.DelegateDispatcher,e.OnAgainMobileCode=new qin.DelegateDispatcher,e.OnLoginSuccess=new qin.DelegateDispatcher,e.OnRegisterSuccess=new qin.DelegateDispatcher,e.OnLoginCancel=new qin.DelegateDispatcher,e.OnPhoneRegister=new qin.DelegateDispatcher,e.OnPhoneBind=new qin.DelegateDispatcher,e.OnPhoneBindVerify=new qin.DelegateDispatcher,e.OnModifyPassword=new qin.DelegateDispatcher,e.OnPhoneFindPassword=new qin.DelegateDispatcher,e.OnPhoneModifyPassword=new qin.DelegateDispatcher,e}();__reflect(AccountManager.prototype,"AccountManager");var AccountPlayerPrefs=function(){function e(){}return e.Reset=function(){e._accountList=null},e.GetAccountList=function(){if(null==e._accountList){var t=PrefsManager.getValue(e.PrefsKey);try{e._accountList=JSON.parse(t)}catch(n){qin.Console.log("获取账号列表解析json格式失败："+t)}}return e._accountList},e.IsMatchAccountPassword=function(t,n){var i=e.GetAccountList();if(null!=i&&i.length>0)for(var a=0;a<i.length;a++){var o=i[a];if(o.account==t&&o.pw==n)return!0}return!1},e.InsertAccount=function(t,n){null==e._accountList&&(e._accountList=new Array);for(var i=!1,a=0;a<e._accountList.length;a++){var o=e._accountList[a];if(o.account==t){if(0==a&&o.pw==n)return;i=!0,o.pw=n,a>0&&(e._accountList.splice(a,1),e._accountList.unshift(o));break}}if(0==i){var o={account:t,pw:n};e._accountList.unshift(o)}e._accountList.length>e.MaxCount&&e._accountList.splice(e._accountList.length-1,1),e.Flush(e._accountList)},e.RemoveAccount=function(t){if(null!=e._accountList){for(var n=0;n<e._accountList.length;n++){var i=e._accountList[n];if(i.account==t){e._accountList.splice(n,1);break}}e.Flush(e._accountList)}},e.Flush=function(t){return null==t?void PrefsManager.removeData(e.PrefsKey):void PrefsManager.setValue(e.PrefsKey,JSON.stringify(t))},e.PrefsKey="Qingame.Account",e.MaxCount=5,e}();__reflect(AccountPlayerPrefs.prototype,"AccountPlayerPrefs");var AccountUtil=function(){function e(){}return e.ResultToHashtable=function(e,t){try{var n=JSON.parse(e);return n}catch(i){qin.Console.logError("账号系统接收数据错误！"+t)}return null},e.ShowCodeFloatTips=function(e,t){var n=AccountCode.GetDescription(e);if(qin.StringUtil.isNullOrEmpty(n)&&!qin.StringUtil.isNullOrEmpty(t))try{n=decodeURIComponent(t)}catch(i){qin.Console.logError("转义失败！"+t)}UIManager.showFloatTips(n)},e.ShowModifyPwFloatTips=function(){UIManager.showFloatTips("密码修改成功")},e.ShowPhoneBindFloatTips=function(e){e?UIManager.showFloatTips("绑定手机成功"):UIManager.showFloatTips("解绑手机成功，为了您的帐号安全请尽快绑定手机")},e.VerifyRegisterAccount=function(e){return qin.RegexUtil.IsNumeric(e)?(UIManager.showFloatTips("帐号至少包含一个英文字母"),!1):!0},e.VerifyAccount=function(e){return qin.StringUtil.isNullOrEmpty(e)?(UIManager.showFloatTips("请输入帐号"),!1):e.length<AccountConfig.InputCharMin?(UIManager.showFloatTips(qin.StringUtil.format("帐号不能小于{0}个字符",AccountConfig.InputCharMin)),!1):e.length>AccountConfig.InputCharMax?(UIManager.showFloatTips(qin.StringUtil.format("帐号不能大于{0}个字符",AccountConfig.InputCharMax)),!1):0==qin.RegexUtil.IsEnglishAndNumber(e)?(UIManager.showFloatTips("帐号只能使用英文和数字"),!1):!0},e.VerifyPassword=function(e){return qin.StringUtil.isNullOrEmpty(e)?(UIManager.showFloatTips("请输入密码"),!1):e.length<AccountConfig.InputCharMin?(UIManager.showFloatTips(qin.StringUtil.format("密码不能小于{0}个字符",AccountConfig.InputCharMin)),!1):e.length>AccountConfig.InputCharMax?(UIManager.showFloatTips(qin.StringUtil.format("密码不能大于{0}个字符",AccountConfig.InputCharMax)),!1):0==qin.RegexUtil.IsEnglishAndNumber(e)?(UIManager.showFloatTips("密码只能使用英文和数字"),!1):!0},e.VerifyDualPassword=function(e,t){return e!=t?(UIManager.showFloatTips("两次输入的密码不匹配，请重新输入"),!1):!0},e.VerifyMobileNo=function(e){return qin.StringUtil.isNullOrEmpty(e)||e.length<AccountConfig.MobileNoMin||e.length>AccountConfig.MobileNoMax||0==qin.RegexUtil.IsUInt(e)?(UIManager.showFloatTips("请输入手机号码"),!1):!0},e.VerifyMobileCode=function(e){return qin.StringUtil.isNullOrEmpty(e)||e.length>AccountConfig.InputCharMax||0==qin.RegexUtil.IsUInt(e)?(UIManager.showFloatTips("请输入短信验证码"),!1):!0},e.ToStringArray=function(e,t){return void 0===t&&(t=","),qin.StringUtil.isNullOrEmpty(e)?null:e.split(t)},e}();__reflect(AccountUtil.prototype,"AccountUtil");var AccountVerifyCode=function(){function e(){this._isAgain=!1}return Object.defineProperty(e.prototype,"isAgain",{get:function(){return this._isAgain},enumerable:!0,configurable:!0}),e.prototype.AccountVerifyCode=function(e){this._label=e,this._label.text=qin.StringConstants.Empty},e.prototype.Reset=function(){this._vcTime=0,this._isAgain=!1,qin.Tick.AddSecondsInvoke(this.OnTick,this),this.OnTick(0)},e.prototype.OnEnable=function(){AccountManager.OnAgainMobileCode.addListener(this.OnAgainMobileCode,this)},e.prototype.OnDisable=function(){AccountManager.OnAgainMobileCode.removeListener(this.OnAgainMobileCode,this),qin.Tick.RemoveSecondsInvoke(this.OnTick,this)},e.prototype.OnAgainMobileCode=function(){this.Reset()},e.prototype.OnTick=function(e){this._vcTime+=e,this._vcTime>=AccountConfig.MobileCodeTimeout?(qin.Tick.RemoveSecondsInvoke(this.OnTick,this),this._label.text="获取验证码",this._isAgain=!0):this._label.text=qin.DateTimeUtil.countDownFormat(AccountConfig.MobileCodeTimeout-this._vcTime,!1)+"秒"},e}();__reflect(AccountVerifyCode.prototype,"AccountVerifyCode");var ChannelManager=function(){function e(){}return e.sdk_Logout=function(){PrefsManager.clearLoginInfo(),GameManager.reload(),e.OnLogout.dispatch()},Object.defineProperty(e,"channelType",{get:function(){return e._channelType},enumerable:!0,configurable:!0}),e.getLoginChannel=function(){return ChannelUtil.GetLoginChannel(e.channelType,e.loginType)},Object.defineProperty(e,"appName",{get:function(){return e._appName},enumerable:!0,configurable:!0}),Object.defineProperty(e,"deviceId",{get:function(){return e._deviceId},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bundleId",{get:function(){return e._bundleId},enumerable:!0,configurable:!0}),Object.defineProperty(e,"hasWeixin",{get:function(){return e._hasWeixin},enumerable:!0,configurable:!0}),Object.defineProperty(e,"hasMicrophone",{get:function(){return e._hasMicrophone},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientVersion",{get:function(){return e._clientVersion},enumerable:!0,configurable:!0}),e.initialize=function(){return e._isInitComplete?void e.OnInitComplete.dispatch():void(qin.System.isPackage?(qin.RuntimeTypeName.getCurrentName()==qin.RuntimeTypeName.Ios?e._channel=new Channel_ios:qin.RuntimeTypeName.getCurrentName()==qin.RuntimeTypeName.Android&&(e._channel=new Channel_android),e.initPackage()):e.initWeb())},e.initPackage=function(){qin.ExternalInterface.addCallback(ExtFuncName.OnApplicationFocus,function(t){var n=qin.StringUtil.toBoolean(t);n&&qin.RuntimeTypeName.getCurrentName()==qin.RuntimeTypeName.Android&&UIManager.closePanel(UIModuleName.PayMaskPanel),e.OnApplicationFocus.dispatch(n)}),qin.ExternalInterface.addCallback(ExtFuncName.Share,function(t){qin.StringUtil.toBoolean(t)?e.OnShareSucceed.dispatch():e.OnShareFailed.dispatch()}),qin.ExternalInterface.addCallback(ExtFuncName.Login,function(t){var n=JSON.parse(t);qin.StringUtil.toBoolean(n.status)?e.OnTokenLoginSucceed.dispatch(n.token):e.OnLoginFailed.dispatch()}),qin.ExternalInterface.addCallback(ExtFuncName.Pay,function(t){var n=JSON.parse(t);qin.StringUtil.toBoolean(n.status)?e._channel.sdkPaySucceed(JSON.parse(n.data)):(UIManager.closePanel(UIModuleName.PayMaskPanel),e._channel.sdkPayFailed())}),qin.ExternalInterface.addCallback(ExtFuncName.Logout,e.sdk_Logout),qin.ExternalInterface.addCallback(ExtFuncName.OnBackToApplication,function(t){e.OnBackToApplication.dispatch(qin.StringUtil.toBoolean(t))}),qin.ExternalInterface.addCallback(ExtFuncName.RecordAudio,function(e){RecordAudioManager.RecordComplete(e)}),qin.ExternalInterface.addCallback(ExtFuncName.HasRecordData,function(e){ChatManager.checkComplete(e)}),qin.ExternalInterface.addCallback(ExtFuncName.RequestMicrophone,function(t){e._hasMicrophone=qin.StringUtil.toBoolean(t)}),qin.ExternalInterface.addCallback(ExtFuncName.ImageSelect,function(t){e.OnImageSelect.dispatch({type:HeadUploadSystemType["native"],data:t})}),qin.ExternalInterface.addCallback(ExtFuncName.Initialize,function(t){e._isInitComplete=!0;var n=JSON.parse(t);e._channelType=n.channelType,qin.StringUtil.isNullOrEmpty(e._channelType)&&(e._channelType=ChannelType.qin),e._appName=n.appName,e._deviceId=n.deviceId,e._bundleId=n.bundleId,e._clientVersion=n.clientVersion,e._hasWeixin=qin.StringUtil.toBoolean(n.hasWeixin),e.OnInitComplete.dispatch()}),qin.ExternalInterface.call(ExtFuncName.Initialize,"")},e.initWeb=function(){e._channel=new Channel_web,e._isInitComplete=!0,e._channelType=URLOption.getString(URLOption.Channel),qin.StringUtil.isNullOrEmpty(e._channelType)&&(e._channelType=ChannelType.qin),e._appName=window.document.title,e.OnInitComplete.dispatch()},e.login=function(t,n){void 0===n&&(n=!1),t==ChannelLoginType.Qin?e._accountHandler.Login(n):e._channel.Login(t,n)},e.logout=function(){e.loginType==ChannelLoginType.Qin?e._accountHandler.Logout():qin.System.isPackage?qin.ExternalInterface.call(ExtFuncName.Logout,""):e.sdk_Logout()},e.PaySend=function(t,n){void 0===n&&(n=!1);var i=ShopDefined.GetInstance().getDefinition(t);if(i){var a=AwardDefined.GetInstance().getDefinition(i.awardId);if(a){var o=BundleManager.getPayState();if(o==PayState.Close)return void AlertManager.showAlertByString("支付已关闭，无法支付");if(a.costList.length>0&&a.costList[0].type==CostType.RMB){var r=a.costList[0].count;if(r>0){var s=ChannelUtil.GenerateOrder(i.awardId,VersionManager.isServerTest);e._channel.PaySend(o,i.awardId,UserManager.serverInfo.id,s,r,a.name)}else qin.Console.log("支付异常")}else AwardManager.Exchange(i.awardId,1,n)}}},e.SetExtData=function(){if(qin.System.isPackage){var t={};t.channelToken=LoginManager.channelToken,t.userId=LoginManager.loginInfo.userid,t.loginChannel=e.getLoginChannel(),qin.ExternalInterface.call(ExtFuncName.SetExtData,JSON.stringify(t))}},e.SetChannelData=function(e,t){qin.System.isPackage&&qin.ExternalInterface.call(ExtFuncName.SetChannelData,JSON.stringify({account:e,token:t}))},e.checkUnFinishedPayList=function(){qin.System.isPackage&&e._channel.checkUnFinishedPayList()},e.share=function(t,n,i){e._channel.share(t,n,i)},e.requestMicrophone=function(){qin.System.isPackage&&qin.ExternalInterface.call(ExtFuncName.RequestMicrophone,"")},e.recordAudio=function(e){qin.System.isPackage&&(RecordAudioManager.RecordVoice(e),qin.ExternalInterface.call(ExtFuncName.RecordAudio,e.toString()))},e.stopRecord=function(e){qin.System.isPackage&&qin.ExternalInterface.call(ExtFuncName.StopRecord,e)},e.setRecordData=function(e,t,n){qin.System.isPackage&&qin.ExternalInterface.call(ExtFuncName.SetRecordData,JSON.stringify({guid:e,data:t,playNow:!1}))},e.hasRecordData=function(e){qin.System.isPackage&&qin.ExternalInterface.call(ExtFuncName.HasRecordData,e)},e.playRecord=function(e){qin.System.isPackage&&qin.ExternalInterface.call(ExtFuncName.PlayRecord,e)},e.imageSelect=function(t,n){e._channel.imageSelect(t,n)},e.openURL=function(t){e._channel.openURL(t)},e.shake=function(){qin.System.isPackage?qin.ExternalInterface.call(ExtFuncName.Shake,qin.StringConstants.Empty):qin.System.webVibrate()
},e.DispatchAccountLoginSucceed=function(t,n,i){void 0===i&&(i=!1),e.OnAccountLoginSucceed.dispatch([t,n,i])},e._channelType=qin.StringConstants.Empty,e._accountHandler=new AccountHandler,e._isInitComplete=!1,e._appName=qin.StringConstants.Empty,e._deviceId=qin.StringConstants.Empty,e._bundleId=qin.StringConstants.Empty,e._hasWeixin=!1,e._hasMicrophone=!1,e._clientVersion=qin.StringConstants.Empty,e.OnApplicationFocus=new qin.DelegateDispatcher,e.OnAccountLoginSucceed=new qin.DelegateDispatcher,e.OnInitComplete=new qin.DelegateDispatcher,e.OnTokenLoginSucceed=new qin.DelegateDispatcher,e.OnLoginFailed=new qin.DelegateDispatcher,e.OnLogout=new qin.DelegateDispatcher,e.OnBackToApplication=new qin.DelegateDispatcher,e.OnShareSucceed=new qin.DelegateDispatcher,e.OnShareFailed=new qin.DelegateDispatcher,e.OnImageSelect=new qin.DelegateDispatcher,e.OnPayModelSelectEvent=new qin.DelegateDispatcher,e}();__reflect(ChannelManager.prototype,"ChannelManager");var ChannelUtil=function(){function e(){}return e.IsOrderIlleg=function(t){if(qin.StringUtil.isNullOrEmpty(t))return!0;var n=t.split("-");return n.length!=e.OrderLength},e.GenerateOrder=function(e,t){var n=t?"1":"0",i=TimeManager.GetServerUtcTimestamp().toString(),a=LoginManager.loginInfo.userid+"-"+UserManager.userInfo.roleId+"-"+UserManager.serverInfo.id+"-"+e+"-"+n+"-"+i.substring(4);return a.length>32&&(a=a.substring(0,32)),a},e.GetLoginChannel=function(e,t){return qin.StringUtil.isNullOrEmpty(t)?e:qin.StringUtil.format("{0}_{1}",e,t)},e.openWebPay=function(t,n,i,a,o){var r=e.getWebPayUrl(t,n,i,a,o);ChannelManager.openURL(r)},e.iframeWebPay=function(t,n,i,a,o){qin.WebView.getInstance().width=GameManager.stage.stageWidth,qin.WebView.getInstance().height=GameManager.stage.stageHeight,qin.WebView.getInstance().backgroundColor="#ffffff",qin.WebView.getInstance().closeButton=!0,qin.WebView.getInstance().src=e.getWebPayUrl(t,n,i,a,o),GameManager.stage.addChild(qin.WebView.getInstance()),UIManager.pushResizeDom(qin.WebView.getInstance(),0,0)},e.getWebPayUrl=function(e,t,n,i,a){var o=ProjectDefined.GetInstance().getPayIndexUrl(),r=GameSetting.AppId,s=qin.RuntimeTypeName.getCurrentName(),l=UserManager.userInfo.roleId,h=encodeURIComponent(UserManager.userInfo.name),d=encodeURIComponent(ChannelManager.appName);i=encodeURIComponent(i);var c=encodeURIComponent(ChannelManager.bundleId),p=BundleManager.getBid(),u=VersionManager.isServerTest?1:0,g=OperatePlatform.getCurrent();return o=o+"?serverId="+e+"&roleId="+l+"&price="+n+"&appid="+r+"&platform="+s+"&bagid="+p+"&bid="+c+"&test="+u+"&payDes="+i+"&roleName="+h+"&appName="+d+"&awardid="+a+"&op="+g},e.wxJsapiPay=function(t,n,i,a,o){window.WeixinJSBridge?e.wxUnifiedOrder(function(e){window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp+"",nonceStr:e.nonceStr,"package":e["package"],signType:e.signType,paySign:e.paySign})},this,t,n,i,a,o):UIManager.showFloatTips("没有找到微信支付接口")},e.wxUnifiedOrder=function(e,t,n,i,a,o,r,s){void 0===s&&(s="");var l=GameSetting.AppId,h=UserManager.userInfo.roleId,d=ProjectDefined.GetInstance().getWxpayUnifiedOrderUrl(),c=BundleManager.getBid(),p=VersionManager.isServerTest?1:0,u=OperatePlatform.getCurrent();o=encodeURIComponent(o),d+="?appid="+l+"&openId="+n+"&serverId="+i+"&roleId="+h+"&price="+a+"&bagid="+c+"&test="+p+"&payDes="+o+"&awardid="+r+"&op="+u+"&tradeType="+s,URLLoader.downloadContent(d,this,function(n){var i;try{i=JSON.parse(n)}catch(a){}i?i.return_code?AlertManager.showAlertByString(i.return_msg):qin.FuncUtil.invoke(e,t,i):AlertManager.showAlertByString("请求支付数据返回错误")},function(e){AlertManager.showAlertByString("请求支付失败，请检查网络是否正常")})},e.OrderLength=6,e}();__reflect(ChannelUtil.prototype,"ChannelUtil");var ExtFuncName=function(){function e(){}return e.OnBackToApplication="OnBackToApplication",e.OnApplicationFocus="OnApplicationFocus",e.OpenURL="OpenURL",e.Initialize="Initialize",e.Login="Login",e.Logout="Logout",e.Share="Share",e.RequestMicrophone="RequestMicrophone",e.RecordAudio="RecordAudio",e.SetRecordData="SetRecordData",e.HasRecordData="HasRecordData",e.PlayRecord="PlayRecord",e.StopRecord="StopRecord",e.SetExtData="SetExtData",e.SetChannelData="SetChannelData",e.Pay="Pay",e.CheckUnFinishedPayList="CheckUnFinishedPayList",e.DeleteOrder="DeleteOrder",e.ImageSelect="ImageSelect",e.Shake="Shake",e}();__reflect(ExtFuncName.prototype,"ExtFuncName");var AlphaChangeAnimation=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this)},t.prototype.run=function(t,n,i,a,o,r){void 0===i&&(i=0),void 0===a&&(a=1e3),e.prototype.run.call(this,t,n,i,a,o,r),this.callBack=null,o&&(this.callBack=qin.Delegate.getOut(o,r)),this.target.alpha=t;var s=egret.Tween.get(this.target);s.wait(i).to({alpha:n},a,egret.Ease.sineIn).call(this.runOver,this)},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.callBack&&this.callBack.invoke(),qin.Delegate.putIn(this.callBack),this.callBack=null},t}(BaseAnimation);__reflect(AlphaChangeAnimation.prototype,"AlphaChangeAnimation");var Channel_android=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.Login=function(e,t){if(e==ChannelLoginType.Weixin&&t){var n=PrefsManager.getLoginToken();if(n)return void ChannelManager.OnTokenLoginSucceed.dispatch(WxAuthorizeType.App+"###2###"+n)}egret.ExternalInterface.call(ExtFuncName.Login,e)},t.prototype.PaySend=function(e,t,n,i,a,o){ChannelUtil.openWebPay(n,i,a,o,t)},t.prototype.share=function(e,t,n){var i={};i.type=e,i.title=t,i.message=n,i.url=BundleManager.getUrl(),egret.ExternalInterface.call(ExtFuncName.Share,JSON.stringify(i))},t.prototype.imageSelect=function(e,t){var n={size:e,quality:t};egret.ExternalInterface.call(ExtFuncName.ImageSelect,JSON.stringify(n))},t.prototype.openURL=function(e){egret.ExternalInterface.call(ExtFuncName.OpenURL,e)},t}(ChannelBase);__reflect(Channel_android.prototype,"Channel_android");var Channel_ios=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.Login=function(e,t){if(e==ChannelLoginType.Weixin&&t){var n=PrefsManager.getLoginToken();if(n)return void ChannelManager.OnTokenLoginSucceed.dispatch(WxAuthorizeType.App+"###2###"+n)}qin.ExternalInterface.call(ExtFuncName.Login,e)},t.prototype.PaySend=function(e,t,n,i,a,o){var r,s;e==PayState.Normal||VersionManager.isSafe?(UIManager.showPanel(UIModuleName.PayMaskPanel),r=BundleManager.getBid(),s={awardId:t,passData:{orderId:i,bagId:r},price:a,name:o},qin.ExternalInterface.call(ExtFuncName.Pay,JSON.stringify(s))):e==PayState.Mixed?(r=BundleManager.getBid(),ChannelManager.OnPayModelSelectEvent.addListener(this.onSelectPayModelHandler,this),s={awardId:t,passData:{orderId:i,bagId:r},price:a,name:o},UIManager.showPanel(UIModuleName.PayModePanel,s)):e==PayState.Third?ChannelUtil.openWebPay(n,i,a,o,t):AlertManager.showAlertByString("支付状态错误")},t.prototype.onSelectPayModelHandler=function(e){this.PaySend(e.payState,e.awardId,UserManager.serverInfo.id,e.passData.orderId,e.price,e.name),ChannelManager.OnPayModelSelectEvent.removeListener(this.onSelectPayModelHandler,this)},t.prototype.share=function(e,t,n){var i={};i.type=e,i.title=t,i.message=n,i.url=BundleManager.getUrl(),qin.ExternalInterface.call(ExtFuncName.Share,JSON.stringify(i))},t.prototype.checkUnFinishedPayList=function(){qin.ExternalInterface.call(ExtFuncName.CheckUnFinishedPayList,qin.StringConstants.Empty)},t.prototype.sdkPaySucceed=function(e){if(UIManager.closePanel(UIModuleName.PayModePanel),e){var t=this.ParseAwardId(e.productId),n=ShopDefined.GetInstance().getDefinitionByAwardId(t);null!=n?this.PostDataToServer(e.passData,e.receipt,t):UIManager.closePanel(UIModuleName.PayMaskPanel)}else UIManager.closePanel(UIModuleName.PayMaskPanel)},t.prototype.ParseAwardId=function(e){var t=new RegExp(/\d+$/),n=e.match(t);return n&&n.length>0?parseInt(n[0]):0},t.prototype.PostDataToServer=function(e,t,n){var i,a=this;try{i=JSON.parse(e)}catch(o){qin.Console.log("苹果支付转换透传数据失败！")}var r,s;i?(r=i.orderId,s=i.bagId):(r=ChannelUtil.GenerateOrder(n,VersionManager.isServerTest),s=BundleManager.getBid()),ChannelUtil.IsOrderIlleg(r)&&(r=ChannelUtil.GenerateOrder(n,VersionManager.isServerTest));var l="orderid="+r+"&receipt="+t+"&bagid="+s,h=ProjectDefined.GetInstance().getPayCallbackUrl(VersionManager.isServerTest);URLLoader.downloadContent(h,this,function(e){if("21005"!=e)if("0"!=e){var n="-1"==e?"非法支付":"支付失败";qin.Console.log("服务器验证支付失败"+e),AlertManager.showAlert(n,null,null,null,null,e)}else qin.Console.log("服务器验证支付成功"+r),qin.ExternalInterface.call(ExtFuncName.DeleteOrder,t);qin.Tick.AddTimeoutInvoke(function(){UIManager.closePanel(UIModuleName.PayMaskPanel)},1e3,a)},function(e){qin.Console.log("服务器验证支付失败"+r),UIManager.closePanel(UIModuleName.PayMaskPanel)},l,1)},t.prototype.imageSelect=function(e,t){var n={size:e,quality:t};qin.ExternalInterface.call(ExtFuncName.ImageSelect,JSON.stringify(n))},t.prototype.openURL=function(e){qin.ExternalInterface.call(ExtFuncName.OpenURL,e)},t}(ChannelBase);__reflect(Channel_ios.prototype,"Channel_ios");var Channel_web=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isWxConfig=!1,t}return __extends(t,e),t.prototype.setWxConfig=function(e,t){if(void 0===t&&(t=!1),window.wx)if(0==this._isWxConfig){var n=ProjectDefined.GetInstance().getWxTicketUrl()+"?url="+encodeURIComponent(window.location.href);URLLoader.downloadContent(n,this,function(n){var i=this,a=JSON.parse(n);a.errcode&&0!=a.errcode?UIManager.showFloatTips(a.errmsg):(a.debug=t,a.jsApiList=["chooseImage","uploadImage","downloadImage","getLocalImgData","onMenuShareTimeline","onMenuShareAppMessage"],a.nonceStr=a.noncestr,delete a.noncestr,window.wx.config(a),window.wx.ready(function(){i._isWxConfig=!0,e()}),window.wx.error(function(e){var t=JSON.stringify(e);UIManager.showFloatTips(t)}))},null)}else e();else AlertManager.showAlertByString("微信支付接口不存在")},t.prototype.Login=function(e,t){e==ChannelLoginType.Account||ChannelManager.loginType==ChannelLoginType.IntranetAccount?this.accountLogin(t):e==ChannelLoginType.Weixin?this.weixinLogin():(UIManager.showFloatTips("登录类型错误"),ChannelManager.OnLoginFailed.dispatch())},t.prototype.accountLogin=function(e){var t=PrefsManager.getValue(PrefsManager.Login_Account),n=PrefsManager.getValue(PrefsManager.Login_Password);e&&t&&n?ChannelManager.DispatchAccountLoginSucceed(t,n):UIManager.isShowPanel(UIModuleName.LoginLocalPanel)||UIManager.showPanel(UIModuleName.LoginLocalPanel)},t.prototype.weixinLogin=function(){var e=WebConfig.wxRefreshToken;if(e)ChannelManager.OnTokenLoginSucceed.dispatch(WxAuthorizeType.Public+"###2###"+e);else if(0==qin.System.isWeChat){var t=ProjectDefined.GetInstance().getWxQrconnectUrl();window.location.href=t+"?return_url="+encodeURIComponent(window.location.href)}else AlertManager.showAlertByString("微信授权token为空")},t.prototype.PaySend=function(e,t,n,i,a,o){if(!VersionManager.isServerTest||ChannelManager.loginType!=ChannelLoginType.Account&&ChannelManager.loginType!=ChannelLoginType.IntranetAccount)if(qin.System.isWeChat){var r=WebConfig.wxOpenId;r?ChannelUtil.wxJsapiPay(r,n,a,o,t):AlertManager.showAlertByString("微信授权openid为空")}else ChannelUtil.iframeWebPay(n,i,a,o,t);else AwardManager.Exchange(t,1,!1)},t.prototype.share=function(e,t,n){var i=this;qin.System.isWeChat?this.setWxConfig(function(){var e=WebManager.getCurrentPublicUrl(),a=qin.UrlUtil.getCurrentHostDirectory()+GameSetting.AppId+"/"+PathName.AppIcon_png;UIManager.showPanel(UIModuleName.ShareGamePromptPanel),window.wx.onMenuShareTimeline({title:t,link:e,imgUrl:a,success:i.onShareSuccess,fail:i.onShareFail}),window.wx.onMenuShareAppMessage({title:t,desc:n,link:e,imgUrl:a,success:i.onShareSuccess,fail:i.onShareFail})},!1):UIManager.showFloatTips("非微信打开无法分享")},t.prototype.onShareSuccess=function(){UIManager.closePanel(UIModuleName.ShareGamePromptPanel)},t.prototype.onShareFail=function(e){UIManager.closePanel(UIModuleName.ShareGamePromptPanel),UIManager.showFloatTips(JSON.stringify(e))},t.prototype.imageSelect=function(e,t){var n=this;qin.System.isWeChat?this.setWxConfig(function(){window.wx.chooseImage({count:1,success:function(e){n.upload(e)}})}):qin.WebImageSelect.browse(this,function(e){ChannelManager.OnImageSelect.dispatch({type:HeadUploadSystemType.web,data:e})},function(e){AlertManager.showAlertByString(e)})},t.prototype.upload=function(e){var t=this;window.wx.uploadImage({localId:e.localIds[0],success:function(e){t.downLoad(e.serverId)}})},t.prototype.downLoad=function(e){var t=this;window.wx.downloadImage({serverId:e,success:function(e){t.getImgLocal(e.localId)}})},t.prototype.getImgLocal=function(e){window.wx.getLocalImgData({localId:e,success:function(e){ChannelManager.OnImageSelect.dispatch({type:HeadUploadSystemType.web,data:e.localData})}})},t}(ChannelBase);__reflect(Channel_web.prototype,"Channel_web");var AnimationType;!function(e){e[e.CardFaceBoardAppear=1]="CardFaceBoardAppear",e[e.CardFaceBright=2]="CardFaceBright",e[e.CardFaceMoveToPoint=3]="CardFaceMoveToPoint",e[e.CardFaceTurnToFace=4]="CardFaceTurnToFace",e[e.SelfCard1Appear=5]="SelfCard1Appear",e[e.SelfCard2Appear=6]="SelfCard2Appear",e[e.FlopCard=50]="FlopCard",e[e.GamblingGameGroupMove=100]="GamblingGameGroupMove",e[e.CommonMoveToPointByNowPos=101]="CommonMoveToPointByNowPos",e[e.CommonMoveToRelativelyPos=102]="CommonMoveToRelativelyPos",e[e.WinChips=103]="WinChips",e[e.FoldCard=104]="FoldCard",e[e.Alpha=105]="Alpha",e[e.GetCoin=301]="GetCoin",e[e.WinCard=302]="WinCard",e[e.Allin0=303]="Allin0",e[e.Allin1=304]="Allin1",e[e.HundredWarPlayer=305]="HundredWarPlayer",e[e.HundredWarBanker=306]="HundredWarBanker",e[e.HundredWarPool=307]="HundredWarPool",e[e.HundredWarPoolDes=308]="HundredWarPoolDes"}(AnimationType||(AnimationType={}));var BoneAnimeName=function(){function e(){}return e.HallLiuGuang="liuguang",e}();__reflect(BoneAnimeName.prototype,"BoneAnimeName");var UpLoader=function(){function e(){}return e.UpLoad=function(t,n,i,a,o,r,s){void 0===o&&(o=null),void 0===r&&(r=null),qin.StringUtil.isNullOrEmpty(t)||(e._uploadQueue.unshift(new UpLoadData(t,n,i,a,o,r,s)),e.UpLoadNext())},e.UpLoadNext=function(){if(0==e._isUpLoading)if(0!=e._uploadQueue.length){e._isUpLoading=!0;var t=e._uploadQueue[0];e._upLoader=new egret.HttpRequest,e._upLoader.responseType=egret.HttpResponseType.TEXT,e._upLoader.open(t.url,egret.HttpMethod.POST),e._upLoader.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e._upLoader.addEventListener(egret.Event.COMPLETE,e.OnLoadCompleted,this),e._upLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,e.OnLoadIOError,this),e._upLoader.url=t.url;var n=qin.StringConstants.Empty;n+="sign="+encodeURIComponent(t.sign),n+="&pvp="+encodeURIComponent(t.bytes),e._upLoader.send(n)}else e.disposeLoader()},e.disposeLoader=function(){e._upLoader&&(e._upLoader.removeEventListener(egret.Event.COMPLETE,e.OnLoadCompleted,this),e._upLoader.removeEventListener(egret.IOErrorEvent.IO_ERROR,e.OnLoadIOError,this),e._upLoader=null)},e.OnLoadCompleted=function(t){e._isUpLoading=!1;for(var n,i=t.currentTarget,a=e._uploadQueue.length-1;a>=0;a--)n=e._uploadQueue[a],n&&n.url==i.url&&(qin.Console.log("上传成功key："+n.sign),e._uploadQueue.splice(a,1),qin.FuncUtil.invoke(n.complete,n.thisObj,n));e.UpLoadNext()},e.OnLoadIOError=function(t){e._isUpLoading=!1;for(var n,i=t.currentTarget,a=e._uploadQueue.length-1;a>=0;a--)n=e._uploadQueue[a],n&&n.url==i.url&&(e._uploadQueue.splice(a,1),qin.FuncUtil.invoke(n.error,n.thisObj,t));n&&n.isReTry?e.reTry(n):e.UpLoadNext()},e.reTry=function(t){qin.Console.log("重试key："+t.sign),t.reTryCount<e.ReTryMax&&(t.reTryCount++,e._uploadQueue.unshift(t),e.UpLoadNext())},e.ReTryMax=2,e._uploadQueue=new Array,e._isUpLoading=!1,e}();__reflect(UpLoader.prototype,"UpLoader");var UpLoadData=function(){function e(e,t,n,i,a,o,r){void 0===a&&(a=null),void 0===o&&(o=null),this.url=e,this.sign=t,this.reTryCount=0,this.isReTry=i,this.complete=a,this.error=o,this.bytes=n,this.thisObj=r}return e.prototype.dispose=function(){this.thisObj=null},e}();__reflect(UpLoadData.prototype,"UpLoadData");var URLLoader=function(){function e(){}return e.cancelLoad=function(t,n){for(var i=e._waitList.length-1;i>=0;i--){var a=e._waitList[i];a.onComplete==t&&a.thisObject==n&&(a.dispose(),e._waitList.splice(i,1))}0==e._waitList.length&&(e.isLoading=!1,e.disposeLoader())},e.CancelAll=function(){e.isLoading=!1;for(var t=0,n=e._waitList;t<n.length;t++){var i=n[t];i.dispose()}e._waitList.length=0,e.disposeLoader()},e.disposeLoader=function(){e._httpRequest&&(e._httpRequest.abort(),e._httpRequest.removeEventListener(egret.Event.COMPLETE,e.OnLoadCompleted,this),e._httpRequest.removeEventListener(egret.IOErrorEvent.IO_ERROR,e.OnLoadIOError,this),e._httpRequest=null)},e.downloadContent=function(t,n,i,a,o,r,s){if(void 0===i&&(i=null),void 0===a&&(a=null),void 0===r&&(r=0),void 0===s&&(s=egret.HttpResponseType.TEXT),i&&null==n)throw new Error("onComplete不为空时，thisObject不能为空");var l=new URLLoadInfo;l.url=t,l.data=o,l.thisObject=n,l.onComplete=i,l.onError=a,l.retryTimes=r,l.dataFormat=s,e._waitList.push(l),e.LoadNext()},e.LoadNext=function(){if(0==e.isLoading&&(e.disposeLoader(),e._waitList.length>0)){e._loadTimes=0,e.isLoading=!0;var t=e._waitList[0];e._httpRequest=new egret.HttpRequest,e._httpRequest.responseType=t.dataFormat,e._httpRequest.addEventListener(egret.Event.COMPLETE,e.OnLoadCompleted,this),e._httpRequest.addEventListener(egret.IOErrorEvent.IO_ERROR,e.OnLoadIOError,this),e._httpRequest.url=t.url,this.trySend(t)}},e.OnLoadCompleted=function(t){for(var n,i=t.currentTarget,a=i.response,o=e._waitList.length-1;o>=0;o--)n=e._waitList[o],n&&n.url==i.url&&(e._waitList.splice(o,1),qin.FuncUtil.invoke(n.onComplete,n.thisObject,a),n.dispose());e.isLoading=!1,e.LoadNext()},e.OnLoadIOError=function(t){for(var n,i=t.currentTarget,a=e._waitList.length-1;a>=0;a--)if(n=e._waitList[a],n&&n.url==i.url){if(n.retryTimes>0)return n.retryTimes--,void this.trySend(n);qin.FuncUtil.invoke(n.onError,n.thisObject,t),e._waitList.splice(a,1),n.dispose()}e.isLoading=!1,e.LoadNext()},e.trySend=function(t){e._httpRequest.open(t.url,egret.HttpMethod.POST),e._httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.data?e._httpRequest.send(t.data):e._httpRequest.send()},e._waitList=new Array,e.isLoading=!1,e._loadTimes=0,e}();__reflect(URLLoader.prototype,"URLLoader");var URLLoadInfo=function(){function e(){this.retryTimes=0}return e.prototype.dispose=function(){this.onComplete=null,this.onError=null,this.onProgress=null,this.thisObject=null},e}();__reflect(URLLoadInfo.prototype,"URLLoadInfo");var NetUtil=function(){function e(){}return e.AlertResultError=function(e,t){void 0===t&&(t=null);var n=new AlertInfo;n.subTitle=qin.StringUtil.format("protocol:{0} code:{1}",e.cmdId,e.error),n.message=ErrorDefined.GetInstance().getDetails(e.error),n.OnConfirm=t,AlertManager.showAlertInfo(n)},e.AlertFailing=function(e,t){var n=new AlertInfo;n.title="连接失败",n.confirmLabel="重新登录",n.subTitle=e,n.message="登录验证失效或网络连接断开，点击确认重新登录游戏！",n.OnConfirm=t,AlertManager.showAlertInfo(n)},e.AlertNetworkErrorReLogin=function(e,t){var n=new AlertInfo;n.title="网络断开",n.confirmLabel="重新登录",n.subTitle=e,n.message="登录验证已失效，点击确认重新登录游戏！",n.OnConfirm=t,AlertManager.showAlertInfo(n)},e.AlertConnectError=function(e,t,n,i){void 0===n&&(n="网络断开"),void 0===i&&(i="网络连接断开，请检查您的网络是否正常，点击确认重试！");var a=new AlertInfo;a.title=n,a.subTitle=e,a.confirmLabel="重连",a.message=i,a.OnConfirm=t,AlertManager.showAlertInfo(a)},e.AlertHandshakeError=function(e,t){var n=new AlertInfo;n.title="验证错误",n.subTitle=e;var i=parseInt(e);0!=i?n.message=ErrorDefined.GetInstance().getDetails(i):n.message="连接服务器验证错误",n.confirmLabel="重连",n.OnConfirm=t,AlertManager.showAlertInfo(n)},e}();__reflect(NetUtil.prototype,"NetUtil");var PollingRequest=function(){function e(e,t){this._addressIndex=0,this._outTime=5e3,this._connectTimes=0,this.onConnectDelegate=e,this.onTimeoutDelegate=t}return Object.defineProperty(e.prototype,"addressIndex",{get:function(){return this._addressIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isIntranet",{get:function(){return ChannelManager.loginType==ChannelLoginType.IntranetAccount||ChannelManager.loginType==ChannelLoginType.IntranetGuest},enumerable:!0,configurable:!0}),e.prototype.connect=function(e){void 0===e&&(e=!0),this.resetTime(),qin.Tick.addFrameInvoke(this.timing,this),this.onConnectDelegate&&e&&this.onConnectDelegate.invoke()},e.prototype.resetTime=function(){this._startConnectTime=egret.getTimer()},e.prototype.stop=function(){qin.Tick.removeFrameInvoke(this.timing,this)},e.prototype.timing=function(e){var t=egret.getTimer()-this._startConnectTime;t>this._outTime&&(this.nextPolling(!0),!this.isTimeout&&this.onConnectDelegate&&(this.resetTime(),this.onConnectDelegate.invoke()))},e.prototype.changeAdressIndex=function(){this._addressIndex++,this._addressIndex>ProjectDefined.GetInstance().pollingLimit&&(this._addressIndex=0)},e.prototype.nextPolling=function(e){this.isConnectFormalServer?(this.changeAdressIndex(),this._connectTimes++,this._connectTimes>ProjectDefined.GetInstance().pollingLimit?(this._connectTimes=0,this.isTimeout=!0,this.stop(),this.onTimeoutDelegate&&e&&this.onTimeoutDelegate.invoke()):this.isTimeout=!1):this.isTimeout=!0},e.prototype.errorConnectHandler=function(){this.isConnectFormalServer?(this.stop(),this.nextPolling(!1),!this.isTimeout&&this.onConnectDelegate&&this.onConnectDelegate.invoke()):this.isTimeout=!0},Object.defineProperty(e.prototype,"isConnectFormalServer",{get:function(){return!this.isIntranet&&!VersionManager.isServerTest},enumerable:!0,configurable:!0}),e}();__reflect(PollingRequest.prototype,"PollingRequest");var PollingSocket=function(){function e(e,t,n){this._type=e,this.onConnectDelegate=t,this.onTimeoutDelegate=n,this._pollingRequest=new PollingRequest(qin.Delegate.getOut(this.onConnectHandler,this),qin.Delegate.getOut(this.onTimeOutHandler,this))}return Object.defineProperty(e.prototype,"isTimeout",{get:function(){return this._pollingRequest.isTimeout},enumerable:!0,configurable:!0}),e.prototype.gameConnect=function(e,t,n){this._initAdress=e,this.port=t,this._isShowLoading=n,this.setGameAdress(),this.onEnable(),this.onConnectDelegate&&this.onConnectDelegate.invoke(n)},e.prototype.gameReconnect=function(){this._pollingRequest.changeAdressIndex(),this.gameConnect(this._initAdress,this.port,this._isShowLoading)},e.prototype.loginConnect=function(){this.setLoginAdressPort(),this.onEnable(),this.onConnectDelegate&&this.onConnectDelegate.invoke()},e.prototype.onEnable=function(){this._pollingRequest.connect(!1)},e.prototype.stop=function(){this._pollingRequest.stop()},e.prototype.setLoginAdressPort=function(){if(this.address=ProjectDefined.GetInstance().getLoginAddress(this._pollingRequest.isIntranet,VersionManager.isServerTest),this._pollingRequest.isConnectFormalServer){var e=this._pollingRequest.addressIndex,t=qin.StringConstants.Empty;e>0&&(t=e.toString()),this.address=this.address.replace(qin.StringConstants.Asterisk,t)}this.port=ProjectDefined.GetInstance().getLoginPort(this._pollingRequest.isIntranet,VersionManager.isServerTest)},e.prototype.setGameAdress=function(){if(this.address=ProjectDefined.GetInstance().getLoginAddress(this._pollingRequest.isIntranet,VersionManager.isServerTest),this._pollingRequest.isConnectFormalServer){var e=this._pollingRequest.addressIndex,t=qin.StringConstants.Empty;e>0&&(t=e.toString()),this._initAdress?this.address=this._initAdress.replace(qin.StringConstants.Asterisk,t):this.address=this.address.replace(qin.StringConstants.Asterisk,t)}},e.prototype.onConnectHandler=function(e){1==this._type?this.setLoginAdressPort():2==this._type&&this.setGameAdress(),this._pollingRequest.resetTime(),this.onConnectDelegate&&this.onConnectDelegate.invoke(this._isShowLoading)},e.prototype.onTimeOutHandler=function(e){this.stop(),this.onTimeoutDelegate&&this.onTimeoutDelegate.invoke()},e.prototype.errorConnectHandler=function(){this._pollingRequest.errorConnectHandler()},Object.defineProperty(e.prototype,"isConnectFormalServer",{get:function(){return this._pollingRequest.isConnectFormalServer},enumerable:!0,configurable:!0}),e}();__reflect(PollingSocket.prototype,"PollingSocket");var SocketManager=function(){function e(){}return e.AddIgnoreError=function(t){e._ignoreError||(e._ignoreError=new Array),-1==e._ignoreError.indexOf(t)&&e._ignoreError.push(t)},e.RemoveIgnoreError=function(t){qin.ArrayUtil.RemoveItem(t,e._ignoreError)},Object.defineProperty(e,"isEntering",{get:function(){return e._isEntering},set:function(t){e._isEntering=t,e._socket&&(e._socket.enabledErrorCode=0==e._isEntering)},enumerable:!0,configurable:!0}),e.Initialize=function(t,n,i,a,o,r,s,l){void 0===l&&(l=egret.WebSocket.TYPE_BINARY),e._isReconnecting=!1,e._socket||(e._socket=new qin.GameSocket,e._socket.enabledErrorCode=0==e._isEntering,e._socket.addNormalError(e.ResetRoleInfoErrorCode),e._socket.initialize(t,n,i,a,o,r,s,l),e._socket.AddMessageListener(e.OnMessage,this))},Object.defineProperty(e,"roleId",{get:function(){return e._socket.roleId},enumerable:!0,configurable:!0}),Object.defineProperty(e,"requestSessionMax",{get:function(){return e._socket.requestSessionMax},enumerable:!0,configurable:!0}),e.Dispose=function(){e._socket&&(egret.clearTimeout(e._delayId),e._socket.RemoveMessageListener(e.OnMessage,this),e.StopHeartbeat(),e.RemoveAllListener(),e._socket.dispose(),e._socket=null)},e.Close=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),e._socket&&(egret.clearTimeout(e._delayId),n&&e.StopHeartbeat(),e.RemoveAllListener(),e._socket.close(t))},e.pollingConnect=function(t,n,i){void 0===i&&(i=!0),e._connectHandler||(e._connectHandler=new PollingSocket(2,qin.Delegate.getOut(e.Connect,this),qin.Delegate.getOut(e.OnLoadingTimeout,this))),e._connectHandler.gameConnect(t,n,i)},e.Connect=function(t){if(void 0===t&&(t=!0),null==e._socket)throw new Error("socket no initialize");t&&UIManager.showPanel(UIModuleName.LoadingPanel,!0),e.AddAllListener(),egret.log("socket重连"),e._socket.Connect(e._connectHandler.address,e._connectHandler.port)},e.Reconnect=function(){e.VerifyReLogin()?AlertManager.showAlertObj({confirmLabel:"登录失效",message:"登录验证失效，请重新登录游戏！",OnConfirm:e.OnClickReLogin}):(e._isReconnecting=!0,e._connectHandler.gameReconnect())},e.AddAllListener=function(){e._socket.AddResultListener(e.OnResult,this),e._connectHandler.isConnectFormalServer||UIManager.addEventListener(UIModuleName.LoadingPanel,UIModuleEvent.OnTimeout,e.OnLoadingTimeout,this)},e.RemoveAllListener=function(){UIManager.removeEventListener(UIModuleName.LoadingPanel,UIModuleEvent.OnTimeout,e.OnLoadingTimeout,this),e._socket.RemoveResultListener(e.OnResult,this)},e.OnLoadingTimeout=function(){e.Close(),AlertManager.showAlertObj({confirmLabel:"网络超时",message:"网络连接超时，请检查您的网络是否正常并重试！",OnConfirm:e.OnClickReconnect})},e.Send=function(t,n){void 0===n&&(n=null),e.InvokeSend(!1,!1,t,n,!0)},e.SendDiscRetry=function(t,n){void 0===n&&(n=null),e.InvokeSend(!1,!0,t,n,!0)},e.ImplSend=function(t,n){void 0===n&&(n=null),e.InvokeSend(!1,!1,t,n,!1)},e.ImplSendDiscRetry=function(t,n){void 0===n&&(n=null),e.InvokeSend(!1,!0,t,n,!1)},e.SendAsync=function(t,n){void 0===n&&(n=null),e.InvokeSend(!0,!1,t,n,!0)},e.SendAsyncDiscRetry=function(t,n){void 0===n&&(n=null),e.InvokeSend(!0,!0,t,n,!0)},e.ImplSendAsync=function(t,n){void 0===n&&(n=null),e.InvokeSend(!0,!1,t,n,!1)},e.ImplSendAsyncDiscRetry=function(t,n){void 0===n&&(n=null),e.InvokeSend(!0,!0,t,n,!1)},e.AddCommandListener=function(t,n,i){null!=e._socket&&null!=n&&t?e._socket.AddCommandListener(t,n,i):console.error("AddCommandListener:socket no initialize")},e.RemoveCommandListener=function(t,n,i){null!=e._socket&&e._socket.RemoveCommandListener(t,n,i)},e.AddErrorListener=function(t,n,i){null!=e._socket?e._socket.AddErrorListener(t,n,i):console.error("AddCommandListener:socket no initialize")},e.RemoveErrorListener=function(t,n,i){null!=e._socket&&e._socket.RemoveErrorListener(t,n,i)},e.call=function(t,n,i,a,o){void 0===n&&(n=null),e.InvokeSend(!1,!1,t,n,!0,i,a,o)},e.callDiscRetry=function(t,n,i,a,o){void 0===n&&(n=null),e.InvokeSend(!1,!0,t,n,!0,i,a,o)},e.ImplCall=function(t,n,i,a,o){void 0===n&&(n=null),e.InvokeSend(!1,!1,t,n,!1,i,a,o)},e.ImplCallDiscRetry=function(t,n,i,a,o){void 0===n&&(n=null),e.InvokeSend(!1,!0,t,n,!1,i,a,o)},e.RemoveCall=function(t,n,i){null!=e._socket&&e._socket.RemoveCall(t,n,i)},e.callAsync=function(t,n,i,a,o){void 0===n&&(n=null),e.InvokeSend(!0,!1,t,n,!0,i,a,o)},e.callAsyncDiscRetry=function(t,n,i,a,o){void 0===n&&(n=null),e.InvokeSend(!0,!0,t,n,!0,i,a,o)},e.ImplCallAsync=function(t,n,i,a,o){void 0===n&&(n=null),e.InvokeSend(!0,!1,t,n,!1,i,a,o)},e.ImplCallAsyncDiscRetry=function(t,n,i,a,o){void 0===n&&(n=null),e.InvokeSend(!0,!0,t,n,!1,i,a,o)},e.InvokeSend=function(t,n,i,a,o,r,s,l){void 0===a&&(a=null),e._socket&&e._socket.enabledSend?o&&UIManager.showPanel(UIModuleName.LoadingPanel,!0):qin.Console.log("禁止发送:"+i),e._socket.InvokeSend(t,n,i,a,r,s,l)},e.OnResult=function(t){if(e._lastTimestamp=TimeManager.GetServerUtcTimestamp(),t.op==qin.SpRpcOp.Response){if(e._heartbeatTime=egret.getTimer(),UIManager.closePanel(UIModuleName.LoadingPanel),0!=t.error)if(t.error==e.ResetRoleInfoErrorCode)GameManager.initServerHandler.AfreshGetInfo();else{e._ignoreError&&-1!=e._ignoreError.indexOf(t.error)||(e._isEntering?NetUtil.AlertResultError(t,e.OnClickEnterError):(NetUtil.AlertResultError(t),e.OnResultError.dispatch(t.error)));var n=ErrorDefined.GetInstance().getDetails(t.error),i=qin.StringUtil.format("protocol:{0} code:{1}",t.cmdId,t.error);qin.Console.log(qin.StringUtil.format("{0},描述：{1}",i,n))}}else t.cmdId==Command.System_Response_Login_2013&&(UIManager.closePanel(UIModuleName.LoadingPanel),e.Close(),AlertManager.showAlert("该账号在其它地方登录，确定回到登录界面。",e.OnClickReLogin)),void 0!=e._recconectServerPushSession&&t.session-e._recconectServerPushSession>1&&(e._recconectServerPushSession=void 0,egret.log("抛送数据同步事件1"),e.OnReconnectSynchronize.dispatch())},e.OnMessage=function(t){switch(qin.Console.logSocket(t),t.type){case qin.SocketMessageType.Connect:e._connectHandler.stop(),UIManager.closePanel(UIModuleName.LoadingPanel),qin.Console.log("游戏服务器连接成功"),e._autoReconnect=!0,e._socket.InvokeDiscRetry(),e._isReconnecting&&(e._recconectServerPushSession=e._socket.requestSessionMax,egret.log("发送重连协议"+e._socket.requestSessionMax),e._isReconnecting=!1,e._socket.SimpleSend(Command.System_GetNotice_3004,{sessionId:e._socket.requestSessionMax})),e.StartHeartbeat(),e.OnConnect.dispatch();break;case qin.SocketMessageType.Failing:e._connectHandler.stop(),UIManager.closePanel(UIModuleName.LoadingPanel),e.Close(),NetUtil.AlertFailing(t.errorCode,e.OnClickReLogin);break;case qin.SocketMessageType.NetworkError:UIManager.closePanel(UIModuleName.LoadingPanel),e.VerifyReLogin()?(e.Close(),NetUtil.AlertNetworkErrorReLogin(t.errorCode,e.OnClickReLogin)):(e._connectHandler.errorConnectHandler(),e._connectHandler.isTimeout&&(e._isEntering?(e.Close(),NetUtil.AlertConnectError(t.errorCode,e.OnClickReconnect)):(e.Close(),e._autoReconnect?e._delayId=egret.setTimeout(e.delayAutoReconnect,this,2e3):NetUtil.AlertConnectError(t.errorCode,e.OnClickReconnect))));break;case qin.SocketMessageType.HandshakeError:UIManager.closePanel(UIModuleName.LoadingPanel),e.Close(),NetUtil.AlertNetworkErrorReLogin(t.errorCode,e.OnClickReLogin);break;case qin.SocketMessageType.SendError:UIManager.closePanel(UIModuleName.LoadingPanel);var n=new AlertInfo;n.title="发送协议出错",n.subTitle=t.errorCode,n.message=t.message,AlertManager.showAlertInfo(n);break;case qin.SocketMessageType.NotInitialized:UIManager.closePanel(UIModuleName.LoadingPanel),n=new AlertInfo,n.title="协议初始化异常",n.subTitle=t.errorCode,n.message=t.message,AlertManager.showAlertInfo(n)}},e.delayAutoReconnect=function(){e._autoReconnect=!1,e.Reconnect()},e.VerifyReLogin=function(){return TimeManager.GetServerUtcTimestamp()-e._lastTimestamp<270?!1:TimeManager.GetCurrentOnlineLength()<1500?!1:!0
},e.OnClickReLogin=function(t){e._isEntering?e.OnEnterError.dispatch():GameManager.reload()},e.OnClickReconnect=function(t){e._isEntering?e.OnEnterError.dispatch():e.Reconnect()},e.OnClickEnterError=function(t){e.OnEnterError.dispatch()},e.StartHeartbeat=function(){e._heartbeatTime=egret.getTimer(),qin.Tick.AddSecondsInvoke(e.OnTickHeartbeat,this)},e.StopHeartbeat=function(){qin.Tick.RemoveSecondsInvoke(e.OnTickHeartbeat,this)},e.OnTickHeartbeat=function(t){egret.getTimer()-e._heartbeatTime>=e.HeartbeatInterval&&(e._heartbeatTime=egret.getTimer(),e._socket.SimpleCall(Command.System_Heartbeat_3016,{sessionId:e._socket.requestSessionMax},e.OnHeartbeatServer,null,this))},e.OnHeartbeatServer=function(e){TimeManager.SetServerTimestamp(e.data)},e.ResetRoleInfoErrorCode=201,e.HeartbeatInterval=6e4,e._isEntering=!1,e._isReconnecting=!1,e._autoReconnect=!1,e._delayId=void 0,e.OnResultError=new qin.DelegateDispatcher,e.OnEnterError=new qin.DelegateDispatcher,e.OnConnect=new qin.DelegateDispatcher,e.OnReconnectSynchronize=new qin.DelegateDispatcher,e}();__reflect(SocketManager.prototype,"SocketManager");var SystemTimeManager=function(){function e(){}return e.IsInTime=function(t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=!1),0==t)return!0;for(var a=SystemTimeDefined.GetInstance().getSubListById(t),o=0;o<a.length;o++)if(e.IsSystemTimeDefInTime(a[o],n,i))return i?e.IsSystemTimeDefInTime(a[o],n,i):!0;return i?TimeManager.Utc1970:!1},e.IsSystemTimeDefInTime=function(t,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var a,o,r=TimeManager.GetServerLocalDateTime();switch(SystemTimeDefined.GetInstance().getSystemType(t)){case SystemTimeType.Week:var s=r.getDay();if(0==s&&(s=7),t.start[6]<=t.end[6]){if(!(s>=t.start[6]&&s<=t.end[6]))return i?TimeManager.Utc1970:!1;a=e.GetWeekDate(new Date(r.getFullYear(),r.getMonth(),r.getDate(),t.start[3],t.start[4],t.start[5]),t.start[6],!0),o=e.GetWeekDate(new Date(r.getFullYear(),r.getMonth(),r.getDate(),t.end[3],t.end[4],t.end[5]),t.end[6],!1)}else{if(s>t.end[6]&&s<t.start[6])return i?TimeManager.Utc1970:!1;s<=t.end[6]?(a=e.GetWeekDate(new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0),1,!0),o=e.GetWeekDate(new Date(r.getFullYear(),r.getMonth(),r.getDate(),t.end[3],t.end[4],t.end[5]),t.end[6],!1)):(a=e.GetWeekDate(new Date(r.getFullYear(),r.getMonth(),r.getDate(),t.start[3],t.start[4],t.start[5]),t.start[6],!0),o=e.GetWeekDate(new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59,999),7,!1))}break;case SystemTimeType.EveryDay:if(!e.IsInBigDate(t.start,t.end,r))return i?TimeManager.Utc1970:!1;a=e.GetDateTimeByArray(t.start,r),o=e.GetDateTimeByArray(t.end,r);break;case SystemTimeType.Normal:a=new Date(t.start[0],t.start[1]-1,t.start[2],t.start[3],t.start[4],t.start[5]),o=new Date(t.end[0],t.end[1]-1,t.end[2],t.end[3],t.end[4],t.end[5])}return r.getTime()>=a.getTime()-n&&r.getTime()<=o.getTime()?i?a:!0:i?TimeManager.Utc1970:!1},e.GetWeekDate=function(t,n,i){7==n&&(n=0);var a=n;if(t.getDay()==a)return t;var o=void 0;return o=i?new Date(t.getTime()-864e5):new Date(t.getTime()+864e5),e.GetWeekDate(o,n,i)},e.IsInBigDate=function(e,t,n){var i,a,o;i=0==e[0]?n.getFullYear():e[0],a=0==e[0]&&0==e[1]?n.getMonth():e[1]-1,o=0==e[2]?n.getDate():e[2];var r=new Date(i,a,o);i=0==t[0]?n.getFullYear():t[0],a=0==t[0]&&0==t[1]?n.getMonth():t[1]-1,o=0==t[2]?n.getDate():t[2];var s=new Date(i,a,o,23,59,59);return n>=r&&s>=n?!0:!1},e.GetDateTimeByArray=function(e,t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e[3],e[4],e[5])},e.GetTodayLastTime=function(t){for(var n=TimeManager.Utc1970,i=SystemTimeDefined.GetInstance().getSubListById(t),a=0;a<i.length;a++){var o=e.GetTodayLastTimeDate(i[a]);o>n&&(n=o)}return n},e.GetTodayLastTimeDate=function(t){if(-1==t.start[6]&&0!=t.start[0])return new Date(t.end[0],t.end[1],t.end[2],t.end[3],t.end[4],t.end[5]);var n=TimeManager.GetServerLocalDateTime();if(e.IsInBigDate(t.start,t.end,n))return e.GetDateTimeByArray(t.end,n);var i=void 0,a=void 0,o=void 0;return i=0==t.end[0]?n.getFullYear():t.end[0],a=0==t.end[1]?n.getMonth():t.end[1],o=0==t.end[2]?n.getDate():t.end[2],new Date(i,a,o,23,59,59)},e}();__reflect(SystemTimeManager.prototype,"SystemTimeManager");var TimeManager=function(){function e(){}return e.initialize=function(t){t&&(e._timeZone=0,t.timezone&&(e._timeZone=t.timezone),e._loginTimestamp=0,t.timestamp&&(e._loginTimestamp=t.timestamp,e.SetServerTimestamp(t))),SocketManager.AddCommandListener(Command.System_Push_ResetTime0_2015,e.onResetTime,this)},e.onResetTime=function(t){e.resetTime0Event.dispatch()},e.SetServerTimestamp=function(t){e._serverTimestamp=0,t.timestamp&&(e._serverTimestamp=t.timestamp),e._serverSyncTime=Math.floor(Date.now()/1e3)},Object.defineProperty(e,"loginTimestamp",{get:function(){return e._loginTimestamp},enumerable:!0,configurable:!0}),e.GetCurrentOnlineLength=function(){return e.GetServerUtcTimestamp()-e._loginTimestamp},e.GetServerTimeZone=function(){return e._timeZone},e.GetServerUtcTimestamp=function(){return 0==e._serverTimestamp?0:e._serverTimestamp+(Math.floor(Date.now()/1e3)-e._serverSyncTime)},e.GetServerLocalDateTime=function(t){return void 0===t&&(t=0),0==t?new Date(1e3*e.GetServerUtcTimestamp()):new Date(1e3*(e.GetServerUtcTimestamp()+3600*t))},e.GetFiveRefreshLocalTime=function(){var t=e.GetServerLocalDateTime();return new Date(t.getFullYear(),t.getMonth(),t.getDay(),5)},e._serverTimestamp=0,e._loginTimestamp=0,e.resetTime0Event=new qin.DelegateDispatcher,e.Utc1970=new Date(1970,0,1,0,0,0,0),e}();__reflect(TimeManager.prototype,"TimeManager");var VersionManager=function(){function e(){}return Object.defineProperty(e,"isServerTest",{get:function(){return e._isServerTest},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isSafe",{get:function(){return e._isServerTest&&e._isSafe},enumerable:!0,configurable:!0}),e.Initialize=function(t,n){if(qin.System.isMicro)if(e._isSafe=WebConfig.isSafe,e._clientVersion=WebConfig.clientVersion,e._clientVersionArray=qin.StringUtil.toIntArray(e._clientVersion,qin.StringConstants.Dot),e._clientVersionArray&&e._clientVersionArray.length>2){var i=WebConfig.serverVersion,a=qin.StringUtil.toIntArray(i,qin.StringConstants.Dot),o=VersionUtil.CompareAllForce(e._clientVersionArray,a);e._isServerTest=o,e.parsePackageVersion(i,a,e._clientVersionArray,function(){qin.FuncUtil.invoke(t,n)},function(){GameManager.reload()})}else AlertManager.showAlertByString("版本号获取错误，请检查初始文件是否正确");else e._isSafe=!1,e._isServerTest=URLOption.getBoolean(URLOption.ServerTest),qin.FuncUtil.invoke(t,n)},e.onLoadVersionComplete=function(t,n){qin.Console.log("version.json的数据："+JSON.stringify(t)),t?(e._isMaintain=qin.StringUtil.toBoolean(t.mt),0==e._isServerTest&&e._isMaintain?e.LoadMaintainTxt():e.onServerComplete.dispatch()):AlertManager.showAlert2("加载版本文件失败！点击确定重新加载！",e,e.loadServerVersion)},e.loadServerVersion=function(){var t=ProjectDefined.GetInstance().getVersionUrl();RES.getResByUrl(t+"?"+Date.now().toString()+Math.random().toString(),e.onLoadVersionComplete,this,RES.ResourceItem.TYPE_JSON)},e.parsePackageVersion=function(t,n,i,a,o,r){n&&i&&n.length>2&&i.length>2?VersionUtil.CompareForce(n,i)?AlertManager.showAlert2("有新版本("+t+")更新，需要更新才能进入游戏，点击确定前往更新!",e,e.gotoLoadNewVersion):VersionUtil.CompareOptimize(n,i)?AlertManager.showConfirm2("有新版本("+t+")更新，是否前往更新？",e,e.gotoLoadNewVersion,a,null,r):qin.FuncUtil.invoke(a,e,r):AlertManager.showAlert2("版本文件解析错误！点击确定重新加载！",e,o)},e.gotoLoadNewVersion=function(){var e=BundleManager.getUrl();e?ChannelManager.openURL(e):AlertManager.showAlert("下载地址空，请到应用商店下载或联系客服处理")},e.VerifyGameServer=function(e){var t=qin.StringUtil.toIntArray(e,qin.StringConstants.Dot),n=qin.StringUtil.toIntArray(ProjectDefined.GetInstance().codeVersion,qin.StringConstants.Dot);return n.length>1?n[0]!=t[0]||n[1]<t[1]?!1:!0:!1},e.LoadMaintainTxt=function(){RES.getResByUrl(ProjectDefined.GetInstance().maintainUrl+"?"+Date.now().toString()+Math.random().toString(),e.OnMaintainComplete,this,RES.ResourceItem.TYPE_TEXT)},e.OnMaintainComplete=function(t){t?AlertManager.showAlert2(t,e,e.loadServerVersion):AlertManager.showAlert2("游戏停机维护中，届时将无法登录游戏，请各位相互转告。具体开服时间可能会根据实际情况通告，敬请谅解。",e,e.loadServerVersion)},e.setComponentVisibleBySafe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(null!=t&&e.isSafe)for(var i=0;i<t.length;i++)t[i]&&t[i].parent&&t[i].parent.removeChild(t[i])},e.getVersionStr=function(){var t="v"+ProjectDefined.GetInstance().codeVersion;return qin.System.isPackage&&(t=t+"("+e._clientVersion+")"),t},e.onServerComplete=new qin.DelegateDispatcher,e._isMaintain=!1,e._isServerTest=!1,e._isSafe=!1,e}();__reflect(VersionManager.prototype,"VersionManager");var VersionUtil=function(){function e(){}return e.CompareAllForce=function(e,t){if(null==e||e.length<=0)return!1;if(null==t||t.length<=0)return!0;if(e[0]>t[0])return!0;if(e[0]==t[0]){if(e[1]>t[1])return!0;if(e[1]==t[1]&&e[2]>t[2])return!0}return!1},e.CompareForce=function(e,t){return null==e||e.length<=0?!1:null==t||t.length<=0?!0:e[0]>t[0]?!0:e[0]==t[0]&&e[1]>t[1]?!0:!1},e.CompareOptimize=function(e,t){return e&&t&&t.length==e.length&&t.length>2?e[0]==t[0]&&e[1]==t[1]&&e[2]>t[2]:!1},e}();__reflect(VersionUtil.prototype,"VersionUtil");var URLOption=function(){function e(){}return e.getString=function(e){return egret.getOption(e)},e.getBoolean=function(e){return qin.StringUtil.toBoolean(egret.getOption(e))},e.getNumber=function(e){return parseFloat(egret.getOption(e))},e.AppId="appid",e.Channel="channel",e.ServerTest="server_test",e.DebugLoginType="debug_logintype",e.DebugToken="debug_token",e.Bid="bid",e.Log="log",e}();__reflect(URLOption.prototype,"URLOption");var WebConfig=function(){function e(){}return Object.defineProperty(e,"resUrl",{get:function(){return(window.web_config_resUrl?window.web_config_resUrl:"")+(window.web_config_subPath?window.web_config_subPath:"")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultResJson",{get:function(){return window.web_config_defaultResJson?window.web_config_defaultResJson:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultThmJson",{get:function(){return window.web_config_defaultThmJson?window.web_config_defaultThmJson:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientVersion",{get:function(){return window.web_config_clientVersion?window.web_config_clientVersion:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"serverVersion",{get:function(){return window.web_config_serverVersion?window.web_config_serverVersion:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isSafe",{get:function(){return 1==window.web_config_isSafe&&qin.RuntimeTypeName.getCurrentName()==qin.RuntimeTypeName.Ios},enumerable:!0,configurable:!0}),Object.defineProperty(e,"wxOpenId",{get:function(){return window.web_config_wxOpenId?window.web_config_wxOpenId:""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"wxRefreshToken",{get:function(){return window.web_config_wxRefreshToken?window.web_config_wxRefreshToken:""},enumerable:!0,configurable:!0}),e}();__reflect(WebConfig.prototype,"WebConfig");var WebLoading=function(){function e(){}return e.getElement=function(){return qin.System.isWeb?(null==e._element&&(e._element=document.getElementsByClassName("web-loading")[0]),e._element):null},e.show=function(){e.getElement()&&(e.getElement().style.display="block")},e.hide=function(){e.getElement()&&(e.getElement().style.display="none")},e.setText=function(t){e.getElement()&&(e.getElement().innerHTML=t)},e}();__reflect(WebLoading.prototype,"WebLoading");var WebManager=function(){function e(){}return e.getCurrentPublicUrl=function(){var e=qin.UrlUtil.getCurrentQueryMap();delete e[URLOption.DebugLoginType],delete e[URLOption.DebugToken];var t=qin.UrlUtil.getCurrentHostPath()+"?"+qin.UrlUtil.toHttpQuery(e);return t},e}();__reflect(WebManager.prototype,"WebManager");var AchieveDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.achieveConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.achieveConfig)},t.prototype.getAchieveDefintionByGroup=function(e){for(var n=0,i=t.GetInstance().dataList;n<i.length;n++){var a=i[n];if(a.group==e)return a}return null},t.prototype.getPrevIdIsNull=function(e){var t=this.getDefinition(e);return t?null==t.preId:!1},t.prototype.getAchieveGroup=function(){for(var e=new Array,t=0,n=this.dataList;t<n.length;t++){var i=n[t];-1==e.indexOf(i.group)&&e.push(i.group)}return e},t.achieveConfig="achieve",t}(BaseDefined);__reflect(AchieveDefined.prototype,"AchieveDefined");var AchieveDefintion=function(){function e(){}return e}();__reflect(AchieveDefintion.prototype,"AchieveDefintion",["IBaseDefintion"]);var AwardDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.awardConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.awardDefinitionDic=new qin.Dictionary,this.dataList=DefinedManager.GetData(t.awardConfig);for(var e=0,n=this.dataList;e<n.length;e++){var i=n[e];this.setAwardInfoDefinitionList(i),this.awardDefinitionDic.add(i.id,i)}},t.prototype.setAwardInfoDefinitionList=function(e){if(e.costType){e.costList=new Array;for(var t=0;t<e.costType.length;t++){var n=new AwardInfoDefinition;n.type=e.costType[t],e.costId&&(n.id=e.costId[t]),e.costNum&&(n.count=e.costNum[t]),e.costList.push(n)}}if(e.rewardType){e.rewardList=new Array;for(var t=0;t<e.rewardType.length;t++){var i=new AwardInfoDefinition;i.type=e.rewardType[t],e.rewardId&&(i.id=e.rewardId[t]),e.rewardNum&&(i.count=e.rewardNum[t]),e.rewardList.push(i)}}},t.prototype.getPrevIdIsNull=function(e){var t=this.getDefinition(e);return t?null==t.preId:!1},t.prototype.getAwardNameById=function(e,n){void 0===n&&(n=!1);var i=t.GetInstance().getDefinition(e),a=i.rewardList.length;if(i&&i.rewardList&&a>0){for(var o="",r=0;a>r;r++){var s=ItemDefined.GetInstance().getDefinition(i.rewardList[r].id),l=void 0;s&&(l=s.name);var h=i.rewardList[r].count;l&&h&&(o+=100>h?n?l+h+"个":l:qin.MathUtil.formatNum(h)+l,i.rewardList&&a-1>r&&(o+="、"))}return o}},t.prototype.getAwardInfoByPreId=function(e){if(null!=this.dataList)for(var t=0;t<this.dataList.length;t++)if(this.dataList[t].preId==e)return this.dataList[t];return null},t.awardConfig="award",t}(BaseDefined);__reflect(AwardDefined.prototype,"AwardDefined");var AwardDefinition=function(){function e(){}return e}();__reflect(AwardDefinition.prototype,"AwardDefinition",["IBaseDefintion"]);var AwardInfoDefinition=function(){function e(){}return e}();__reflect(AwardInfoDefinition.prototype,"AwardInfoDefinition");var AnimationFactory=function(){function e(){}return e.getCardFaceAnimation=function(e){var t;switch(e){case AnimationType.CardFaceBoardAppear:t=new CardFaceBoardAppear;break;case AnimationType.CardFaceBright:t=new CardFaceBright;break;case AnimationType.CardFaceMoveToPoint:t=new CardFaceMoveToPoint;break;case AnimationType.CardFaceTurnToFace:t=new CardFaceTurnToFace;break;case AnimationType.SelfCard1Appear:t=new SelfCard1Appear;break;case AnimationType.SelfCard2Appear:t=new SelfCard2Appear}return t},e.getDisplayObjectContainerAnimation=function(e){var t;switch(e){case AnimationType.FlopCard:t=new FlopCardAnimation;break;case AnimationType.GamblingGameGroupMove:t=new GamblingGameGroupMove;break;case AnimationType.CommonMoveToPointByNowPos:t=new CommonMoveToPointByNowPos;break;case AnimationType.CommonMoveToRelativelyPos:t=new CommonMoveToRelativelyPos;break;case AnimationType.WinChips:t=new WinChipsAnim;break;case AnimationType.FoldCard:t=new FoldCardAnimation;break;case AnimationType.Alpha:t=new AlphaChangeAnimation}return t},e.getParticleEffect=function(t,n,i){if(e._particleList||(e._particleList=new qin.Dictionary),e._particleStateList||(e._particleStateList=new qin.Dictionary),!e._particleStateList.containsKey(t)||e._particleStateList.getValue(t)){var a=e._particleList.getValue(t);switch(t){case AnimationType.GetCoin:e.resParticle(a,ResFixedFileName.GetCoin_Json,ResFixedFileName.GetCoin_Img,1e3,n,0,0,t,i);break;case AnimationType.WinCard:e.resParticle(a,ResFixedFileName.Win_Json,ResFixedFileName.Win_Img,3e3,n,25,-20,t,i);break;case AnimationType.Allin0:e.resParticle(a,ResFixedFileName.Allin_Json,ResFixedFileName.Win_Img,400,n,43,30,t,i);break;case AnimationType.Allin1:e.resParticle(a,ResFixedFileName.Allin_Json,ResFixedFileName.Win_Img,400,n,136,30,t,i);break;case AnimationType.HundredWarPlayer:e.resParticle(a,ResFixedFileName.Win_Json,ResFixedFileName.Win_Img,2e3,n,0,-100,t,i);break;case AnimationType.HundredWarBanker:e.resParticle(a,ResFixedFileName.Win_Json,ResFixedFileName.Win_Img,1e3,n,0,-70,t,i);break;case AnimationType.HundredWarPool:e.resParticle(a,ResFixedFileName.Win_Json,ResFixedFileName.Win_Img,2e3,n,120,-100,t,i);break;case AnimationType.HundredWarPoolDes:e.resParticle(a,ResFixedFileName.HundredWarPoolBoom_Json,ResFixedFileName.Win_Img,400,n,150,37,t,i)}}},e.resParticle=function(t,n,i,a,o,r,s,l,h){t?(-1==o.getChildIndex(t)&&o.addChild(t),t.start(a)):(e._particleStateList.add(l,!1),RES.getResAsync(ResPrefixPathName.Particle+n,function(t,n){var d=RES.getRes(i),c=new particle.GravityParticleSystem(d,t);o.addChild(c),c.x=r,c.y=s,c.start(a),h(c),e._particleList.add(l,c),e._particleStateList.add(l,!0)},this))},e}();__reflect(AnimationFactory.prototype,"AnimationFactory");var BundleDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return null==t._instance&&(t._instance=new t),0==DefinedManager.IsParsed(t.bundleConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.bundleConfig)},t.prototype.getDefinitionByWebBid=function(e){if(null!=this.dataList)for(var t=0;t<this.dataList.length;t++){var n=this.dataList[t];if(n.id==e)return n}return null},t.prototype.getDefinitionByBundleId=function(e){if(e&&null!=this.dataList)for(var t=0;t<this.dataList.length;t++){var n=this.dataList[t];if(n.bundleId==e)return n}return null},t.DefaultID=1,t.bundleConfig="bundle",t}(BaseDefined);__reflect(BundleDefined.prototype,"BundleDefined");var BundleDefinition=function(){function e(){}return e}();__reflect(BundleDefinition.prototype,"BundleDefinition",["IBaseDefintion"]);var ChampionshipBlindDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.championshipBlindConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.championshipBlindConfig)},t.prototype.getBlindListByBlindId=function(e){if(null!=this.dataList){for(var t=new Array,n=0;n<this.dataList.length;n++)this.dataList[n].blindId==e&&t.push(this.dataList[n]);return t}return null},t.prototype.getBlindInfoByLevel=function(e,t){var n=this.getBlindListByBlindId(t);if(null!=n)for(var i=0;i<n.length;i++)if(this.dataList[i].level==e)return n[i];return null},t.prototype.getDefByBlind=function(e,t,n){if(null!=this.dataList)for(var i=0;i<this.dataList.length;i++)if(this.dataList[i].blindId==e&&this.dataList[i].sBlind==t&&this.dataList[i].bBlind==n)return this.dataList[i];return null},t.championshipBlindConfig="championshipBlind",t}(BaseDefined);__reflect(ChampionshipBlindDefined.prototype,"ChampionshipBlindDefined");var ChampionshipBlindDefinition=function(){function e(){}return e}();__reflect(ChampionshipBlindDefinition.prototype,"ChampionshipBlindDefinition",["IBaseDefintion"]);var ChampionshipDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.championshipConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.championshipConfig)},t.championshipConfig="championship",t}(BaseDefined);__reflect(ChampionshipDefined.prototype,"ChampionshipDefined");var ChampionshipDefinition=function(){function e(){}return e}();__reflect(ChampionshipDefinition.prototype,"ChampionshipDefinition",["IBaseDefintion"]);var ChampionshipPrizeDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.championshipPrizeConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.championshipPrizeConfig)},t.prototype.getChampionshipPrizeList=function(e){if(null!=this.dataList){for(var t=new Array,n=0,i=this.dataList;n<i.length;n++){var a=i[n];if(a.prizeId==e)if(a.start!=a.end)for(var o=a.start;o<=a.end-a.start;o++){var r=new ChampionshipPrizeDefinition;r.id=a.id,r.start=o,r.end=o,r.prizeId=a.prizeId,r.awardId=a.awardId,t.push(a)}else t.push(a)}return t}},t.championshipPrizeConfig="championshipPrize",t}(BaseDefined);__reflect(ChampionshipPrizeDefined.prototype,"ChampionshipPrizeDefined");var ChampionshipPrizeDefinition=function(){function e(){}return e}();__reflect(ChampionshipPrizeDefinition.prototype,"ChampionshipPrizeDefinition",["IBaseDefintion"]);var ChipsDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.chipsConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.chipsConfig)},t.chipsConfig="chips",t}(BaseDefined);__reflect(ChipsDefined.prototype,"ChipsDefined");var ChipsDefinition=function(){function e(){}return e}();__reflect(ChipsDefinition.prototype,"ChipsDefinition",["IBaseDefintion"]);var DefinedManager=function(){function e(){}return e.Reset=function(){e._parseSet=[]},e.SetConfigData=function(t){if(e._parseSet=[],e._textMap=[],t)for(var n=0,i=t;n<i.length;n++){var a=i[n];if(null==e._textMap[a.name])try{e._textMap[a.name]=JSON.parse(a.asText())}catch(o){qin.Console.log("配置表格式有问题！"+a.name)}else qin.Console.log("Config有重复的:",a.name)}},e.IsParsed=function(t,n){return void 0===n&&(n=AssetsSuffixName.JSON),1==e._parseSet[t+n]},e.setData=function(t,n){null==e._textMap&&(e._textMap=[]),null==e._parseSet&&(e._parseSet=[]),null==e._textMap[t]?e._textMap[t]=n:qin.Console.log("Config有重复的:",t)},e.GetData=function(t,n){return void 0===n&&(n=AssetsSuffixName.JSON),t+=n,e._parseSet[t]=!0,e._textMap[t]},e}();__reflect(DefinedManager.prototype,"DefinedManager");var ErrorDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return null==t._instance&&(t._instance=new t),0==DefinedManager.IsParsed(t.errorConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.errorConfig)},t.prototype.getDetails=function(e){var t=this.getDefinition(e);return t?t.des:qin.StringConstants.Empty},t.errorConfig="error",t}(BaseDefined);__reflect(ErrorDefined.prototype,"ErrorDefined");var ErrorDefinition=function(){function e(){}return e}();__reflect(ErrorDefinition.prototype,"ErrorDefinition",["IBaseDefintion"]);var ExpDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.expConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.expConfig)},t.expConfig="exp",t}(BaseDefined);__reflect(ExpDefined.prototype,"ExpDefined");var ExpDefinition=function(){function e(){}return e}();__reflect(ExpDefinition.prototype,"ExpDefinition",["IBaseDefintion"]);var FastChatDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.fastChatConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.fastChatConfig)},t.fastChatConfig="fastChat",t}(BaseDefined);__reflect(FastChatDefined.prototype,"FastChatDefined");var FastChatDefinition=function(){function e(){}return e}();__reflect(FastChatDefinition.prototype,"FastChatDefinition",["IBaseDefintion"]);var ForbiddenDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.forbiddenConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.forbiddenConfig)},t.forbiddenConfig="forbidden",t}(BaseDefined);__reflect(ForbiddenDefined.prototype,"ForbiddenDefined");var ForbiddenDefinition=function(){function e(){}return e}();__reflect(ForbiddenDefinition.prototype,"ForbiddenDefinition",["IBaseDefintion"]);var GuideDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.config)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.config)},t.prototype.getGuideDefinition=function(e,t){var n;if(this.dataList)for(var i=this.dataList.length,a=0;i>a;a++)if(n=this.dataList[a],n.type==e&&n.phase==t)return n;return qin.Console.log("未找到引导配置数据---->type:"+e+"phase:"+t),n},t.prototype.getMaxPhase=function(e){if(this.dataList)for(var t=0,n=this.dataList;t<n.length;t++){var i=n[t];if(i.type==e&&1==i.typeEndFlag)return i.phase}return 0},t.config="guide",t}(BaseDefined);__reflect(GuideDefined.prototype,"GuideDefined");var GuideDefinition=function(){function e(){}return e}();__reflect(GuideDefinition.prototype,"GuideDefinition",["IBaseDefintion"]);var GuideControllerDefinition=function(){function e(){}return e}();__reflect(GuideControllerDefinition.prototype,"GuideControllerDefinition",["IBaseDefintion"]);var GuideQuestionDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.guideQuestionConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.guideQuestionConfig)},t.guideQuestionConfig="guideQuestion",t}(BaseDefined);__reflect(GuideQuestionDefined.prototype,"GuideQuestionDefined");var GuideQuestionDefinition=function(){function e(){}return e}();__reflect(GuideQuestionDefinition.prototype,"GuideQuestionDefinition",["IBaseDefintion"]);var GuideRoomDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.config)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.config)},t.config="guideRoom",t}(BaseDefined);__reflect(GuideRoomDefined.prototype,"GuideRoomDefined");var GuideRoomDefinition=function(){function e(){}return e}();__reflect(GuideRoomDefinition.prototype,"GuideRoomDefinition",["IBaseDefintion"]);var GuideRoomPlayerDefinition=function(){function e(){}return e}();__reflect(GuideRoomPlayerDefinition.prototype,"GuideRoomPlayerDefinition");var GuideStepDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.config)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.config)},t.config="guideStep",t}(BaseDefined);__reflect(GuideStepDefined.prototype,"GuideStepDefined");var GuideStepDefinition=function(){function e(){}return e}();__reflect(GuideStepDefinition.prototype,"GuideStepDefinition",["IBaseDefintion"]);var GuideTriggerDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.config)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.config)},t.prototype.getTriggerDefinition=function(e){var t;if(this.dataList)for(var n=this.dataList.length,i=0;n>i;i++)if(t=this.dataList[i],t.guideType==e)return t;return qin.Console.logError("获取引导触发数据异常！GuideType"+e),t},t.config="guideTrigger",t}(BaseDefined);__reflect(GuideTriggerDefined.prototype,"GuideTriggerDefined");var GuideTriggerDefinition=function(){function e(){}return e}();__reflect(GuideTriggerDefinition.prototype,"GuideTriggerDefinition",["IBaseDefintion"]);var HoleCardsDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.holeCardsConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.holeCardsConfig)},t.prototype.getHoleCardsInfoByType=function(e){if(null!=this.dataList)for(var t=0;t<this.dataList.length;t++)if(this.dataList[t].type==e)return this.dataList[t];return null},t.holeCardsConfig="holeCards",t}(BaseDefined);__reflect(HoleCardsDefined.prototype,"HoleCardsDefined");var HoleCardsDefinition=function(){function e(){}return e}();__reflect(HoleCardsDefinition.prototype,"HoleCardsDefinition",["IBaseDefintion"]);var HundredWarCardTypeDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.hundredWarCardTypeConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.hundredWarCardTypeConfig)},t.prototype.getOddsByType=function(e){if(null!=this.dataList)for(var t=0;t<this.dataList.length;t++)if(this.dataList[t].type==e)return this.dataList[t].odds;return null},t.hundredWarCardTypeConfig="hundredWarCardType",t}(BaseDefined);__reflect(HundredWarCardTypeDefined.prototype,"HundredWarCardTypeDefined");var HundredWarCardTypeDefinition=function(){function e(){}return e}();__reflect(HundredWarCardTypeDefinition.prototype,"HundredWarCardTypeDefinition",["IBaseDefintion"]);var HundredWarDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.hundredWarConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.hundredWarConfig)},t.hundredWarConfig="hundredWar",t}(BaseDefined);__reflect(HundredWarDefined.prototype,"HundredWarDefined");var HundredWarDefinition=function(){function e(){}return e}();__reflect(HundredWarDefinition.prototype,"HundredWarDefinition",["IBaseDefintion"]);var ImgNotifyDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.imgNotifyConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.imgNotifyConfig)},t.imgNotifyConfig="imgNotify",t}(BaseDefined);__reflect(ImgNotifyDefined.prototype,"ImgNotifyDefined");var ImgNotifyDefinition=function(){function e(){}return e}();__reflect(ImgNotifyDefinition.prototype,"ImgNotifyDefinition");var ItemDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.itemConfig)&&t._instance.initialize(),t._instance
},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.itemConfig)},t.itemConfig="item",t}(BaseDefined);__reflect(ItemDefined.prototype,"ItemDefined");var ItemDefinition=function(){function e(){}return e}();__reflect(ItemDefinition.prototype,"ItemDefinition",["IBaseDefintion"]);var LoadingTextDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.loadingTextConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.loadingTextConfig)},t.loadingTextConfig="loadingText",t}(BaseDefined);__reflect(LoadingTextDefined.prototype,"LoadingTextDefined");var LoadingTextDefinition=function(){function e(){}return e}();__reflect(LoadingTextDefinition.prototype,"LoadingTextDefinition",["IBaseDefintion"]);var MailDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.mailConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.mailConfig)},t.mailConfig="mail",t}(BaseDefined);__reflect(MailDefined.prototype,"MailDefined");var MailDefintion=function(){function e(){}return e}();__reflect(MailDefintion.prototype,"MailDefintion");var MarqueeDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.marqueeConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.marqueeConfig)},t.prototype.getInfoByType=function(e){if(null!=this.dataList)for(var t=0,n=this.dataList;t<n.length;t++){var i=n[t];if(i.type==e)return i}return null},t.marqueeConfig="marquee",t}(BaseDefined);__reflect(MarqueeDefined.prototype,"MarqueeDefined");var MarqueeDefinition=function(){function e(){}return e}();__reflect(MarqueeDefinition.prototype,"MarqueeDefinition",["IBaseDefintion"]);var MusicDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return null==t._instance&&(t._instance=new t),0==DefinedManager.IsParsed(t.musicConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){if(this.dataList=DefinedManager.GetData(t.musicConfig),this.dataList)for(var e=0,n=this.dataList;e<n.length;e++){var i=n[e];i.boy&&(i.boy=i.boy.toString().split(qin.StringConstants.Semicolon)),i.girl&&(i.girl=i.girl.toString().split(qin.StringConstants.Semicolon))}},t.prototype.getSexMusicDefinition=function(e,t,n){var i=this.getMusicDefinition(t,n);if(i){var a=0;if(e==Sex.Female&&i.girl)return a=qin.MathUtil.getRandom(0,i.girl.length-1),i.girl[a];if(e==Sex.Male&&i.boy)return a=qin.MathUtil.getRandom(0,i.boy.length-1),i.boy[a];if(i.boy)return a=qin.MathUtil.getRandom(0,i.boy.length-1),i.boy[a]}return qin.StringConstants.Empty},t.prototype.getMusicDefinition=function(e,t){if(!this.dataList)return null;var n,i=this.dataList.length;if("any"==e){if(void 0!=t)for(var a=0;i>a;a++)if(n=this.dataList[a],n.pai==t)return n}else for(var a=0;i>a;a++)if(n=this.dataList[a],n.action==e)return n},t.musicConfig="music",t}(BaseDefined);__reflect(MusicDefined.prototype,"MusicDefined");var MusicDefinition=function(){function e(){}return e}();__reflect(MusicDefinition.prototype,"MusicDefinition",["IBaseDefintion"]);var NameDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.nameConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.nameConfig),this.getRange()},t.prototype.getRange=function(){if(this.dataList&&this.dataList.length>0){for(var e=0,t=this.dataList;e<t.length;e++){var n=t[e];this.lastNameRange||n.name||(this.lastNameRange=n.id-1),this.bboyFirstNameRange||n.boy||(this.bboyFirstNameRange=n.id-1)}this.lastNameRange||this.bboyFirstNameRange||qin.Console.log("获取姓名或男孩名范围失败")}},t.nameConfig="name",t}(BaseDefined);__reflect(NameDefined.prototype,"NameDefined");var NameDefinition=function(){function e(){}return e}();__reflect(NameDefinition.prototype,"NameDefinition",["IBaseDefintion"]);var ProjectDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return null==t._instance&&(t._instance=new t),0==DefinedManager.IsParsed(t.projectConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this._projectObject=DefinedManager.GetData(t.projectConfig),this.vipSpeed=this._projectObject.vipSpeed,this.MTTBuyTimeoutClient=this._projectObject.MTTBuyTimeoutClient,this.mTTIntervalTime=this._projectObject.mTTIntervalTime,this.mTTIntervalTime<60&&(this.mTTIntervalTime=60),t.giveOnceGoldNum=this._projectObject.giveOnceGoldNum},t.prototype.getValue=function(e){return this._projectObject?this._projectObject[e]:null},t.prototype.getVipSpeedDefinition=function(e){for(var t=0,n=this.vipSpeed;t<n.length;t++){var i=n[t];if(i.type==e)return i}return null},t.prototype.getLoginAddress=function(e,n){return e?this.getValue(t.login_in_address):n?this.getValue(t.login_test_address):this.getValue(t.login_address)},t.prototype.getLoginPort=function(e,n){return e?this.getValue(t.login_in_port):n?this.getValue(t.login_test_port):this.getValue(t.login_port)},t.prototype.getStorageHost=function(e){return this.getValue(e?t.storage_host_test:t.storage_host)},t.prototype.getHeadUpLoadUrl=function(e){return this.getStorageHost(e)+"/uploadimg.php"},t.prototype.getVoiceUpLoadUrl=function(e){return this.getStorageHost(e)+"/uploadvoice.php"},t.prototype.getPayIndexUrl=function(){return this.getValue(t.webpay_url)+"/inpay.php"},t.prototype.getPayCallbackUrl=function(e){return this.getValue(e?t.sdk_url_test:t.sdk_url)+"/applepay/paycallback.php"},t.prototype.getWxpayUnifiedOrderUrl=function(){return this.getValue(t.webpay_url)+"/wxpay/unifiedorder.php"},t.prototype.getWxpayWapPayUrl=function(){return this.getValue(t.webpay_url)+"/wxpay/wappay.php"},t.prototype.getAlipayWapPayUrl=function(){return this.getValue(t.webpay_url)+"/alipay/wappay.php"},t.prototype.getVersionUrl=function(){return this.getValue(t.version_url)+"/version.json"},Object.defineProperty(t.prototype,"maintainUrl",{get:function(){return this.getValue(t.version_url)+"/mt.txt"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userAgreementUrl",{get:function(){return this.getValue(t.agreement_url)},enumerable:!0,configurable:!0}),t.prototype.getWxTicketUrl=function(){return this.getValue(t.authorize_url)+"/wx_ticket.php"},t.prototype.getWxQrconnectUrl=function(){return this.getValue(t.authorize_url)+"/wx_qrconnect.php"},Object.defineProperty(t.prototype,"codeVersion",{get:function(){return this.getValue(t.version)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pollingLimit",{get:function(){return parseInt(this.getValue(t.pollingLimit))},enumerable:!0,configurable:!0}),t.projectConfig="project",t.onTimeOut="onTimeOut",t.serverCrowded="serverCrowded",t.waitActionTimeClient="waitActionTimeClient",t.putTimeoutClient="putTimeoutClient",t.putTimeoutTimes="putTimeoutTimes",t.initPutTimeOutClient="initPutTimeOutClient",t.waitReadyTime="waitReadyTime",t.waitDisbandTime="waitDisbandTime",t.chatMaxRecordTime="chatMaxRecordTime",t.freeGoldTime="freeGoldTime",t.freeGoldAward="freeGoldAward",t.usePhone="usePhone",t.version="version",t.login_in_address="login_in_address",t.login_in_port="login_in_port",t.login_address="login_address",t.login_port="login_port",t.login_test_address="login_test_address",t.login_test_port="login_test_port",t.storage_host="storage_host",t.storage_host_test="storage_host_test",t.webpay_url="webpay_url",t.version_url="version_url",t.sdk_url="sdk_url",t.sdk_url_test="sdk_url_test",t.authorize_url="authorize_url",t.agreement_url="agreement_url",t.pollingLimit="pollingLimit",t}(BaseDefined);__reflect(ProjectDefined.prototype,"ProjectDefined");var RoundDefinition=function(){function e(){}return e}();__reflect(RoundDefinition.prototype,"RoundDefinition");var PlayWayDefinition=function(){function e(){}return e}();__reflect(PlayWayDefinition.prototype,"PlayWayDefinition");var AntesDefinition=function(){function e(){}return e}();__reflect(AntesDefinition.prototype,"AntesDefinition");var BringRoomCardDefinition=function(){function e(){}return e}();__reflect(BringRoomCardDefinition.prototype,"BringRoomCardDefinition");var VipSpeedDefinition=function(){function e(){}return e}();__reflect(VipSpeedDefinition.prototype,"VipSpeedDefinition");var ProtocolManager=function(){function e(){}return e.SetProtocolData=function(t){for(var n=0,i=t;n<i.length;n++){var a=i[n];"loginall.bin"==a.name?e.LoginBin=a.asArrayBuffer():"c2s.bin"==a.name?e.Gamec2sBin=a.asArrayBuffer():"s2c.bin"==a.name?e.Games2cBin=a.asArrayBuffer():qin.Console.log("未知的协议文件:",a.name)}},e.LoginBin=null,e.Gamec2sBin=null,e.Games2cBin=null,e}();__reflect(ProtocolManager.prototype,"ProtocolManager");var RankDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.rankConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.rankConfig)},t.rankConfig="rank",t}(BaseDefined);__reflect(RankDefined.prototype,"RankDefined");var RankDefinition=function(){function e(){}return e}();__reflect(RankDefinition.prototype,"RankDefinition",["IBaseDefintion"]);var RoomDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.forbiddenConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.forbiddenConfig)},t.prototype.getInfoByType=function(e){if(null!=this.dataList){for(var t=new Array,n=0,i=this.dataList;n<i.length;n++){var a=i[n];a.type==e&&t.push(a)}return t}return null},t.forbiddenConfig="room",t}(BaseDefined);__reflect(RoomDefined.prototype,"RoomDefined");var RoomDefinition=function(){function e(){}return e}();__reflect(RoomDefinition.prototype,"RoomDefinition",["IBaseDefintion"]);var ShopDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.ShoppingConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.ShoppingConfig)},t.prototype.getDefinitionByAwardId=function(e){if(this.dataList)for(var t=0,n=this.dataList;t<n.length;t++){var i=n[t];if(i.awardId==e)return i}return null},t.prototype.isType=function(e,t){for(var n=0,i=this.dataList;n<i.length;n++){var a=i[n];if(a.awardId==e&&a.type==t)return!0}return!1},t.ShoppingConfig="payList",t}(BaseDefined);__reflect(ShopDefined.prototype,"ShopDefined");var ShopDefinition=function(){function e(){}return e}();__reflect(ShopDefinition.prototype,"ShopDefinition",["IBaseDefintion"]);var SystemTimeDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.systemTimeConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.systemTimeConfig)},t.prototype.getSubListById=function(e){for(var t=new Array,n=0,i=this.dataList;n<i.length;n++){var a=i[n];a.timeId==e&&t.push(a)}return t},t.prototype.getSystemType=function(e){return-1!=e.start[6]?SystemTimeType.Week:0==e.start[0]&&0==e.start[1]&&0==e.start[2]&&0==e.end[0]&&0==e.end[1]&&0==e.end[2]?SystemTimeType.EveryDay:SystemTimeType.Normal},t.systemTimeConfig="systemTime",t}(BaseDefined);__reflect(SystemTimeDefined.prototype,"SystemTimeDefined");var SystemTimeDefinition=function(){function e(){}return e}();__reflect(SystemTimeDefinition.prototype,"SystemTimeDefinition",["IBaseDefintion"]);var TextDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.textConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.textConfig);for(var e=/\\n/g,n=0,i=this.dataList;n<i.length;n++){var a=i[n];a.text=a.text.replace(e,"\n")}},t.textConfig="text",t}(BaseDefined);__reflect(TextDefined.prototype,"TextDefined");var TextDefinition=function(){function e(){}return e}();__reflect(TextDefinition.prototype,"TextDefinition",["IBaseDefintion"]);var TimeAwardDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.timeAwardConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.timeAwardConfig);for(var e=0,n=this.dataList;e<n.length;e++){var i=n[e];i.awardList=new Array;for(var a=0;3>a;a++){var o="roomType",r=a+1;i.awardList[a]=i[o+r]}}},t.timeAwardConfig="timeAward",t}(BaseDefined);__reflect(TimeAwardDefined.prototype,"TimeAwardDefined");var TimeAwardDefinition=function(){function e(){}return e}();__reflect(TimeAwardDefinition.prototype,"TimeAwardDefinition",["IBaseDefintion"]);var VipDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.vipConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.vipConfig)},t.prototype.getVipDefinitionByLevel=function(e){for(var t=0,n=this.dataList;t<n.length;t++){var i=n[t];if(i.level==e)return i}return qin.Console.log("获取失败！level:"+e.toString()),null},t.prototype.getVipLevel=function(e){this.dataList&&0!=this.dataList.length||qin.Console.log("vip表为空");for(var t=this.dataList.length-1;t>=0;t--)if(!(e<this.dataList[t].totalExp))return this.dataList[t].level;return this.dataList[0].level},t.vipConfig="vip",t}(BaseDefined);__reflect(VipDefined.prototype,"VipDefined");var VipDefinition=function(){function e(){}return e}();__reflect(VipDefinition.prototype,"VipDefinition",["IBaseDefintion"]);var ActivityDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.config)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){if(this.dataList=DefinedManager.GetData(t.config),this.dataList)for(var e=0,n=this.dataList;e<n.length;e++){var i=n[e];i.triggerParams=qin.StringUtil.toStringArray(i.trigger),i.startTime?i.startDt=this.getDate(i,i.startTime):i.startDt=TimeManager.Utc1970,i.endTime?i.endDt=this.getDate(i,i.endTime):i.endDt=new Date(2099,0,1,0,0,0)}},t.prototype.getDate=function(e,t){var n;if(n=qin.StringUtil.toIntArray(t)){if(6==n.length)return new Date(n[0],n[1]-1,n[2],n[3],n[4],n[5]);qin.Console.log("活动时间格式不对！活动ID："+e.id)}return null},t.config="activity_list",t}(BaseDefined);__reflect(ActivityDefined.prototype,"ActivityDefined");var ActivityDefintion=function(){function e(){}return e}();__reflect(ActivityDefintion.prototype,"ActivityDefintion",["IBaseDefintion"]);var ActivityHappyGiftDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.activityConfig)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.activityConfig)},t.activityConfig="activity_happyGift",t}(BaseActivitySubDefined);__reflect(ActivityHappyGiftDefined.prototype,"ActivityHappyGiftDefined");var ActivityHappyGiftDefintion=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(BaseActivitySubDefnition);__reflect(ActivityHappyGiftDefintion.prototype,"ActivityHappyGiftDefintion");var ActivityPayPrizeDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.config)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.config)},t.config="activity_payPrize",t}(BaseActivitySubDefined);__reflect(ActivityPayPrizeDefined.prototype,"ActivityPayPrizeDefined");var ActivityPayPrizeDefintion=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(BaseActivitySubDefnition);__reflect(ActivityPayPrizeDefintion.prototype,"ActivityPayPrizeDefintion");var GoldProcess=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),UserManager.propertyChangeEvent.addListener(this.onProcessUpdate,this)},t.prototype.onProcessUpdate=function(){e.prototype.onProcessUpdate.call(this),UserManager.userInfo.gold>this.process&&e.prototype.init.call(this,UserManager.userInfo.gold)},t.prototype.destroy=function(){UserManager.propertyChangeEvent.removeListener(this.onProcessUpdate,this),e.prototype.destroy.call(this)},t}(BaseAchieveProcessInfo);__reflect(GoldProcess.prototype,"GoldProcess");var BoneAnimation=function(){function e(){}return e.resBoneAnime=function(t,n,i,a,o,r,s,l){var h=this;if(t)o&&-1==o.getChildIndex(t.movie)?o.addChild(t.movie):qin.Console.log("parent对象出错");else{var d=new BoneAnimeInfo;e._boneList.add(a,d),RES.getResAsync(ResPrefixPathName.Bone+n,function(e,t){RES.getResAsync(ResPrefixPathName.Bone+i,function(t,n){dragonBones.addMovieGroup(e,t);var i=dragonBones.buildMovie(a);i.x=r,i.y=s,o.addChild(i),d.movie=i,d.isLoaded=!0,l(d)},h)},this)}},e.getFastAnimeByName=function(t){return e._boneList&&e._boneList.containsKey(t)?e._boneList.getValue(t):null},e}();__reflect(BoneAnimation.prototype,"BoneAnimation");var BoneAnimeInfo=function(){function e(){this.isLoaded=!1,this.state=BonePlayState.Play}return e.prototype.play=function(e,t,n){return this.isLoaded?(this.movie.timeScale=n,void(this.state==BonePlayState.Play&&this.movie.play(e,t))):void qin.Console.log("资源未加载完成")},e.prototype.stop=function(){this.movie&&this.movie.stop()},e}();__reflect(BoneAnimeInfo.prototype,"BoneAnimeInfo");var BonePlayState;!function(e){e[e.Play=1]="Play",e[e.Stop=2]="Stop"}(BonePlayState||(BonePlayState={}));var LaBaDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.config)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.config)},t.prototype.getDefByBottom=function(e,t){for(var n=0,i=this.dataList;n<i.length;n++){var a=i[n];if(a.id==e&&a.bottom==t)return a}},t.prototype.getBottomList=function(e){for(var t=new Array,n=0,i=this.dataList;n<i.length;n++){var a=i[n];if(a.id==e)if(t.length>0){for(var o=!0,r=0;r<t.length;r++)t[r]==a.bottom&&(o=!1);o&&t.push(a.bottom)}else t.push(a.bottom)}return t},t.prototype.getCoefficientListByBottom=function(e,t){for(var n=new Array,i=0,a=this.dataList;i<a.length;i++){var o=a[i];o.id==e&&o.bottom==t&&n.push(o.coefficient)}return n},t.config="activity_laBa",t}(BaseActivitySubDefined);__reflect(LaBaDefined.prototype,"LaBaDefined");var LaBaDefinition=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(BaseActivitySubDefnition);__reflect(LaBaDefinition.prototype,"LaBaDefinition");var SignInDefined=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetInstance=function(){return t._instance||(t._instance=new t),0==DefinedManager.IsParsed(t.config)&&t._instance.initialize(),t._instance},t.prototype.initialize=function(){this.dataList=DefinedManager.GetData(t.config)},t.prototype.getDefinitionbyAwardId=function(e){for(var t=0,n=this.dataList;t<n.length;t++){var i=n[t];if(i.awardId==e)return i}return null},t.prototype.getDefinitionbySubId=function(e){for(var t=0,n=this.dataList;t<n.length;t++){var i=n[t];if(i.subId==e)return i}return null},t.config="activity_signin",t}(BaseActivitySubDefined);__reflect(SignInDefined.prototype,"SignInDefined");var SignInDefinition=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(BaseActivitySubDefnition);__reflect(SignInDefinition.prototype,"SignInDefinition");var AchieveGroup;!function(e){e[e.GoldGroup=101]="GoldGroup",e[e.FriendGroup=121]="FriendGroup",e[e.LevelGroup=141]="LevelGroup",e[e.OnePairGroup=161]="OnePairGroup",e[e.TwoPairsGroup=181]="TwoPairsGroup",e[e.ThreeOfAKindGroup=201]="ThreeOfAKindGroup",e[e.StraightGroup=221]="StraightGroup",e[e.FlushGroup=241]="FlushGroup",e[e.FullhouseGroup=261]="FullhouseGroup",e[e.FourOfAKindGroup=281]="FourOfAKindGroup",e[e.StraightFlushGroup=301]="StraightFlushGroup",e[e.RoyalFlushGroup=321]="RoyalFlushGroup",e[e.PrimaryPatternGroup=1001]="PrimaryPatternGroup",e[e.MiddlePatternGroup=1021]="MiddlePatternGroup",e[e.HighPatternGroup=1041]="HighPatternGroup",e[e.JoinMTTGroup=1061]="JoinMTTGroup",e[e.WinGroup=2001]="WinGroup",e[e.WinMTTGroup=2021]="WinMTTGroup",e[e.LevelUpGroup=3001]="LevelUpGroup",e[e.HWFunPatternGroup=1081]="HWFunPatternGroup",e[e.HWRichPatternGroup=1101]="HWRichPatternGroup",e[e.WinHWGroup=2041]="WinHWGroup"}(AchieveGroup||(AchieveGroup={}));var AchieveType;!function(e){e[e.PlayOver=0]="PlayOver",e[e.Gold=1]="Gold",e[e.Friend=2]="Friend",e[e.Level=3]="Level",e[e.CardType=4]="CardType",e[e.PlayPattern=101]="PlayPattern",e[e.Win=201]="Win"}(AchieveType||(AchieveType={}));var WeekDay;!function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday"}(WeekDay||(WeekDay={}));var AchieveShowPattern;!function(e){e[e.All=0]="All",e[e.PrimaryPattern=1]="PrimaryPattern",e[e.MiddlePattern=2]="MiddlePattern",e[e.HighPattern=3]="HighPattern",e[e.AllPattern=4]="AllPattern",e[e.Race=21]="Race",e[e.HundredWarAll=40]="HundredWarAll",e[e.HundredWarFun=41]="HundredWarFun",e[e.HundredWarRich=42]="HundredWarRich"}(AchieveShowPattern||(AchieveShowPattern={}));var BoneAnimationCreater=function(){function e(){}return e.CreateBoneAnimation=function(e,t,n,i,a){if(void 0===a&&(a=function(){}),BoneAnimation._boneList||(BoneAnimation._boneList=new qin.Dictionary),!BoneAnimation._boneList.containsKey(e)||BoneAnimation._boneList.getValue(e).isLoaded){var o=BoneAnimation._boneList.getValue(e);switch(e){case BoneAnimeName.HallLiuGuang:BoneAnimation.resBoneAnime(o,ResFixedFileName.LiuGuang_Config,ResFixedFileName.LiuGuang_Img,e,t,90,21,a)}}},e}();__reflect(BoneAnimationCreater.prototype,"BoneAnimationCreater");var AssetsSuffixName=function(){function e(){}return e.JSON=".json",e.MP3=".mp3",e.JPG=".jpg",e.PNG=".png",e.ZIP=".zip",e}();__reflect(AssetsSuffixName.prototype,"AssetsSuffixName");var OperatePlatform=function(){function e(){}return e.getCurrent=function(){return e.cn},e.getLangs=function(){switch(e.getCurrent()){case e.na:case e.sea:return["en","zh-cn"];case e.hmt:return["zh-tw","zh-cn","en"]}return["zh-cn","en"]},e.cn="cn",e.hmt="hmt",e.na="na",e.sea="sea",e}();__reflect(OperatePlatform.prototype,"OperatePlatform");var ChannelType=function(){function e(){}return e.guest="guest",e.qin="qin",e}();__reflect(ChannelType.prototype,"ChannelType");var ChannelLoginType=function(){function e(){}return e.IsViewAccount=function(t){switch(t){case e.Qin:case e.Guest:case e.Account:case e.IntranetGuest:case e.IntranetAccount:return!0}return!1},e.getTokenExpire=function(t){return t==e.Weixin?2592e3:0},e.GetChannelLoginList=function(t,n,i,a){var o=[];return qin.System.isPackage?((0==i||0==a)&&o.push(e.Weixin),o.push(e.Qin)):((qin.System.isWeChat||0==qin.System.isLocalhost)&&o.push(e.Weixin),o.push(e.Qin)),o.length<=0&&qin.Console.logError("登录类型列表长度不可能为0"),o},e.Qin="qin",e.Guest="guest",e.IntranetGuest="intranetGuest",e.IntranetAccount="intranetAccount",e.Weixin="weixin",e.Account="account",e.Normal="",e}();__reflect(ChannelLoginType.prototype,"ChannelLoginType");var ChannelShareType=function(){function e(){}return e.WxTimeLine="WxTimeLine",e.WxMessage="WxMessage",e.QQZone="QQZone",e.QQMessage="QQMessage",e}();__reflect(ChannelShareType.prototype,"ChannelShareType");var WxAuthorizeType=function(){function e(){}return e.App="app",e.Public="public",e}();__reflect(WxAuthorizeType.prototype,"WxAuthorizeType");var ChatMessageType;!function(e){e[e.InRoom=1]="InRoom",e[e.Maquee=2]="Maquee"}(ChatMessageType||(ChatMessageType={}));var ChatSubType;!function(e){e[e.Normal=1]="Normal",e[e.Emoji=2]="Emoji",e[e.AudioRecordMessage=3]="AudioRecordMessage",e[e.Horn=4]="Horn"}(ChatSubType||(ChatSubType={}));var ChatSpecialStrings=function(){function e(){}return e.Emoji="#Emoji#",e.AudioRecordMessage="#AudioRecordMessage#",e.ShareVcr="#ShareVcr#",e.OpenModule="#OpenModule#",e}();__reflect(ChatSpecialStrings.prototype,"ChatSpecialStrings");var MarqueeMsgShowTime;!function(e){e[e.All=0]="All",e[e.OnRoom=1]="OnRoom",e[e.OnMTT=2]="OnMTT",e[e.OnGambling=3]="OnGambling",e[e.OnHundredWar=4]="OnHundredWar"}(MarqueeMsgShowTime||(MarqueeMsgShowTime={}));var MarqueeMsgType;!function(e){e[e.SystemMsg=0]="SystemMsg",e[e.MTTMsg=1]="MTTMsg",e[e.HundredWarMsg=2]="HundredWarMsg",e[e.HornMag=3]="HornMag"}(MarqueeMsgType||(MarqueeMsgType={}));var ColorEnum=function(){function e(){}return e.Green=10157824,e.Red=16711680,e.Golden=16699155,e.Yellow=15122973,e.White=16777215,e.OnlineGreen=8714842,e.InviteOnlineGreen=16437328,e.OutlineGray=10921899,e.LaBa_Win_Com=14849284,e.LaBa_Win_Golden=16627968,e.Review_Lost_Green=9500302,e.Review_Win_Orange=16741166,e}();__reflect(ColorEnum.prototype,"ColorEnum");var Command=function(){function e(){}return e.Login_login="login",e.Login_exchange="exchange",e.Login_auth="auth",e.System_Heartbeat_3016="c3016",e.System_GetNotice_3004="c3004",e.System_Response_Login_2013="c2013",e.System_Push_ResetTime0_2015="c2015",e.Role_GetInfo_3000="c3000",e.Role_Push_PropertyChange_2000="c2000",e.Req_BuyCard_3001="c3001",e.Role_UploadHead_3683="c3683",e.Role_Push_HeadReviewPass_2120="c2120",e.Hosted_PushState_2024="c2024",e.Hosted_Req_3022="c3022",e.Chat_PushMessage_2014="c2014",e.Chat_SendMessage_3019="c3019",e.Chat_Record_Sgin_3018="c3018",e.Mail_GetList_3097="c3097",e.Mail_TakePrize_3098="c3098",e.Mail_Push_New_2024="c2024",e.Friend_GetList_3156="c3156",e.Friend_GiveGold_3151="c3151",e.Friend_Push_GiveGold_2037="c2037",e.Friend_GetRoleInfo_3023="c3023",e.Friend_ReceiveGift_3150="c3150",e.Friend_RequestList_3157="c3157",e.Friend_Receive_3154="c3154",e.Friend_SearchPlayer_3153="c3153",e.Friend_DelPlayer_3155="c3155",e.Friend_AddPlayer_3152="c3152",e.Friend_Push_AddSuccess_2036="c2036",e.Friend_Push_BeDel_2035="c2035",e.Friend_Push_OnlineState_2064="c2064",e.Friend_Push_RequestFriend_2038="c2038",e.Friend_Push_Invite_2111="c2111",e.Friend_Push_Reset_2015="c2015",e.Award_Exchange_3113="c3113",e.Award_GetInfo_3112="c3112",e.Achievement_PushChange_2023="c2023",e.Achievement_GetList_3090="c3090",e.Achievement_GetPrize_3088="c3088",e.Activity_GetList_3233="c3233",e.Activity_Push_2088="c2088",e.Activity_GetPrize_3202="c3202",e.ActivityJoin_Req_3584="c3584",e.ActivityPubJoin_Req_3234="c3234",e.Vip_GetVipTime_2001="c2001",e.Role_Push_Offline_2026="c2026",e.Req_BindFriendList_3027="c3027",e.Role_SetInfo_3609="c3609",e.Role_Push_ExpChange_2028="c2028",e.Req_RoomInfo_3002="c3002",e.Role_Create_3012="c3012",e.Req_saveORwithdraw_3014="c3014",e.Req_safePwd_3017="c3017",e.Req_SendGameInvite_3608="c3608",e.Req_RankList_3110="c3110",e.Req_ItemList_3020="c3020",e.Rec_ItemListAdd_2002="c2002",e.Rec_ItemListReduce_2005="c2005",e.Req_UseItem_3021="c3021",e.Req_CreatePersonalRoom_3610="c3610",e.Req_GetFreeGold_3024="c3024",e.EnterRoomInfo_Req_3600="c3600",e.NextRound_Req_3601="c3601",e.Action_Req_3602="c3602",e.LeaveRoom_Req_3603="c3603",e.BuyInGame_Req_3604="c3604",e.StandUp_Req_3605="c3605",e.BrightCard_Req_3606="c3606",e.AddCoin_Req_3607="c3607",e.MTTRebuyOrAddon_3619="c3619",e.OneRoundOver_Push_2106="c2106",e.NextRoundStart_Push_2107="c2107",e.BlindChange_Push_2100="c2100",e.PotChipsChange_Push_2101="c2101",e.OneLoopOver_Push_2102="c2102",e.SitOrStand_Push_2103="c2103",e.PlayerStateChange_Push_2104="c2104",e.ActionPosChange_Push_2105="c2105",e.HandCard_Push_2108="c2108",e.BrightCard_Push_2109="c2109",e.ChipsChange_Push_2110="c2110",e.PlayerListStateChange_Push_2113="c2113",e.InTrusteeship_Push_2119="c2119",e.ReviewInfo_Req_3707="c3707",e.MTTList_Req_3611="c3611",e.JoinedMTTList_Req_3706="c3706",e.MTTRequestJoin_Req_3612="c3612",e.MTTRequestWithdraw_Req_3613="c3613",e.InsideRoomInfoList_Req_3614="c3614",e.MTTRecordList_Req_3615="c3615",e.MTTRecentlyRankList_Req_3616="c3616",e.MTTOutsInfo_Req_3617="c3617",e.MTTRankInfo_Req_3618="c3618",e.MTTJoinNumChange_Push_2114="c2114",e.MTTCancel_Push_2115="c2115",e.MTTRoomId_Push_2116="c2116",e.MTTRank_Push_2117="c2117",e.MTTWeedOut_Push_2118="c2118",e.MTTNew_Push_2121="c2121",e.TimeAwardInfo_Req_3620="c3620",e.TimeAwardGet_Req_3621="c3621",e.TimeAwardRefresh_Push_2122="c2122",e.GuessBuy_Req_3622="c3622",e.GuessCrunchies_Req_3623="c3623",e.GuessRecord_Req_3624="c3624",e.PrizeGetList_Req_3684="c3684",e.PrizeGetDetails_Req_3685="c3685",e.PrizeSave_Req_3686="c3686",e.PrizeGetTakeInfo_Req_3687="c3687",e.PhoneBind_3688="c3688",e.PhoneCode_Req_3689="c3689",e.SetGuideStep_Req_3691="c3691",e.Bind_Account_3597="c3597",e.Bind_GetList_3705="c3705",e.SimpleUserInfo_Req_3025="c3025",e.HWRoomInfo_Req_3692="c3692",e.EnterHW_Req_3693="c3693",e.HWBet_Req_3694="c3694",e.HWPoolInfo_Req_3695="c3695",e.HWNoSeatInfo_Req_3696="c3696",e.HWTrend_Req_3697="c3697",e.HWbanker_Req_3698="c3698",e.HWKamisho_Req_3699="c3699",e.HWShimosho_Req_3700="c3700",e.HWSit_Req_3701="c3701",e.HWLeave_Req_3702="c3702",e.HWNextRoundStart_Req_3703="c3703",e.HWStandUp_Req_3704="c3704",e.HWBetChange_Push_2123="c2123",e.HWCards_Push_2124="c2124",e.HWStateChange_Push_2126="c2126",e.HWSeatChange_Push_2127="c2127",e.OutRoom_Push_2128="c2128",e.ExchangeTimeRefresh_Push_2031="c2031",e}();__reflect(Command.prototype,"Command");var GamblingPattern;!function(e){e[e.Fast=1]="Fast",e[e.Ante=2]="Ante",e[e.NoUpperLimit=3]="NoUpperLimit",e[e.Personal=4]="Personal",e[e.AllIn=5]="AllIn"}(GamblingPattern||(GamblingPattern={}));var PlayingFieldType;!function(e){e[e.Primary=1]="Primary",e[e.Middle=2]="Middle",e[e.High=3]="High",e[e.Personal=11]="Personal",e[e.Race=21]="Race",e[e.Guide=31]="Guide",e[e.GuidePlayWay=32]="GuidePlayWay"}(PlayingFieldType||(PlayingFieldType={}));var CardType;!function(e){e[e.None=0]="None",e[e.HighCard=1]="HighCard",e[e.OnePair=2]="OnePair",e[e.TwoPairs=3]="TwoPairs",e[e.ThreeOfAKind=4]="ThreeOfAKind",e[e.Straight=5]="Straight",e[e.Flush=6]="Flush",e[e.Fullhouse=7]="Fullhouse",e[e.FourOfAKind=8]="FourOfAKind",e[e.StraightFlush=9]="StraightFlush",e[e.RoyalFlush=10]="RoyalFlush"}(CardType||(CardType={}));var FlushType;!function(e){e[e.Diamonds=1]="Diamonds",e[e.Hearts=2]="Hearts",e[e.Spades=3]="Spades",e[e.Clubs=4]="Clubs"}(FlushType||(FlushType={}));var GoBrokeBuyType;!function(e){e[e.GoldScale=2]="GoldScale"}(GoBrokeBuyType||(GoBrokeBuyType={}));var GamblingPanelStateIndex;!function(e){e[e.Null=0]="Null",e[e.Normal=1]="Normal",e[e.MttWait=2]="MttWait",e[e.Mtt=3]="Mtt",e[e.Guide=4]="Guide",e[e.GuidePlayWay=5]="GuidePlayWay"
}(GamblingPanelStateIndex||(GamblingPanelStateIndex={}));var BuyInGameState;!function(e){e[e.Sit=1]="Sit",e[e.Stand=2]="Stand"}(BuyInGameState||(BuyInGameState={}));var SeatMode;!function(e){e[e.Three=3]="Three",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Nine=9]="Nine"}(SeatMode||(SeatMode={}));var ChipsShowState;!function(e){e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.LeftDown=3]="LeftDown",e[e.RightDown=4]="RightDown",e[e.Top=5]="Top"}(ChipsShowState||(ChipsShowState={}));var SlotLayerType;!function(e){e[e.None=0]="None",e[e.Down=1]="Down",e[e.Up=2]="Up"}(SlotLayerType||(SlotLayerType={}));var PlayerState;!function(e){e[e.WaitNext=0]="WaitNext",e[e.Fold=1]="Fold",e[e.Check=2]="Check",e[e.Raise=3]="Raise",e[e.AllIn=4]="AllIn",e[e.Call=5]="Call",e[e.Blind=6]="Blind",e[e.WaitAction=7]="WaitAction",e[e.Trusteeship=8]="Trusteeship",e[e.RoomId=20]="RoomId",e[e.ThePos=21]="ThePos",e[e.ButtonPos=22]="ButtonPos",e[e.HandCard=23]="HandCard",e[e.SetPos=24]="SetPos",e[e.PubCard=25]="PubCard",e[e.PoolWon=26]="PoolWon",e[e.ShowCard=27]="ShowCard",e[e.StandUp=28]="StandUp",e[e.Action=100]="Action",e[e.Empty=104]="Empty"}(PlayerState||(PlayerState={}));var PlayerPosType;!function(e){e[e.Sblind=1]="Sblind",e[e.Bblind=2]="Bblind",e[e.Banker=3]="Banker"}(PlayerPosType||(PlayerPosType={}));var LoginMode;!function(e){e[e.Guest=0]="Guest",e[e.Account=1]="Account",e[e.Token=2]="Token",e[e.TokenDebug=3]="TokenDebug"}(LoginMode||(LoginMode={}));var SceneLayer;!function(e){e[e.None=0]="None",e[e.Map=1]="Map",e[e.Model=2]="Model",e[e.Effect=3]="Effect",e[e.Text=4]="Text"}(SceneLayer||(SceneLayer={}));var SceneType;!function(e){e[e.None=0]="None",e[e.Login=1]="Login",e[e.Hall=2]="Hall",e[e.Game=3]="Game",e[e.HundredWar=4]="HundredWar"}(SceneType||(SceneType={}));var SceneSwitchAction;!function(e){e[e.None=0]="None",e[e.OpenPanel=1]="OpenPanel",e[e.RepleacePanel=2]="RepleacePanel"}(SceneSwitchAction||(SceneSwitchAction={}));var TextFixedId;!function(e){e[e.None=0]="None",e[e.UserAngreement=1]="UserAngreement",e[e.GuessHelp=3]="GuessHelp",e[e.HundredWarRule=4]="HundredWarRule",e[e.HundredWarPrize=5]="HundredWarPrize",e[e.GuidePlayWay=7]="GuidePlayWay",e[e.PlayWay=2]="PlayWay",e[e.Version=201]="Version",e[e.Info=301]="Info",e[e.Forum=302]="Forum",e[e.QQ=303]="QQ",e[e.CustomerService=304]="CustomerService",e[e.HappyGiftHelp=8]="HappyGiftHelp"}(TextFixedId||(TextFixedId={}));var Sex;!function(e){e[e.Unknown=0]="Unknown",e[e.Male=1]="Male",e[e.Female=2]="Female"}(Sex||(Sex={}));var VipCard;!function(e){e[e.WeekVip=101]="WeekVip",e[e.MonthVip=102]="MonthVip"}(VipCard||(VipCard={}));var ReceiveType;!function(e){e[e.NotREceive=0]="NotREceive",e[e.Receive=1]="Receive"}(ReceiveType||(ReceiveType={}));var PropertyId;!function(e){e[e.gold=1]="gold",e[e.diamond=2]="diamond",e[e.vipExp=3]="vipExp",e[e.exp=4]="exp"}(PropertyId||(PropertyId={}));var ItemFixedId;!function(e){e[e.gold=1]="gold"}(ItemFixedId||(ItemFixedId={}));var FriendInfoType;!function(e){e[e.Receive=1]="Receive",e[e.Send=2]="Send"}(FriendInfoType||(FriendInfoType={}));var CostType;!function(e){e[e.Gold=1]="Gold",e[e.Diamond=3]="Diamond",e[e.RMB=10]="RMB"}(CostType||(CostType={}));var SafeType;!function(e){e[e.Save=1]="Save",e[e.Withdraw=2]="Withdraw"}(SafeType||(SafeType={}));var HeadUploadSystemType=function(){function e(){}return e.web="web",e["native"]="native",e}();__reflect(HeadUploadSystemType.prototype,"HeadUploadSystemType");var InsideRoomType;!function(e){e[e.None=0]="None",e[e.Game=1]="Game",e[e.HundredWar=2]="HundredWar",e[e.Mtt=3]="Mtt"}(InsideRoomType||(InsideRoomType={}));var ErrorCode;!function(e){e[e.None=0]="None",e[e.HundredWarOverFlow=3019]="HundredWarOverFlow"}(ErrorCode||(ErrorCode={}));var SystemTimeType;!function(e){e[e.Normal=1]="Normal",e[e.EveryDay=2]="EveryDay",e[e.Week=3]="Week"}(SystemTimeType||(SystemTimeType={}));var PayState=function(){function e(){}return e.Normal=0,e.Mixed=1,e.Third=2,e.Close=3,e}();__reflect(PayState.prototype,"PayState");var WxTradeType=function(){function e(){}return e.JSAPI="JSAPI",e.NATIVE="NATIVE",e.MWEB="MWEB",e}();__reflect(WxTradeType.prototype,"WxTradeType");var GameSetting=function(){function e(){}return Object.defineProperty(e,"shakeEnabled",{get:function(){return void 0===e._shakeEnabled&&(e._shakeEnabled=PrefsManager.getBoolean(PrefsManager.Shake_Enable,!0)),e._shakeEnabled},set:function(t){e._shakeEnabled=t,PrefsManager.setBoolean(PrefsManager.Shake_Enable,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"autoVoiceEnabled",{get:function(){return void 0===e._autoVoiceEnabled&&(e._autoVoiceEnabled=PrefsManager.getBoolean(PrefsManager.AutoVocie_Enable,!0)),e._autoVoiceEnabled},set:function(t){e._autoVoiceEnabled=t,PrefsManager.setBoolean(PrefsManager.AutoVocie_Enable,t)},enumerable:!0,configurable:!0}),e.replaceHeadSign=function(e){return e.replace(/#[12]{1}#/g,qin.StringConstants.Empty)},e.AppId="1004",e.StageWidth=720,e.StageHeight=1280,e.IsAgreeUserAgreement=!1,e.MaxMailNum=30,e.HeadUploadVerifySign="#1#",e.HeadUploadUnPassSign="#2#",e}();__reflect(GameSetting.prototype,"GameSetting");var GuideType;!function(e){e[e.None=0]="None",e[e.NewUser=1]="NewUser"}(GuideType||(GuideType={}));var GuideTriggerType;!function(e){e[e.None=0]="None",e[e.Login_Hall=1]="Login_Hall"}(GuideTriggerType||(GuideTriggerType={}));var GuideStepType;!function(e){e[e.None=0]="None",e[e.CreateRoom=1]="CreateRoom",e[e.FlopCard=2]="FlopCard",e[e.BoardCard=3]="BoardCard",e[e.Action=5]="Action",e[e.Tips=6]="Tips",e[e.OpenPanel=7]="OpenPanel",e[e.GamblingOver=8]="GamblingOver",e[e.Click=9]="Click",e[e.Slide=10]="Slide",e[e.SwitchScene=11]="SwitchScene",e[e.Prompt=12]="Prompt",e[e.HideComponent=13]="HideComponent",e[e.RunPanelFunc=14]="RunPanelFunc"}(GuideStepType||(GuideStepType={}));var GuideTipsOrientation;!function(e){e[e.None=0]="None",e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Right=4]="Right"}(GuideTipsOrientation||(GuideTipsOrientation={}));var GuideChooseType;!function(e){e[e.IsEnterGuide=1]="IsEnterGuide",e[e.IsEnterTrainingCamp=2]="IsEnterTrainingCamp"}(GuideChooseType||(GuideChooseType={}));var HundredWarType;!function(e){e[e.FunPattern=1]="FunPattern",e[e.RichPattern=2]="RichPattern"}(HundredWarType||(HundredWarType={}));var HWState;!function(e){e[e.WaitNext=0]="WaitNext",e[e.Bet=1]="Bet"}(HWState||(HWState={}));var ItemType;!function(e){e[e.Property=1]="Property",e[e.Ticket=2]="Ticket",e[e.Raffle=3]="Raffle",e[e.Horn=4]="Horn"}(ItemType||(ItemType={}));var PathName=function(){function e(){}return Object.defineProperty(e,"AppIcon_png",{get:function(){return e.BundleDirectory+BundleManager.getBid()+"/icon.png"},enumerable:!0,configurable:!0}),e.ResourceDirectory="resource/",e.SkinsPanelDirectory=e.ResourceDirectory+"skins/panel/",e.AssetsDirectory=e.ResourceDirectory+"assets/",e.ConfigDirectory=e.ResourceDirectory+"config/",e.SoundDirectory=e.AssetsDirectory+"sound/",e.BgDirectory=e.AssetsDirectory+"bg/",e.EmojiDirectory=e.AssetsDirectory+"emoji/",e.LangDirectory=e.AssetsDirectory+"lang/",e.BundleDirectory=e.AssetsDirectory+"bundle/",e.Config_files_txt=e.ConfigDirectory+"files.txt",e.Config_loginall_bin=e.ConfigDirectory+"loginall.bin",e.Config_c2s_bin=e.ConfigDirectory+"c2s.bin",e.Config_s2c_bin=e.ConfigDirectory+"s2c.bin",e.Default_thm_json=e.ResourceDirectory+"default.thm.json",e.Default_res_json=e.ResourceDirectory+"default.res.json",e}();__reflect(PathName.prototype,"PathName");var RankType;!function(e){e[e.Gold=1]="Gold",e[e.FriendGold=2]="FriendGold",e[e.Level=3]="Level",e[e.FriendLevel=4]="FriendLevel",e[e.Vip=5]="Vip",e[e.Activity=100]="Activity"}(RankType||(RankType={}));var HappyGiftRankSubType;!function(e){e[e.All=1]="All",e[e.Friend=2]="Friend"}(HappyGiftRankSubType||(HappyGiftRankSubType={}));var ShimTaeYoonRankType;!function(e){e[e.Today=0]="Today",e[e.Yesterday=1]="Yesterday"}(ShimTaeYoonRankType||(ShimTaeYoonRankType={}));var SheetSubName=function(){function e(){}return e.getdefaultHead=function(t){switch(t){case Sex.Male:return e.Default_Head_Male;case Sex.Unknown:return e.Default_Head_Secret;case Sex.Female:return e.Default_Head_Female}},e.GrayBg="pub_bg_png",e.MaleImg="m_png",e.FemaleImg="f_png",e.SecretImg="b_png",e.Default_Head_Female="mrtx_png",e.Default_Head_Male="mrtx_nan_png",e.Default_Head_Secret="mrtx_bm_png",e.RedPointImg="icon_infor_png",e.AllInImg="all_png",e.FastImg="shandian_png",e.AnteImg="qianzhu_png",e.PersonalImg="shirenfang_png",e.Achieve_Million="wan_png",e.Achieve_Billion="yi_png",e.CountDown_Colon="maohao_png",e.TimeAwardGold1="js_1_png",e.TimeAwardGold2="js_2_png",e.TimeAwardGold3="js_3_png",e.TimeAwardGold4="js_4_png",e.TimeAwardGold5="js_5_png",e.TimeAwardGold6="js_6_png",e.MTTOverJB="jbs_jb_png",e.MTTOverGoldenCup="jbs_jb_png",e.MTTOverSilverCup="jbs_jb_yin_png",e.RaiseState="n_game_12_png",e.AllInState="n_game_16_png",e.CheckState="n_game_8_png",e.CallState="n_game_10_png",e.FoldState="n_game_14_png",e.CommonItemBg="bg_pub_2_png",e.GetItemBg="gongxi_bg_png",e.DefaultMail="yj_moren_png",e.HundredWar_Win="br_ying_png",e.HundredWar_Lose="br_shu_png",e.HundredWar_WinBg="br_ying_bg_png",e.HundredWar_LoseBg="br_shu_bg_png",e.HundredWarTrend_Win="br_sheng_png",e.HundredWarTrend_Lose="br_fu_png",e.HundredWarTrend_Tie="br_pingju_png",e.HundredWarSysBanker_Head="xttx_png",e.LaBa_Win="laBa_text_1_png",e.LaBa_WinningStreak="laBa_text_2_png",e.LaBa_TopPrize="laBa_text_3_png",e.LaBa_Lost="laBa_text_4_png",e.LaBa_AutoStartOpen="zidong_1_png",e.LaBa_AutoStartClose="zidong_2_png",e.Gambling_Head_BgType_Normal="n_game_20_png",e.Gambline_Head_BgType_Win="n_game_20_1_png",e.Gambline_Head_BgType_Chips="n_game_20_2_png",e.Review_Banker="dongjia_png",e.Review_Blind="daxiaomang_png",e}();__reflect(SheetSubName.prototype,"SheetSubName");var ResGroupName=function(){function e(){}return e.Text="text",e.Login="login",e.Common="common",e.Gambling="gambling",e.HundredWar="hundredwar",e.LaBa="activity_laBa",e.HappyGift="activity_happyGift",e}();__reflect(ResGroupName.prototype,"ResGroupName");var ResPrefixName=function(){function e(){}return e.NumRed="red_",e.NumGreen="greed_",e.NumYellow="yellow_",e.Flush="flush_",e.card="pai_",e.FlushBlack="hei_",e.FlushRed="hong_",e.Achieve_Num="achieve_num_",e.CountDown_Num="djs_",e.RankImage="icon_",e.LaBaRankImage="laBa_paiming_",e.MTTRankImage="paiming_",e.HundredWarNum="br_",e.LaBaResult="laBa_item_",e.LaBaResultBg="laBa_quan_",e}();__reflect(ResPrefixName.prototype,"ResPrefixName");var ResPrefixPathName=function(){function e(){}return e.Config="config/",e.Bg="assets/bg/",e.Bone="assets/bone/",e.Emoji="assets/emoji/",e.Icon="assets/icon/",e.Lang="assets/lang/",e.Particle="assets/particle/",e.Sheet="assets/sheet/",e.Sound="assets/sound/",e.Bundle="assets/bundle/",e.LangSheet="assets/lang/sheet/",e}();__reflect(ResPrefixPathName.prototype,"ResPrefixPathName");var ResSuffixName=function(){function e(){}return e.JSON="_json",e.PNG="_png",e.MP3="_mp3",e.JPG="_jpg",e.ZIP="_zip",e}();__reflect(ResSuffixName.prototype,"ResSuffixName");var ResFixedFileName=function(){function e(){}return e.getResNameByBundle=function(e){var t=ResPrefixPathName.Bundle+BundleManager.getBid()+"/"+e;return t},e.GetCoin_Img="icon_jinbi_png",e.ChipCoin_Img="br_chouma_png",e.GetCoin_Json="getcoin_json",e.Allin_Json="allin_json",e.HundredWarPoolBoom_Json="hundred_war_pool_boom_json",e.Win_Img="win_1_png",e.Win_Json="win_1_json",e.LiuGuang_Img="liuguang_png",e.LiuGuang_Config="liuguang_dbmv",e.Text_Json="text_json",e.Config_Zip="config_zip",e.Proto_Zip="proto_zip",e.vipBg="vip_neirong_png",e.Hall_Bg_1="hall_bg_1_png",e.Hall_Bg_2="hall_bg_2_png",e.HundredWar_Help="hundredwar_help_png",e.Guide_Bg_1="yd_bg_1_png",e.HundredWar_Bg_1="hundredwar_1_png",e.HeadEarser="touxiang_4_png",e.LaBa_Bg="activity_laBa_bg_png",e.HappyGift_Bg="activity_happyGift_bg_png",e.Logo_png="logo_png",e}();__reflect(ResFixedFileName.prototype,"ResFixedFileName");var NumResType;!function(e){e[e.Red=1]="Red",e[e.Green=2]="Green",e[e.Yellow=3]="Yellow"}(NumResType||(NumResType={}));var ShopType;!function(e){e[e.Gold=1]="Gold",e[e.Diamond=2]="Diamond",e[e.Vip=3]="Vip",e[e.MonthCard=4]="MonthCard",e[e.Prop=5]="Prop"}(ShopType||(ShopType={}));var ShopGroupIndex;!function(e){e[e.Gold=0]="Gold",e[e.Diamond=1]="Diamond",e[e.Prop=2]="Prop",e[e.Vip=3]="Vip"}(ShopGroupIndex||(ShopGroupIndex={}));var MusicAction=function(){function e(){}return e.fapai="fapai",e.allin="allin",e.call="call",e.check="check",e.fold="fold",e.raise="raise",e.bet_allin="bet_allin",e.bet_no_allin="bet_no_allin",e.bet_slider="bet_slider",e.bigWin="bigWin",e.blind="blind",e.buttonClick="buttonClick",e.cardtype_huangjiatonghua="cardtype_huangjiatonghua",e.cardtype_hulu="cardtype_hulu",e.cardtype_sitiao="cardtype_sitiao",e.cardtype_tonghuashun="cardtype_tonghuashun",e.chip_fall="chip_fall",e.chipfly="chipfly",e.chips_move_to_seat="chips_move_to_seat",e.close="close",e.foldpai="foldpai",e.gift_recv="gift_recv",e.gift_send="gift_send",e.gold_fall="gold_fall",e.hallBgm="hallBgm",e.levelup="levelup",e.light_card="light_card",e.lose="lose",e.notice="notice",e.on_turn="on_turn",e.playingBgm="playingBgm",e.popup="popup",e.sentMessage="sentMessage",e.sit="sit",e.sit_out="sit_out",e.sitClick="sitClick",e.win="win",e.item_fall="item_fall",e}();__reflect(MusicAction.prototype,"MusicAction");var MusicResEnum=function(){function e(){}return e.getBgSoundRes=function(t){switch(t){case SceneType.Login:case SceneType.Hall:return e.Login_Hall;case SceneType.Game:return e.Game}return qin.StringConstants.Empty},e.Login_Hall="hallBgm",e.Game="playingBgm",e}();__reflect(MusicResEnum.prototype,"MusicResEnum");var UILayerType;!function(e){e[e.None=0]="None",e[e.GameContent=1]="GameContent",e[e.MainUI=2]="MainUI",e[e.Module=3]="Module",e[e.Tips=4]="Tips",e[e.Guide=5]="Guide",e[e.Warn=6]="Warn"}(UILayerType||(UILayerType={}));var PanelAlignType;!function(e){e[e.None=0]="None",e[e.Center_Top=1]="Center_Top",e[e.Center_Center=2]="Center_Center",e[e.Center_Bottom=3]="Center_Bottom",e[e.Left_Top=4]="Left_Top",e[e.Left_Center=5]="Left_Center",e[e.Left_Bottom=6]="Left_Bottom",e[e.Right_Top=7]="Right_Top",e[e.Right_Center=8]="Right_Center",e[e.Right_Bottom=9]="Right_Bottom"}(PanelAlignType||(PanelAlignType={}));var ScrollViewDirection;!function(e){e[e.None=0]="None",e[e.Horizontal_L_R=1]="Horizontal_L_R",e[e.Vertical_T_D=2]="Vertical_T_D"}(ScrollViewDirection||(ScrollViewDirection={}));var UIModuleName=function(){function e(){}return e.None="None",e.NetworkPanel="NetworkPanel",e.TextTipsPanel="TextTipsPanel",e.GetCoinTipsPanel="GetCoinTipsPanel",e.GetItemTipsPanel="GetItemTipsPanel",e.AlertInfoPanel="AlertInfoPanel",e.FriendMsgPanel="FriendMsgPanel",e.LoadingPanel="LoadingPanel",e.LoginPanel="LoginPanel",e.UserAngreementPanel="UserAngreementPanel",e.GameHallPanel="GameHallPanel",e.MarqueePanel="MarqueePanel",e.PayPanel="PayPanel",e.TextInfoPanel="TextInfoPanel",e.RegisterPanel="RegisterPanel",e.LoginLocalPanel="LoginLocalPanel",e.LoginBar="LoginBar",e.LoadingSwitchPanel="LoadingSwitchPanel",e.UserInfoPanel="UserInfoPanel",e.LoginSceneBgPanel="LoginSceneBgPanel",e.ShareGamePromptPanel="ShareGamePromptPanel",e.AudioRecordingPanel="AudioRecordingPanel",e.VipPanel="VipPanel",e.CreateRolePanel="CreateRolePanel",e.EditUserInfoPanel="EditUserInfoPanel",e.ChangeUserNamePanel="ChangeUserNamePanel",e.ShoppingPanel="ShoppingPanel",e.PlayingFieldPanel="PlayingFieldPanel",e.KeyBoardPanel="KeyBoardPanel",e.EnterRoomPwdPanel="EnterRoomPwdPanel",e.SetPanel="SetPanel",e.GameRulePanel="GameRulePanel",e.CreateRoomPwdPanel="CreateRoomPwdPanel",e.SafeBoxPanel="SafeBoxPanel",e.SafeCreatePanel="SafeCreatePanel",e.FriendPanel="FriendPanel",e.MailPanel="MailPanel",e.ChatPanel="ChatPanel",e.PrizePanel="PrizePanel",e.ChampionshipPanel="ChampionshipPanel",e.AchievementItemPanel="AchievementItemPanel",e.InviteFriendPanel="InviteFriendPanel",e.RankPanel="RankPanel",e.InviteMsgPanel="InviteMsgPanel",e.AssignmentPanel="AssignmentPanel",e.AchievementInGamePanel="AchievementInGamePanel",e.JoinChampionshipSuccessPanel="JoinChampionshipSuccessPanel",e.AddChipsPanel="AddChipsPanel",e.GamblingPanel="GamblingPanel",e.ChampionshipInfoPanel="ChampionshipInfoPanel",e.BuyAccessGamePanel="BuyAccessGamePanel",e.ChampionshipBuyChipsPanel="ChampionshipBuyChipsPanel",e.ActivityPanel="ActivityPanel",e.SimplePicturePanel="SimplePicturePanel",e.NormalActivityPanel="NormalActivityPanel",e.FirstPayPanel="FirstPayPanel",e.MinuteRemindPanel="MinuteRemindPanel",e.SecondRemindPanel="SecondRemindPanel",e.SignInPanel="SignInPanel",e.TimeAwardPanel="TimeAwardPanel",e.GetTimeAwardRemindPanel="GetTimeAwardRemindPanel",e.MTTOverPanel="MTTOverPanel",e.GuessPanel="GuessPanel",e.PrizeOrderSurePanel="PrizeOrderSurePanel",e.ThreeMinRemindPanel="ThreeMinRemindPanel",e.GoldShortagePanel="GoldShortagePanel",e.OrderDetailPanel="OrderDetailPanel",e.RegisterTelPanel="RegisterTelPanel",e.LoginTelPanel="LoginTelPanel",e.BindAccountPanel="BindAccountPanel",e.BindPhonePanel="BindPhonePanel",e.AccountRetrievePwdPanel="AccountRetrievePwdPanel",e.SafeBoxRetrievePwdPanel="SafeBoxRetrievePwdPanel",e.GuideGameDescriptionPanel="GuideGameDescriptionPanel",e.GuideCardTypeIntroPanel="GuideCardTypeIntroPanel",e.GuideChoosePanel="GuideChoosePanel",e.GuideBringGoldPanel="GuideBringGoldPanel",e.GuideQuestionPanel="GuideQuestionPanel",e.GuideAnswerErrorPanel="GuideAnswerErrorPanel",e.HundredWarPanel="HundredWarPanel",e.HundredWarOverPanel="HundredWarOverPanel",e.HundredWarNoSeatPlayerPanel="HundredWarNoSeatPlayerPanel",e.HundredWarRoomPanel="HundredWarRoomPanel",e.HundredWarTrendPanel="HundredWarTrendPanel",e.HundredWarHelpPanel="HundredWarHelpPanel",e.HundredWarBankerListPanel="HundredWarBankerListPanel",e.AchievementInHundredWarPanel="AchievementInHundredWarPanel",e.HundredWarPoolInfoPanel="HundredWarPoolInfoPanel",e.ImgNotifyPanel="ImgNotifyPanel",e.ShimTaeYoonPanel="ShimTaeYoonPanel",e.HappyGiftPanel="HappyGiftPanel",e.ShimTaeYoonHelpPanel="ShimTaeYoonHelpPanel",e.ShimTaeYoonRankPanel="ShimTaeYoonRankPanel",e.ShimTaeYoonResultPanel="ShimTaeYoonResultPanel",e.MonthCardPanel="MonthCardPanel",e.AutoLoginPanel="AutoLoginPanel",e.PayMaskPanel="PayMaskPanel",e.PayModePanel="PayModePanel",e.BindPhoneAccountPanel="BindPhoneAccountPanel",e.GamblingReviewPanel="GamblingReviewPanel",e.ChoosePayWayPanel="ChoosePayWayPanel",e.ShowPayCodePanel="ShowPayCodePanel",e.SitAndPlayStartRemindPanel="SitAndPlayStartRemindPanel",e}();__reflect(UIModuleName.prototype,"UIModuleName");var TabButtonType;!function(e){e[e.SmallOf2=1]="SmallOf2",e[e.SmallOf3=2]="SmallOf3",e[e.BigOf2=3]="BigOf2",e[e.BigOf3=4]="BigOf3",e[e.BigOf4=5]="BigOf4",e[e.SubOf2=6]="SubOf2",e[e.SmallOf5=7]="SmallOf5",e[e.XSmallOf5=8]="XSmallOf5",e[e.SubOf4=9]="SubOf4",e[e.HappyGiftOf4=10]="HappyGiftOf4",e[e.HappyGiftOf2=11]="HappyGiftOf2",e[e.LaBa2=12]="LaBa2"}(TabButtonType||(TabButtonType={}));var UIRendererSkinName=function(){function e(){}return e.ROOT_PATH="resource/skins/renderer/",e.PayPanelItemRenderer=e.ROOT_PATH+"PayPanelItemRenderer.exml",e.CreateRoomPanelRenderer=e.ROOT_PATH+"CreateRoomPanelRenderer.exml",e.TextRenderer=e.ROOT_PATH+"TextRenderer.exml",e.MyAwardPanelItemRenderer=e.ROOT_PATH+"MyAwardPanelItemRenderer.exml",e.GoldItemComponent=e.ROOT_PATH+"GoldItemComponent.exml",e.DiamondItemComponent=e.ROOT_PATH+"DiamondItemComponent.exml",e.ShopGoldItemRenderer=e.ROOT_PATH+"ShopGoldItemRenderer.exml",e.ShopDiamondItemRenderer=e.ROOT_PATH+"ShopDiamondItemRenderer.exml",e.VipListItemRenderer=e.ROOT_PATH+"VipListItemRenderer.exml",e.PlayingFieldItemRenderer=e.ROOT_PATH+"PlayingFieldItemRenderer.exml",e.FriendItemRenderer=e.ROOT_PATH+"FriendItemRenderer.exml",e.AchievementItemRenderer=e.ROOT_PATH+"AchievementItemRenderer.exml",e.MailItemRenderer=e.ROOT_PATH+"MailItemRenderer.exml",e.GiftItemRenderer=e.ROOT_PATH+"GiftItemRenderer.exml",e.FriendRequestItemRenderer=e.ROOT_PATH+"FriendRequestItemRenderer.exml",e.AddFriendItemRenderer=e.ROOT_PATH+"AddFriendItemRenderer.exml",e.ChatItemRenderer=e.ROOT_PATH+"ChatItemRenderer.exml",e.FaceItemRenderer=e.ROOT_PATH+"FaceItemRenderer.exml",e.FastChatItemRenderer=e.ROOT_PATH+"FastChatItemRenderer.exml",e.ChampionshipItemRenderer=e.ROOT_PATH+"ChampionshipItemRenderer.exml",e.ChampionshipOutItemRenderer=e.ROOT_PATH+"ChampionshipOutItemRenderer.exml",e.InviteFriendItemRenderer=e.ROOT_PATH+"InviteFriendItemRenderer.exml",e.RankItemRenderer=e.ROOT_PATH+"RankItemRenderer.exml",e.MyTicketItemRenderer=e.ROOT_PATH+"MyTicketItemRenderer.exml",e.OutsItemRenderer=e.ROOT_PATH+"OutsItemRenderer.exml",e.OutsChildItemRenderer=e.ROOT_PATH+"OutsChildItemRenderer.exml",e.AssignmentItemRenderer=e.ROOT_PATH+"AssignmentItemRenderer.exml",e.AchieveInGameItemRenderer=e.ROOT_PATH+"AchieveInGameItemRenderer.exml",e.ChampionshipRankItemRenderer=e.ROOT_PATH+"ChampionshipRankItemRenderer.exml",e.BlindItemRenderer=e.ROOT_PATH+"BlindItemRenderer.exml",e.AwardItemRenderer=e.ROOT_PATH+"AwardItemRenderer.exml",e.SignInGoldItemRenderer=e.ROOT_PATH+"SignInGoldItemRenderer.exml",e.ActivityItemRenderer=e.ROOT_PATH+"ActivityItemRenderer.exml",e.ActivityAwardItemRenderer=e.ROOT_PATH+"ActivityAwardItemRenderer.exml",e.TimeAwardItemRenderer=e.ROOT_PATH+"TimeAwardItemRenderer.exml",e.GuessBuyItemRenderer=e.ROOT_PATH+"GuessBuyItemRenderer.exml",e.GuessWeekItemRenderer=e.ROOT_PATH+"GuessWeekItemRenderer.exml",e.GuessResultItemRenderer=e.ROOT_PATH+"GuessResultItemRenderer.exml",e.GuessRecordItemRenderer=e.ROOT_PATH+"GuessRecordItemRenderer.exml",e.GuideQuestionItemRenderer=e.ROOT_PATH+"GuideQuestionItemRenderer.exml",e.HundredWarItemRenderer=e.ROOT_PATH+"HundredWarItemRenderer.exml",e.HundredWarNoSeatItemRenderer=e.ROOT_PATH+"HundredWarNoSeatItemRenderer.exml",e.GuideAnswerErrorItemRenderer=e.ROOT_PATH+"GuideAnswerErrorItemRenderer.exml",e.HundredWarTrendItemRenderer=e.ROOT_PATH+"HundredWarTrendItemRenderer.exml",e.HundredWarBankerItemRenderer=e.ROOT_PATH+"HundredWarBankerItemRenderer.exml",e.AchieveInHundredWarItemRenderer=e.ROOT_PATH+"AchieveInHundredWarItemRenderer.exml",e.HWBetItemRenderer=e.ROOT_PATH+"HWBetItemRenderer.exml",e.HundredWarPoolPrizeItemRenderer=e.ROOT_PATH+"HundredWarPoolPrizeItemRenderer.exml",e.ShimTaeYoonItemRenderer=e.ROOT_PATH+"ShimTaeYoonItemRenderer.exml",e.HappyGiftItemRenderer=e.ROOT_PATH+"HappyGiftItemRenderer.exml",e.HappyGiftRankRenderer=e.ROOT_PATH+"HappyGiftRankRenderer.exml",e.HappyGiftUseRenderer=e.ROOT_PATH+"HappyGiftUseRenderer.exml",e.ShimTaeYoonHelpItemRenderer=e.ROOT_PATH+"ShimTaeYoonHelpItemRenderer.exml",e.ShimTaeYoonRankItemRenderer=e.ROOT_PATH+"ShimTaeYoonRankItemRenderer.exml",e.MonthCardItemRenderer=e.ROOT_PATH+"MonthCardItemRenderer.exml",e.GamblingReviewItemRenderer=e.ROOT_PATH+"GamblingReviewItemRenderer.exml",e}();__reflect(UIRendererSkinName.prototype,"UIRendererSkinName");var UIComponentSkinName=function(){function e(){}return e.NumComponent="resource/skins/component/NumComponent.exml",e.ImageNumComponent="resource/skins/component/ImageNumComponent.exml",e.tabComponentButton3="resource/skins/component/tabComponentButton3.exml",e.tabComponentButton2="resource/skins/component/tabComponentButton2.exml",e.TabComponentButton5="resource/skins/component/tabComponentButton5.exml",e.TabComponentButtonSm5="resource/skins/component/tabComponentButtonSm5.exml",e.rankTabComponentButton2="resource/skins/component/rankTabComponentButton2.exml",e.laBaRankTabComponentBtn4="resource/skins/component/laba/laBaRankTabComponentBtn4.exml",e.laBaTabCompontBtn2="resource/skins/component/laba/laBaTabCompontBtn2.exml",e.tabComponentButtonBig2="resource/skins/component/tabComponentButtonBig2.exml",e.tabComponentButtonBig3="resource/skins/component/tabComponentButtonBig3.exml",e.tabComponentButtonBig4="resource/skins/component/tabComponentButtonBig4.exml",e.guessAnteToggleSwitchSkin="resource/skins/component/guess/guessAnteToggleSwitchSkin.exml",e.guessAnteBuyRadioButtonSkin="resource/skins/component/guess/guessAnteBuyRadioButtonSkin.exml",e.GetItemComponent="resource/skins/component/item/GetItemComponent.exml",e.happyGiftTabtButton4="resource/skins/component/happyGiftTabtButton4.exml",e.happyGiftTabtButton2="resource/skins/component/happyGiftTabtButton2.exml",e.GamblingCdComponent="resource/skins/component/gambling/GamblingCdComponent.exml",e.GamblingHeadComponent="resource/skins/component/gambling/GamblingHeadComponent.exml",e.DownEfffectComponent="resource/skins/component/gambling/DownEfffectComponent.exml",e.CardFaceComponent="resource/skins/component/gambling/CardFaceComponent.exml",e.ChipsShowComponent="resource/skins/component/gambling/ChipsShowComponent.exml",e.ChipsSingleShowComponent="resource/skins/component/gambling/ChipsSingleShowComponent.exml",e.GamblingActionComponent="resource/skins/component/gambling/GamblingActionComponent.exml",e.GamblingChampionshipWaitComponent="resource/skins/component/gambling/GamblingChampionshipWaitComponent.exml",e.GamblingGuideComponent="resource/skins/component/gambling/GamblingGuideComponent.exml",e.GamblingGuidePlayWayComponent="resource/skins/component/gambling/GamblingGuidePlayWayComponent.exml",e.GamblingChampionshipComponent="resource/skins/component/gambling/GamblingChampionshipComponent.exml",e.GamblingChampionshipBlindComponent="resource/skins/component/gambling/GamblingChampionshipBlindComponent.exml",e.NotifyComponent="resource/skins/component/NotifyComponent.exml",e.PwdComponent="resource/skins/component/PwdComponent.exml",e.WaitNextRoundComponent="resource/skins/component/WaitNextRoundComponent.exml",e.ReqScrollerbotton="resource/skins/component/ReqScrollerbotton.exml",e.GuideTipsComponent="resource/skins/component/guide/GuideTipsComponent.exml",e.GuidePromptComponent="resource/skins/component/guide/GuidePromptComponent.exml",e.HundredWarNumComponent="resource/skins/component/hundredWar/HundredWarNumComponent.exml",e.FirstPayItemComponent="resource/skins/component/FirstPayItemComponent.exml",e}();__reflect(UIComponentSkinName.prototype,"UIComponentSkinName");var qin;!function(e){var t=function(){function e(){}return e.call=function(t,n){void 0===n&&(n=""),egret.callLater(function(){egret.ExternalInterface.call(t,n)},e)},e.addCallback=function(t,n){egret.ExternalInterface.addCallback(t,function(t){egret.callLater(function(){n&&n(t)},e)})},e}();e.ExternalInterface=t,__reflect(t.prototype,"qin.ExternalInterface")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"isPackage",{get:function(){return e.isNative||e.isMicro},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMicro",{get:function(){return e.isMicroRuntime||e.isMicroWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMicroRuntime",{get:function(){return void 0===e._isMicroRuntime&&(e._isMicroRuntime=egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&window.navigator.userAgent.toLowerCase().indexOf("egretnative")>=0),e._isMicroRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMicroWebView",{get:function(){return void 0===e._isMicroWebView&&(e._isMicroWebView=egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&window.navigator.userAgent.toLowerCase().indexOf("egretwebview")>=0),e._isMicroWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWeb",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&0==e.isMicro},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWeChat",{get:function(){return void 0===e._isWeChat&&(e._isWeChat=egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&window.navigator.userAgent.toLowerCase().indexOf("micromessenger")>=0),e._isWeChat},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isLocalhost",{get:function(){if(void 0===e._isLocalhost){var t=0===window.location.hostname.indexOf("127.0.0.1")||0===window.location.hostname.indexOf("localhost")||0===window.location.hostname.indexOf("10.0.")||0===window.location.hostname.indexOf("192.168.");e._isLocalhost=egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&t}return e._isLocalhost},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isEditor",{get:function(){return void 0===e._isEditor&&(e._isEditor=egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&window.navigator.userAgent.toLowerCase().indexOf("egretwing")>=0),e._isEditor},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebVibrate",{get:function(){return void 0===e._isWebVibrate&&(e._isWebVibrate=egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&(window.navigator.vibrate||window.navigator.webkitVibrate)),e._isWebVibrate},enumerable:!0,configurable:!0}),e.webVibrate=function(t){void 0===t&&(t=200),e.isWebVibrate&&(window.navigator.vibrate?window.navigator.vibrate(t):window.navigator.webkitVibrate&&window.navigator.webkitVibrate(t))},e}();e.System=t,__reflect(t.prototype,"qin.System")}(qin||(qin={}));var CardFaceBoardAppear=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.target.alpha=.1,this.target.visible=!0,this.target.initElementsShow(),this.target.backFace.matrix=this.target.frontFaceImg.matrix=new egret.Matrix,this.target.scaleX=this.target.scaleY=.1,void 0==this._initH&&(this._initH=GamblingPanelSetting.BoardCardPoint.x,this._initV=GamblingPanelSetting.BoardCardPoint.y),this.target.horizontalCenter=this._initH,this.target.verticalCenter=this._initV},t.prototype.run=function(t,n){void 0===n&&(n=0),e.prototype.run.call(this,t,n),this._nextDelay=n,this._moveToPoint=t;var i=egret.Tween.get(this.target);i.to({horizontalCenter:t.x,verticalCenter:t.y,alpha:1,scaleX:1.23,scaleY:1.23},300,egret.Ease.circOut).wait(10).call(this.runOver,this),i.play()},t.prototype.runOver=function(){this.nextAnimation&&this._nextDelay>=0?this._timeId=egret.setTimeout(this.runNext,this,this._nextDelay):this.clear()},t.prototype.runNext=function(){this.clear(),this.nextAnimation&&this.nextAnimation.run()},t.prototype.clear=function(){e.prototype.clear.call(this),this._nextDelay=void 0,this._moveToPoint=null,clearTimeout(this._timeId)},t}(BaseAnimation);__reflect(CardFaceBoardAppear.prototype,"CardFaceBoardAppear");var CardFaceBright=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.target.initElementsShow2(),this.target.scaleX=2,this.target.scaleY=2,this.target.rotation=0,this.target.alpha=.3,this.target.y=this.target.initMatrix.ty+250},t.prototype.run=function(t,n,i,a,o,r){e.prototype.run.call(this,t,a),this.target.x=this.target.initMatrix.tx-n;var s=egret.Tween.get(this.target);this.callBack=new qin.Delegate(o,r),this.target.visible=!0,s.to({x:this.target.initMatrix.tx+i,y:this.target.initMatrix.ty+a,scaleX:1,scaleY:1,alpha:1},300).wait(20).to({rotation:t,y:this.target.initMatrix.ty+a-25},100).call(this.runOver,this),s.play()},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.callBack&&this.callBack.invoke()},t.prototype.clear=function(){e.prototype.clear.call(this),this.target.cardGroup&&egret.Tween.removeTweens(this.target.cardGroup)},t}(BaseAnimation);__reflect(CardFaceBright.prototype,"CardFaceBright");var CardFaceMoveToPoint=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.target.initElementsShow(),this.target.matrix=this.target.initMatrix,this._defaultMatrix||(this._defaultMatrix=new egret.Matrix),this.target.backFace.matrix=this._defaultMatrix},t.prototype.run=function(t,n,i,a,o){void 0===n&&(n=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),e.prototype.run.call(this,t,i,a,o),this._moveToPoint=t,this._nextDelay=i,this._nextRotaion=a,this._nextY=o,this.target.x=n,this.target.y=t.y;var r=egret.Tween.get(this.target);r.to({x:t.x,y:this.target.initMatrix.ty+t.y},100).wait(10).call(this.runOver,this),r.play()},t.prototype.runOver=function(){this.nextAnimation&&this._nextDelay>=0?this._timeId=egret.setTimeout(this.runNext,this,this._nextDelay):this.clear()
},t.prototype.runNext=function(){this.clear(),this.nextAnimation&&this.nextAnimation.run(this._nextRotaion,this._nextY)},t.prototype.clear=function(){e.prototype.clear.call(this),this._nextDelay=void 0,clearTimeout(this._timeId),this._moveToPoint=null},t}(BaseAnimation);__reflect(CardFaceMoveToPoint.prototype,"CardFaceMoveToPoint");var CardFaceTurnToFace=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scale=1,t.time=120,t.isSound=!1,t}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.target.visible=!0,this._backFaceMatrix=new egret.Matrix(1,0,0,1),this._frontFaceMatrix=new egret.Matrix(.122,.047),this.target.initElementsShow(),this.target.backFace.matrix=this.target.frontFaceImg.matrix=new egret.Matrix},t.prototype.run=function(t){e.prototype.run.call(this),this.target.scaleX=this.target.scaleY=this.scale;var n=egret.Tween.get(this._backFaceMatrix,{onChange:this.onBackFaceChange.bind(this)});n.to({a:.0243,b:-.023},this.time).wait(10).call(this.onBackFaceChangeOver,this),n.play(),this.isSound&&SoundManager.playEffect(MusicAction.light_card)},t.prototype.onBackFaceChange=function(){this.target.backFace.matrix=this._backFaceMatrix},t.prototype.onBackFaceChangeOver=function(){this.target.backFace.visible=!1,this.target.frontFaceImg.matrix=this._frontFaceMatrix,this.target.frontFaceImg.visible=!0;var e=egret.Tween.get(this._frontFaceMatrix,{onChange:this.onFrontFaceChange.bind(this)});e.to({a:.9,b:.1},this.time-20).wait(10).call(this.runOver,this),e.play()},t.prototype.onFrontFaceChange=function(){this.target.frontFaceImg.matrix=this._frontFaceMatrix},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.target.frontFaceImg.visible=!1,this.target.cardGroup.visible=!0,this.callback&&this.callback.invoke()},t.prototype.clear=function(){this._frontFaceMatrix&&egret.Tween.removeTweens(this._frontFaceMatrix),this._backFaceMatrix&&egret.Tween.removeTweens(this._backFaceMatrix)},t}(BaseAnimation);__reflect(CardFaceTurnToFace.prototype,"CardFaceTurnToFace");var qin;!function(e){var t=function(){function e(){this._values=[]}return Object.defineProperty(e.prototype,"count",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){-1==this._values.indexOf(e)&&this._values.push(e)},e.prototype.remove=function(e){var t=this._values.indexOf(e);t>=0&&this._values.splice(t,1)},e.prototype.contains=function(e){return this._values.indexOf(e)>=0},e.prototype.clear=function(){this._values.length=0},e.prototype.foreach=function(e,t){for(var n=0,i=this._values.length;i>n;n++)e.call(t,this._values[n])},e.prototype.some=function(e,t){for(var n=0,i=this._values.length;i>n;n++)if(e.call(t,this._values[n]))return!0;return!1},e.prototype.every=function(e,t){for(var n=0,i=this._values.length;i>n;n++)if(!e.call(t,this._values[n]))return!0;return!1},e}();e.HashSet=t,__reflect(t.prototype,"qin.HashSet")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.getCurrentName=function(){if(e.System.isPackage){var n=egret.Capabilities.os.toLowerCase();return"ios"==n?t.Ios:"android"==n?t.Android:"windows phone"==n?t.WindowsPhone:"windows pc"==n?t.WindowsPC:e.StringConstants.Empty}return t.Web},t.Web="web",t.Ios="ios",t.Android="android",t.WindowsPhone="wphone",t.WindowsPC="wpc",t}();e.RuntimeTypeName=t,__reflect(t.prototype,"qin.RuntimeTypeName")}(qin||(qin={}));var CommonMoveToPointByNowPos=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t,n,i,a){e.prototype.run.call(this,t,n,i,a),this.callBack=qin.Delegate.getOut(i,a);var o=egret.Tween.get(this.target),r=egret.Point.distance(new egret.Point(t,n),new egret.Point(this.target.x,this.target.y));o.to({x:t,y:n},1.2*r,egret.Ease.circOut).call(this.runOver,this),o.play()},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.callBack&&(this.callBack.invoke(),qin.Delegate.putIn(this.callBack)),this.callBack=null},t}(BaseAnimation);__reflect(CommonMoveToPointByNowPos.prototype,"CommonMoveToPointByNowPos");var qin;!function(e){var t=function(){function t(){}return t.langs=function(){return t._langs},Object.defineProperty(t,"lang",{get:function(){return t._lang},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isDefault",{get:function(){return null==t._lang||t._lang==t.DefaultLang},enumerable:!0,configurable:!0}),t.initSystem=function(n,i){if(null==i||i.length<=0)i=[t.DefaultLang];else for(var a=0;a<i.length;a++)i[a]=i[a].toLowerCase();return t._langs=i,0==e.StringUtil.isNullOrEmpty(n)?(n=n.toLowerCase(),void(t._lang=t._langs.indexOf(n)>=0?n:i[0])):(t._lang=egret.Capabilities.language.toLowerCase(),void(t._langs.indexOf(t._lang)<0&&(t._lang=i[0])))},t.initMap=function(n){t._map=null,0==e.StringUtil.isNullOrEmpty(n)&&(t._map=JSON.parse(n))},t.clear=function(){t._map=null},t.getText=function(n){if(null==t._map||e.StringUtil.isNullOrEmpty(n))return n;var i=t._map[n];return e.StringUtil.isNullOrEmpty(i)?n:i},t.DefaultLang="zh-cn",t}();e.I18n=t,__reflect(t.prototype,"qin.I18n")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.formatArgs=function(n){if(n){for(var i="",a=0;a<n.length;a++)i+=" | "+n[a];return void 0!==t.roleId&&null!==t.roleId&&(i=" | self-roleId:"+t.roleId+i),e.DateTimeUtil.formatDate()+i}return void 0!==t.roleId&&null!==t.roleId?e.DateTimeUtil.formatDate()+" | self-roleId:"+t.roleId+" | "+n:e.DateTimeUtil.formatDate()+" | "+n},t.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.enabled){var i=t.formatArgs(e);console.log(i)}},t.logError=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.enabled){var i=new Error,a=t.formatArgs(e);console.log(a+" | "+i.stack)}},t.logSocket=function(e){t.enabled&&t.log("qin.SocketMessageType."+e.type+": code["+e.errorCode+"] message["+e.message+"]")},t.enabled=!1,t}();e.Console=t,__reflect(t.prototype,"qin.Console")}(qin||(qin={}));var qin;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.make=function(e,t,n){void 0===t&&(t=256),void 0===n&&(n=0),this._qrcode||(this._qrcode=new QRCode),this._qrcode.makeCode(e);var i=this._qrcode.getPoints();this.graphics.clear(),this.graphics.beginFill(n,1);for(var a=i.length,o=0;a>o;o++)for(var r=i[o],s=0;s<r.length;s++)r[s]&&this.graphics.drawRect(t/a*o,t/a*s,t/a,t/a);this.graphics.endFill()},t}(egret.Shape);e.QRCodeShape=t,__reflect(t.prototype,"qin.QRCodeShape")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.browse=function(n,i,a){void 0===a&&(a=null),null==t._input&&(t._input=document.getElementById(t.ID),null==t._input&&(t._input=document.createElement("input"),t._input.id=t.ID,t._input.type="file",t._input.style.display="none")),t._input.onchange=function(){if(t._input.onchange=null,!t._input.files||t._input.files.length<=0)return void e.FuncUtil.invoke(a,n,e.I18n.getText("未选择任何图片"));var o=t._input.files[0];if(0==/^image\//i.test(o.type))return void e.FuncUtil.invoke(a,n,e.I18n.getText("图片类型不正确"));if(o.size>t.MaxSize)return void e.FuncUtil.invoke(a,n,e.I18n.getText("图片不能大于")+t.MaxSize/1024+"KB");var r=new FileReader;r.onload=function(){r.onload=null,e.FuncUtil.invoke(i,n,r.result)},r.readAsDataURL(o)},t._input.click()},t.ID="input_image_select",t.MaxSize=512e3,t}();e.WebImageSelect=t,__reflect(t.prototype,"qin.WebImageSelect")}(qin||(qin={}));var CommonMoveToRelativelyPos=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(t,n,i,a){e.prototype.run.call(this,t,n,i,a),this.callBack=null,i&&(this.callBack=qin.Delegate.getOut(i,a));var o=egret.Tween.get(this.target);o.to({x:t,y:n},300,egret.Ease.sineIn).call(this.runOver,this),o.play()},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.callBack&&this.callBack.invoke()},t}(BaseAnimation);__reflect(CommonMoveToRelativelyPos.prototype,"CommonMoveToRelativelyPos");var qin;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._iframe=document.createElement("iframe"),t.bindDom(t._iframe),t}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},Object.defineProperty(t.prototype,"src",{get:function(){return this._iframe.src},set:function(e){this._iframe.src=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrolling",{get:function(){return this._iframe.scrolling},set:function(e){this._iframe.scrolling=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeButton",{get:function(){return null!=this._button&&null!=this._button.parentNode},set:function(e){if(e)if(this._button)this._divNode.appendChild(this._button);else{this._button=document.createElement("button"),this._button.style.position="absolute",this._button.style.right="0",this._button.style.top="0",this._button.style.width="65px",this._button.style.height="30px",this._button.style.backgroundColor="#fff",this._button.style.color="#333",this._button.style.borderColor="#ccc",this._button.innerHTML="关闭",this._button.style.fontSize="16px",this._button.style.verticalAlign="middle",this._button.style.textAlign="center",this._button.style.borderWidth="1px",this._divNode.appendChild(this._button);var t=this;this._button.onclick=function(){t.parent.removeChild(t)}}else this._button&&this._button.parentNode==this._divNode&&this._divNode.removeChild(this._button)},enumerable:!0,configurable:!0}),t}(e.WebNode);e.WebView=t,__reflect(t.prototype,"qin.WebView")}(qin||(qin={}));var FlopCardAnimation=function(e){function t(){var t=e.call(this)||this;return t._runTime=400,t._isCallBackIsRuned=!1,t._flopAngle=18,t._movePoint=new egret.Point,t._p0=new egret.Point,t._p1=new egret.Point,t._p2=new egret.Point,t._vecotr=new qin.Vector2D(0,0),t._angleVec=new qin.Vector2D(0,0),t}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this._initMatrix||(this._initMatrix=this.target.matrix),this.target.alpha=1,this.target.matrix=this._initMatrix,this.target.y=GameManager.stage.stageHeight/2+GamblingPanelSetting.FlopCardVerticalCenter},t.prototype.run=function(t,n,i,a){e.prototype.run.call(this,t),this._angleVec.x=t.x-this._initMatrix.tx,this._angleVec.y=t.y-this.target.y,this._params=a,this.callBack=new qin.Delegate(n,i);var o=this._angleVec.angle;o*=qin.MathUtil.Radian2Angle,o+=270,this._p0.x=this.target.x,this._p0.y=this.target.y,this._vecotr.x=t.x-this.target.x,this._vecotr.y=t.y-this.target.y,this._vecotr=this._vecotr.multiply(.5);var r=Math.tan(this._flopAngle*qin.MathUtil.Angle2Radian)*Math.sqrt(this._vecotr.lengthSQ),s=Math.sqrt(this._vecotr.lengthSQ+r*r);this._vecotr.distance=s,this._vecotr.angle=this._vecotr.angle-this._flopAngle*qin.MathUtil.Angle2Radian,this._p1.x=this._vecotr.x+GameManager.stage.stageWidth/GameSetting.StageWidth*this._initMatrix.tx,this._p1.y=this._vecotr.y+GameManager.stage.stageHeight/GameSetting.StageHeight*this._initMatrix.ty,this._p2.x=t.x,this._p2.y=t.y;var l=egret.Tween.get(this.target);l.to({scaleX:.5,scaleY:.5,alpha:.5,rotation:o},this._runTime).call(this.runOver,this),this._factor=0,l=egret.Tween.get(this),l.to({factor:1},this._runTime),this._runStart=egret.getTimer(),this.target.visible=!0,this._isCallBackIsRuned=!1,this.runNext(),qin.Tick.addFrameInvoke(this.runNext,this),l.play()},Object.defineProperty(t.prototype,"factor",{get:function(){return this._factor},set:function(e){this._factor=e,qin.MathUtil.besselPoint(this._factor,this._p0,this._p1,this._p2,this._movePoint),this.target.x=this._movePoint.x,this.target.y=this._movePoint.y},enumerable:!0,configurable:!0}),t.prototype.runNext=function(){egret.getTimer()-this._runStart>this._runTime/2+30&&this.callBack&&(this.callBack.invoke(this._params),this._isCallBackIsRuned=!0,qin.Tick.removeFrameInvoke(this.runNext,this),this.callBack=null)},t.prototype.runOver=function(){e.prototype.runOver.call(this),this.target.visible=!1,egret.Tween.removeTweens(this),0==this._isCallBackIsRuned&&this.callBack&&this.callBack.invoke(this._params),this.callBack=null},t.prototype.clear=function(){e.prototype.clear.call(this)},t}(BaseAnimation);__reflect(FlopCardAnimation.prototype,"FlopCardAnimation");var qin;!function(e){var t=function(t){function n(){var e=t.call(this,!0)||this;return e._handshakeMsgId=0,e}return __extends(n,t),Object.defineProperty(n.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"roleId",{get:function(){return this._roleId},enumerable:!0,configurable:!0}),n.prototype.initialize=function(t,n,i,a,o,r,s,l){if(void 0===l&&(l=egret.WebSocket.TYPE_BINARY),this._userId=t,this._roleId=n,this._serverId=i,this._secret=a,this._session1=o,this._msgType=l,r&&s){var h=this.getSchema(s),d=void 0;h.length>0&&(d=Sproto.createNew({buf:h,sz:h.length}));var c=this.getSchema(r);if(c.length>0&&(this._spRpc=Sproto.createNew({buf:c,sz:c.length}),d)){this._spRpc.s2cProtocol_n=d.protocol_n,this._spRpc.s2cProto=d.proto,this._spRpc.protocol_n+=d.protocol_n,this._spRpc.proto=this._spRpc.proto.concat(d.proto);for(var p=0,u=d.type;p<u.length;p++)for(var g=u[p],f=0,m=g.f;f<m.length;f++){var y=m[f];y.st&&(y.st=y.st+this._spRpc.type_n)}this._spRpc.type_n+=d.type_n,this._spRpc.type=this._spRpc.type.concat(d.type),h=null,d=null}this._spRpc||e.Console.log("创建Sproto对象失败!")}},n.prototype.getSchema=function(e){for(var t=new DataView(e),n=new Array,i=0;i<t.byteLength;i++)n[i]=t.getUint8(i);return n},n.prototype.InvokeDiscRetry=function(){if(null!=this._infoList&&this._infoList.length>0)for(var e=0;e<this._infoList.length;e++){var t=this._infoList[e];t.isDiscRetry&&this.SendObject(t)}},n.prototype.Handshake=function(){this._handshakeMsgId++,this.SimpleSend(e.BaseSocket.HandshakeName,{session:this._session1,userid:this._userId,roleid:0,serverid:this._serverId,token:e.Crypt.HmacSha1(this._secret,e.StringUtil.format("{0},{1}",this._userId,this._handshakeMsgId))})},n.prototype.ParseHandshake=function(n){n.cmdId==e.BaseSocket.HandshakeName&&(this._isHandshaking=!1,0==n.error?(this._roleId=n.data.roleid,t.prototype.DispatchMessage.call(this,new e.SocketMessage(e.SocketMessageType.Connect,"0","handshake succeed"))):t.prototype.DispatchMessage.call(this,new e.SocketMessage(e.SocketMessageType.HandshakeError,n.error.toString(),"handshake failed")))},n}(e.BaseSocket);e.GameSocket=t,__reflect(t.prototype,"qin.GameSocket")}(qin||(qin={}));var qin;!function(e){var t=function(t){function n(){return t.call(this,!1)||this}return __extends(n,t),n.prototype.initialize=function(t,n){if(void 0===n&&(n=egret.WebSocket.TYPE_BINARY),this._msgType=n,t){for(var i=new DataView(t),a=new Array,o=0;o<i.byteLength;o++)a[o]=i.getUint8(o);a.length>0&&(this._spRpc=Sproto.createNew({buf:a,sz:a.length})),this._spRpc||e.Console.log("创建Sproto对象失败!")}},n}(e.BaseSocket);e.LoginSocket=t,__reflect(t.prototype,"qin.LoginSocket")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){}return e}();e.SocketInfo=t,__reflect(t.prototype,"qin.SocketInfo")}(qin||(qin={}));var qin;!function(e){var t;!function(e){e[e.None=0]="None",e[e.Connect=1]="Connect",e[e.NetworkError=2]="NetworkError",e[e.Failing=3]="Failing",e[e.HandshakeError=4]="HandshakeError",e[e.SendError=5]="SendError",e[e.NotInitialized=6]="NotInitialized"}(t=e.SocketMessageType||(e.SocketMessageType={}));var n=function(){function e(e,t,n){this._type=e,this._errorCode=t,this._message=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this._errorCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),e}();e.SocketMessage=n,__reflect(n.prototype,"qin.SocketMessage")}(qin||(qin={}));var qin;!function(e){var t;!function(e){e[e.None=0]="None",e[e.Request=1]="Request",e[e.Response=2]="Response",e[e.Unknown=4]="Unknown"}(t=e.SpRpcOp||(e.SpRpcOp={}));var n=function(){function e(){}return e}();e.SpRpcResult=n,__reflect(n.prototype,"qin.SpRpcResult")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){}return e.RemoveItem=function(e,t,n){if(void 0===n&&(n=1),0==n)return 0;for(var i=0,a=t.length-1;a>=0&&!(t[a]==e&&(t.splice(a,1),i++,-1!=n&&i>=n));a--);return i},e.Clear=function(e){e&&(e.length=0)},e.getIndex=function(e,t,n){if(t&&n)for(var i=0;i<t.length;i++)if(t[i][n]==e)return i;return-1},e.moveSomeElementsToTheEnd=function(e,t,n){0>t||t>=e.length-1,t+n+1>e.length;for(var i=new Array(n),a=0;a<i.length;a++)i[a]=e[t+a];for(var a=t;a<e.length-n;a++)e[a]=e[a+n];for(var o=0,a=e.length-n;a<e.length;a++)e[a]=i[o],o++},e}();e.ArrayUtil=t,__reflect(t.prototype,"qin.ArrayUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.base64ToArrayBuffer=function(e){for(var t=atob(e),n=t.length,i=new Uint8Array(n),a=0;n>a;a++)i[a]=t.charCodeAt(a);return i.buffer},t.arrayBuffer2Base64=function(e){for(var n=new DataView(e),i=[],a=0;a<n.byteLength;a++)i[a]=n.getUint8(a);return t.byteArray2String(i)},t.byteArray2String=function(t){for(var n=e.StringConstants.Empty,i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return n},t.getStringByteLength=function(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i>=0&&127>=i?t+=1:i>=128&&2047>=i?t+=2:(i>=2048&&55295>=i||i>=57344&&65535>=i)&&(t+=3)}return t},t}();e.CodeUtil=t,__reflect(t.prototype,"qin.CodeUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){}return e.colorToNumber=function(e){if(/^(rgb|RGB)/.test(e)){for(var t=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),n="0x",i=0;i<t.length;i++){var a=Number(t[i]).toString(16);1==a.length&&(a="0"+a),n+=a}return parseInt(n)}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e))return/^0x([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)?parseInt(e):parseInt("0x"+e);var o=e.replace(/#/,"").split("");if(6===o.length)return parseInt("0x"+o.join(""));if(3===o.length){for(var r="0x",s=0;s<o.length;s++)r+=o[s]+o[s];return parseInt(r)}},e}();e.ColorUtil=t,__reflect(t.prototype,"qin.ColorUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){}return e.supCopyList=function(e,t,n,i){if(t&&e&&t[n]){e[n]=new Array;for(var a=void 0,o=0;o<t[n].length;o++)a=new i,a.copyValueFrom(t[n][o]),e[n].push(a)}},e.subCopy=function(e,t,n,i){t&&e&&t[n]&&(e[n]=new i,e[n].copyValueFrom(t[n]))},e}();e.CopyUtil=t,__reflect(t.prototype,"qin.CopyUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.lrandomkey=function(){for(var n=new Array(4),i=0,a=0;4>a;a++)i=e.MathUtil.getRandom(0,255),n[a]=String.fromCharCode(255&i);var o=t.toString(n);return o},t.lb64encode=function(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);var i=array2arraybuffer(t);return egret.Base64Util.encode(i)},t.lb64decode=function(t){var n=egret.Base64Util.decode(t),i=arraybuffer2array(n),a=e.CodeUtil.byteArray2String(i);return a},t.ltohex=function(n){var i=t.toCharArray("0123456789abcdef"),a=0,o=t.toCharArray(n);a=o.length;var r=new Array(256),s=r;a>128&&(s=new Array(2*a));var l,h=e.StringConstants.Empty;for(l=0;a>l;l++)h=o[l],s[2*l]=i[h.charCodeAt(0)/Math.pow(2,4)],s[2*l+1]=i[15&h.charCodeAt(0)];var d=t.toString(s),c=/\0+$/g;return d=d.replace(c,e.StringConstants.Empty)},t.mul_mod_p=function(e,n){for(var i=new bigInt(0);n.greater(0);){if(n.and(1).greater(0)){var a=t.P.subtract(e);i=i.greaterOrEquals(a)?i.subtract(a):i.add(e)}e=e.greaterOrEquals(t.P.subtract(e))?e.multiply(2).subtract(t.P):e.multiply(2),n=n.shiftRight(1)}return i},t.pow_mod_p=function(e,n){if(n.equals(1))return e;var i=t.pow_mod_p(e,n.shiftRight(1));return i=t.mul_mod_p(i,i),n.mod(2).greater(0)&&(i=t.mul_mod_p(i,e)),i},t.powmodp=function(e,n){var i=new bigInt(e),a=new bigInt(t.P);return i.greater(a)&&(i=i.mod(a)),t.pow_mod_p(i,n)},t.push64=function(e){var n=new Array;n[0]=e.and(255),n[1]=e.shiftRight(8).and(255),n[2]=e.shiftRight(16).and(255),n[3]=e.shiftRight(24).and(255);for(var i=new Array(4),a=0;a<n.length;a++)i[a]=String.fromCharCode(n[a].value);return t.toString(i)},t.read64=function(e,n,i,a){var o=t.toCharArray(i),r=t.toCharArray(a);if(4!=o.length||4!=r.length)throw new Error("Invalid uint32 x or y");var s=new bigInt(o[0].charCodeAt(0)),l=new bigInt(o[1].charCodeAt(0)),h=new bigInt(o[2].charCodeAt(0)),d=new bigInt(o[3].charCodeAt(0)),c=new bigInt(r[0].charCodeAt(0)),p=new bigInt(r[1].charCodeAt(0)),u=new bigInt(r[2].charCodeAt(0)),g=new bigInt(r[3].charCodeAt(0));e[0]=s.or(l.shiftLeft(8)),e[1]=h.or(d.shiftLeft(8)),n[0]=c.or(p.shiftLeft(8)),n[1]=u.or(g.shiftLeft(8))},t.ldhexchange=function(e){var n=t.toCharArray(e);if(4!=n.length)throw new Error("Invalid dh uint32 key");var i=new Array(2),a=new bigInt(n[0].charCodeAt(0)),o=new bigInt(n[1].charCodeAt(0)),r=new bigInt(n[2].charCodeAt(0)),s=new bigInt(n[3].charCodeAt(0));i[0]=a.or(o.shiftLeft(24)),i[1]=r.or(s.shiftLeft(24));var l=t.powmodp(new bigInt(5),i[0].or(i[1].shiftLeft(24))),h=t.push64(l);return h},t.ldhsecret=function(e,n){var i=new Array(2),a=new Array(2);t.read64(i,a,e,n);var o=t.powmodp(i[0].or(i[1].shiftLeft(24)),a[0].or(a[1].shiftLeft(24)));return t.push64(o)},t.HmacSha1=function(e,t){var n=b64_hmac_sha1(e,t);return n},t.AESEncrypt=function(e,t){for(var n=aesjs.utils.utf8.toBytes(t),i=new Array(16),a=Math.min(16,n.length),o=0;a>o;o++)i[o]=n[o];var r=aesjs.utils.utf8.toBytes(e),s=(aesjs.padding.pkcs7.pad(i),new aesjs.ModeOfOperation.ecb(i)),l=aesjs.padding.pkcs7.pad(r),h=s.encrypt(l),d=Base64.btoa(String.fromCharCode.apply(null,h));return d},t.AESDecrypt=function(t,n){return e.StringConstants.Empty},t.toString=function(t){for(var n=e.StringConstants.Empty,i=0;i<t.length;i++)n+=t[i];return n},t.toCharArray=function(e){var t=new Array;if(e)for(var n=0;n<e.length;n++)t.push(e.charAt(n));return t},t.hex_md5=function(e){return t._md5.hex_md5(e)},t.P=new bigInt(1999999973),t._md5=new md5,t}();e.Crypt=t,__reflect(t.prototype,"qin.Crypt")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.getCSSStyleRules=function(t){if(e.System.isWeb||e.System.isMicro)for(var n=0;n<document.styleSheets.length;n++){var i=document.styleSheets[n];if(i&&i.href==t){var a=i.cssRules||i.rules;return a}}return null},t.getCSSStyleDeclaration=function(e,n){var i=t.getCSSStyleRules(e);if(i)for(var a=0;a<i.length;a++){var o=i[a];if(t.ruleIndexOf(o,n))return o.style}return null},t.ruleIndexOf=function(e,t){var n=e.selectorText.split(",");for(var i in n)n[i]=n[i].trim();return n.indexOf(t)>=0},t}();e.CSSStyleUtil=t,__reflect(t.prototype,"qin.CSSStyleUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.baseDateFormat=function(e,t,n){/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},t.formatDate=function(e,n){e||(e=new Date),n||(n=t.Format_Standard_Full);var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};return t.baseDateFormat(e,n,i)},t.formatTimestamp=function(e,n){var i=new Date;return void 0!=e&&null!=e&&i.setTime(1e3*e),t.formatDate(i,n)},t.toTimestamp=function(e){var t=e?new Date(e):new Date;return Math.round(t.getTime()/1e3)},t.formatCountdown=function(e){return e>=10?e.toString():"0"+e.toString()},t.countDownFormat=function(e,n){var i,a,o;return i=t.formatCountdown(Math.floor(e/3600)),a=t.formatCountdown(Math.floor(e%3600/60)),o=t.formatCountdown(e%60),n?i+":"+a+":"+o:a+":"+o},t.stringToDate=function(t){var n=e.StringUtil.toIntArray(t);return n?new Date(n[0],n[1],n[2],n[3],n[4],n[5]):null},t.secondes2Date=function(e){return e>=0?new Date(1e3*e):null},t.GetLefttimeText=function(t,n,i){void 0===i&&(i=!1);var a,o=Math.floor(t/86400);return a=i&&0>=o?e.StringUtil.format("{0}小时",Math.floor(t/3600)):e.StringUtil.format("{0}天",Math.floor(t/86400)),n&&(t%=86400,a+=e.StringUtil.format("{0}小时",Math.floor(t/3600))),a},t.Format_Standard_Full="yyyy-MM-dd hh:mm:ss",t.Format_Standard_Date="yyyy-MM-dd",t.Format_Standard_Time="hh:mm:ss",t.Format_Standard_NoSecond="yyyy-MM-dd hh:mm",t.Format_Standard_NoSecondAndYear="MM-dd hh:mm",t.Format_China_Full="yyyy年MM月dd日 hh时mm分ss秒",t.Format_China_Date="yyyy年MM月dd日",t.Format_China_Time="hh时mm分ss秒",t.Format_China_NoSecond="yyyy年MM月dd日 hh时mm分",t.Format_China_MonthDay="MM月dd日",t}();e.DateTimeUtil=t,__reflect(t.prototype,"qin.DateTimeUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return Object.defineProperty(t,"isDragEnable",{set:function(e){t._isDragEnable=e},enumerable:!0,configurable:!0}),t.startDrag=function(e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),t._isDragEnable&&(t.dragContainer||(t.dragContainer=new eui.Group),t.dragContainer.parent?GameManager.stage.addChild(t.dragContainer):GameManager.stage.addChild(t.dragContainer),t.dragTarget=e,t._offsetX=n,t._offsetY=i,t.dragContainer.removeChildren(),t.dragContainer.addChild(e),t.dragContainer.visible=!1,t._isMove=!1,GameManager.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,t.onTouchMove,this),GameManager.stage.addEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,this))},t.onTouchEnd=function(e){t.stop()},t.onTouchMove=function(e){t.dragContainer?(t.dragContainer.visible=!0,t.dragTarget.x=e.stageX-t.dragTarget.measuredWidth/2-t.dragTarget.anchorOffsetX*t.dragTarget.measuredWidth+t._offsetX,t.dragTarget.y=e.stageY-t.dragTarget.measuredHeight/2-t.dragTarget.anchorOffsetY*t.dragTarget.measuredHeight+t._offsetY,t._isMove=!0):t.stop()},t.stop=function(){t._isMove&&t.dragEndEvent.dispatch(t.dragContainer.getChildAt(0)),t.dragContainer.removeChildren(),t.dragContainer.parent&&t.dragContainer.parent.removeChild(t.dragContainer),GameManager.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,t.onTouchMove,this),GameManager.stage.removeEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,this)},t._isDragEnable=!0,t._isMove=!1,t.dragEndEvent=new e.DelegateDispatcher,t}();e.DragUtil=t,__reflect(t.prototype,"qin.DragUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"grayArray",{get:function(){return e._grayArray},enumerable:!0,configurable:!0}),e.defaultArray=function(){return e._defaultArray},e.setGray=function(t){t.filters=e._grayArray},e.setDefault=function(t){t.filters=e._defaultArray},e.setShadow=function(e){},e.setGreenShadow=function(e){},e.setColorFilters=function(e,t){var n=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i=t>>16&255,a=t>>8&255,o=255&t;n[0]=i/255,n[6]=a/255,n[12]=o/255,e.filters=[new egret.ColorMatrixFilter(n)]},e._grayMatrix=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],e._grayFilter=new egret.ColorMatrixFilter(e._grayMatrix),e._grayArray=[e._grayFilter],e._defaultMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],e._defaultColorFilter=new egret.ColorMatrixFilter(e._defaultMatrix),e._defaultArray=[e._defaultColorFilter],e._shadowFilter=new egret.DropShadowFilter(2,103,5113857,1,10,10,.65,1,!1,!1),e._shadowArray=[e._shadowFilter],e._greenShadowFilter=new egret.DropShadowFilter(2,103,0,.75,4,4,.65,1,!1,!1),e._greenShadowArray=[e._greenShadowFilter],e}();e.FilterUtil=t,__reflect(t.prototype,"qin.FilterUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){}return e.invoke=function(e,t,n){e&&(t?void 0===n?e.call(t):e.call(t,n):void 0===n?e():e(n))},e}();e.FuncUtil=t,__reflect(t.prototype,"qin.FuncUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.clamp=function(e,t,n){return t>e?t:e>n?n:e},t.lerp=function(e,t,n){return n=0>n?0:n,n=n>1?1:n,e+(t-e)*n},t.getRandom=function(e,t){return Math.round(Math.random()*(t-e))+e},t.formatNum=function(e){var n;return 1e4>e?n=e.toString():e>=1e4&&1e8>e?(n=100>e%1e4?(e/1e4).toString():100>e%1e3?t.fixedFloor(e/1e4,1):t.fixedFloor(e/1e4,2),n=t.subStrFour(n),n+"万"):e>=1e8?(n=1e6>e%1e8?(e/1e8).toString():1e6>e%1e7?t.fixedFloor(e/1e8,1):t.fixedFloor(e/1e8,2),n=t.subStrFour(n),n+"亿"):void 0},t.numAddSpace=function(e){e=Math.floor(e);var n=!1;0>e&&(n=!0,e*=-1);var i=e.toString();if(i.length<=t.CommaNum||t.CommaNum<1)return n?"-"+i:i;var a=i.length%t.CommaNum,o="";n&&(o="-");for(var r=(new Array,0);r<i.length;){if(0==r&&a>0){var s=r+a;s>i.length&&(s=i.length),o+=i.substring(r,s),r+=a}else{var s=r+t.CommaNum;s>i.length&&(s=i.length),o+=i.substring(r,s),r+=t.CommaNum}r<=i.length-t.CommaNum&&(o+=",")}return o},t.fixedFloor=function(e,t){t||(t=0);var n=e.toString();return n.indexOf(".")+t+1>n.length?n:n.substring(0,n.indexOf(".")+t+1)},t.subStrFour=function(e){var t;return t=e.indexOf(".")>3?e.substr(0,4):e.substr(0,5)},t.besselPoint=function(t,n,i,a,o){if(0>t||t>1||!n||!i||!a||!o)return void e.Console.log("贝塞尔曲线参数不合法");o.x=(1-t)*(1-t)*n.x+2*t*(1-t)*i.x+t*t*a.x,o.y=(1-t)*(1-t)*n.y+2*t*(1-t)*i.y+t*t*a.y},t.Radian2Angle=180/Math.PI,t.Angle2Radian=Math.PI/180,t.CommaNum=3,t}();e.MathUtil=t,__reflect(t.prototype,"qin.MathUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.getTreeProperty=function(t,n){if(t&&n){for(var i=t,a=0;a<n.length;a++)i?i=i[n[a]]:e.Console.log("树级获取对象异常！"+n+"i："+n[a]);return i}return null},t}();e.ObjectUtil=t,__reflect(t.prototype,"qin.ObjectUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.GetObject=function(e){var n=egret.getQualifiedClassName(e),i=t.GetPool(n),a=i.pop();return a?a:new e},t.PutObject=function(e,n){if(void 0===n&&(n=10),e){var i=egret.getQualifiedClassName(e),a=t.GetPool(i);a.length<n&&(e.reset(),a.push(e))}},t.GetPool=function(e){var n=null;return e?(n=t._map.getValue(e),null==n&&(n=new Array,t._map.add(e,n))):n=new Array,n},t._map=new e.Dictionary,t}();e.PoolUtil=t,__reflect(t.prototype,"qin.PoolUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){}return e.IsLegalText=function(t){return e._legalTextRegex.test(t)?!0:!1},e.IsChinese=function(t){return e._cnRegex.test(t)?!0:!1},e.IsEnglish=function(t){return e._enRegex.test(t)?!0:!1},e.IsUInt=function(t){return e._uintRegex.test(t)?!0:!1},e.IsEnglishAndNumber=function(t){return e._enNumRegex.test(t)?!0:!1},e.IsNumeric=function(t){return e._numeric.test(t)},e._cnRegex=new RegExp("^[一-龥]+$"),e._enRegex=new RegExp("^[A-Za-z]+$"),e._uintRegex=new RegExp("^[0-9]+$"),e._enNumRegex=new RegExp("^[A-Za-z0-9]+$"),e._numeric=new RegExp("^[+-]?d*[.]?d*$"),e._legalTextRegex=new RegExp("[~!@#$%^&*()=+[\\]{}''\";:/?.,><`|！·￥…—（）\\-、；：。，》《]"),e}();e.RegexUtil=t,__reflect(t.prototype,"qin.RegexUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){}return e.toBoolean=function(t){return e.isNullOrEmpty(t)?!1:"0"==t||"false"==t?!1:!0},e.isNullOrEmpty=function(e){return void 0===e||null===e||""===e},e.isNull=function(e){return void 0===e||null===e},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(t&&e)for(var i=0;i<t.length;i++)e=e.replace("{"+i.toString()+"}",t[i]);return e},e.toIntArray=function(t,n){void 0===n&&(n=",");var i=e.toStringArray(t,n);if(null==i)return null;for(var a,o=new Array(i.length),r=0;r<i.length;r++)a=i[r],o[r]=a?parseInt(a):0;return o},e.toFloatArray=function(t,n){void 0===n&&(n=",");var i=e.toStringArray(t,n);if(null==i)return null;for(var a,o=new Array(i.length),r=0;r<i.length;r++)o[r]=a?parseFloat(a):0;return o},e.toStringArray=function(e,t){return void 0===t&&(t=","),e?e.split(t):null},e}();e.StringUtil=t,__reflect(t.prototype,"qin.StringUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"htmlParser",{get:function(){return e._htmlParser},enumerable:!0,configurable:!0}),e.parse=function(t){return e.htmlParser.parse(t)},e._htmlParser=new egret.HtmlTextParser,e}();e.TextUtil=t,__reflect(t.prototype,"qin.TextUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.initialize=function(e){t._secondsTime=egret.getTimer(),e.addEventListener(egret.Event.ENTER_FRAME,t.OnEnterFrame,this)
},t.OnEnterFrame=function(e){if(t._frameList.length>0)for(var n=0,i=t._frameList;n<i.length;n++){var a=i[n];a.invoke()}var o=egret.getTimer()-t._secondsTime;if(o>=1e3&&(t._secondsTime=egret.getTimer(),t._secondsList.length>0))for(var r=0,s=t._secondsList;r<s.length;r++){var a=s[r];a.invoke()}if(t._timeoutList.length>0)for(var l=t._timeoutList.length,h=l-1;h>=0;h--){var d=t._timeoutList[h];egret.getTimer()>=d.time&&(t._timeoutList.splice(h,1),d.invoke(d.params),t._timeoutList.length<l&&(h-=l-t._timeoutList.length))}},t.addFrameInvoke=function(n,i){null==n||t.isExists(t._frameList,n,i)||t._frameList.push(new e.Delegate(n,i))},t.removeFrameInvoke=function(e,n){t.removeMethod(t._frameList,e,n)},t.AddSecondsInvoke=function(n,i){null==n||t.isExists(t._secondsList,n,i)||t._secondsList.push(new e.Delegate(n,i))},t.RemoveSecondsInvoke=function(e,n){t.removeMethod(t._secondsList,e,n)},t.AddTimeoutInvoke=function(e,i,a,o){if(0>=i||null==e||t.isExists(t._timeoutList,e,a))return 0;var r=new n(e,a,o);return r.id=t._hashCode++,r.time=egret.getTimer()+i,t._timeoutList.push(r),r.id},t.RemoveTimeoutInvoke=function(e,n){t.removeMethod(t._timeoutList,e,n)},t.RemoveTimeoutInvokeById=function(e){for(var n=0;n<t._timeoutList.length;n++)if(t._timeoutList[n].id==e){t._timeoutList.splice(n,1);break}},t.isExists=function(e,t,n){for(var i=0,a=e;i<a.length;i++){var o=a[i];if(o.equals2(t,n))return!0}return!1},t.removeMethod=function(e,t,n){for(var i=0;i<e.length;i++)if(e[i].equals2(t,n)){e.splice(i,1);break}},t._frameList=new Array,t._secondsList=new Array,t._timeoutList=new Array,t._hashCode=0,t}();e.Tick=t,__reflect(t.prototype,"qin.Tick");var n=function(e){function t(t,n,i){var a=e.call(this,t,n)||this;return a.params=i,a}return __extends(t,e),t}(e.Delegate);__reflect(n.prototype,"TickInfo")}(qin||(qin={}));var qin;!function(e){var t=function(){function t(){}return t.getCurrentHostPath=function(){var e=window.location.port;return e="80"==e||""==e?"":":"+e,window.location.protocol+"//"+window.location.hostname+e+window.location.pathname},t.getCurrentHostDirectory=function(){var t=e.UrlUtil.getCurrentHostPath(),n=t.lastIndexOf("/");return-1!=n&&(t=t.substr(0,n+1)),t},t.getCurrentQueryMap=function(){return new egret.URLVariables(window.location.search).variables},t.toQueryMap=function(e){return new egret.URLVariables(e).variables},t.toHttpQuery=function(e){var t=new egret.URLVariables;return t.variables=e,t.toString()},t}();e.UrlUtil=t,__reflect(t.prototype,"qin.UrlUtil")}(qin||(qin={}));var qin;!function(e){var t=function(){function e(e,t){this._x=e,this._y=t}return e.prototype.clone=function(){return new e(this._x,this._y)},e.prototype.zero=function(){return this._x=0,this._y=0,this},e.prototype.isZero=function(){return 0==this._x&&0==this._y},Object.defineProperty(e.prototype,"angle",{get:function(){return Math.atan2(this._y,this._x)},set:function(e){var t=this.distance;this._x=Math.cos(e)*t,this._y=Math.sin(e)*t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return Math.sqrt(this.lengthSQ)},set:function(e){var t=this.angle;this._x=Math.cos(t)*e,this._y=Math.sin(t)*e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lengthSQ",{get:function(){return this._x*this._x+this._y*this._y},enumerable:!0,configurable:!0}),e.prototype.normalize=function(){if(0==this.distance)return this._x=1,this;var e=this.distance;return this._x/=e,this._y/=e,this},e.prototype.truncate=function(e){return this.distance=Math.min(e,this.distance),this},e.prototype.reverse=function(){return this._x=-this._x,this._y=-this._y,this},e.prototype.isNormalized=function(){return 1==this.distance},e.prototype.dotProd=function(e){return this._x*e.x+this._y*e.y},e.prototype.crossProd=function(e){return this._x*e.y-this._y*e.x==0},e.angleBetween=function(e,t){return e.isNormalized()||(e=e.clone().normalize()),t.isNormalized()||(t=t.clone().normalize()),Math.acos(e.dotProd(t))},e.prototype.sign=function(e){return this.perp.dotProd(e)<0?-1:1},Object.defineProperty(e.prototype,"perp",{get:function(){return new e(-this.y,this.x)},enumerable:!0,configurable:!0}),e.prototype.dist=function(e){return Math.sqrt(this.distSQ(e))},e.prototype.distSQ=function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},e.prototype.add=function(t){return new e(this._x+t.x,this._y+t.y)},e.prototype.subtract=function(t){return new e(this._x-t.x,this._y-t.y)},e.prototype.multiply=function(t){return new e(this._x*t,this._y*t)},e.prototype.divide=function(t){return new e(this._x/t,this._y/t)},e.prototype.equals=function(e){return this._x==e.x&&this._y==e.y},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!0,configurable:!0}),e}();e.Vector2D=t,__reflect(t.prototype,"qin.Vector2D")}(qin||(qin={}));