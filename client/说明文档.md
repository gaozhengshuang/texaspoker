### **<font color=#99ccff>发布流程：</font>**

<font color=#cc99ff>(如果有多语言需要先抽取语言翻译处理)</font>
<br>1.终端执行: gulp zip
<br>2.执行: 插件 -> Egret项目工具 -> egret发布项目
<br>3.web版执行: gulp web -版本号

----

### **<font color=#99ccff>压缩发布配置表：(前提需要当前版本web发布过一次)</font>**

1.压缩配置表：gulp zip-config
<br>2.发布配置表：gulp web-config -版本号

----

### **<font color=#99ccff>Gulp命令：</font>**

全部压缩和处理：gulp zip
<br>抽取语言：gulp lang -语言标识
<br>构建自定义js库：gulp bundle
<br>更新模式(修改var web_config_xxx配置)：自动设置manifest.txt并压缩输出微端入口文件到web发布目录：gulp micro-update -包ID -版本号  (包ID为all时则处理全部)
<br>安装包模式(修改var client_xxx配置)：自动设置manifest.txt并压缩输出微端入口文件到web发布目录：gulp micro-client -包ID -版本号
<br>生成DEBUG版使用的配置表列表文件：gulp config-files

----

### **<font color=#99ccff>其它注意事项：</font>**

* 代码有修改更新，需要修改project.json的version的版本号
* 只有和安装包同步更新才能变动原生接口相关的代码

----

### **<font color=#99ccff>连接测试服：</font>**

#### 微端：
* DEBUG==true
* 入口文件的 window.web_config_clientVersion > window.web_config_serverVersion
#### Web版：
* DEBUG==true
* url的参数server_test=1

----

### **<font color=#99ccff>测试版/新版本客户端：</font>**

#### 微端：
* 通过打微端配置的游戏地址决定
#### Web版：
* url地址决定

----

### **<font color=#99ccff>获取数字包ID：</font>**

#### 微端：
* 通过安装包的bundleId映射到bundleId.json表获取
#### Web版：
* 通过url的参数bid直接获取，并通过bundleId.json表验证是否配置有

----

### **<font color=#99ccff>URL参数说明：</font>**

#### 微端：
* client_version：客户端版本号
#### Web版：
* appid：应用ID，每个应用唯一标识
* server_test：是否连接测试服
* bid：数字包ID，每个包唯一标识（合作推广之类的，为了和安装包统一叫法。默认是1）
* channel：渠道标识，登录相关的（用于帐号是否互通区分）
* debug_logintype：调试登录类型（开发调试用的，浏览器打开才可用）
* debug_token：调试登录token（开发调试用的，浏览器打开才可用）
* log: 是否输出日志
* invite_code:邀请码

----

### **<font color=#99ccff>安全开关：</font>**
<font color=#cc99ff>(只有连接的是测试服和ios版才有效，只有ios提审用)</font>
#### 微端：
* 打开：RELEASE && window.web_config_isSafe = true
* 关闭：DEBUG || window.web_config_isSafe = false

#### Web版：没有安全开关

----

### **<font color=#99ccff>发布相关属性控制：</font>**

#### 安装包发布：
* window.web_config_serverVersion
* var client_scripts
* var client_defaultResJson
* var client_defaultThmJson
#### Web更新发布：
* project.json version
* window.web_config_scripts
* window.web_config_defaultResJson
* window.web_config_defaultThmJson