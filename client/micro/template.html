<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
    <div style="margin: auto;width: 100%;height: 100%;" class="egret-player"
         data-entry-class="Main"
         data-orientation="portrait"
         data-scale-mode="fixedWidth"
         data-frame-rate="50"
         data-content-width="720"
         data-content-height="1280"
         data-show-paint-rect="false"
         data-multi-fingered="2"
         data-show-fps="false" data-show-log="false"
         data-show-fps-style="x:0,y:0,size:12,textColor:0xffffff,bgAlpha:0.2">
    </div>
<script>
//连正式服还是测试服，需要由版本号对比决定
window.web_config_serverVersion = '';//因为入口html都是从服务器上实时加载的，所以这里配置服务器上的客户端版本号（安装包用，代码版本在project.json里配置）
window.web_config_isSafe = true;//安全开关,提审时候用,仅ios包有效
//正式,当前最新的。注释用于自动替换，勿删
//----auto-web_config-start----
window.web_config_scripts = [];
window.web_config_defaultResJson = '';
window.web_config_defaultThmJson = '';
//----auto-web_config-end----
//
(function() {
//测试/提审,填写的需要和安装包里的一样。注释用于自动替换，勿删
//----auto-client_config-start----
var client_scripts = [];
var client_defaultResJson = '';
var client_defaultThmJson = '';
//----auto-client_config-end----
    //当前地址目录
    window.web_config_resUrl = getCurrentUrlDirectory();
    //只有web版有url参数赋值
    var queryMap = getQueryMap(window.location.search);
    if(queryMap && queryMap['client_version'])
    {
        window.web_config_clientVersion = queryMap['client_version'];
        //客户端版本比服务器版本号新
        if(CompareVersion(window.web_config_clientVersion, window.web_config_serverVersion))
        {
            window.web_config_resUrl = '';
            window.web_config_scripts = client_scripts;
            window.web_config_defaultResJson = client_defaultResJson;
            window.web_config_defaultThmJson = client_defaultThmJson;
        }
    }
    else
    {
        alert('client_version不能为空');
    }
    //
    function CompareVersion(a, b)
	{
        if(a)
        {
            a = a.split('.');
        }
        if(b)
        {
            b = b.split('.');
        }
		if (a == null || a.length <= 0)
        {
			return false;
		}
        if (b == null || b.length <= 0)
        {
			return true;
		}
        var a0 = parseInt(a[0]);
        var a1 = parseInt(a[1]);
        var a2 = parseInt(a[2]);
        var b0 = parseInt(b[0]);
        var b1 = parseInt(b[1]);
        var b2 = parseInt(b[2]);
		if (a0 > b0)
        {
			return true;
		}
        else if (a0 == b0)
        {
			if (a1 > b1)
            {
				return true;
			}
            else if (a1 == b1)
            {
				if (a2 > b2)
                {
					return true;
				}
			}
		}
		return false;
	}
    function getCurrentUrlDirectory()
    {
        var url = window.location.href;
        var index = url.indexOf('?');
        if(index >= 0)
        {
            url = url.substr(0, index);
        }
        index = url.lastIndexOf('/');
        if (index >= 0)
        {
            url = url.substr(0, index + 1);
        }
        return url;
    }
    function getQueryMap(url)
    {
        var map = {};
        var index = url.indexOf("?");
        if (index >= 0)
        {
            url = url.substring(index+1);
            var strs = url.split("&");
            for(var i = 0; i < strs.length; i++)
            {
                var item = strs[i].split("=");
                map[item[0]] = item[1] == null ? '' : item[1];
            }
        }
        return map;
    }
    var loadScript = function (list, callback) {
        var loaded = 0;
        var loadNext = function () {
            loadSingleScript(list[loaded], function () {
                loaded++;
                if (loaded >= list.length) {
                    callback();
                }
                else {
                    loadNext();
                }
            })
        };
        loadNext();
    };
    var loadSingleScript = function (src, callback) {
        var s = document.createElement('script');
        s.async = false;
        s.src = (src.indexOf('http://') === 0 || src.indexOf('https://') === 0) ? src : window.web_config_resUrl + src;
        s.addEventListener('load', function () {
            s.parentNode.removeChild(s);
            s.removeEventListener('load', arguments.callee, false);
            callback();
        }, false);
        document.body.appendChild(s);
    };
    loadScript(window.web_config_scripts, function () {
        /**
         * {
         * "renderMode":, //引擎渲染模式，"canvas" 或者 "webgl"
         * "audioType": 0 //使用的音频类型，0:默认，2:web audio，3:audio
         * "antialias": //WebGL模式下是否开启抗锯齿，true:开启，false:关闭，默认为false
         * "retina": //是否基于devicePixelRatio缩放画布
         * }
         **/
        egret.runEgret({ renderMode: "webgl", audioType: 0 });
    });
})();
</script>
</body>
</html>